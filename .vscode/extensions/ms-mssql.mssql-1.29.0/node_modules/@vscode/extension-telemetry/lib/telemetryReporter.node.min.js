var xR=Object.create;var cu=Object.defineProperty,qR=Object.defineProperties,jR=Object.getOwnPropertyDescriptor,FR=Object.getOwnPropertyDescriptors,kR=Object.getOwnPropertyNames,vE=Object.getOwnPropertySymbols,UR=Object.getPrototypeOf,_E=Object.prototype.hasOwnProperty,HR=Object.prototype.propertyIsEnumerable;var hE=(e,t,r)=>t in e?cu(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Ti=(e,t)=>{for(var r in t||(t={}))_E.call(t,r)&&hE(e,r,t[r]);if(vE)for(var r of vE(t))HR.call(t,r)&&hE(e,r,t[r]);return e},gE=(e,t)=>qR(e,FR(t));var _=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),BR=(e,t)=>{for(var r in t)cu(e,r,{get:t[r],enumerable:!0})},mE=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of kR(t))!_E.call(e,i)&&i!==r&&cu(e,i,{get:()=>t[i],enumerable:!(n=jR(t,i))||n.enumerable});return e};var Do=(e,t,r)=>(r=e!=null?xR(UR(e)):{},mE(t||!e||!e.__esModule?cu(r,"default",{value:e,enumerable:!0}):r,e)),GR=e=>mE(cu({},"__esModule",{value:!0}),e);var yE=_((Hc,EE)=>{(function(e,t){typeof Hc=="object"&&typeof EE<"u"?t(Hc):typeof define=="function"&&define.amd?define(["exports"],t):(e=typeof globalThis<"u"?globalThis:e||self,t((e.Microsoft=e.Microsoft||{},e.Microsoft.ApplicationInsights=e.Microsoft.ApplicationInsights||{},e.Microsoft.ApplicationInsights.Shims={})))})(Hc,function(e){"use strict";var t="function",r="object",n="undefined",i="prototype",a="hasOwnProperty",s="default",u=Object,f=u[i],d=u.assign,h=u.create,E=u.defineProperty,S=f[a],C=null;function q(m){return m===void 0&&(m=!0),(!C||!m)&&(typeof globalThis!==n&&globalThis&&(C=globalThis),typeof self!==n&&self&&(C=self),typeof window!==n&&window&&(C=window),typeof global!==n&&global&&(C=global)),C}function se(m){throw new TypeError(m)}function Ce(m){var A=h;if(A)return A(m);if(m==null)return{};var O=typeof m;O!==r&&O!==t&&se("Object prototype may only be an Object:"+m);function N(){}return N[i]=m,new N}var Fe=(q()||{}).Symbol,et=(q()||{}).Reflect,bt=!!et,me="decorate",$t="metadata",Ot="getOwnPropertySymbols",Gt="iterator",Xt=function(m){for(var A,O=1,N=arguments.length;O<N;O++){A=arguments[O];for(var W in A)f[a].call(A,W)&&(m[W]=A[W])}return m},Pt=d||Xt,Ct=function(m,A){return Ct=u.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,N){O.__proto__=N}||function(O,N){for(var W in N)N[a](W)&&(O[W]=N[W])},Ct(m,A)};function jr(m,A){typeof A!==t&&A!==null&&se("Class extends value "+String(A)+" is not a constructor or null"),Ct(m,A);function O(){this.constructor=m}m[i]=A===null?Ce(A):(O[i]=A[i],new O)}function wr(m,A){var O={};for(var N in m)S.call(m,N)&&A.indexOf(N)<0&&(O[N]=m[N]);if(m!=null&&typeof u[Ot]===t)for(var W=0,fe=u[Ot](m);W<fe.length;W++)A.indexOf(fe[W])<0&&f.propertyIsEnumerable.call(m,fe[W])&&(O[fe[W]]=m[fe[W]]);return O}function Fr(m,A,O,N){var W=arguments.length,fe=W<3?A:N===null?N=u.getOwnPropertyDescriptor(A,O):N,at;if(bt&&typeof et[me]===t)fe=et[me](m,A,O,N);else for(var Tt=m.length-1;Tt>=0;Tt--)(at=m[Tt])&&(fe=(W<3?at(fe):W>3?at(A,O,fe):at(A,O))||fe);return W>3&&fe&&E(A,O,fe),fe}function Dr(m,A){return function(O,N){A(O,N,m)}}function un(m,A){if(bt&&et[$t]===t)return et[$t](m,A)}function kr(m,A){for(var O in m)O!==s&&!S.call(A,O)&&_r(A,m,O)}function _r(m,A,O,N){N===void 0&&(N=O),h?E(m,N,{enumerable:!0,get:function(){return A[O]}}):m[N]=A[O]}function ur(m){var A=typeof Fe===t&&Fe[Gt],O=A&&m[A],N=0;if(O)return O.call(m);if(m&&typeof m.length=="number")return{next:function(){return m&&N>=m.length&&(m=void 0),{value:m&&m[N++],done:!m}}};se(A?"Object is not iterable.":"Symbol.iterator is not defined.")}function Zt(m,A){var O=typeof Fe===t&&m[Fe[Gt]];if(!O)return m;var N=O.call(m),W,fe=[],at;try{for(;(A===void 0||A-- >0)&&!(W=N.next()).done;)fe.push(W.value)}catch(Tt){at={error:Tt}}finally{try{W&&!W.done&&(O=N.return)&&O.call(N)}finally{if(at)throw at.error}}return fe}function Ur(){for(var m=arguments,A=0,O=0,N=m.length;O<N;O++)A+=m[O].length;for(var W=Array(A),fe=0,O=0;O<N;O++)for(var at=m[O],Tt=0,zr=at.length;Tt<zr;Tt++,fe++)W[fe]=at[Tt];return W}function ee(m,A){for(var O=0,N=A.length,W=m.length;O<N;O++,W++)m[W]=A[O];return m}function ge(m,A){return E?E(m,"raw",{value:A}):m.raw=A,m}function Ee(m){if(m&&m.__esModule)return m;var A={};if(m!=null)for(var O in m)O!==s&&Object.prototype.hasOwnProperty.call(m,O)&&_r(A,m,O);return h?E(A,s,{enumerable:!0,value:m}):A[s]=m,A}function Qe(m){return m&&m.__esModule?m:{strDefault:m}}function Xe(){var m=q()||{};(function(A,O,N,W){A.__assign||(A.__assign=d||O),A.__extends||(A.__extends=N),A.__createBinding||(A.__createBinding=W)})(m,Pt,jr,_r),__assign||(__assign=m.__assign),__extends||(__extends=m.__extends),__createBinding||(__createBinding=m.__createBinding)}e.ObjAssign=d,e.ObjClass=u,e.ObjCreate=h,e.ObjDefineProperty=E,e.ObjHasOwnProperty=S,e.ObjProto=f,e.__assignFn=Pt,e.__createBindingFn=_r,e.__decorateFn=Fr,e.__exportStarFn=kr,e.__exposeGlobalTsLib=Xe,e.__extendsFn=jr,e.__importDefaultFn=Qe,e.__importStarFn=Ee,e.__makeTemplateObjectFn=ge,e.__metadataFn=un,e.__paramFn=Dr,e.__readFn=Zt,e.__restFn=wr,e.__spreadArrayFn=ee,e.__spreadArraysFn=Ur,e.__valuesFn=ur,e.getGlobal=q,e.objCreateFn=Ce,e.strDefault=s,e.strShimFunction=t,e.strShimHasOwnProperty=a,e.strShimObject=r,e.strShimPrototype=i,e.strShimUndefined=n,e.throwTypeError=se,function(m,A,O){var N=Object.defineProperty;if(N)try{return N(m,A,O)}catch{}return O&&typeof O.value!==void 0&&(m[A]=O.value),m}(e,"__esModule",{value:!0})})});var SE=_((Bc,TE)=>{(function(e,t){typeof Bc=="object"&&typeof TE<"u"?t(Bc):typeof define=="function"&&define.amd?define(["exports"],t):(e=typeof globalThis<"u"?globalThis:e||self,t((e.Microsoft=e.Microsoft||{},e.Microsoft.ApplicationInsights=e.Microsoft.ApplicationInsights||{})))})(Bc,function(e){"use strict";var t=100,r="function",n="object",i="undefined",a="prototype",s="hasOwnProperty",u=Object,f=u[a],d=u.assign,h=u.create,E=u.defineProperty,S=f[s],C=null;function q(o){return o===void 0&&(o=!0),(!C||!o)&&(typeof globalThis!==i&&globalThis&&(C=globalThis),typeof self!==i&&self&&(C=self),typeof window!==i&&window&&(C=window),typeof global!==i&&global&&(C=global)),C}function se(o){throw new TypeError(o)}function Ce(o){var c=h;if(c)return c(o);if(o==null)return{};var l=typeof o;l!==n&&l!==r&&se("Object prototype may only be an Object:"+o);function p(){}return p[a]=o,new p}(q()||{}).Symbol,(q()||{}).Reflect;var Fe=function(o,c){return Fe=u.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,p){l.__proto__=p}||function(l,p){for(var v in p)p[s](v)&&(l[v]=p[v])},Fe(o,c)};function et(o,c){typeof c!==r&&c!==null&&se("Class extends value "+String(c)+" is not a constructor or null"),Fe(o,c);function l(){this.constructor=o}o[a]=c===null?Ce(c):(l[a]=c[a],new l)}function bt(o,c){for(var l=0,p=c.length,v=o.length;l<p;l++,v++)o[v]=c[l];return o}var me="",$t="processTelemetry",Ot="priority",Gt="setNextPlugin",Xt="isInitialized",Pt="teardown",Ct="core",jr="update",wr="disabled",Fr="_doTeardown",Dr="processNext",un="resume",kr="pause",_r="NotificationListener",ur="add"+_r,Zt="remove"+_r,Ur="eventsSent",ee="eventsDiscarded",ge="eventsSendRequest",Ee="perfEvent",Qe="toISOString",Xe="endsWith",m="startsWith",A="indexOf",O="map",N="reduce",W="trim",fe="toString",at="__proto__",Tt="constructor",zr=E,Bi=u.freeze,Xn=u.seal,So=u.keys,Gi=String[a],en=Gi[W],hn=Gi[Xe],Vi=Gi[m],Wn=Date[a],Pa=Wn[Qe],Ca=Array.isArray,w=f[fe],x=S[fe],ne=x.call(u),Y=/-([a-z])/g,Be=/([^\w\d_$])/g,pe=/^(\d+[\w\d_$])/,ve=Object.getPrototypeOf;function be(o){if(o){if(ve)return ve(o);var c=o[at]||o[a]||o[Tt];if(c)return c}return null}function ot(o){return w.call(o)}function Ze(o,c){return typeof o===c}function te(o){return o===void 0||typeof o===i}function De(o){return!te(o)}function B(o){return o===null||te(o)}function Te(o){return!B(o)}function de(o,c){return!!(o&&S.call(o,c))}function _t(o){return!!(o&&typeof o===n)}function Re(o){return!!(o&&typeof o===r)}function gr(o){var c=o;return c&&X(c)&&(c=c.replace(Y,function(l,p){return p.toUpperCase()}),c=c.replace(Be,"_"),c=c.replace(pe,function(l,p){return"_"+p})),c}function br(o,c){if(o)for(var l in o)S.call(o,l)&&c.call(o,l,o[l])}function Sn(o,c){var l=!1;return o&&c&&!(l=o===c)&&(l=hn?o[Xe](c):Yn(o,c)),l}function Yn(o,c){var l=!1,p=c?c.length:0,v=o?o.length:0;if(p&&v&&v>=p&&!(l=o===c)){for(var g=v-1,y=p-1;y>=0;y--){if(o[g]!=c[y])return!1;g--}l=!0}return l}function zi(o,c){var l=!1;return o&&c&&!(l=o===c)&&(l=Vi?o[m](c):ie(o,c)),l}function ie(o,c){var l=!1,p=c?c.length:0;if(o&&p&&o.length>=p&&!(l=o===c)){for(var v=0;v<p;v++)if(o[v]!==c[v])return!1;l=!0}return l}function oe(o,c){return o&&c?o.indexOf(c)!==-1:!1}function K(o){return!!(o&&w.call(o)==="[object Date]")}var D=Ca||_e;function _e(o){return!!(o&&w.call(o)==="[object Array]")}function le(o){return!!(o&&w.call(o)==="[object Error]")}function X(o){return typeof o=="string"}function ke(o){return typeof o=="number"}function Ge(o){return typeof o=="boolean"}function It(o){return typeof o=="symbol"}function mr(o){var c=!1;if(o&&typeof o=="object"){var l=ve?ve(o):be(o);l?(l[Tt]&&S.call(l,Tt)&&(l=l[Tt]),c=typeof l===r&&x.call(l)===ne):c=!0}return c}function Or(o){if(o)return Pa?o[Qe]():Dt(o)}function Dt(o){if(o&&o.getUTCFullYear){var c=function(l){var p=String(l);return p.length===1&&(p="0"+p),p};return o.getUTCFullYear()+"-"+c(o.getUTCMonth()+1)+"-"+c(o.getUTCDate())+"T"+c(o.getUTCHours())+":"+c(o.getUTCMinutes())+":"+c(o.getUTCSeconds())+"."+String((o.getUTCMilliseconds()/1e3).toFixed(3)).slice(2,5)+"Z"}}function Pe(o,c,l){var p=o.length;try{for(var v=0;v<p&&!(v in o&&c.call(l||o,o[v],v,o)===-1);v++);}catch{}}function lt(o,c,l){if(o){if(o[A])return o[A](c,l);var p=o.length,v=l||0;try{for(var g=Math.max(v>=0?v:p-Math.abs(v),0);g<p;g++)if(g in o&&o[g]===c)return g}catch{}}return-1}function qe(o,c,l){var p;if(o){if(o[O])return o[O](c,l);var v=o.length,g=l||o;p=new Array(v);try{for(var y=0;y<v;y++)y in o&&(p[y]=c.call(g,o[y],o))}catch{}}return p}function Ue(o,c,l){var p;if(o){if(o[N])return o[N](c,l);var v=o.length,g=0;if(arguments.length>=3)p=arguments[2];else{for(;g<v&&!(g in o);)g++;p=o[g++]}for(;g<v;)g in o&&(p=c(p,o[g],g,o)),g++}return p}function rt(o){return o&&(o=en&&o[W]?o[W]():o.replace?o.replace(/^\s+|\s+$/g,""):o),o}var xt=!{toString:null}.propertyIsEnumerable("toString"),Ve=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"];function ft(o){var c=typeof o;if(c!==r&&(c!==n||o===null)&&se("objKeys called on non-object"),!xt&&So)return So(o);var l=[];for(var p in o)o&&S.call(o,p)&&l.push(p);if(xt)for(var v=Ve.length,g=0;g<v;g++)o&&S.call(o,Ve[g])&&l.push(Ve[g]);return l}function Mt(o,c,l,p){if(zr)try{var v={enumerable:!0,configurable:!0};return l&&(v.get=l),p&&(v.set=p),zr(o,c,v),!0}catch{}return!1}function mt(o){return o}function gt(o){return Bi&&br(o,function(c,l){(D(l)||_t(l))&&Bi(l)}),Lt(o)}var Lt=Bi||mt,Er=Xn||mt;function Le(){var o=Date;return o.now?o.now():new o().getTime()}function cr(o){return le(o)?o.name:me}function tt(o,c,l,p,v){var g=l;return o&&(g=o[c],g!==l&&(!v||v(g))&&(!p||p(l))&&(g=l,o[c]=g)),g}function lr(o,c,l){var p;return o?(p=o[c],!p&&B(p)&&(p=te(l)?{}:l,o[c]=p)):p=te(l)?{}:l,p}function qt(o){return!o}function Ne(o){return!!o}function Et(o){throw new Error(o)}function Qn(o,c){var l=null,p=null;return Re(o)?l=o:p=o,function(){var v=arguments;if(l&&(p=l()),p)return p[c].apply(p,v)}}function Hr(o,c,l){if(o&&c&&_t(o)&&_t(c)){var p=function(g){if(X(g)){var y=c[g];Re(y)?(!l||l(g,!0,c,o))&&(o[g]=Qn(c,g)):(!l||l(g,!1,c,o))&&(de(o,g)&&delete o[g],Mt(o,g,function(){return c[g]},function(P){c[g]=P})||(o[g]=y))}};for(var v in c)p(v)}return o}function Kr(o,c,l,p,v){o&&c&&l&&(v!==!1||te(o[c]))&&(o[c]=Qn(l,p))}function pi(o,c,l,p){return o&&c&&_t(o)&&D(l)&&Pe(l,function(v){X(v)&&Kr(o,v,c,v,p)}),o}function Zn(o){return function(){function c(){var l=this;o&&br(o,function(p,v){l[p]=v})}return c}()}function Ra(o){return o&&d&&(o=u(d({},o))),o}function fr(o,c,l,p,v,g){var y=arguments,P=y[0]||{},b=y.length,F=!1,R=1;for(b>0&&Ge(P)&&(F=P,P=y[R]||{},R++),_t(P)||(P={});R<b;R++){var H=y[R],Q=D(H),L=_t(H);for(var ae in H){var Ae=Q&&ae in H||L&&S.call(H,ae);if(!!Ae){var Ie=H[ae],nt=void 0;if(F&&Ie&&((nt=D(Ie))||mr(Ie))){var Je=P[ae];nt?D(Je)||(Je=[]):mr(Je)||(Je={}),Ie=fr(F,Je,Ie)}Ie!==void 0&&(P[ae]=Ie)}}}return P}function An(o){var c={};return br(o,function(l,p){c[l]=p,c[p]=l}),gt(c)}function vi(o){var c={};return br(o,function(l,p){c[l]=l,c[p]=l}),gt(c)}function In(o){var c={};return br(o,function(l,p){c[l]=p[1],c[p[0]]=p[1]}),gt(c)}var Un=An({Unknown:0,NonRetryableStatus:1,InvalidEvent:2,SizeLimitExceeded:3,KillSwitch:4,QueueFull:5});var Jn="constructor",cn="prototype",hi="function",_i="_dynInstFuncs",Na="_isDynProxy",bn="_dynClass",wa="_dynCls$",Ki="_dynInstChk",On=Ki,_n="_dfOpts",Da="_unknown_",T="__proto__",j="_dyn"+T,k="_dynInstProto",$="useBaseInst",ue="setInstFuncs",He=Object,we=He.getPrototypeOf,Ye=He.getOwnPropertyNames,je=0;function ce(o,c){return o&&He[cn].hasOwnProperty.call(o,c)}function I(o){return o&&(o===He[cn]||o===Array[cn])}function M(o){return I(o)||o===Function[cn]}function U(o){var c;if(o){if(we)return we(o);var l=o[T]||o[cn]||(o[Jn]?o[Jn][cn]:null);c=o[j]||l,ce(o,j)||(delete o[k],c=o[j]=o[k]||o[j],o[k]=l)}return c}function Z(o,c){var l=[];if(Ye)l=Ye(o);else for(var p in o)typeof p=="string"&&ce(o,p)&&l.push(p);if(l&&l.length>0)for(var v=0;v<l.length;v++)c(l[v])}function ye(o,c,l){return c!==Jn&&typeof o[c]===hi&&(l||ce(o,c))}function Oe(o){throw new TypeError("DynamicProto: "+o)}function Wt(o){var c={};return Z(o,function(l){!c[l]&&ye(o,l,!1)&&(c[l]=o[l])}),c}function dr(o,c){for(var l=o.length-1;l>=0;l--)if(o[l]===c)return!0;return!1}function $r(o,c,l,p){function v(b,F,R){var H=F[R];if(H[Na]&&p){var Q=b[_i]||{};Q[On]!==!1&&(H=(Q[F[bn]]||{})[R]||H)}return function(){return H.apply(b,arguments)}}var g={};Z(l,function(b){g[b]=v(c,l,b)});for(var y=U(o),P=[];y&&!M(y)&&!dr(P,y);)Z(y,function(b){!g[b]&&ye(y,b,!we)&&(g[b]=v(c,y,b))}),P.push(y),y=U(y);return g}function Pn(o,c,l,p){var v=null;if(o&&ce(l,bn)){var g=o[_i]||{};if(v=(g[l[bn]]||{})[c],v||Oe("Missing ["+c+"] "+hi),!v[Ki]&&g[On]!==!1){for(var y=!ce(o,c),P=U(o),b=[];y&&P&&!M(P)&&!dr(b,P);){var F=P[c];if(F){y=F===p;break}b.push(P),P=U(P)}try{y&&(o[c]=v),v[Ki]=1}catch{g[On]=!1}}}return v}function Xs(o,c,l){var p=c[o];return p===l&&(p=U(c)[o]),typeof p!==hi&&Oe("["+o+"] is not a "+hi),p}function Pd(o,c,l,p,v){function g(b,F){var R=function(){var H=Pn(this,F,b,R)||Xs(F,b,R);return H.apply(this,arguments)};return R[Na]=1,R}if(!I(o)){var y=l[_i]=l[_i]||{},P=y[c]=y[c]||{};y[On]!==!1&&(y[On]=!!v),Z(l,function(b){ye(l,b,!1)&&l[b]!==p[b]&&(P[b]=l[b],delete l[b],(!ce(o,b)||o[b]&&!o[b][Na])&&(o[b]=g(o,b)))})}}function tC(o,c){if(we){for(var l=[],p=U(c);p&&!M(p)&&!dr(l,p);){if(p===o)return!0;l.push(p),p=U(p)}return!1}return!0}function Cd(o,c){return ce(o,cn)?o.name||c||Da:((o||{})[Jn]||{}).name||c||Da}function gi(o,c,l,p){ce(o,cn)||Oe("theClass is an invalid class definition.");var v=o[cn];tC(v,c)||Oe("["+Cd(o)+"] is not in class hierarchy of ["+Cd(c)+"]");var g=null;ce(v,bn)?g=v[bn]:(g=wa+Cd(o,"_")+"$"+je,je++,v[bn]=g);var y=gi[_n],P=!!y[$];P&&p&&p[$]!==void 0&&(P=!!p[$]);var b=Wt(c),F=$r(v,c,b,P);l(c,F);var R=!!we&&!!y[ue];R&&p&&(R=!!p[ue]),Pd(v,g,c,b,R!==!1)}var rC={setInstFuncs:!0,useBaseInst:!0};gi[_n]=rC;var Rg="window",nC="document",iC="documentMode",aC="navigator",oC="history",sC="location",uC="console",cC="performance",Ng="JSON",lC="crypto",fC="msCrypto",dC="ReactNative",Rd="msie",Nd="trident/",wg="XMLHttpRequest",wd=null,Dd=null,Dg=!1,Ao=null,Md=null;function Mg(o,c){var l=!1;if(o){try{if(l=c in o,!l){var p=o[a];p&&(l=c in p)}}catch{}if(!l)try{var v=new o;l=!te(v[c])}catch{}}return l}function pC(o){Dg=o}function Pr(o){var c=q();return c&&c[o]?c[o]:o===Rg&&Ld()?window:null}function Ld(){return Boolean(typeof window===n&&window)}function xd(){return Ld()?window:Pr(Rg)}function Lg(){return Boolean(typeof document===n&&document)}function $i(){return Lg()?document:Pr(nC)}function qd(){return Boolean(typeof navigator===n&&navigator)}function Ma(){return qd()?navigator:Pr(aC)}function xg(){return Boolean(typeof history===n&&history)}function vC(){return xg()?history:Pr(oC)}function qg(o){if(o&&Dg){var c=Pr("__mockLocation");if(c)return c}return typeof location===n&&location?location:Pr(sC)}function jg(){return typeof console!==i?console:Pr(uC)}function jd(){return Pr(cC)}function yc(){return Boolean(typeof JSON===n&&JSON||Pr(Ng)!==null)}function Fd(){return yc()?JSON||Pr(Ng):null}function Fg(){return Pr(lC)}function kg(){return Pr(fC)}function hC(){var o=Ma();return o&&o.product?o.product===dC:!1}function Ws(){var o=Ma();if(o&&(o.userAgent!==Dd||wd===null)){Dd=o.userAgent;var c=(Dd||me).toLowerCase();wd=oe(c,Rd)||oe(c,Nd)}return wd}function _C(o){if(o===void 0&&(o=null),!o){var c=Ma()||{};o=c?(c.userAgent||me).toLowerCase():me}var l=(o||me).toLowerCase();if(oe(l,Rd)){var p=$i()||{};return Math.max(parseInt(l.split(Rd)[1]),p[iC]||0)}else if(oe(l,Nd)){var v=parseInt(l.split(Nd)[1]);if(v)return v+4}return null}function Xi(o){var c=Object[a].toString.call(o),l=me;return c==="[object Error]"?l="{ stack: '"+o.stack+"', message: '"+o.message+"', name: '"+o.name+"'":yc()&&(l=Fd().stringify(o)),c+l}function gC(o){if(!o||!X(o)){var c=Ma()||{};o=c?(c.userAgent||me).toLowerCase():me}var l=(o||me).toLowerCase();return l.indexOf("safari")>=0}function mC(){return Md===null&&(Md=qd()&&Boolean(Ma().sendBeacon)),Md}function EC(o){var c=!1;try{c=!!Pr("fetch");var l=Pr("Request");c&&o&&l&&(c=Mg(l,"keepalive"))}catch{}return c}function yC(){return Ao===null&&(Ao=typeof XDomainRequest!==i,Ao&&Ug()&&(Ao=Ao&&!Mg(Pr(wg),"withCredentials"))),Ao}function Ug(){var o=!1;try{var c=Pr(wg);o=!!c}catch{}return o}function Hg(o,c){if(o)for(var l=0;l<o.length;l++){var p=o[l];if(p.name&&p.name===c)return p}return{}}function Bg(o){var c=$i();return c&&o?Hg(c.querySelectorAll("meta"),o).content:null}function Gg(o){var c,l=jd();if(l){var p=l.getEntriesByType("navigation")||[];c=Hg((p.length>0?p[0]:{}).serverTiming,o).description}return c}var kd=["eventsSent","eventsDiscarded","eventsSendRequest","perfEvent"],Tc=null,Sc;function TC(o,c){return function(){var l=arguments,p=Ud(c);if(p){var v=p.listener;v&&v[o]&&v[o].apply(v,l)}}}function SC(){var o=Pr("Microsoft");return o&&(Tc=o.ApplicationInsights),Tc}function Ud(o){var c=Tc;return!c&&o.disableDbgExt!==!0&&(c=Tc||SC()),c?c.ChromeDbgExt:null}function Vg(o){if(!Sc){Sc={};for(var c=0;c<kd.length;c++)Sc[kd[c]]=TC(kd[c],o)}return Sc}var AC="AI (Internal): ",IC="AI: ",bC="AITR_",OC="errorToConsole",PC="warnToConsole";function zg(o){return o?'"'+o.replace(/\"/g,me)+'"':me}function Kg(o,c){var l=jg();if(l){var p="log";l[o]&&(p=o),Re(l[p])&&l[p](c)}}var Ac=function(){function o(c,l,p,v){p===void 0&&(p=!1);var g=this;g.messageId=c,g.message=(p?IC:AC)+c;var y=me;yc()&&(y=Fd().stringify(v));var P=(l?" message:"+zg(l):me)+(v?" props:"+zg(y):me);g.message+=P}return o.dataType="MessageData",o}();function $g(o,c){return(o||{}).logger||new Io(c)}var Io=function(){function o(c){this.identifier="DiagnosticLogger",this.queue=[];var l=0,p={};gi(o,this,function(v){B(c)&&(c={}),v.consoleLoggingLevel=function(){return g("loggingLevelConsole",0)},v.telemetryLoggingLevel=function(){return g("loggingLevelTelemetry",1)},v.maxInternalMessageLimit=function(){return g("maxMessageLimit",25)},v.enableDebugExceptions=function(){return g("enableDebugExceptions",!1)},v.throwInternal=function(b,F,R,H,Q){Q===void 0&&(Q=!1);var L=new Ac(F,R,Q,H);if(v.enableDebugExceptions())throw Xi(L);var ae=b===1?OC:PC;if(te(L.message))P("throw"+(b===1?"Critical":"Warning"),L);else{var Ae=v.consoleLoggingLevel();if(Q){var Ie=+L.messageId;!p[Ie]&&Ae>=b&&(v[ae](L.message),p[Ie]=!0)}else Ae>=b&&v[ae](L.message);v.logInternalMessage(b,L)}},v.warnToConsole=function(b){Kg("warn",b),P("warning",b)},v.errorToConsole=function(b){Kg("error",b),P("error",b)},v.resetInternalMessageCount=function(){l=0,p={}},v.logInternalMessage=function(b,F){if(!y()){var R=!0,H=bC+F.messageId;if(p[H]?R=!1:p[H]=!0,R&&(b<=v.telemetryLoggingLevel()&&(v.queue.push(F),l++,P(b===1?"error":"warn",F)),l===v.maxInternalMessageLimit())){var Q="Internal events throttle limit per PageView reached for this app.",L=new Ac(23,Q,!1);v.queue.push(L),b===1?v.errorToConsole(Q):v.warnToConsole(Q)}}};function g(b,F){var R=c[b];return B(R)?F:R}function y(){return l>=v.maxInternalMessageLimit()}function P(b,F){var R=Ud(c);R&&R.diagLog&&R.diagLog(b,F)}})}return o}();function Xg(o){return o||new Io}function La(o,c,l,p,v,g){g===void 0&&(g=!1),(o||new Io).throwInternal(c,l,p,v,g)}function Wg(o,c){Xg(o).warnToConsole(c)}function CC(o,c,l){Xg(o).logInternalMessage(c,l)}var bo="ctx",Yg=null,Ys=function(){function o(c,l,p){var v=this,g=!1;if(v.start=Le(),v.name=c,v.isAsync=p,v.isChildEvt=function(){return!1},Re(l)){var y;g=Mt(v,"payload",function(){return!y&&Re(l)&&(y=l(),l=null),y})}v.getCtx=function(P){return P?P===o.ParentContextKey||P===o.ChildrenContextKey?v[P]:(v[bo]||{})[P]:null},v.setCtx=function(P,b){if(P)if(P===o.ParentContextKey)v[P]||(v.isChildEvt=function(){return!0}),v[P]=b;else if(P===o.ChildrenContextKey)v[P]=b;else{var F=v[bo]=v[bo]||{};F[P]=b}},v.complete=function(){var P=0,b=v.getCtx(o.ChildrenContextKey);if(D(b))for(var F=0;F<b.length;F++){var R=b[F];R&&(P+=R.time)}v.time=Le()-v.start,v.exTime=v.time-P,v.complete=function(){},!g&&Re(l)&&(v.payload=l())}}return o.ParentContextKey="parent",o.ChildrenContextKey="childEvts",o}(),Qg=function(){function o(c){this.ctx={},gi(o,this,function(l){l.create=function(p,v,g){return new Ys(p,v,g)},l.fire=function(p){p&&(p.complete(),c&&Re(c.perfEvent)&&c.perfEvent(p))},l.setCtx=function(p,v){if(p){var g=l[bo]=l[bo]||{};g[p]=v}},l.getCtx=function(p){return(l[bo]||{})[p]}})}return o}(),Hd="CoreUtils.doPerf";function Bd(o,c,l,p,v){if(o){var g=o;if(Re(g.getPerfMgr)&&(g=g.getPerfMgr()),g){var y=void 0,P=g.getCtx(Hd);try{if(y=g.create(c(),p,v),y){if(P&&y.setCtx&&(y.setCtx(Ys.ParentContextKey,P),P.getCtx&&P.setCtx)){var b=P.getCtx(Ys.ChildrenContextKey);b||(b=[],P.setCtx(Ys.ChildrenContextKey,b)),b.push(y)}return g.setCtx(Hd,y),l(y)}}catch(F){y&&y.setCtx&&y.setCtx("exception",F)}finally{y&&g.fire(y),g.setCtx(Hd,P)}}}return l()}function RC(o){Yg=o}function Zg(){return Yg}var Jg=4294967296,Wi=4294967295,em=!1,Qs=123456789,Zs=987654321;function tm(o){o<0&&(o>>>=0),Qs=123456789+o&Wi,Zs=987654321-o&Wi,em=!0}function rm(){try{var o=Le()&2147483647;tm((Math.random()*Jg^o)+o)}catch{}}function Gd(o){return o>0?Math.floor(xa()/Wi*(o+1))>>>0:0}function xa(o){var c=0,l=Fg()||kg();return l&&l.getRandomValues&&(c=l.getRandomValues(new Uint32Array(1))[0]&Wi),c===0&&Ws()&&(em||rm(),c=Vd()&Wi),c===0&&(c=Math.floor(Jg*Math.random()|0)),o||(c>>>=0),c}function nm(o){o?tm(o):rm()}function Vd(o){Zs=36969*(Zs&65535)+(Zs>>16)&Wi,Qs=18e3*(Qs&65535)+(Qs>>16)&Wi;var c=(Zs<<16)+(Qs&65535)>>>0&Wi|0;return o||(c>>>=0),c}function zd(o){o===void 0&&(o=22);for(var c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",l=xa()>>>0,p=0,v=me;v.length<o;)p++,v+=c.charAt(l&63),l>>>=6,p===5&&(l=(xa()<<2&4294967295|l&3)>>>0,p=0);return v}var im=E,am="2.8.4",NC="."+zd(6),wC=0;function DC(o,c,l){if(im)try{return im(o,c,{value:l,enumerable:!1,configurable:!0}),!0}catch{}return!1}function om(o){return o.nodeType===1||o.nodeType===9||!+o.nodeType}function MC(o,c){var l=c[o.id];if(!l){l={};try{om(c)&&(DC(c,o.id,l)||(c[o.id]=l))}catch{}}return l}function Js(o,c){return c===void 0&&(c=!1),gr(o+wC+++(c?"."+am:"")+NC)}function sm(o){var c={id:Js("_aiData-"+(o||"")+"."+am),accept:function(l){return om(l)},get:function(l,p,v,g){var y=l[c.id];return y?y[gr(p)]:(g&&(y=MC(c,l),y[gr(p)]=v),v)},kill:function(l,p){if(l&&l[p])try{delete l[p]}catch{}}};return c}var um="toGMTString",cm="toUTCString",Kd="cookie",$d="expires",Xd="enabled",lm="isCookieUseDisabled",fm="disableCookiesUsage",Yi="_ckMgr",Ic=null,Wd=null,dm=null,eu=$i(),pm={},bc={};function vm(o,c){var l=Oo[Yi]||bc[Yi];return l||(l=Oo[Yi]=Oo(o,c),bc[Yi]=l),l}function Oc(o){return o?o.isEnabled():!0}function LC(o){var c=o.cookieCfg=o.cookieCfg||{};if(tt(c,"domain",o.cookieDomain,Te,B),tt(c,"path",o.cookiePath||"/",null,B),B(c[Xd])){var l=void 0;te(o[lm])||(l=!o[lm]),te(o[fm])||(l=!o[fm]),c[Xd]=l}return c}function xC(o,c){var l;if(o)l=o.getCookieMgr();else if(c){var p=c.cookieCfg;p[Yi]?l=p[Yi]:l=Oo(c)}return l||(l=vm(c,(o||{}).logger)),l}function Oo(o,c){var l=LC(o||bc),p=l.path||"/",v=l.domain,g=l[Xd]!==!1,y={isEnabled:function(){var P=g&&Yd(c),b=bc[Yi];return P&&b&&y!==b&&(P=Oc(b)),P},setEnabled:function(P){g=P!==!1},set:function(P,b,F,R,H){var Q=!1;if(Oc(y)){var L={},ae=rt(b||me),Ae=ae.indexOf(";");if(Ae!==-1&&(ae=rt(b.substring(0,Ae)),L=hm(b.substring(Ae+1))),tt(L,"domain",R||v,Ne,te),!B(F)){var Ie=Ws();if(te(L[$d])){var nt=Le(),Je=nt+F*1e3;if(Je>0){var yr=new Date;yr.setTime(Je),tt(L,$d,_m(yr,Ie?um:cm)||_m(yr,Ie?um:cm)||me,Ne)}}Ie||tt(L,"max-age",me+F,null,te)}var Tr=qg();Tr&&Tr.protocol==="https:"&&(tt(L,"secure",null,null,te),Wd===null&&(Wd=!Em((Ma()||{}).userAgent)),Wd&&tt(L,"SameSite","None",null,te)),tt(L,"path",H||p,null,te);var re=l.setCookie||mm;re(P,gm(ae,L)),Q=!0}return Q},get:function(P){var b=me;return Oc(y)&&(b=(l.getCookie||qC)(P)),b},del:function(P,b){var F=!1;return Oc(y)&&(F=y.purge(P,b)),F},purge:function(P,b){var F,R=!1;if(Yd(c)){var H=(F={},F.path=b||"/",F[$d]="Thu, 01 Jan 1970 00:00:01 GMT",F);Ws()||(H["max-age"]="0");var Q=l.delCookie||mm;Q(P,gm(me,H)),R=!0}return R}};return y[Yi]=y,y}function Yd(o){if(Ic===null){Ic=!1;try{var c=eu||{};Ic=c[Kd]!==void 0}catch(l){La(o,2,68,"Cannot access document.cookie - "+cr(l),{exception:Xi(l)})}}return Ic}function hm(o){var c={};if(o&&o.length){var l=rt(o).split(";");Pe(l,function(p){if(p=rt(p||me),p){var v=p.indexOf("=");v===-1?c[p]=null:c[rt(p.substring(0,v))]=rt(p.substring(v+1))}})}return c}function _m(o,c){return Re(o[c])?o[c]():null}function gm(o,c){var l=o||me;return br(c,function(p,v){l+="; "+p+(B(v)?me:"="+v)}),l}function qC(o){var c=me;if(eu){var l=eu[Kd]||me;dm!==l&&(pm=hm(l),dm=l),c=rt(pm[o]||me)}return c}function mm(o,c){eu&&(eu[Kd]=o+"="+c)}function Em(o){return X(o)?!!(oe(o,"CPU iPhone OS 12")||oe(o,"iPad; CPU OS 12")||oe(o,"Macintosh; Intel Mac OS X 10_14")&&oe(o,"Version/")&&oe(o,"Safari")||oe(o,"Macintosh; Intel Mac OS X 10_14")&&Sn(o,"AppleWebKit/605.1.15 (KHTML, like Gecko)")||oe(o,"Chrome/5")||oe(o,"Chrome/6")||oe(o,"UnrealEngine")&&!oe(o,"Chrome")||oe(o,"UCBrowser/12")||oe(o,"UCBrowser/11")):!1}var ym="on",Tm="attachEvent",Sm="addEventListener",Am="detachEvent",Im="removeEventListener",Pc="events",tu="visibilitychange",Cc="pagehide",bm="pageshow",Om="unload",Pm="beforeunload",Cm=Js("aiEvtPageHide"),Rm=Js("aiEvtPageShow"),jC=/\.[\.]+/g,FC=/[\.]+$/,kC=1,ru=sm("events"),UC=/^([^.]*)(?:\.(.+)|)/;function Nm(o){return o&&o.replace?o.replace(/^\s*\.*|\.*\s*$/g,""):o}function Rc(o,c){if(c){var l="";D(c)?(l="",Pe(c,function(v){v=Nm(v),v&&(v[0]!=="."&&(v="."+v),l+=v)})):l=Nm(c),l&&(l[0]!=="."&&(l="."+l),o=(o||"")+l)}var p=UC.exec(o||"")||[];return{type:p[1],ns:(p[2]||"").replace(jC,".").replace(FC,"").split(".").sort().join(".")}}function HC(o,c,l){var p=[],v=ru.get(o,Pc,{},!1),g=Rc(c,l);return br(v,function(y,P){Pe(P,function(b){(!g.type||g.type===b.evtName.type)&&(!g.ns||g.ns===g.ns)&&p.push({name:b.evtName.type+(b.evtName.ns?"."+b.evtName.ns:""),handler:b.handler})})}),p}function wm(o,c,l){l===void 0&&(l=!0);var p=ru.get(o,Pc,{},l),v=p[c];return v||(v=p[c]=[]),v}function Dm(o,c,l,p){o&&c&&c.type&&(o[Im]?o[Im](c.type,l,p):o[Am]&&o[Am](ym+c.type,l))}function BC(o,c,l,p){var v=!1;return o&&c&&c.type&&l&&(o[Sm]?(o[Sm](c.type,l,p),v=!0):o[Tm]&&(o[Tm](ym+c.type,l),v=!0)),v}function Mm(o,c,l,p){for(var v=c.length;v--;){var g=c[v];g&&(!l.ns||l.ns===g.evtName.ns)&&(!p||p(g))&&(Dm(o,g.evtName,g.handler,g.capture),c.splice(v,1))}}function GC(o,c,l){if(c.type)Mm(o,wm(o,c.type),c,l);else{var p=ru.get(o,Pc,{});br(p,function(v,g){Mm(o,g,c,l)}),ft(p).length===0&&ru.kill(o,Pc)}}function nu(o,c){var l;return c?(D(c)?l=[o].concat(c):l=[o,c],l=Rc("xx",l).ns.split(".")):l=o,l}function iu(o,c,l,p,v){v===void 0&&(v=!1);var g=!1;if(o)try{var y=Rc(c,p);if(g=BC(o,y,l,v),g&&ru.accept(o)){var P={guid:kC++,evtName:y,handler:l,capture:v};wm(o,y.type).push(P)}}catch{}return g}function au(o,c,l,p,v){if(v===void 0&&(v=!1),o)try{var g=Rc(c,p),y=!1;GC(o,g,function(P){return g.ns&&!l||P.handler===l?(y=!0,!0):!1}),y||Dm(o,g,l,v)}catch{}}function Qd(o,c,l,p){return p===void 0&&(p=!1),iu(o,c,l,null,p)}function Zd(o,c,l,p){p===void 0&&(p=!1),au(o,c,l,null,p)}function Jd(o,c,l){var p=!1,v=xd();v&&(p=iu(v,o,c,l),p=iu(v.body,o,c,l)||p);var g=$i();return g&&(p=iu(g,o,c,l)||p),p}function Lm(o,c,l){var p=xd();p&&(au(p,o,c,l),au(p.body,o,c,l));var v=$i();v&&au(v,o,c,l)}function Po(o,c,l,p){var v=!1;return c&&o&&o.length>0&&Pe(o,function(g){g&&(!l||lt(l,g)===-1)&&(v=Jd(g,c,p)||v)}),v}function xm(o,c,l,p){var v=!1;return c&&o&&D(o)&&(v=Po(o,c,l,p),!v&&l&&l.length>0&&(v=Po(o,c,null,p))),v}function Co(o,c,l){o&&D(o)&&Pe(o,function(p){p&&Lm(p,c,l)})}function VC(o,c,l){return xm([Pm,Om,Cc],o,c,l)}function zC(o,c){Co([Pm,Om,Cc],o,c)}function qm(o,c,l){function p(y){var P=$i();o&&P&&P.visibilityState==="hidden"&&o(y)}var v=nu(Cm,l),g=Po([Cc],o,c,v);return(!c||lt(c,tu)===-1)&&(g=Po([tu],p,c,v)||g),!g&&c&&(g=qm(o,null,l)),g}function KC(o,c){var l=nu(Cm,c);Co([Cc],o,l),Co([tu],null,l)}function jm(o,c,l){function p(y){var P=$i();o&&P&&P.visibilityState==="visible"&&o(y)}var v=nu(Rm,l),g=Po([bm],o,c,v);return g=Po([tu],p,c,v)||g,!g&&c&&(g=jm(o,null,l)),g}function $C(o,c){var l=nu(Rm,c);Co([bm],o,l),Co([tu],null,l)}var ou=null,su,XC=i;function Fm(){function o(){return Gd(15)}return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(WC,function(c){var l=o()|0,p=c==="x"?l:l&3|8;return p.toString(16)})}function km(){var o=jd();return o&&o.now?o.now():Le()}function Nc(){for(var o=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],c=me,l,p=0;p<4;p++)l=xa(),c+=o[l&15]+o[l>>4&15]+o[l>>8&15]+o[l>>12&15]+o[l>>16&15]+o[l>>20&15]+o[l>>24&15]+o[l>>28&15];var v=o[8+(xa()&3)|0];return c.substr(0,8)+c.substr(9,4)+"4"+c.substr(13,3)+v+c.substr(16,3)+c.substr(19,12)}var ep={_canUseCookies:void 0,isTypeof:Ze,isUndefined:te,isNullOrUndefined:B,hasOwnProperty:de,isFunction:Re,isObject:_t,isDate:K,isArray:D,isError:le,isString:X,isNumber:ke,isBoolean:Ge,toISOString:Or,arrForEach:Pe,arrIndexOf:lt,arrMap:qe,arrReduce:Ue,strTrim:rt,objCreate:Ce,objKeys:ft,objDefineAccessors:Mt,addEventHandler:Jd,dateNow:Le,isIE:Ws,disableCookies:Um,newGuid:Fm,perfNow:km,newId:zd,randomValue:Gd,random32:xa,mwcRandomSeed:nm,mwcRandom32:Vd,generateW3CId:Nc},WC=/[xy]/g,YC={Attach:Qd,AttachEvent:Qd,Detach:Zd,DetachEvent:Zd};function Ro(o,c){var l=vm(o,c),p=ep._canUseCookies;return ou===null&&(ou=[],su=p,Mt(ep,"_canUseCookies",function(){return su},function(v){su=v,Pe(ou,function(g){g.setEnabled(v)})})),lt(ou,l)===-1&&ou.push(l),Ge(p)&&l.setEnabled(p),Ge(su)&&l.setEnabled(su),l}function Um(){Ro().setEnabled(!1)}function QC(o){return Ro(null,o).isEnabled()}function ZC(o,c){return Ro(null,o).get(c)}function JC(o,c,l,p){Ro(null,o).set(c,l,null,p)}function eR(o,c){return Ro(null,o).del(c)}var tR=/^([\da-f]{2})-([\da-f]{32})-([\da-f]{16})-([\da-f]{2})(-[^\s]*)?$/,tp="00",rp="ff",wc="00000000000000000000000000000000",Dc="0000000000000000",Hm=1;function mi(o,c,l){return o&&o.length===c&&o!==l?!!o.match(/^[\da-f]*$/):!1}function Bm(o,c,l){return mi(o,c)?o:l}function Gm(o){(isNaN(o)||o<0||o>255)&&(o=1);for(var c=o.toString(16);c.length<2;)c="0"+c;return c}function rR(o,c,l,p){return{version:mi(p,2,rp)?p:tp,traceId:ip(o)?o:Nc(),spanId:ap(c)?c:Nc().substr(0,16),traceFlags:l>=0&&l<=255?l:1}}function np(o){if(!o||(D(o)&&(o=o[0]||""),!o||!X(o)||o.length>8192))return null;var c=tR.exec(rt(o));return!c||c[1]===rp||c[2]===wc||c[3]===Dc?null:{version:c[1],traceId:c[2],spanId:c[3],traceFlags:parseInt(c[4],16)}}function ip(o){return mi(o,32,wc)}function ap(o){return mi(o,16,Dc)}function Vm(o){return!(!o||!mi(o.version,2,rp)||!mi(o.traceId,32,wc)||!mi(o.spanId,16,Dc)||!mi(Gm(o.traceFlags),2))}function nR(o){return Vm(o)?(o.traceFlags&Hm)===Hm:!1}function iR(o){if(o){var c=Gm(o.traceFlags);mi(c,2)||(c="01");var l=o.version||tp;return l!=="00"&&l!=="ff"&&(l=tp),"".concat(l,"-").concat(Bm(o.traceId,32,wc),"-").concat(Bm(o.spanId,16,Dc),"-").concat(c)}return""}function aR(){var o="traceparent",c=np(Bg(o));return c||(c=np(Gg(o))),c}var oR="_doUnload",sR=sm("plugin");function qa(o){return sR.get(o,"state",{},!0)}function op(o,c){for(var l=[],p=null,v=o.getNext(),g;v;){var y=v.getPlugin();if(y){p&&Re(p[Gt])&&Re(y[$t])&&p[Gt](y);var P=!1;Re(y[Xt])?P=y[Xt]():(g=qa(y),P=g[Xt]),P||l.push(y),p=y,v=v.getNext()}}Pe(l,function(b){var F=o.core();b.initialize(o.getCfg(),F,c,o.getNext()),g=qa(b),!b[Ct]&&!g[Ct]&&(g[Ct]=F),g[Xt]=!0,delete g[Pt]})}function Mc(o){return o.sort(function(c,l){var p=0;if(l){var v=Re(l[$t]);Re(c[$t])?p=v?c[Ot]-l[Ot]:1:v&&(p=-1)}else p=c?1:-1;return p})}function uR(o,c,l,p){var v=0;function g(){for(;v<o.length;){var y=o[v++];if(y){var P=y[oR]||y[Fr];if(Re(P)&&P.call(y,c,l,g)===!0)return!0}}}return g()}function cR(o){var c={};return{getName:function(){return c.name},setName:function(l){o&&o.setName(l),c.name=l},getTraceId:function(){return c.traceId},setTraceId:function(l){o&&o.setTraceId(l),ip(l)&&(c.traceId=l)},getSpanId:function(){return c.spanId},setSpanId:function(l){o&&o.setSpanId(l),ap(l)&&(c.spanId=l)},getTraceFlags:function(){return c.traceFlags},setTraceFlags:function(l){o&&o.setTraceFlags(l),c.traceFlags=l}}}var lR="TelemetryPluginChain",zm="_hasRun",Km="_getTelCtx",$m=0;function fR(o,c,l){for(;o;){if(o.getPlugin()===l)return o;o=o.getNext()}return Qi([l],c.config||{},c)}function sp(o,c,l,p){var v=null,g=[];p!==null&&(v=p?fR(o,l,p):o);var y={_next:b,ctx:{core:function(){return l},diagLog:function(){return $g(l,c)},getCfg:function(){return c},getExtCfg:F,getConfig:R,hasNext:function(){return!!v},getNext:function(){return v},setNext:function(Q){v=Q},iterate:H,onComplete:P}};function P(Q,L){for(var ae=[],Ae=2;Ae<arguments.length;Ae++)ae[Ae-2]=arguments[Ae];Q&&g.push({func:Q,self:te(L)?y.ctx:L,args:ae})}function b(){var Q=v;if(v=Q?Q.getNext():null,!Q){var L=g;L&&L.length>0&&(Pe(L,function(ae){try{ae.func.call(ae.self,ae.args)}catch(Ae){La(l.logger,2,73,"Unexpected Exception during onComplete - "+Xi(Ae))}}),g=[])}return Q}function F(Q,L,ae){L===void 0&&(L={}),ae===void 0&&(ae=0);var Ae;if(c){var Ie=c.extensionConfig;Ie&&Q&&(Ae=Ie[Q])}if(!Ae)Ae=L;else if(_t(L)&&ae!==0){var nt=fr(!0,L,Ae);c&&ae===2&&br(L,function(Je){if(B(nt[Je])){var yr=c[Je];B(yr)||(nt[Je]=yr)}}),Ae=nt}return Ae}function R(Q,L,ae){ae===void 0&&(ae=!1);var Ae,Ie=F(Q,null);return Ie&&!B(Ie[L])?Ae=Ie[L]:c&&!B(c[L])&&(Ae=c[L]),B(Ae)?ae:Ae}function H(Q){for(var L;L=y._next();){var ae=L.getPlugin();ae&&Q(ae)}}return y}function Ei(o,c,l,p){var v=sp(o,c,l,p),g=v.ctx;function y(b){var F=v._next();return F&&F.processTelemetry(b,g),!F}function P(b,F){return b===void 0&&(b=null),D(b)&&(b=Qi(b,c,l,F)),Ei(b||g.getNext(),c,l,F)}return g.processNext=y,g.createNew=P,g}function Lc(o,c,l){var p=c.config||{},v=sp(o,p,c,l),g=v.ctx;function y(b){var F=v._next();return F&&F.unload(g,b),!F}function P(b,F){return b===void 0&&(b=null),D(b)&&(b=Qi(b,p,c,F)),Lc(b||g.getNext(),c,F)}return g.processNext=y,g.createNew=P,g}function up(o,c,l){var p=c.config||{},v=sp(o,p,c,l),g=v.ctx;function y(b){return g.iterate(function(F){Re(F.update)&&F.update(g,b)})}function P(b,F){return b===void 0&&(b=null),D(b)&&(b=Qi(b,p,c,F)),up(b||g.getNext(),c,F)}return g.processNext=y,g.createNew=P,g}function Qi(o,c,l,p){var v=null,g=!p;if(D(o)&&o.length>0){var y=null;Pe(o,function(P){if(!g&&p===P&&(g=!0),g&&P&&Re(P.processTelemetry)){var b=dR(P,c,l);v||(v=b),y&&y._setNext(b),y=b}})}return p&&!v?Qi([p],c,l):v}function dR(o,c,l){var p=null,v=Re(o.processTelemetry),g=Re(o.setNextPlugin),y;o?y=o.identifier+"-"+o.priority+"-"+$m++:y="Unknown-0-"+$m++;var P={getPlugin:function(){return o},getNext:function(){return p},processTelemetry:R,unload:H,update:Q,_id:y,_setNext:function(L){p=L}};function b(){var L;return o&&Re(o[Km])&&(L=o[Km]()),L||(L=Ei(P,c,l)),L}function F(L,ae,Ae,Ie,nt){var Je=!1,yr=o?o.identifier:lR,Tr=L[zm];return Tr||(Tr=L[zm]={}),L.setNext(p),o&&Bd(L[Ct](),function(){return yr+":"+Ae},function(){Tr[y]=!0;try{var re=p?p._id:me;re&&(Tr[re]=!1),Je=ae(L)}catch(No){var uu=p?Tr[p._id]:!0;uu&&(Je=!0),(!p||!uu)&&La(L.diagLog(),1,73,"Plugin ["+yr+"] failed during "+Ae+" - "+Xi(No)+", run flags: "+Xi(Tr))}},Ie,nt),Je}function R(L,ae){ae=ae||b();function Ae(Ie){if(!o||!v)return!1;var nt=qa(o);return nt.teardown||nt[wr]?!1:(g&&o.setNextPlugin(p),o.processTelemetry(L,Ie),!0)}F(ae,Ae,"processTelemetry",function(){return{item:L}},!L.sync)||ae.processNext(L)}function H(L,ae){function Ae(){var Ie=!1;if(o){var nt=qa(o),Je=o[Ct]||nt.core;o&&(!Je||Je===L[Ct]())&&!nt[Pt]&&(nt[Ct]=null,nt[Pt]=!0,nt[Xt]=!1,o[Pt]&&o[Pt](L,ae)===!0&&(Ie=!0))}return Ie}F(L,Ae,"unload",function(){},ae.isAsync)||L.processNext(ae)}function Q(L,ae){function Ae(){var Ie=!1;if(o){var nt=qa(o),Je=o[Ct]||nt.core;o&&(!Je||Je===L[Ct]())&&!nt[Pt]&&o[jr]&&o[jr](L,ae)===!0&&(Ie=!0)}return Ie}F(L,Ae,"update",function(){},!1)||L.processNext(ae)}return Lt(P)}var pR=function(){function o(c,l,p,v){var g=this,y=Ei(c,l,p,v);pi(g,y,ft(y))}return o}(),vR="iKey",Xm="extensionConfig",xc=500,hR="Channel has invalid priority - ";function Wm(o,c,l,p){c&&D(c)&&c.length>0&&(c=c.sort(function(v,g){return v.priority-g.priority}),Pe(c,function(v){v.priority<xc&&Et(hR+v.identifier)}),o.push({queue:Lt(c),chain:Qi(c,l,p)}))}function _R(o,c){var l;function p(){return Ei(null,c.config,c,null)}function v(R,H,Q,L){var ae=R?R.length+1:1;function Ae(){ae--,ae===0&&(L&&L(),L=null)}ae>0&&Pe(R,function(Ie){if(Ie&&Ie.queue.length>0){var nt=Ie.chain,Je=H.createNew(nt);Je.onComplete(Ae),Q(Je)}else ae--}),Ae()}function g(R,H){var Q=H||{reason:0};return v(o,R,function(L){L[Dr](Q)},function(){R[Dr](Q)}),!0}function y(R,H){var Q=H||{reason:0,isAsync:!1};return v(o,R,function(L){L[Dr](Q)},function(){R[Dr](Q),b=!1}),!0}function P(R){var H=null;return o&&o.length>0&&Pe(o,function(Q){if(Q&&Q.queue.length>0&&(Pe(Q.queue,function(L){if(L.identifier===R)return H=L,-1}),H))return-1}),H}var b=!1,F=(l={identifier:"ChannelControllerPlugin",priority:xc,initialize:function(R,H,Q,L){b=!0,Pe(o,function(ae){ae&&ae.queue.length>0&&op(Ei(ae.chain,R,H),Q)})},isInitialized:function(){return b},processTelemetry:function(R,H){v(o,H||p(),function(Q){Q[Dr](R)},function(){H[Dr](R)})},update:g},l[kr]=function(){v(o,p(),function(R){R.iterate(function(H){H[kr]&&H[kr]()})},null)},l[un]=function(){v(o,p(),function(R){R.iterate(function(H){H[un]&&H[un]()})},null)},l[Pt]=y,l.getChannel=P,l.flush=function(R,H,Q,L){var ae=1,Ae=!1,Ie=null;L=L||5e3;function nt(){ae--,Ae&&ae===0&&(Ie&&(clearTimeout(Ie),Ie=null),H&&H(Ae),H=null)}return v(o,p(),function(Je){Je.iterate(function(yr){if(yr.flush){ae++;var Tr=!1;yr.flush(R,function(){Tr=!0,nt()},Q)||Tr||(R&&Ie==null?Ie=setTimeout(function(){Ie=null,nt()},L):nt())}})},function(){Ae=!0,nt()}),!0},l._setQueue=function(R){o=R},l);return F}function gR(o,c,l,p){var v=[];if(o&&Pe(o,function(y){return Wm(v,y,l,p)}),c){var g=[];Pe(c,function(y){y.priority>xc&&g.push(y)}),Wm(v,g,l,p)}return v}function cp(){var o=[];function c(p){p&&o.push(p)}function l(p,v){Pe(o,function(g){try{g(p,v)}catch(y){La(p.diagLog(),2,73,"Unexpected error calling unload handler - "+Xi(y))}}),o=[]}return{add:c,run:l}}var Zi="getPlugin",Ym=function(){function o(){var c=this,l,p,v,g,y;F(),gi(o,c,function(R){R.initialize=function(H,Q,L,ae){b(H,Q,ae),l=!0},R.teardown=function(H,Q){var L=R.core;if(!L||H&&L!==H.core())return;var ae,Ae=!1,Ie=H||Lc(null,L,v&&v[Zi]?v[Zi]():v),nt=Q||{reason:0,isAsync:!1};function Je(){Ae||(Ae=!0,g.run(Ie,Q),Pe(y,function(yr){yr.rm()}),y=[],ae===!0&&Ie.processNext(nt),F())}return!R[Fr]||R[Fr](Ie,nt,Je)!==!0?Je():ae=!0,ae},R.update=function(H,Q){var L=R.core;if(!L||H&&L!==H.core())return;var ae,Ae=!1,Ie=H||up(null,L,v&&v[Zi]?v[Zi]():v),nt=Q||{reason:0};function Je(){Ae||(Ae=!0,b(Ie.getCfg(),Ie.core(),Ie.getNext()))}return!R._doUpdate||R._doUpdate(Ie,nt,Je)!==!0?Je():ae=!0,ae},R._addHook=function(H){H&&(D(H)?y=y.concat(H):y.push(H))},Kr(R,"_addUnloadCb",function(){return g},"add")}),c.diagLog=function(R){return P(R).diagLog()},c[Xt]=function(){return l},c.setInitialized=function(R){l=R},c[Gt]=function(R){v=R},c.processNext=function(R,H){H?H.processNext(R):v&&Re(v.processTelemetry)&&v.processTelemetry(R,null)},c._getTelCtx=P;function P(R){R===void 0&&(R=null);var H=R;if(!H){var Q=p||Ei(null,{},c.core);v&&v[Zi]?H=Q.createNew(null,v[Zi]):H=Q.createNew(null,v)}return H}function b(R,H,Q){R&&tt(R,Xm,[],null,B),!Q&&H&&(Q=H.getProcessTelContext().getNext());var L=v;v&&v[Zi]&&(L=v[Zi]()),c.core=H,p=Ei(Q,R,H,L)}function F(){l=!1,c.core=null,p=null,v=null,y=[],g=cp()}}return o}(),mR=function(o){et(c,o);function c(){var l=o.call(this)||this;l.identifier="TelemetryInitializerPlugin",l.priority=199;var p,v;g(),gi(c,l,function(y,P){y.addTelemetryInitializer=function(b){var F={id:p++,fn:b};v.push(F);var R={remove:function(){Pe(v,function(H,Q){if(H.id===F.id)return v.splice(Q,1),-1})}};return R},y.processTelemetry=function(b,F){for(var R=!1,H=v.length,Q=0;Q<H;++Q){var L=v[Q];if(L)try{if(L.fn.apply(null,[b])===!1){R=!0;break}}catch(ae){La(F.diagLog(),1,64,"One of telemetry initializers failed, telemetry item will not be sent: "+cr(ae),{exception:Xi(ae)},!0)}}R||y.processNext(b,F)},y[Fr]=function(){g()}});function g(){p=0,v=[]}return l}return c}(Ym),Qm="Plugins must provide initialize method",Zm="_notificationManager",Jm="SDK is still unloading...",ER="SDK is not initialized",yR={loggingLevelConsole:1};function TR(o,c){return new Qg(c)}function SR(o,c,l){var p=[],v={};return Pe(l,function(g){(B(g)||B(g.initialize))&&Et(Qm);var y=g.priority,P=g.identifier;g&&y&&(B(v[y])?v[y]=P:Wg(o,"Two extensions have same priority #"+y+" - "+v[y]+", "+P)),(!y||y<c)&&p.push(g)}),{all:l,core:p}}function eE(o,c){var l=!1;return Pe(c,function(p){if(p===o)return l=!0,-1}),l}function AR(){var o;return Ce((o={},o[ur]=function(c){},o[Zt]=function(c){},o[Ur]=function(c){},o[ee]=function(c,l){},o[ge]=function(c,l){},o))}var tE=function(){function o(){var c,l,p,v,g,y,P,b,F,R,H,Q,L,ae,Ae,Ie,nt,Je,yr,Tr=0;gi(o,this,function(re){uu(),re.isInitialized=function(){return c},re.initialize=function(J,it,Ht,We){L&&Et(Jm),re.isInitialized()&&Et("Core should not be initialized more than once"),(!J||B(J.instrumentationKey))&&Et("Please provide instrumentation key"),p=We,re[Zm]=We,re.config=J||{},wR(J),DR(J),J.extensions=B(J.extensions)?[]:J.extensions,MR(J),Ht&&(re.logger=Ht),b=[],b.push.apply(b,bt(bt([],it,!1),J.extensions)),H=(J||{}).channels,pp(J,null),(!Q||Q.length===0)&&Et("No channels available"),c=!0,re.releaseQueue()},re.getTransmissionControls=function(){var J=[];return Q&&Pe(Q,function(it){J.push(it.queue)}),Lt(J)},re.track=function(J){tt(J,vR,re.config.instrumentationKey,null,qt),tt(J,"time",Or(new Date),null,qt),tt(J,"ver","4.0",null,B),!L&&re.isInitialized()?No().processNext(J):l.push(J)},re.getProcessTelContext=No,re.getNotifyMgr=function(){return p||(p=AR(),re[Zm]=p),p},re[ur]=function(J){p&&p[ur](J)},re[Zt]=function(J){p&&p[Zt](J)},re.getCookieMgr=function(){return y||(y=Oo(re.config,re.logger)),y},re.setCookieMgr=function(J){y=J},re.getPerfMgr=function(){return!v&&!g&&re.config&&re.config.enablePerfMgr&&Re(re.config.createPerfMgr)&&(g=re.config.createPerfMgr(re,re.getNotifyMgr())),v||g||Zg()},re.setPerfMgr=function(J){v=J},re.eventCnt=function(){return l.length},re.releaseQueue=function(){if(c&&l.length>0){var J=l;l=[],Pe(J,function(it){No().processNext(it)})}},re.pollInternalLogs=function(J){Ae=J||null;var it=re.config.diagnosticLogInterval;return(!it||!(it>0))&&(it=1e4),Tr&&clearInterval(Tr),Tr=setInterval(function(){cE()},it),Tr},re.stopPollingInternalLogs=function(){Tr&&(clearInterval(Tr),Tr=0,cE())},pi(re,function(){return ae},["addTelemetryInitializer"]),re.unload=function(J,it,Ht){J===void 0&&(J=!0),c||Et(ER),L&&Et(Jm);var We={reason:50,isAsync:J,flushComplete:!1},Cr=Lc(vp(),re);Cr.onComplete(function(){uu(),it&&it(We)},re);function ln(yi){We.flushComplete=yi,L=!0,nt.run(Cr,We),re.stopPollingInternalLogs(),Cr.processNext(We)}lE(J,ln,6,Ht)||ln(!1)},re.getPlugin=sE,re.addPlugin=function(J,it,Ht,We){if(!J){We&&We(!1),fE(Qm);return}var Cr=sE(J.identifier);if(Cr&&!it){We&&We(!1),fE("Plugin ["+J.identifier+"] is already loaded!");return}var ln={reason:16};function yi(Fc){b.push(J),ln.added=[J],pp(re.config,ln),We&&We(!0)}if(Cr){var Ji=[Cr.plugin],wo={reason:2,isAsync:!!Ht};uE(Ji,wo,function(Fc){Fc?(ln.removed=Ji,ln.reason|=32,yi()):We&&We(!1)})}else yi()},re.evtNamespace=function(){return Ie},re.flush=lE,re.getTraceCtx=function(J){return yr||(yr=cR()),yr},re.setTraceCtx=function(J){yr=J||null},Kr(re,"addUnloadCb",function(){return nt},"add");function uu(){c=!1,re.config=fr(!0,{},yR),re.logger=new Io(re.config),re._extensions=[],ae=new mR,l=[],p=null,v=null,g=null,y=null,P=null,F=null,b=[],R=null,H=null,Q=null,L=!1,Ae=null,Ie=Js("AIBaseCore",!0),nt=cp(),yr=null}function No(){return Ei(vp(),re.config,re)}function pp(J,it){var Ht=SR(re.logger,xc,b);F=Ht.core,P=null;var We=Ht.all;if(Q=Lt(gR(H,We,J,re)),R){var Cr=lt(We,R);Cr!==-1&&We.splice(Cr,1),Cr=lt(F,R),Cr!==-1&&F.splice(Cr,1),R._setQueue(Q)}else R=_R(Q,re);We.push(R),F.push(R),re._extensions=Mc(We),R.initialize(J,re,We),op(No(),We),re._extensions=Lt(Mc(F||[])).slice(),it&&LR(it)}function sE(J){var it=null,Ht=null;return Pe(re._extensions,function(We){if(We.identifier===J&&We!==R&&We!==ae)return Ht=We,-1}),!Ht&&R&&(Ht=R.getChannel(J)),Ht&&(it={plugin:Ht,setEnabled:function(We){qa(Ht)[wr]=!We},isEnabled:function(){var We=qa(Ht);return!We[Pt]&&!We[wr]},remove:function(We,Cr){We===void 0&&(We=!0);var ln=[Ht],yi={reason:1,isAsync:We};uE(ln,yi,function(Ji){Ji&&pp(re.config,{reason:32,removed:ln}),Cr&&Cr(Ji)})}}),it}function vp(){if(!P){var J=(F||[]).slice();lt(J,ae)===-1&&J.push(ae),P=Qi(Mc(J),re.config,re)}return P}function uE(J,it,Ht){if(J&&J.length>0){var We=Qi(J,re.config,re),Cr=Lc(We,re);Cr.onComplete(function(){var ln=!1,yi=[];Pe(b,function(wo,Fc){eE(wo,J)?ln=!0:yi.push(wo)}),b=yi;var Ji=[];H&&(Pe(H,function(wo,Fc){var dE=[];Pe(wo,function(pE){eE(pE,J)?ln=!0:dE.push(pE)}),Ji.push(dE)}),H=Ji),Ht&&Ht(ln)}),Cr.processNext(it)}else Ht(!1)}function cE(){var J=re.logger?re.logger.queue:[];J&&(Pe(J,function(it){var Ht={name:Ae||"InternalMessageId: "+it.messageId,iKey:re.config.instrumentationKey,time:Or(new Date),baseType:Ac.dataType,baseData:{message:it.message}};re.track(Ht)}),J.length=0)}function lE(J,it,Ht,We){return R?R.flush(J,it,Ht||6,We):(it&&it(!1),!0)}function wR(J){J.disableDbgExt===!0&&Je&&(p[Zt](Je),Je=null),p&&!Je&&J.disableDbgExt!==!0&&(Je=Vg(J),p[ur](Je))}function DR(J){!J.enablePerfMgr&&g&&(g=null),J.enablePerfMgr&&tt(re.config,"createPerfMgr",TR)}function MR(J){var it=lr(J,Xm);it.NotificationManager=p}function LR(J){var it=up(vp(),re);(!re._updateHook||re._updateHook(it,J)!==!0)&&it.processNext(J)}function fE(J){var it=re.logger;it?La(it,2,73,J):Et(J)}})}return o}();function qc(o,c,l,p){Pe(o,function(v){if(v&&v[c])if(l)setTimeout(function(){return p(v)},0);else try{p(v)}catch{}})}var rE=function(){function o(c){this.listeners=[];var l=!!(c||{}).perfEvtsSendAll;gi(o,this,function(p){p[ur]=function(v){p.listeners.push(v)},p[Zt]=function(v){for(var g=lt(p.listeners,v);g>-1;)p.listeners.splice(g,1),g=lt(p.listeners,v)},p[Ur]=function(v){qc(p.listeners,Ur,!0,function(g){g[Ur](v)})},p[ee]=function(v,g){qc(p.listeners,ee,!0,function(y){y[ee](v,g)})},p[ge]=function(v,g){qc(p.listeners,ge,g,function(y){y[ge](v,g)})},p[Ee]=function(v){v&&(l||!v.isChildEvt())&&qc(p.listeners,Ee,!1,function(g){v.isAsync?setTimeout(function(){return g[Ee](v)},0):g[Ee](v)})}})}return o}(),IR=function(o){et(c,o);function c(){var l=o.call(this)||this;return gi(c,l,function(p,v){p.initialize=function(P,b,F,R){v.initialize(P,b,F||new Io(P),R||new rE(P))},p.track=function(P){Bd(p.getPerfMgr(),function(){return"AppInsightsCore:track"},function(){P===null&&(y(P),Et("Invalid telemetry item")),g(P),v.track(P)},function(){return{item:P}},!P.sync)};function g(P){B(P.name)&&(y(P),Et("telemetry name required"))}function y(P){var b=p.getNotifyMgr();b&&b.eventsDiscarded([P],2)}}),l}return c}(tE),bR=An({CRITICAL:1,WARNING:2}),OR=An({BrowserDoesNotSupportLocalStorage:0,BrowserCannotReadLocalStorage:1,BrowserCannotReadSessionStorage:2,BrowserCannotWriteLocalStorage:3,BrowserCannotWriteSessionStorage:4,BrowserFailedRemovalFromLocalStorage:5,BrowserFailedRemovalFromSessionStorage:6,CannotSendEmptyTelemetry:7,ClientPerformanceMathError:8,ErrorParsingAISessionCookie:9,ErrorPVCalc:10,ExceptionWhileLoggingError:11,FailedAddingTelemetryToBuffer:12,FailedMonitorAjaxAbort:13,FailedMonitorAjaxDur:14,FailedMonitorAjaxOpen:15,FailedMonitorAjaxRSC:16,FailedMonitorAjaxSend:17,FailedMonitorAjaxGetCorrelationHeader:18,FailedToAddHandlerForOnBeforeUnload:19,FailedToSendQueuedTelemetry:20,FailedToReportDataLoss:21,FlushFailed:22,MessageLimitPerPVExceeded:23,MissingRequiredFieldSpecification:24,NavigationTimingNotSupported:25,OnError:26,SessionRenewalDateIsZero:27,SenderNotInitialized:28,StartTrackEventFailed:29,StopTrackEventFailed:30,StartTrackFailed:31,StopTrackFailed:32,TelemetrySampledAndNotSent:33,TrackEventFailed:34,TrackExceptionFailed:35,TrackMetricFailed:36,TrackPVFailed:37,TrackPVFailedCalc:38,TrackTraceFailed:39,TransmissionFailed:40,FailedToSetStorageBuffer:41,FailedToRestoreStorageBuffer:42,InvalidBackendResponse:43,FailedToFixDepricatedValues:44,InvalidDurationValue:45,TelemetryEnvelopeInvalid:46,CreateEnvelopeError:47,CannotSerializeObject:48,CannotSerializeObjectNonSerializable:49,CircularReferenceDetected:50,ClearAuthContextFailed:51,ExceptionTruncated:52,IllegalCharsInName:53,ItemNotInArray:54,MaxAjaxPerPVExceeded:55,MessageTruncated:56,NameTooLong:57,SampleRateOutOfRange:58,SetAuthContextFailed:59,SetAuthContextFailedAccountName:60,StringValueTooLong:61,StartCalledMoreThanOnce:62,StopCalledWithoutStart:63,TelemetryInitializerFailed:64,TrackArgumentsNotSpecified:65,UrlTooLong:66,SessionStorageBufferFull:67,CannotAccessCookie:68,IdTooLong:69,InvalidEvent:70,FailedMonitorAjaxSetRequestHeader:71,SendBrowserInfoOnUserInit:72,PluginException:73,NotificationException:74,SnippetScriptLoadFailure:99,InvalidInstrumentationKey:100,CannotParseAiBlobValue:101,InvalidContentBlob:102,TrackPageActionEventFailed:103,FailedAddingCustomDefinedRequestContext:104,InMemoryStorageBufferFull:105,InstrumentationKeyDeprecation:106}),nE="_aiHooks",iE=["req","rsp","hkErr","fnErr"];function jc(o,c){if(o)for(var l=0;l<o.length&&!c(o[l],l);l++);}function lp(o,c,l,p,v){v>=0&&v<=2&&jc(o,function(g,y){var P=g.cbks,b=P[iE[v]];if(b){c.ctx=function(){var H=p[y]=p[y]||{};return H};try{b.apply(c.inst,l)}catch(H){var F=c.err;try{var R=P[iE[2]];R&&(c.err=H,R.apply(c.inst,l))}catch{}finally{c.err=F}}}})}function PR(o){return function(){var c=this,l=arguments,p=o.h,v={name:o.n,inst:c,ctx:null,set:b},g=[],y=P([v],l);v.evt=Pr("event");function P(R,H){return jc(H,function(Q){R.push(Q)}),R}function b(R,H){l=P([],l),l[R]=H,y=P([v],l)}lp(p,v,y,g,0);var F=o.f;if(F)try{v.rslt=F.apply(c,l)}catch(R){throw v.err=R,lp(p,v,y,g,3),R}return lp(p,v,y,g,1),v.rslt}}function fp(o,c,l){var p=null;return o&&(de(o,c)?p=o:l&&(p=fp(be(o),c,!1))),p}function CR(o,c,l){return o?dp(o[a],c,l,!1):null}function RR(o,c,l){return o?oE(o[a],c,l,!1):null}function aE(o,c,l,p){var v=l&&l[nE];if(!v){v={i:0,n:c,f:l,h:[]};var g=PR(v);g[nE]=v,o[c]=g}var y={id:v.i,cbks:p,rm:function(){var P=this.id;jc(v.h,function(b,F){if(b.id===P)return v.h.splice(F,1),1})}};return v.i++,v.h.push(y),y}function dp(o,c,l,p){if(p===void 0&&(p=!0),o&&c&&l){var v=fp(o,c,p);if(v){var g=v[c];if(typeof g===r)return aE(v,c,g,l)}}return null}function oE(o,c,l,p){p===void 0&&(p=!0);var v=null;return jc(c,function(g){var y=dp(o,g,l,p);y&&(v||(v=[]),v.push(y))}),v}function NR(o,c,l,p){if(o&&c&&l){var v=fp(o,c,p)||o;if(v)return aE(v,c,v[c],l)}return null}e.AppInsightsCore=IR,e.BaseCore=tE,e.BaseTelemetryPlugin=Ym,e.CoreUtils=ep,e.DiagnosticLogger=Io,e.EventHelper=YC,e.EventsDiscardedReason=Un,e.InstrumentEvent=NR,e.InstrumentFunc=dp,e.InstrumentFuncs=oE,e.InstrumentProto=CR,e.InstrumentProtos=RR,e.LoggingSeverity=bR,e.MinChannelPriorty=t,e.NotificationManager=rE,e.PerfEvent=Ys,e.PerfManager=Qg,e.ProcessTelemetryContext=pR,e.Undefined=XC,e._InternalLogMessage=Ac,e._InternalMessageId=OR,e.__getRegisteredEvents=HC,e._legacyCookieMgr=Ro,e._logInternalMessage=CC,e._throwInternal=La,e._warnToConsole=Wg,e.addEventHandler=Jd,e.addEventListeners=xm,e.addPageHideEventListener=qm,e.addPageShowEventListener=jm,e.addPageUnloadEventListener=VC,e.areCookiesSupported=Yd,e.arrForEach=Pe,e.arrIndexOf=lt,e.arrMap=qe,e.arrReduce=Ue,e.attachEvent=Qd,e.canUseCookies=QC,e.createClassFromInterface=Zn,e.createCookieMgr=Oo,e.createEnumMap=vi,e.createEnumStyle=An,e.createProcessTelemetryContext=Ei,e.createTraceParent=rR,e.createUniqueNamespace=Js,e.createUnloadHandlerContainer=cp,e.createValueMap=In,e.dateNow=Le,e.deepFreeze=gt,e.deleteCookie=eR,e.detachEvent=Zd,e.disableCookies=Um,e.doPerf=Bd,e.dumpObj=Xi,e.eventOff=au,e.eventOn=iu,e.findMetaTag=Bg,e.findNamedServerTiming=Gg,e.findW3cTraceParent=aR,e.formatTraceParent=iR,e.generateW3CId=Nc,e.getConsole=jg,e.getCookie=ZC,e.getCrypto=Fg,e.getDebugExt=Ud,e.getDebugListener=Vg,e.getDocument=$i,e.getExceptionName=cr,e.getGblPerfMgr=Zg,e.getGlobal=q,e.getGlobalInst=Pr,e.getHistory=vC,e.getIEVersion=_C,e.getJSON=Fd,e.getLocation=qg,e.getMsCrypto=kg,e.getNavigator=Ma,e.getPerformance=jd,e.getSetValue=lr,e.getWindow=xd,e.hasDocument=Lg,e.hasHistory=xg,e.hasJSON=yc,e.hasNavigator=qd,e.hasOwnProperty=de,e.hasWindow=Ld,e.initializePlugins=op,e.isArray=D,e.isBeaconsSupported=mC,e.isBoolean=Ge,e.isDate=K,e.isError=le,e.isFetchSupported=EC,e.isFunction=Re,e.isIE=Ws,e.isNotNullOrUndefined=Te,e.isNotTruthy=qt,e.isNotUndefined=De,e.isNullOrUndefined=B,e.isNumber=ke,e.isObject=_t,e.isReactNative=hC,e.isSafari=gC,e.isSampledFlag=nR,e.isString=X,e.isSymbol=It,e.isTruthy=Ne,e.isTypeof=Ze,e.isUndefined=te,e.isValidSpanId=ap,e.isValidTraceId=ip,e.isValidTraceParent=Vm,e.isXhrSupported=Ug,e.mergeEvtNamespace=nu,e.mwcRandom32=Vd,e.mwcRandomSeed=nm,e.newGuid=Fm,e.newId=zd,e.normalizeJsName=gr,e.objCreate=Ce,e.objDefineAccessors=Mt,e.objExtend=fr,e.objForEachKey=br,e.objFreeze=Lt,e.objKeys=ft,e.objSeal=Er,e.objToString=ot,e.optimizeObject=Ra,e.parseTraceParent=np,e.perfNow=km,e.proxyAssign=Hr,e.proxyFunctionAs=Kr,e.proxyFunctions=pi,e.random32=xa,e.randomValue=Gd,e.removeEventHandler=Lm,e.removeEventListeners=Co,e.removePageHideEventListener=KC,e.removePageShowEventListener=$C,e.removePageUnloadEventListener=zC,e.safeGetCookieMgr=xC,e.safeGetLogger=$g,e.setCookie=JC,e.setEnableEnvMocks=pC,e.setGblPerfMgr=RC,e.setValue=tt,e.sortPlugins=Mc,e.strContains=oe,e.strEndsWith=Sn,e.strFunction=r,e.strObject=n,e.strPrototype=a,e.strStartsWith=zi,e.strTrim=rt,e.strUndefined=i,e.throwError=Et,e.toISOString=Or,e.uaDisallowsSameSiteNone=Em,e.unloadComponents=uR,e.useXDomainRequest=yC,function(o,c,l){var p=Object.defineProperty;if(p)try{return p(o,c,l)}catch{}return l&&typeof l.value!==void 0&&(o[c]=l.value),o}(e,"__esModule",{value:!0})})});var gp=_((hp,_p)=>{(function(e,t){typeof hp=="object"&&typeof _p<"u"?_p.exports=t():typeof define=="function"&&define.amd?define(t):(e=typeof globalThis<"u"?globalThis:e||self,e.Microsoft=e.Microsoft||{},e.Microsoft["DynamicProto-JS"]=t())})(hp,function(){"use strict";var e="constructor",t="prototype",r="function",n="_dynInstFuncs",i="_isDynProxy",a="_dynClass",s="_dynCls$",u="_dynInstChk",f=u,d="_dfOpts",h="_unknown_",E="__proto__",S="_dyn"+E,C="_dynInstProto",q="useBaseInst",se="setInstFuncs",Ce=Object,Fe=Ce.getPrototypeOf,et=Ce.getOwnPropertyNames,bt=0;function me(ee,ge){return ee&&Ce[t].hasOwnProperty.call(ee,ge)}function $t(ee){return ee&&(ee===Ce[t]||ee===Array[t])}function Ot(ee){return $t(ee)||ee===Function[t]}function Gt(ee){var ge;if(ee){if(Fe)return Fe(ee);var Ee=ee[E]||ee[t]||(ee[e]?ee[e][t]:null);ge=ee[S]||Ee,me(ee,S)||(delete ee[C],ge=ee[S]=ee[C]||ee[S],ee[C]=Ee)}return ge}function Xt(ee,ge){var Ee=[];if(et)Ee=et(ee);else for(var Qe in ee)typeof Qe=="string"&&me(ee,Qe)&&Ee.push(Qe);if(Ee&&Ee.length>0)for(var Xe=0;Xe<Ee.length;Xe++)ge(Ee[Xe])}function Pt(ee,ge,Ee){return ge!==e&&typeof ee[ge]===r&&(Ee||me(ee,ge))}function Ct(ee){throw new TypeError("DynamicProto: "+ee)}function jr(ee){var ge={};return Xt(ee,function(Ee){!ge[Ee]&&Pt(ee,Ee,!1)&&(ge[Ee]=ee[Ee])}),ge}function wr(ee,ge){for(var Ee=ee.length-1;Ee>=0;Ee--)if(ee[Ee]===ge)return!0;return!1}function Fr(ee,ge,Ee,Qe){function Xe(N,W,fe){var at=W[fe];if(at[i]&&Qe){var Tt=N[n]||{};Tt[f]!==!1&&(at=(Tt[W[a]]||{})[fe]||at)}return function(){return at.apply(N,arguments)}}var m={};Xt(Ee,function(N){m[N]=Xe(ge,Ee,N)});for(var A=Gt(ee),O=[];A&&!Ot(A)&&!wr(O,A);)Xt(A,function(N){!m[N]&&Pt(A,N,!Fe)&&(m[N]=Xe(ge,A,N))}),O.push(A),A=Gt(A);return m}function Dr(ee,ge,Ee,Qe){var Xe=null;if(ee&&me(Ee,a)){var m=ee[n]||{};if(Xe=(m[Ee[a]]||{})[ge],Xe||Ct("Missing ["+ge+"] "+r),!Xe[u]&&m[f]!==!1){for(var A=!me(ee,ge),O=Gt(ee),N=[];A&&O&&!Ot(O)&&!wr(N,O);){var W=O[ge];if(W){A=W===Qe;break}N.push(O),O=Gt(O)}try{A&&(ee[ge]=Xe),Xe[u]=1}catch{m[f]=!1}}}return Xe}function un(ee,ge,Ee){var Qe=ge[ee];return Qe===Ee&&(Qe=Gt(ge)[ee]),typeof Qe!==r&&Ct("["+ee+"] is not a "+r),Qe}function kr(ee,ge,Ee,Qe,Xe){function m(N,W){var fe=function(){var at=Dr(this,W,N,fe)||un(W,N,fe);return at.apply(this,arguments)};return fe[i]=1,fe}if(!$t(ee)){var A=Ee[n]=Ee[n]||{},O=A[ge]=A[ge]||{};A[f]!==!1&&(A[f]=!!Xe),Xt(Ee,function(N){Pt(Ee,N,!1)&&Ee[N]!==Qe[N]&&(O[N]=Ee[N],delete Ee[N],(!me(ee,N)||ee[N]&&!ee[N][i])&&(ee[N]=m(ee,N)))})}}function _r(ee,ge){if(Fe){for(var Ee=[],Qe=Gt(ge);Qe&&!Ot(Qe)&&!wr(Ee,Qe);){if(Qe===ee)return!0;Ee.push(Qe),Qe=Gt(Qe)}return!1}return!0}function ur(ee,ge){return me(ee,t)?ee.name||ge||h:((ee||{})[e]||{}).name||ge||h}function Zt(ee,ge,Ee,Qe){me(ee,t)||Ct("theClass is an invalid class definition.");var Xe=ee[t];_r(Xe,ge)||Ct("["+ur(ee)+"] is not in class hierarchy of ["+ur(ge)+"]");var m=null;me(Xe,a)?m=Xe[a]:(m=s+ur(ee,"_")+"$"+bt,bt++,Xe[a]=m);var A=Zt[d],O=!!A[q];O&&Qe&&Qe[q]!==void 0&&(O=!!Qe[q]);var N=jr(ge),W=Fr(Xe,ge,N,O);Ee(ge,W);var fe=!!Fe&&!!A[se];fe&&Qe&&(fe=!!Qe[se]),kr(Xe,m,ge,N,fe!==!1)}var Ur={setInstFuncs:!0,useBaseInst:!0};return Zt[d]=Ur,Zt})});var mp=_((Gc,AE)=>{(function(e,t){typeof Gc=="object"&&typeof AE<"u"?t(Gc,yE(),SE(),gp()):typeof define=="function"&&define.amd?define(["exports","@microsoft/applicationinsights-shims","@microsoft/applicationinsights-core-js","@microsoft/dynamicproto-js"],t):(e=typeof globalThis<"u"?globalThis:e||self,t(e.oneDS=e.oneDS||{},e.applicationinsightsShims,e.applicationinsightsCoreJs,e.dynamicProto))})(Gc,function(e,t,r,n){"use strict";function i(w){return w&&typeof w=="object"&&"default"in w?w.default:w}var a=i(n),s=r.createEnumStyle({NotSet:0,Pii_DistinguishedName:1,Pii_GenericData:2,Pii_IPV4Address:3,Pii_IPv6Address:4,Pii_MailSubject:5,Pii_PhoneNumber:6,Pii_QueryString:7,Pii_SipAddress:8,Pii_SmtpAddress:9,Pii_Identity:10,Pii_Uri:11,Pii_Fqdn:12,Pii_IPV4AddressLegacy:13,CustomerContent_GenericContent:32}),u=r.createEnumStyle({Normal:1,CostDeferred:2,RealTime:3,Immediate:4}),f=r.createEnumStyle({Unspecified:0,String:1,Int32:2,UInt32:3,Int64:4,UInt64:5,Double:6,Bool:7,Guid:8,DateTime:9}),d=r.createEnumStyle({Normal:1,Critical:2}),h=r.createEnumStyle({NONE:0,ERROR:1,WARNING:2,INFORMATION:3}),E=r.objFreeze(t.__assignFn(t.__assignFn({},r._InternalMessageId),r.createEnumStyle({AuthHandShakeError:501,AuthRedirectFail:502,BrowserCannotReadLocalStorage:503,BrowserCannotWriteLocalStorage:504,BrowserDoesNotSupportLocalStorage:505,CannotParseBiBlobValue:506,CannotParseDataAttribute:507,CVPluginNotAvailable:508,DroppedEvent:509,ErrorParsingAISessionCookie:510,ErrorProvidedChannels:511,FailedToGetCookies:512,FailedToInitializeCorrelationVector:513,FailedToInitializeSDK:514,InvalidContentBlob:515,InvalidCorrelationValue:516,SessionRenewalDateIsZero:517,SendPostOnCompleteFailure:518,PostResponseHandler:519,SDKNotInitialized:520}))),S,C="3.2.3",q="1DS-Web-JS-"+C,se="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",Ce="withCredentials",Fe="timeout",et=(S={},S[0]=0,S[2]=6,S[1]=1,S[3]=7,S[4098]=6,S[4097]=1,S[4099]=7,S),bt=null,me=Boolean(r.getDocument()),$t=Boolean(r.getWindow());function Ot(w){return!(w===""||r.isNullOrUndefined(w))}function Gt(w){if(w){var x=w.indexOf("-");if(x>-1)return w.substring(0,x)}return""}function Xt(){return bt===null&&(bt=!r.isUndefined(Uint8Array)&&!ge()&&!r.isReactNative()),bt}function Pt(w){return!!(w&&r.isNumber(w)&&w>=1&&w<=4)}function Ct(w,x,ne){if(!x&&!Ot(x)||typeof w!="string")return null;var Y=typeof x;if(Y==="string"||Y==="number"||Y==="boolean"||r.isArray(x))x={value:x};else if(Y==="object"&&!x.hasOwnProperty("value"))x={value:ne?JSON.stringify(x):x};else if(r.isNullOrUndefined(x.value)||x.value===""||!r.isString(x.value)&&!r.isNumber(x.value)&&!r.isBoolean(x.value)&&!r.isArray(x.value))return null;if(r.isArray(x.value)&&!Ee(x.value))return null;if(!r.isNullOrUndefined(x.kind)){if(r.isArray(x.value)||!Ur(x.kind))return null;x.value=x.value.toString()}return x}function jr(w,x,ne){var Y=-1;if(!r.isUndefined(w))if(x>0&&(x===32?Y=1<<13:x<=13&&(Y=x<<5)),ee(ne))Y===-1&&(Y=0),Y|=ne;else{var Be=et[Xe(w)]||-1;Y!==-1&&Be!==-1?Y|=Be:Be===6&&(Y=Be)}return Y}function wr(){r.safeGetCookieMgr(null).setEnabled(!1)}function Fr(w,x,ne){r.areCookiesSupported(null)&&r.safeGetCookieMgr(null).set(w,x,ne*86400,null,"/")}function Dr(w){r.areCookiesSupported(null)&&r.safeGetCookieMgr(null).del(w)}function un(w){return r.areCookiesSupported(null)?kr(r.safeGetCookieMgr(null),w):""}function kr(w,x,ne){ne===void 0&&(ne=!0);var Y;return w&&(Y=w.get(x),ne&&Y&&decodeURIComponent&&(Y=decodeURIComponent(Y))),Y||""}function _r(w){w===void 0&&(w="D");var x=r.newGuid();return w==="B"?x="{"+x+"}":w==="P"?x="("+x+")":w==="N"&&(x=x.replace(/-/g,"")),x}function ur(w,x,ne,Y,Be){var pe={},ve=!1,be=0,ot=arguments.length,Ze=Object[r.strPrototype],te=arguments;for(Ze.toString.call(te[0])==="[object Boolean]"&&(ve=te[0],be++);be<ot;be++){var w=te[be];r.objForEachKey(w,function(B,Te){ve&&Te&&r.isObject(Te)?r.isArray(Te)?(pe[B]=pe[B]||[],r.arrForEach(Te,function(de,_t){de&&r.isObject(de)?pe[B][_t]=ur(!0,pe[B][_t],de):pe[B][_t]=de})):pe[B]=ur(!0,pe[B],Te):pe[B]=Te})}return pe}var Zt=r.perfNow;function Ur(w){return w===0||w>0&&w<=13||w===32}function ee(w){return w>=0&&w<=9}function ge(){var w=r.getNavigator();if(!r.isUndefined(w)&&w.userAgent){var x=w.userAgent.toLowerCase();if((x.indexOf("safari")>=0||x.indexOf("firefox")>=0)&&x.indexOf("chrome")<0)return!0}return!1}function Ee(w){return w.length>0}function Qe(w,x){var ne=w;ne.timings=ne.timings||{},ne.timings.processTelemetryStart=ne.timings.processTelemetryStart||{},ne.timings.processTelemetryStart[x]=Zt()}function Xe(w){var x=0;if(w!=null){var ne=typeof w;ne==="string"?x=1:ne==="number"?x=2:ne==="boolean"?x=3:ne===t.strShimObject&&(x=4,r.isArray(w)?(x=4096,w.length>0&&(x|=Xe(w[0]))):r.hasOwnProperty(w,"value")&&(x=8192|Xe(w.value)))}return x}var m={Version:C,FullVersionString:q,strUndefined:r.strUndefined,strObject:r.strObject,Undefined:r.strUndefined,arrForEach:r.arrForEach,arrIndexOf:r.arrIndexOf,arrMap:r.arrMap,arrReduce:r.arrReduce,objKeys:r.objKeys,toISOString:r.toISOString,isReactNative:r.isReactNative,isString:r.isString,isNumber:r.isNumber,isBoolean:r.isBoolean,isFunction:r.isFunction,isArray:r.isArray,isObject:r.isObject,strTrim:r.strTrim,isDocumentObjectAvailable:me,isWindowObjectAvailable:$t,isValueAssigned:Ot,getTenantId:Gt,isBeaconsSupported:r.isBeaconsSupported,isUint8ArrayAvailable:Xt,isLatency:Pt,sanitizeProperty:Ct,getISOString:r.toISOString,useXDomainRequest:r.useXDomainRequest,getCommonSchemaMetaData:jr,cookieAvailable:r.areCookiesSupported,disallowsSameSiteNone:r.uaDisallowsSameSiteNone,setCookie:Fr,deleteCookie:Dr,getCookie:un,createGuid:_r,extend:ur,getTime:Zt,isValueKind:Ur,isArrayValid:Ee,objDefineAccessors:r.objDefineAccessors,addPageUnloadEventListener:r.addPageUnloadEventListener,setProcessTelemetryTimings:Qe,addEventHandler:r.addEventHandler,getFieldValueType:Xe,strEndsWith:r.strEndsWith,objForEachKey:r.objForEachKey},A={_canUseCookies:void 0,isTypeof:r.isTypeof,isUndefined:r.isUndefined,isNullOrUndefined:r.isNullOrUndefined,hasOwnProperty:r.hasOwnProperty,isFunction:r.isFunction,isObject:r.isObject,isDate:r.isDate,isArray:r.isArray,isError:r.isError,isString:r.isString,isNumber:r.isNumber,isBoolean:r.isBoolean,toISOString:r.toISOString,arrForEach:r.arrForEach,arrIndexOf:r.arrIndexOf,arrMap:r.arrMap,arrReduce:r.arrReduce,strTrim:r.strTrim,objCreate:t.objCreateFn,objKeys:r.objKeys,objDefineAccessors:r.objDefineAccessors,addEventHandler:r.addEventHandler,dateNow:r.dateNow,isIE:r.isIE,disableCookies:wr,newGuid:r.newGuid,perfNow:r.perfNow,newId:r.newId,randomValue:r.randomValue,random32:r.random32,mwcRandomSeed:r.mwcRandomSeed,mwcRandom32:r.mwcRandom32,generateW3CId:r.generateW3CId};function O(){return!!r.getGlobalInst("chrome")}function N(w,x,ne,Y,Be,pe){Y===void 0&&(Y=!1),Be===void 0&&(Be=!1);function ve(ot,Ze,te){try{ot[Ze]=te}catch{}}var be=new XMLHttpRequest;return Y&&ve(be,se,Y),ne&&ve(be,Ce,ne),be.open(w,x,!Be),ne&&ve(be,Ce,ne),!Be&&pe&&ve(be,Fe,pe),be}var W="version",fe="properties",at=function(w){t.__extendsFn(x,w);function x(){var ne=w.call(this)||this;return ne.pluginVersionStringArr=[],ne.pluginVersionString="",a(x,ne,function(Y,Be){(!Y.logger||!Y.logger.queue)&&(Y.logger=new r.DiagnosticLogger({loggingLevelConsole:1})),Y.initialize=function(pe,ve,be,ot){r.doPerf(Y,function(){return"AppInsightsCore.initialize"},function(){if(pe){pe.endpointUrl||(pe.endpointUrl="https://browser.events.data.microsoft.com/OneCollector/1.0/");var Ze=pe.propertyStorageOverride;if(Ze&&(!Ze.getProperty||!Ze.setProperty))throw new Error("Invalid property storage override passed.");pe.channels&&r.arrForEach(pe.channels,function(B){B&&r.arrForEach(B,function(Te){if(Te.identifier&&Te.version){var de=Te.identifier+"="+Te.version;Y.pluginVersionStringArr.push(de)}})})}Y.getWParam=function(){return typeof document<"u"?0:-1},ve&&r.arrForEach(ve,function(B){if(B&&B.identifier&&B.version){var Te=B.identifier+"="+B.version;Y.pluginVersionStringArr.push(Te)}}),Y.pluginVersionString=Y.pluginVersionStringArr.join(";");try{Be.initialize(pe,ve,be,ot),Y.pollInternalLogs("InternalLog")}catch(B){var te=Y.logger,De=r.dumpObj(B);De.indexOf("channels")!==-1&&(De+=`
 - Channels must be provided through config.channels only!`),te.throwInternal(1,514,"SDK Initialization Failed - no telemetry will be sent: "+De)}},function(){return{config:pe,extensions:ve,logger:be,notificationManager:ot}})},Y.track=function(pe){r.doPerf(Y,function(){return"AppInsightsCore.track"},function(){var ve=pe;if(ve){ve.timings=ve.timings||{},ve.timings.trackStart=Zt(),Pt(ve.latency)||(ve.latency=1);var be=ve.ext=ve.ext||{};be.sdk=be.sdk||{},be.sdk.ver=q;var ot=ve.baseData=ve.baseData||{};ot[fe]||(ot[fe]={});var Ze=ot[fe];Ze[W]||(Ze[W]=""),Y.pluginVersionString!==""&&(Ze[W]=Y.pluginVersionString)}Be.track(ve)},function(){return{item:pe}},!pe.sync)}}),ne}return x}(r.AppInsightsCore),Tt=function(w){t.__extendsFn(x,w);function x(){var ne=w.call(this)||this;return a(x,ne,function(Y,Be){Y.initialize=function(pe,ve,be,ot){pe&&!pe.endpointUrl&&(pe.endpointUrl="https://browser.events.data.microsoft.com/OneCollector/1.0/"),Y.getWParam=function(){return me?0:-1};try{Be.initialize(pe,ve,be,ot)}catch(Ze){r._throwInternal(Y.logger,1,514,"Initialization Failed: "+r.dumpObj(Ze)+`
 - Note: Channels must be provided through config.channels only`)}},Y.track=function(pe){var ve=pe;if(ve){var be=ve.ext=ve.ext||{};be.sdk=be.sdk||{},be.sdk.ver=q}Be.track(ve)}}),ne}return x}(r.BaseCore),zr=r.isFunction;function Bi(w,x,ne){return function(Y){w[x]=Y,ne()}}var Xn=function(){function w(x){var ne=0,Y=null,Be=[];a(w,this,function(Ze){Ze.then=function(te,De){return new w(function(B,Te){pe(te,De,B,Te)})},Ze.catch=function(te){return Ze.then(null,te)}});function pe(Ze,te,De,B){Be.push(function(){var Te;try{ne===1?Te=zr(Ze)?Ze(Y):Y:Te=zr(te)?te(Y):Y,Te instanceof w?Te.then(De,B):ne===2&&!zr(te)?B(Te):De(Te)}catch(de){B(de);return}}),ne!==0&&ve()}function ve(){if(Be.length>0){var Ze=Be.slice();Be=[],setTimeout(function(){for(var te=0,De=Ze.length;te<De;++te)try{Ze[te]()}catch{}},0)}}function be(Ze){ne===0&&(Y=Ze,ne=1,ve())}function ot(Ze){ne===0&&(Y=Ze,ne=2,ve())}(function(){if(!zr(x))throw new TypeError("ESPromise: resolvedFunc argument is not a Function");try{x(be,ot)}catch(te){ot(te)}})()}return w.resolve=function(x){return x instanceof w?x:x&&zr(x.then)?new w(function(ne,Y){try{x.then(ne,Y)}catch(Be){Y(Be)}}):new w(function(ne){ne(x)})},w.reject=function(x){return new w(function(ne,Y){Y(x)})},w.all=function(x){if(!(!x||!x.length))return new w(function(ne,Y){try{for(var Be=[],pe=0,ve=0;ve<x.length;ve++){var be=x[ve];be&&zr(be.then)?(pe++,be.then(Bi(Be,ve,function(){--pe===0&&ne(Be)}),Y)):Be[ve]=be}pe===0&&setTimeout(function(){ne(Be)},0)}catch(ot){Y(ot)}})},w.race=function(x){return new w(function(ne,Y){if(!(!x||!x.length))try{for(var Be=function(ve){var be=x[ve];be&&zr(be.then)?be.then(ne,Y):setTimeout(function(){ne(be)},0)},pe=0;pe<x.length;pe++)Be(pe)}catch(ve){Y(ve)}})},w}(),So=6e5,Gi=0,en=[],hn=[],Vi=[];function Wn(){return new Date().getTime()}var Pa=function(){function w(x,ne){var Y=0,Be=(x||"<unnamed>")+"."+Gi;Gi++,a(w,this,function(be){var ot=null,Ze=0;be.scheduleEvent=function(De,B,Te){var de=Be+"."+Ze;Ze++,B&&(de+="-("+B+")");var _t=de+"{"+Y+"}";Y++;var Re={evt:null,tm:Wn(),id:_t,isRunning:!1,isAborted:!1};return ot?Re.evt=oe(Re,ot):Re.evt=ie(Re),ot=Re,ot.evt._schId=_t,Re.evt;function gr(K){for(var D=Wn(),_e=D-So,le=K.length,X=0;X<le;){var ke=K[X];if(ke&&ke.tm<_e){var Ge=null;ke.abort?(Ge="Aborting ["+ke.id+"] due to Excessive runtime ("+(D-ke.tm)+" ms)",ke.abort(Ge)):Ge="Removing ["+ke.id+"] due to Excessive runtime ("+(D-ke.tm)+" ms)",ve(Ge),K.splice(X,1),le--}else X++}}function br(K,D){var _e=!1,le=te(en,K);if(le||(le=te(Vi,K),_e=!0),le){le.to&&(clearTimeout(le.to),le.to=null);var X=Wn()-le.tm;D?_e?ve("Timed out event ["+K+"] finally complete -- "+X+" ms"):pe("Promise ["+K+"] Complete -- "+X+" ms"):(Vi.push(le),ve("Event ["+K+"] Timed out and removed -- "+X+" ms"))}else pe("Failed to remove ["+K+"] from running queue");ot&&ot.id===K&&(ot=null),gr(en),gr(hn),gr(Vi)}function Sn(K,D){return function(_e){return br(K,!0),D&&D(_e),_e}}function Yn(K,D,_e,le){D.then(function(X){return X instanceof Xn?(pe("Event ["+K+"] returned a promise -- waiting"),Yn(K,X,_e,le),X):Sn(K,_e)(X)},Sn(K,le))}function zi(K,D){var _e=K.id;return new Xn(function(le,X){pe("Event ["+_e+"] Starting -- waited for "+(K.wTm||"--")+" ms"),K.isRunning=!0,K.abort=function(Ge){K.abort=null,K.isAborted=!0,br(_e,!1),X(new Error(Ge))};var ke=D(_e);ke instanceof Xn?(Te&&(K.to=setTimeout(function(){br(_e,!1),X(new Error("Timed out after ["+Te+"] ms"))},Te)),Yn(_e,ke,function(Ge){pe("Event ["+_e+"] Resolving after "+(Wn()-K.tm)+" ms"),le(Ge)},X)):(pe("Promise ["+_e+"] Auto completed as the start action did not return a promise"),le())})}function ie(K){var D=Wn();return K.wTm=D-K.tm,K.tm=D,K.isAborted?Xn.reject(new Error("["+de+"] was aborted")):(en.push(K),zi(K,De))}function oe(K,D){var _e=new Xn(function(le,X){var ke=Wn()-D.tm,Ge=D.id;pe("["+de+"] is waiting for ["+Ge+":"+ke+" ms] to complete before starting -- ["+hn.length+"] waiting and ["+en.length+"] running"),K.abort=function(It){K.abort=null,te(hn,de),K.isAborted=!0,X(new Error(It))},D.evt.then(function(It){te(hn,de),ie(K).then(le,X)},function(It){te(hn,de),ie(K).then(le,X)})});return hn.push(K),_e}};function te(De,B){for(var Te=0;Te<De.length;Te++)if(De[Te].id===B)return De.splice(Te,1)[0];return null}});function pe(be){var ot=r.getGlobal();ot&&ot.QUnit&&console&&console.log("ESPromiseScheduler["+Be+"] "+be)}function ve(be){ne&&ne.warnToConsole("ESPromiseScheduler["+Be+"] "+be)}}return w.incomplete=function(){return en},w.waitingToStart=function(){return hn},w}(),Ca=function(){function w(x){var ne=this,Y={},Be=[],pe=[];x&&pe.push(x);function ve(te,De){var B,Te=Y[te];if(Te&&(B=Te[De]),!B&&B!==null){if(r.isString(te)&&r.isString(De))if(pe.length>0){for(var de=0;de<pe.length;de++)if(pe[de].handleField(te,De)){B={canHandle:!0,fieldHandler:pe[de]};break}}else Be.length===0&&(B={canHandle:!0});if(!B&&B!==null){B=null;for(var de=0;de<Be.length;de++)if(Be[de].handleField(te,De)){B={canHandle:!0,handler:Be[de],fieldHandler:null};break}}Te||(Te=Y[te]={}),Te[De]=B}return B}ne.addSanitizer=function(te){te&&(Be.push(te),Y={})},ne.addFieldSanitizer=function(te){te&&(pe.push(te),Y={})},ne.handleField=function(te,De){var B=ve(te,De);return B?B.canHandle:!1},ne.value=function(te,De,B,Te){var de=ve(te,De);if(de&&de.canHandle){if(!de||!de.canHandle)return null;if(de.handler)return de.handler.value(te,De,B,Te);if(!r.isString(De)||r.isNullOrUndefined(B)||B==="")return null;var _t=null,Re=Xe(B);if((Re&8192)===8192){var gr=Re&-8193;if(_t=B,!Ot(_t.value)||gr!==1&&gr!==2&&gr!==3&&(gr&4096)!==4096)return null}else Re===1||Re===2||Re===3||(Re&4096)===4096?_t=ot(te,De,B):Re===4&&(_t=ot(te,De,Te?JSON.stringify(B):B));if(_t)return be(de,te,De,Re,_t,Te)}return null},ne.property=function(te,De,B,Te){var de=ve(te,De);if(!de||!de.canHandle||!r.isString(De)||r.isNullOrUndefined(B)||!Ot(B.value))return null;var _t=Xe(B.value);return _t===0?null:be(de,te,De,_t,B,Te)};function be(te,De,B,Te,de,_t){if(te.handler)return te.handler.property(De,B,de,_t);if(!r.isNullOrUndefined(de.kind)){if((Te&4096)===4096||!Ur(de.kind))return null;de.value=de.value.toString()}return Ze(te.fieldHandler,De,B,Te,de)}function ot(te,De,B){return Ot(B)?{value:B}:null}function Ze(te,De,B,Te,de){if(de&&te){var _t=te.getSanitizer(De,B,Te,de.kind,de.propertyType);if(_t)if(Te===4){var Re={},gr=de.value;r.objForEachKey(gr,function(Sn,Yn){var zi=De+"."+B;if(Ot(Yn)){var ie=ot(zi,Sn,Yn);ie=Ze(te,zi,Sn,Xe(Yn),ie),ie&&(Re[Sn]=ie.value)}}),de.value=Re}else{var br={path:De,name:B,type:Te,prop:de,sanitizer:ne};de=_t.call(ne,br)}}return de}}return w.getFieldType=Xe,w}();e.BaseTelemetryPlugin=r.BaseTelemetryPlugin,e.DiagnosticLogger=r.DiagnosticLogger,e.EventHelper=r.EventHelper,e.EventsDiscardedReason=r.EventsDiscardedReason,e.InternalAppInsightsCore=r.AppInsightsCore,e.InternalBaseCore=r.BaseCore,e.LoggingSeverity=r.LoggingSeverity,e.MinChannelPriorty=r.MinChannelPriorty,e.NotificationManager=r.NotificationManager,e.PerfEvent=r.PerfEvent,e.PerfManager=r.PerfManager,e.ProcessTelemetryContext=r.ProcessTelemetryContext,e.Undefined=r.strUndefined,e._InternalLogMessage=r._InternalLogMessage,e._InternalMessageId=r._InternalMessageId,e.__getRegisteredEvents=r.__getRegisteredEvents,e._throwInternal=r._throwInternal,e.addEventHandler=r.addEventHandler,e.addEventListeners=r.addEventListeners,e.addPageHideEventListener=r.addPageHideEventListener,e.addPageShowEventListener=r.addPageShowEventListener,e.addPageUnloadEventListener=r.addPageUnloadEventListener,e.areCookiesSupported=r.areCookiesSupported,e.arrForEach=r.arrForEach,e.arrIndexOf=r.arrIndexOf,e.arrMap=r.arrMap,e.arrReduce=r.arrReduce,e.attachEvent=r.attachEvent,e.cookieAvailable=r.areCookiesSupported,e.createCookieMgr=r.createCookieMgr,e.createEnumStyle=r.createEnumStyle,e.createProcessTelemetryContext=r.createProcessTelemetryContext,e.createTraceParent=r.createTraceParent,e.createUniqueNamespace=r.createUniqueNamespace,e.createUnloadHandlerContainer=r.createUnloadHandlerContainer,e.dateNow=r.dateNow,e.detachEvent=r.detachEvent,e.disallowsSameSiteNone=r.uaDisallowsSameSiteNone,e.doPerf=r.doPerf,e.dumpObj=r.dumpObj,e.eventOff=r.eventOff,e.eventOn=r.eventOn,e.findW3cTraceParent=r.findW3cTraceParent,e.formatTraceParent=r.formatTraceParent,e.generateW3CId=r.generateW3CId,e.getConsole=r.getConsole,e.getCrypto=r.getCrypto,e.getDocument=r.getDocument,e.getExceptionName=r.getExceptionName,e.getGlobal=r.getGlobal,e.getGlobalInst=r.getGlobalInst,e.getHistory=r.getHistory,e.getIEVersion=r.getIEVersion,e.getISOString=r.toISOString,e.getJSON=r.getJSON,e.getLocation=r.getLocation,e.getMsCrypto=r.getMsCrypto,e.getNavigator=r.getNavigator,e.getPerformance=r.getPerformance,e.getSetValue=r.getSetValue,e.getWindow=r.getWindow,e.hasDocument=r.hasDocument,e.hasHistory=r.hasHistory,e.hasJSON=r.hasJSON,e.hasNavigator=r.hasNavigator,e.hasOwnProperty=r.hasOwnProperty,e.hasWindow=r.hasWindow,e.isArray=r.isArray,e.isBeaconsSupported=r.isBeaconsSupported,e.isBoolean=r.isBoolean,e.isDate=r.isDate,e.isError=r.isError,e.isFetchSupported=r.isFetchSupported,e.isFunction=r.isFunction,e.isIE=r.isIE,e.isNotTruthy=r.isNotTruthy,e.isNullOrUndefined=r.isNullOrUndefined,e.isNumber=r.isNumber,e.isObject=r.isObject,e.isReactNative=r.isReactNative,e.isSampledFlag=r.isSampledFlag,e.isString=r.isString,e.isTruthy=r.isTruthy,e.isTypeof=r.isTypeof,e.isUndefined=r.isUndefined,e.isValidSpanId=r.isValidSpanId,e.isValidTraceId=r.isValidTraceId,e.isValidTraceParent=r.isValidTraceParent,e.isXhrSupported=r.isXhrSupported,e.mergeEvtNamespace=r.mergeEvtNamespace,e.newGuid=r.newGuid,e.newId=r.newId,e.normalizeJsName=r.normalizeJsName,e.objCreate=r.objCreate,e.objDefineAccessors=r.objDefineAccessors,e.objForEachKey=r.objForEachKey,e.objFreeze=r.objFreeze,e.objKeys=r.objKeys,e.objSeal=r.objSeal,e.optimizeObject=r.optimizeObject,e.parseTraceParent=r.parseTraceParent,e.perfNow=r.perfNow,e.proxyAssign=r.proxyAssign,e.proxyFunctionAs=r.proxyFunctionAs,e.proxyFunctions=r.proxyFunctions,e.random32=r.random32,e.randomValue=r.randomValue,e.removeEventHandler=r.removeEventHandler,e.removeEventListeners=r.removeEventListeners,e.removePageHideEventListener=r.removePageHideEventListener,e.removePageShowEventListener=r.removePageShowEventListener,e.removePageUnloadEventListener=r.removePageUnloadEventListener,e.safeGetCookieMgr=r.safeGetCookieMgr,e.safeGetLogger=r.safeGetLogger,e.setEnableEnvMocks=r.setEnableEnvMocks,e.setValue=r.setValue,e.strContains=r.strContains,e.strEndsWith=r.strEndsWith,e.strFunction=r.strFunction,e.strObject=r.strObject,e.strPrototype=r.strPrototype,e.strStartsWith=r.strStartsWith,e.strTrim=r.strTrim,e.strUndefined=r.strUndefined,e.throwError=r.throwError,e.toISOString=r.toISOString,e.useXDomainRequest=r.useXDomainRequest,e.AppInsightsCore=at,e.BaseCore=Tt,e.CoreUtils=A,e.ESPromise=Xn,e.ESPromiseScheduler=Pa,e.EventLatency=u,e.EventPersistence=d,e.EventPropertyType=f,e.FullVersionString=q,e.TraceLevel=h,e.Utils=m,e.ValueKind=s,e.ValueSanitizer=Ca,e.Version=C,e._ExtendedInternalMessageId=E,e.createGuid=_r,e.deleteCookie=Dr,e.disableCookies=wr,e.extend=ur,e.getCommonSchemaMetaData=jr,e.getCookie=un,e.getCookieValue=kr,e.getFieldValueType=Xe,e.getTenantId=Gt,e.getTime=Zt,e.isArrayValid=Ee,e.isChromium=O,e.isDocumentObjectAvailable=me,e.isLatency=Pt,e.isUint8ArrayAvailable=Xt,e.isValueAssigned=Ot,e.isValueKind=Ur,e.isWindowObjectAvailable=$t,e.openXhr=N,e.sanitizeProperty=Ct,e.setCookie=Fr,e.setProcessTelemetryTimings=Qe,function(w,x,ne){var Y=Object.defineProperty;if(Y)try{return Y(w,x,ne)}catch{}return ne&&typeof ne.value!==void 0&&(w[x]=ne.value),w}(e,"__esModule",{value:!0})})});var bE=_((Vc,IE)=>{(function(e,t){typeof Vc=="object"&&typeof IE<"u"?t(Vc):typeof define=="function"&&define.amd?define(["exports"],t):(e=typeof globalThis<"u"?globalThis:e||self,t((e.Microsoft=e.Microsoft||{},e.Microsoft.ApplicationInsights=e.Microsoft.ApplicationInsights||{},e.Microsoft.ApplicationInsights.Shims={})))})(Vc,function(e){"use strict";var t="function",r="object",n="undefined",i="prototype",a="hasOwnProperty",s="default",u=Object,f=u[i],d=u.assign,h=u.create,E=u.defineProperty,S=f[a],C=null;function q(m){return m===void 0&&(m=!0),(!C||!m)&&(typeof globalThis!==n&&globalThis&&(C=globalThis),typeof self!==n&&self&&(C=self),typeof window!==n&&window&&(C=window),typeof global!==n&&global&&(C=global)),C}function se(m){throw new TypeError(m)}function Ce(m){var A=h;if(A)return A(m);if(m==null)return{};var O=typeof m;O!==r&&O!==t&&se("Object prototype may only be an Object:"+m);function N(){}return N[i]=m,new N}var Fe=(q()||{}).Symbol,et=(q()||{}).Reflect,bt=!!et,me="decorate",$t="metadata",Ot="getOwnPropertySymbols",Gt="iterator",Xt=function(m){for(var A,O=1,N=arguments.length;O<N;O++){A=arguments[O];for(var W in A)f[a].call(A,W)&&(m[W]=A[W])}return m},Pt=d||Xt,Ct=function(m,A){return Ct=u.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,N){O.__proto__=N}||function(O,N){for(var W in N)N[a](W)&&(O[W]=N[W])},Ct(m,A)};function jr(m,A){typeof A!==t&&A!==null&&se("Class extends value "+String(A)+" is not a constructor or null"),Ct(m,A);function O(){this.constructor=m}m[i]=A===null?Ce(A):(O[i]=A[i],new O)}function wr(m,A){var O={};for(var N in m)S.call(m,N)&&A.indexOf(N)<0&&(O[N]=m[N]);if(m!=null&&typeof u[Ot]===t)for(var W=0,fe=u[Ot](m);W<fe.length;W++)A.indexOf(fe[W])<0&&f.propertyIsEnumerable.call(m,fe[W])&&(O[fe[W]]=m[fe[W]]);return O}function Fr(m,A,O,N){var W=arguments.length,fe=W<3?A:N===null?N=u.getOwnPropertyDescriptor(A,O):N,at;if(bt&&typeof et[me]===t)fe=et[me](m,A,O,N);else for(var Tt=m.length-1;Tt>=0;Tt--)(at=m[Tt])&&(fe=(W<3?at(fe):W>3?at(A,O,fe):at(A,O))||fe);return W>3&&fe&&E(A,O,fe),fe}function Dr(m,A){return function(O,N){A(O,N,m)}}function un(m,A){if(bt&&et[$t]===t)return et[$t](m,A)}function kr(m,A){for(var O in m)O!==s&&!S.call(A,O)&&_r(A,m,O)}function _r(m,A,O,N){N===void 0&&(N=O),h?E(m,N,{enumerable:!0,get:function(){return A[O]}}):m[N]=A[O]}function ur(m){var A=typeof Fe===t&&Fe[Gt],O=A&&m[A],N=0;if(O)return O.call(m);if(m&&typeof m.length=="number")return{next:function(){return m&&N>=m.length&&(m=void 0),{value:m&&m[N++],done:!m}}};se(A?"Object is not iterable.":"Symbol.iterator is not defined.")}function Zt(m,A){var O=typeof Fe===t&&m[Fe[Gt]];if(!O)return m;var N=O.call(m),W,fe=[],at;try{for(;(A===void 0||A-- >0)&&!(W=N.next()).done;)fe.push(W.value)}catch(Tt){at={error:Tt}}finally{try{W&&!W.done&&(O=N.return)&&O.call(N)}finally{if(at)throw at.error}}return fe}function Ur(){for(var m=arguments,A=0,O=0,N=m.length;O<N;O++)A+=m[O].length;for(var W=Array(A),fe=0,O=0;O<N;O++)for(var at=m[O],Tt=0,zr=at.length;Tt<zr;Tt++,fe++)W[fe]=at[Tt];return W}function ee(m,A){for(var O=0,N=A.length,W=m.length;O<N;O++,W++)m[W]=A[O];return m}function ge(m,A){return E?E(m,"raw",{value:A}):m.raw=A,m}function Ee(m){if(m&&m.__esModule)return m;var A={};if(m!=null)for(var O in m)O!==s&&Object.prototype.hasOwnProperty.call(m,O)&&_r(A,m,O);return h?E(A,s,{enumerable:!0,value:m}):A[s]=m,A}function Qe(m){return m&&m.__esModule?m:{strDefault:m}}function Xe(){var m=q()||{};(function(A,O,N,W){A.__assign||(A.__assign=d||O),A.__extends||(A.__extends=N),A.__createBinding||(A.__createBinding=W)})(m,Pt,jr,_r),__assign||(__assign=m.__assign),__extends||(__extends=m.__extends),__createBinding||(__createBinding=m.__createBinding)}e.ObjAssign=d,e.ObjClass=u,e.ObjCreate=h,e.ObjDefineProperty=E,e.ObjHasOwnProperty=S,e.ObjProto=f,e.__assignFn=Pt,e.__createBindingFn=_r,e.__decorateFn=Fr,e.__exportStarFn=kr,e.__exposeGlobalTsLib=Xe,e.__extendsFn=jr,e.__importDefaultFn=Qe,e.__importStarFn=Ee,e.__makeTemplateObjectFn=ge,e.__metadataFn=un,e.__paramFn=Dr,e.__readFn=Zt,e.__restFn=wr,e.__spreadArrayFn=ee,e.__spreadArraysFn=Ur,e.__valuesFn=ur,e.getGlobal=q,e.objCreateFn=Ce,e.strDefault=s,e.strShimFunction=t,e.strShimHasOwnProperty=a,e.strShimObject=r,e.strShimPrototype=i,e.strShimUndefined=n,e.throwTypeError=se,function(m,A,O){var N=Object.defineProperty;if(N)try{return N(m,A,O)}catch{}return O&&typeof O.value!==void 0&&(m[A]=O.value),m}(e,"__esModule",{value:!0})})});var PE=_((zc,OE)=>{(function(e,t){typeof zc=="object"&&typeof OE<"u"?t(zc,bE(),gp(),mp()):typeof define=="function"&&define.amd?define(["exports","@microsoft/applicationinsights-shims","@microsoft/dynamicproto-js","@microsoft/1ds-core-js"],t):(e=typeof globalThis<"u"?globalThis:e||self,t(e.oneDS=e.oneDS||{},e.applicationinsightsShims,e.dynamicProto,e._1dsCoreJs))})(zc,function(e,t,r,n){"use strict";function i(ie){return ie&&typeof ie=="object"&&"default"in ie?ie.default:ie}var a=i(r),s="REAL_TIME",u="NEAR_REAL_TIME",f="BEST_EFFORT",d="POST",h="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",E="drop",S="send",C="requeue",q="rspFail",se="oth",Ce="no-cache, no-store",Fe="application/x-json-stream",et="cache-control",bt="content-type",me="kill-tokens",$t="kill-duration",Ot="kill-duration-seconds",Gt="time-delta-millis",Xt="client-version",Pt="client-id",Ct="time-delta-to-apply-millis",jr="upload-time",wr="apikey",Fr="AuthMsaDeviceTicket",Dr="AuthXToken",un="NoResponseBody",kr="msfpc";function _r(ie){var oe=(ie.ext||{}).intweb;return oe&&n.isValueAssigned(oe[kr])?oe[kr]:null}function ur(ie){for(var oe=null,K=0;oe===null&&K<ie.length;K++)oe=_r(ie[K]);return oe}var Zt=function(){function ie(oe,K){var D=K?[].concat(K):[],_e=this,le=ur(D);_e.iKey=function(){return oe},_e.Msfpc=function(){return le||""},_e.count=function(){return D.length},_e.events=function(){return D},_e.addEvent=function(X){return X?(D.push(X),le||(le=_r(X)),!0):!1},_e.split=function(X,ke){var Ge;if(X<D.length){var It=D.length-X;n.isNullOrUndefined(ke)||(It=ke<It?ke:It),Ge=D.splice(X,It),le=ur(D)}return new ie(oe,Ge)}}return ie.create=function(oe,K){return new ie(oe,K)},ie}(),Ur=20,ee=3984588,ge=65e3,Ee=2e6,Qe=Math.min(Ee,ge),Xe="metadata",m="f",A=/\./,O=function(){function ie(oe,K,D,_e){var le="data",X="baseData",ke="ext",Ge=!!_e,It=!0,mr=K,Or={};a(ie,this,function(Dt){Dt.createPayload=function(qe,Ue,rt,xt,Ve,ft){return{apiKeys:[],payloadBlob:"",overflow:null,sizeExceed:[],failedEvts:[],batches:[],numEvents:0,retryCnt:qe,isTeardown:Ue,isSync:rt,isBeacon:xt,sendType:ft,sendReason:Ve}},Dt.appendPayload=function(qe,Ue,rt){var xt=qe&&Ue&&!qe.overflow;return xt&&n.doPerf(oe,function(){return"Serializer:appendPayload"},function(){for(var Ve=Ue.events(),ft=qe.payloadBlob,Mt=qe.numEvents,mt=!1,gt=[],Lt=[],Er=qe.isBeacon,Le=Er?ge:ee,cr=Er?Qe:Ee,tt=0,lr=0;tt<Ve.length;){var qt=Ve[tt];if(qt){if(Mt>=rt){qe.overflow=Ue.split(tt);break}var Ne=Dt.getEventBlob(qt);if(Ne&&Ne.length<=cr){var Et=Ne.length,Qn=ft.length;if(Qn+Et>Le){qe.overflow=Ue.split(tt);break}ft&&(ft+=`
`),ft+=Ne,lr++,lr>Ur&&(ft.substr(0,1),lr=0),mt=!0,Mt++}else Ne?gt.push(qt):Lt.push(qt),Ve.splice(tt,1),tt--}tt++}if(gt&&gt.length>0&&qe.sizeExceed.push(Zt.create(Ue.iKey(),gt)),Lt&&Lt.length>0&&qe.failedEvts.push(Zt.create(Ue.iKey(),Lt)),mt){qe.batches.push(Ue),qe.payloadBlob=ft,qe.numEvents=Mt;var Hr=Ue.iKey();n.arrIndexOf(qe.apiKeys,Hr)===-1&&qe.apiKeys.push(Hr)}},function(){return{payload:qe,theBatch:{iKey:Ue.iKey(),evts:Ue.events()},max:rt}}),xt},Dt.getEventBlob=function(qe){try{return n.doPerf(oe,function(){return"Serializer.getEventBlob"},function(){var Ue={};Ue.name=qe.name,Ue.time=qe.time,Ue.ver=qe.ver,Ue.iKey="o:"+n.getTenantId(qe.iKey);var rt={},xt=qe[ke];xt&&(Ue[ke]=rt,n.objForEachKey(xt,function(Mt,mt){var gt=rt[Mt]={};lt(mt,gt,"ext."+Mt,!0,null,null,!0)}));var Ve=Ue[le]={};Ve.baseType=qe.baseType;var ft=Ve[X]={};return lt(qe.baseData,ft,X,!1,[X],function(Mt,mt,gt){N(rt,Mt,mt,gt)},It),lt(qe.data,Ve,le,!1,[],function(Mt,mt,gt){N(rt,Mt,mt,gt)},It),JSON.stringify(Ue)},function(){return{item:qe}})}catch{return null}};function Pe(qe,Ue){var rt=Or[qe];return rt===void 0&&(qe.length>=7&&(rt=n.strStartsWith(qe,"ext.metadata")||n.strStartsWith(qe,"ext.web")),Or[qe]=rt),rt}function lt(qe,Ue,rt,xt,Ve,ft,Mt){n.objForEachKey(qe,function(mt,gt){var Lt=null;if(gt||n.isValueAssigned(gt)){var Er=rt,Le=mt,cr=Ve,tt=Ue;if(Ge&&!xt&&A.test(mt)){var lr=mt.split("."),qt=lr.length;if(qt>1){cr&&(cr=cr.slice());for(var Ne=0;Ne<qt-1;Ne++){var Et=lr[Ne];tt=tt[Et]=tt[Et]||{},Er+="."+Et,cr&&cr.push(Et)}Le=lr[qt-1]}}var Qn=xt&&Pe(Er);if(!Qn&&mr&&mr.handleField(Er,Le)?Lt=mr.value(Er,Le,gt,D):Lt=n.sanitizeProperty(Le,gt,D),Lt){var Hr=Lt.value;if(tt[Le]=Hr,ft&&ft(cr,Le,Lt),Mt&&typeof Hr=="object"&&!n.isArray(Hr)){var Kr=cr;Kr&&(Kr=Kr.slice(),Kr.push(Le)),lt(gt,Hr,Er+"."+Le,xt,Kr,ft,Mt)}}}})}})}return ie}();function N(ie,oe,K,D){if(D&&ie){var _e=n.getCommonSchemaMetaData(D.value,D.kind,D.propertyType);if(_e>-1){var le=ie[Xe];le||(le=ie[Xe]={f:{}});var X=le[m];if(X||(X=le[m]={}),oe)for(var ke=0;ke<oe.length;ke++){var Ge=oe[ke];X[Ge]||(X[Ge]={f:{}});var It=X[Ge][m];It||(It=X[Ge][m]={}),X=It}X=X[K]={},n.isArray(D.value)?X.a={t:_e}:X.t=_e}}}var W=.8,fe=1.2,at=3e3,Tt=6e5;function zr(ie){return!(ie>=300&&ie<500&&ie!=408&&ie!=429||ie==501||ie==505)}function Bi(ie){var oe=0,K=at*W,D=at*fe,_e=Math.floor(Math.random()*(D-K))+K;return oe=Math.pow(2,ie)*_e,Math.min(oe,Tt)}var Xn=1e3,So=function(){function ie(){var oe={};function K(D){var _e=[];return D&&n.arrForEach(D,function(le){_e.push(n.strTrim(le))}),_e}a(ie,this,function(D){D.setKillSwitchTenants=function(_e,le){if(_e&&le)try{var X=K(_e.split(","));if(le==="this-request-only")return X;for(var ke=parseInt(le,10)*Xn,Ge=0;Ge<X.length;++Ge)oe[X[Ge]]=n.dateNow()+ke}catch{return[]}return[]},D.isTenantKilled=function(_e){var le=oe,X=n.strTrim(_e);return le[X]!==void 0&&le[X]>n.dateNow()?!0:(delete le[X],!1)}})}return ie}(),Gi=function(){function ie(){var oe=!0,K=!0,D=!0,_e="use-collector-delta",le=!1;a(ie,this,function(X){X.allowRequestSending=function(){return oe},X.firstRequestSent=function(){D&&(D=!1,le||(oe=!1))},X.shouldAddClockSkewHeaders=function(){return K},X.getClockSkewHeaderValue=function(){return _e},X.setClockSkew=function(ke){le||(ke?(_e=ke,K=!0,le=!0):K=!1,oe=!0)}})}return ie}(),en,hn="sendAttempt",Vi="&"+un+"=true",Wn=(en={},en[1]=C,en[100]=C,en[200]="sent",en[8004]=E,en[8003]=E,en),Pa={},Ca={};function w(ie,oe,K){Pa[ie]=oe,K!==!1&&(Ca[oe]=ie)}w(Fr,Fr,!1),w(Xt,Xt),w(Pt,"Client-Id"),w(wr,wr),w(Ct,Ct),w(jr,jr),w(Dr,Dr);function x(ie){try{return ie.responseText}catch{}return""}function ne(ie,oe){var K=!1;if(ie&&oe){var D=n.objKeys(ie);if(D&&D.length>0)for(var _e=oe.toLowerCase(),le=0;le<D.length;le++){var X=D[le];if(X&&n.hasOwnProperty(oe,X)&&X.toLowerCase()===_e){K=!0;break}}}return K}function Y(ie,oe,K,D){oe&&K&&K.length>0&&(D&&Pa[oe]?(ie.hdrs[Pa[oe]]=K,ie.useHdrs=!0):ie.url+="&"+oe+"="+K)}var Be=function(){function ie(oe,K,D,_e,le){this._responseHandlers=[];var X="?cors=true&"+bt.toLowerCase()+"="+Fe,ke=new So,Ge=!1,It=new Gi,mr=!1,Or=0,Dt,Pe,lt,qe=!0,Ue=[],rt={},xt=[],Ve=null,ft=!1,Mt,mt=!1,gt=!1,Lt,Er;a(ie,this,function(Le){var cr=!0;Le.initialize=function(T,j,k,$,ue){var He;ue||(ue={}),X=T+X,gt=n.isUndefined(ue.avoidOptions)?!0:!ue.avoidOptions,lt=j,Mt=j.getCookieMgr(),ft=!lt.config.disableEventTimings;var we=!!lt.config.enableCompoundKey;Dt=k;var Ye=ue.valueSanitizer,je=ue.stringifyObjects;n.isUndefined(ue.enableCompoundKey)||(we=!!ue.enableCompoundKey),Lt=ue.xhrTimeout,Er=ue.disableXhrSync,mr=!n.isReactNative(),Ve=new O(lt,Ye,je,we);var ce=$,I=ue.alwaysUseXhrOverride?$:null,M=ue.alwaysUseXhrOverride?$:null;if(!$){qe=!1;var U=n.getLocation();U&&U.protocol&&U.protocol.toLowerCase()==="file:"&&(cr=!1);var Z=[];n.isReactNative()?Z=[2,1]:Z=[1,2,3];var ye=ue.transports;ye&&(n.isNumber(ye)?Z=[ye].concat(Z):n.isArray(ye)&&(Z=ye.concat(Z))),$=tt(Z,!1),ce=tt(Z,!0),$||Dt.diagLog().warnToConsole("No available transport to send events")}Pe=(He={},He[0]=$,He[1]=ce||tt([1,2,3],!0),He[2]=I||tt([3,2],!0)||ce||tt([1],!0),He[3]=M||tt([2,3],!0)||ce||tt([1],!0),He)};function tt(T,j){for(var k=0,$=null,ue=0;$==null&&ue<T.length;)k=T[ue],k===1?n.useXDomainRequest()?$=lr:n.isXhrSupported()&&($=Ne):k===2&&n.isFetchSupported(j)?$=qt:mr&&k===3&&n.isBeaconsSupported()&&($=Qn),ue++;return $?{_transport:k,_isSync:j,sendPOST:$}:null}Le._getDbgPlgTargets=function(){return[Pe[0],ke,Ve,Pe]};function lr(T,j,k){var $=new XDomainRequest;$.open(d,T.urlString),T.timeout&&($.timeout=T.timeout),$.onload=function(){var ue=x($);Et(j,200,{},ue),On(ue)},$.onerror=function(){Et(j,400,{})},$.ontimeout=function(){Et(j,500,{})},$.onprogress=function(){},k?$.send(T.data):le.set(function(){$.send(T.data)},0)}function qt(T,j,k){var $,ue=T.urlString,He=!1,we=!1,Ye=($={body:T.data,method:d},$[h]=!0,$);k&&(Ye.keepalive=!0,T._sendReason===2&&(He=!0,ue+=Vi)),cr&&(Ye.credentials="include"),T.headers&&n.objKeys(T.headers).length>0&&(Ye.headers=T.headers),fetch(ue,Ye).then(function(je){var ce={},I="";je.headers&&je.headers.forEach(function(M,U){ce[U]=M}),je.body&&je.text().then(function(M){I=M}),we||(we=!0,Et(j,je.status,ce,I),On(I))}).catch(function(je){we||(we=!0,Et(j,0,{}))}),He&&!we&&(we=!0,Et(j,200,{})),!we&&T.timeout>0&&le.set(function(){we||(we=!0,Et(j,500,{}))},T.timeout)}function Ne(T,j,k){var $=T.urlString;function ue(je,ce,I){if(!je[I]&&ce&&ce.getResponseHeader){var M=ce.getResponseHeader(I);M&&(je[I]=n.strTrim(M))}return je}function He(je){var ce={};return je.getAllResponseHeaders?ce=wa(je.getAllResponseHeaders()):(ce=ue(ce,je,Gt),ce=ue(ce,je,$t),ce=ue(ce,je,Ot)),ce}function we(je,ce){Et(j,je.status,He(je),ce)}k&&T.disableXhrSync&&(k=!1);var Ye=n.openXhr(d,$,cr,!0,k,T.timeout);n.objForEachKey(T.headers,function(je,ce){Ye.setRequestHeader(je,ce)}),Ye.onload=function(){var je=x(Ye);we(Ye,je),On(je)},Ye.onerror=function(){we(Ye)},Ye.ontimeout=function(){we(Ye)},Ye.send(T.data)}function Et(T,j,k,$){try{T(j,k,$)}catch(ue){n._throwInternal(Dt.diagLog(),2,518,n.dumpObj(ue))}}function Qn(T,j,k){var $=T,ue=200,He=$._thePayload,we=T.urlString+Vi;try{var Ye=n.getNavigator();if(!Ye.sendBeacon(we,T.data))if(He){var je=[];n.arrForEach(He.batches,function(ce){if(je&&ce&&ce.count()>0){for(var I=ce.events(),M=0;M<I.length;M++)if(!Ye.sendBeacon(we,Ve.getEventBlob(I[M]))){je.push(ce.split(M));break}}else je.push(ce.split(0))}),_n(je,8003,He.sendType,!0)}else ue=0}catch(ce){Dt.diagLog().warnToConsole("Failed to send telemetry using sendBeacon API. Ex:"+n.dumpObj(ce)),ue=0}finally{Et(j,ue,{},"")}}function Hr(T){return T===2||T===3}function Kr(T){return mt&&Hr(T)&&(T=2),T}Le.addQueryStringParameter=function(T,j){for(var k=0;k<Ue.length;k++)if(Ue[k].name===T){Ue[k].value=j;return}Ue.push({name:T,value:j})},Le.addHeader=function(T,j){rt[T]=j},Le.canSendRequest=function(){return pi()&&It.allowRequestSending()},Le.sendQueuedRequests=function(T,j){n.isUndefined(T)&&(T=0),mt&&(T=Kr(T),j=2),Ra(xt,T,0)&&An(Zn(),0,!1,T,j||0)},Le.isCompletelyIdle=function(){return!Ge&&Or===0&&xt.length===0},Le.setUnloading=function(T){mt=T},Le.addBatch=function(T){if(T&&T.count()>0){if(ke.isTenantKilled(T.iKey()))return!1;xt.push(T)}return!0},Le.teardown=function(){xt.length>0&&An(Zn(),0,!0,2,2)},Le.pause=function(){Ge=!0},Le.resume=function(){Ge=!1,Le.sendQueuedRequests(0,4)},Le.sendSynchronousBatch=function(T,j,k){T&&T.count()>0&&(n.isNullOrUndefined(j)&&(j=1),mt&&(j=Kr(j),k=2),An([T],0,!1,j,k||0))};function pi(){return!Ge&&Or<K}function Zn(){var T=xt;return xt=[],T}function Ra(T,j,k){var $=!1;return T&&T.length>0&&!Ge&&Pe[j]&&Ve&&($=j!==0||pi()&&(k>0||It.allowRequestSending())),$}function fr(T){var j={};return T&&n.arrForEach(T,function(k,$){j[$]={iKey:k.iKey(),evts:k.events()}}),j}function An(T,j,k,$,ue){if(!(!T||T.length===0)){if(Ge){_n(T,1,$);return}$=Kr($);try{var He=T,we=$!==0;n.doPerf(lt,function(){return"HttpManager:_sendBatches"},function(Ye){Ye&&(T=T.slice(0));for(var je=[],ce=null,I=n.getTime(),M=Pe[$]||(we?Pe[1]:Pe[0]),U=(mt||Hr($)||M&&M._transport===3)&&In();Ra(T,$,j);){var Z=T.shift();Z&&Z.count()>0&&(ke.isTenantKilled(Z.iKey())?je.push(Z):(ce=ce||Ve.createPayload(j,k,we,U,ue,$),Ve.appendPayload(ce,Z,oe)?ce.overflow!==null&&(T=[ce.overflow].concat(T),ce.overflow=null,Jn(ce,I,n.getTime(),ue),I=n.getTime(),ce=null):(Jn(ce,I,n.getTime(),ue),I=n.getTime(),T=[Z].concat(T),ce=null)))}ce&&Jn(ce,I,n.getTime(),ue),T.length>0&&(xt=T.concat(xt)),_n(je,8004,$)},function(){return{batches:fr(He),retryCount:j,isTeardown:k,isSynchronous:we,sendReason:ue,useSendBeacon:Hr($),sendType:$}},!we)}catch(Ye){n._throwInternal(Dt.diagLog(),2,48,"Unexpected Exception sending batch: "+n.dumpObj(Ye))}}}function vi(T,j){var k={url:X,hdrs:{},useHdrs:!1};j?(k.hdrs=n.extend(k.hdrs,rt),k.useHdrs=n.objKeys(k.hdrs).length>0):n.objForEachKey(rt,function(Ye,je){Ca[Ye]?Y(k,Ca[Ye],je,!1):(k.hdrs[Ye]=je,k.useHdrs=!0)}),Y(k,Pt,"NO_AUTH",j),Y(k,Xt,n.FullVersionString,j);var $="";n.arrForEach(T.apiKeys,function(Ye){$.length>0&&($+=","),$+=Ye}),Y(k,wr,$,j),Y(k,jr,n.dateNow().toString(),j);var ue=Ki(T);if(n.isValueAssigned(ue)&&(k.url+="&ext.intweb.msfpc="+ue),It.shouldAddClockSkewHeaders()&&Y(k,Ct,It.getClockSkewHeaderValue(),j),lt.getWParam){var He=lt.getWParam();He>=0&&(k.url+="&w="+He)}for(var we=0;we<Ue.length;we++)k.url+="&"+Ue[we].name+"="+Ue[we].value;return k}function In(){return!qe&&mr&&n.isBeaconsSupported()}function Un(T,j,k){T[j]=T[j]||{},T[j][Dt.identifier]=k}function Jn(T,j,k,$){if(T&&T.payloadBlob&&T.payloadBlob.length>0){var ue=!!Le.sendHook,He=Pe[T.sendType];!Hr(T.sendType)&&T.isBeacon&&T.sendReason===2&&(He=Pe[2]||Pe[3]||He);var we=gt;(T.isBeacon||He._transport===3)&&(we=!1);var Ye=vi(T,we);we=we||Ye.useHdrs;var je=n.getTime();n.doPerf(lt,function(){return"HttpManager:_doPayloadSend"},function(){for(var ce=0;ce<T.batches.length;ce++)for(var I=T.batches[ce],M=I.events(),U=0;U<M.length;U++){var Z=M[U];if(ft){var ye=Z.timings=Z.timings||{};Un(ye,"sendEventStart",je),Un(ye,"serializationStart",j),Un(ye,"serializationCompleted",k)}Z[hn]>0?Z[hn]++:Z[hn]=1}_n(T.batches,1e3+($||0),T.sendType,!0);var Oe={data:T.payloadBlob,urlString:Ye.url,headers:Ye.hdrs,_thePayload:T,_sendReason:$,timeout:Lt};n.isUndefined(Er)||(Oe.disableXhrSync=!!Er),we&&(ne(Oe.headers,et)||(Oe.headers[et]=Ce),ne(Oe.headers,bt)||(Oe.headers[bt]=Fe));var Wt=null;He&&(Wt=function(dr){It.firstRequestSent();var $r=function(Xs,Pd){hi(Xs,Pd,T,$)},Pn=T.isTeardown||T.isSync;try{He.sendPOST(dr,$r,Pn),Le.sendListener&&Le.sendListener(Oe,dr,Pn,T.isBeacon)}catch(Xs){Dt.diagLog().warnToConsole("Unexpected exception sending payload. Ex:"+n.dumpObj(Xs)),Et($r,0,{})}}),n.doPerf(lt,function(){return"HttpManager:_doPayloadSend.sender"},function(){if(Wt)if(T.sendType===0&&Or++,ue&&!T.isBeacon&&He._transport!==3){var dr={data:Oe.data,urlString:Oe.urlString,headers:n.extend({},Oe.headers),timeout:Oe.timeout,disableXhrSync:Oe.disableXhrSync},$r=!1;n.doPerf(lt,function(){return"HttpManager:_doPayloadSend.sendHook"},function(){try{Le.sendHook(dr,function(Pn){$r=!0,!qe&&!Pn._thePayload&&(Pn._thePayload=Pn._thePayload||Oe._thePayload,Pn._sendReason=Pn._sendReason||Oe._sendReason),Wt(Pn)},T.isSync||T.isTeardown)}catch{$r||Wt(Oe)}})}else Wt(Oe)})},function(){return{thePayload:T,serializationStart:j,serializationCompleted:k,sendReason:$}},T.isSync)}T.sizeExceed&&T.sizeExceed.length>0&&_n(T.sizeExceed,8003,T.sendType),T.failedEvts&&T.failedEvts.length>0&&_n(T.failedEvts,8002,T.sendType)}function cn(T,j){ft&&n.arrForEach(T,function(k){var $=k.timings=k.timings||{};Un($,"sendEventCompleted",j)})}function hi(T,j,k,$){var ue=9e3,He=null,we=!1,Ye=!1;try{var je=!0;if(typeof T!==n.strUndefined){if(j){It.setClockSkew(j[Gt]);var ce=j[$t]||j["kill-duration-seconds"];n.arrForEach(ke.setKillSwitchTenants(j[me],ce),function(M){n.arrForEach(k.batches,function(U){if(U.iKey()===M){He=He||[];var Z=U.split(0);k.numEvents-=Z.count(),He.push(Z)}})})}if(T==200||T==204){ue=200;return}(!zr(T)||k.numEvents<=0)&&(je=!1),ue=9e3+T%1e3}if(je){ue=100;var I=k.retryCnt;k.sendType===0&&(I<D?(we=!0,bn(function(){k.sendType===0&&Or--,An(k.batches,I+1,k.isTeardown,mt?2:k.sendType,5)},mt,Bi(I))):(Ye=!0,mt&&(ue=8001)))}}finally{we||(It.setClockSkew(),_i(k,ue,$,Ye)),_n(He,8004,k.sendType)}}function _i(T,j,k,$){try{$&&Dt._backOffTransmission(),j===200&&(!$&&!T.isSync&&Dt._clearBackOff(),Na(T.batches)),_n(T.batches,j,T.sendType,!0)}finally{T.sendType===0&&(Or--,k!==5&&Le.sendQueuedRequests(T.sendType,k))}}function Na(T){if(ft){var j=n.getTime();n.arrForEach(T,function(k){k&&k.count()>0&&cn(k.events(),j)})}}function bn(T,j,k){j?T():le.set(T,k)}function wa(T){var j={};if(n.isString(T)){var k=n.strTrim(T).split(/[\r\n]+/);n.arrForEach(k,function($){if($){var ue=$.indexOf(": ");if(ue!==-1){var He=n.strTrim($.substring(0,ue)).toLowerCase(),we=n.strTrim($.substring(ue+1));j[He]=we}else j[n.strTrim($)]=1}})}return j}function Ki(T){for(var j=0;j<T.batches.length;j++){var k=T.batches[j].Msfpc();if(k)return encodeURIComponent(k)}return""}function On(T){var j=Le._responseHandlers;try{for(var k=0;k<j.length;k++)try{j[k](T)}catch(ue){n._throwInternal(Dt.diagLog(),1,519,"Response handler failed: "+ue)}if(T){var $=JSON.parse(T);n.isValueAssigned($.webResult)&&n.isValueAssigned($.webResult[kr])&&Mt.set("MSFPC",$.webResult[kr],365*86400)}}catch{}}function _n(T,j,k,$){if(T&&T.length>0&&_e){var ue=_e[Da(j)];if(ue){var He=k!==0;n.doPerf(lt,function(){return"HttpManager:_sendBatchesNotification"},function(){bn(function(){try{ue.call(_e,T,j,He,k)}catch(we){n._throwInternal(Dt.diagLog(),1,74,"send request notification failed: "+we)}},$||He,0)},function(){return{batches:fr(T),reason:j,isSync:He,sendSync:$,sendType:k}},!He)}}}function Da(T){var j=Wn[T];return n.isValueAssigned(j)||(j=se,T>=9e3&&T<=9999?j=q:T>=8e3&&T<=8999?j=E:T>=1e3&&T<=1999&&(j=S)),j}})}return ie}();function pe(ie,oe){for(var K=[],D=2;D<arguments.length;D++)K[D-2]=arguments[D];return setTimeout(ie,oe,K)}function ve(ie){clearTimeout(ie)}function be(ie,oe){return{set:ie||pe,clear:oe||ve}}var ot=.25,Ze=500,te=20,De=6,B=2,Te=4,de=2,_t=1,Re="eventsDiscarded",gr="overrideInstrumentationKey",br="maxEventRetryAttempts",Sn="maxUnloadEventRetryAttempts",Yn="addUnloadCb",zi=function(ie){t.__extendsFn(oe,ie);function oe(){var K=ie.call(this)||this;K.identifier="PostChannel",K.priority=1011,K.version="3.2.3";var D,_e=!1,le=[],X=null,ke=!1,Ge=0,It=500,mr=0,Or=1e4,Dt={},Pe=s,lt=null,qe=null,Ue=0,rt=0,xt,Ve,ft={},Mt,mt,gt=-1,Lt,Er=!0,Le=!1,cr=De,tt=B,lr,qt;return a(oe,K,function(Ne,Et){An(),Ne._getDbgPlgTargets=function(){return[Ve]},Ne.initialize=function(I,M,U){n.doPerf(M,function(){return"PostChannel:initialize"},function(){var Z=M;Et.initialize(I,M,U);try{var ye=!!M[Yn];lr=n.mergeEvtNamespace(n.createUniqueNamespace(Ne.identifier),M.evtNamespace&&M.evtNamespace());var Oe=Ne._getTelCtx();I.extensionConfig[Ne.identifier]=I.extensionConfig[Ne.identifier]||{},D=Oe.getExtCfg(Ne.identifier),qt=be(D.setTimeoutOverride,D.clearTimeoutOverride),Er=!D.disableOptimizeObj&&n.isChromium(),Qn(Z),D.eventsLimitInMem>0&&(Or=D.eventsLimitInMem),D.immediateEventLimit>0&&(It=D.immediateEventLimit),D.autoFlushEventsLimit>0&&(Mt=D.autoFlushEventsLimit),n.isNumber(D[br])&&(cr=D[br]),n.isNumber(D[Sn])&&(tt=D[Sn]),ce(),D.httpXHROverride&&D.httpXHROverride.sendPOST&&(xt=D.httpXHROverride),n.isValueAssigned(I.anonCookieName)&&Ve.addQueryStringParameter("anoncknm",I.anonCookieName),Ve.sendHook=D.payloadPreprocessor,Ve.sendListener=D.payloadListener;var Wt=D.overrideEndpointUrl?D.overrideEndpointUrl:I.endpointUrl;Ne._notificationManager=I.extensionConfig.NotificationManager,Ve.initialize(Wt,Ne.core,Ne,xt,D);var dr=I.disablePageUnloadEvents||[];n.addPageUnloadEventListener(Hr,dr,lr),n.addPageHideEventListener(Hr,dr,lr),n.addPageShowEventListener(Kr,I.disablePageShowEvents,lr)}catch($r){throw Ne.setInitialized(!1),$r}},function(){return{coreConfig:I,core:M,extensions:U}})},Ne.processTelemetry=function(I,M){n.setProcessTelemetryTimings(I,Ne.identifier),M=Ne._getTelCtx(M);var U=M.getExtCfg(Ne.identifier),Z=!!D.disableTelemetry;U&&(Z=Z||!!U.disableTelemetry);var ye=I;!Z&&!_e&&(D[gr]&&(ye.iKey=D[gr]),U&&U[gr]&&(ye.iKey=U[gr]),pi(ye,!0),Le?Un(2,2):fr()),Ne.processNext(ye,M)},Ne._doTeardown=function(I,M){Un(2,2),_e=!0,Ve.teardown(),n.removePageUnloadEventListener(null,lr),n.removePageHideEventListener(null,lr),n.removePageShowEventListener(null,lr),An()};function Qn(I){var M=I.getWParam;I.getWParam=function(){var U=0;return D.ignoreMc1Ms0CookieProcessing&&(U=U|2),U|M()}}function Hr(I){var M=I||n.getWindow().event;M.type!=="beforeunload"&&(Le=!0,Ve.setUnloading(Le)),Un(2,2)}function Kr(I){Le=!1,Ve.setUnloading(Le)}function pi(I,M){if(I.sendAttempt||(I.sendAttempt=0),I.latency||(I.latency=1),I.ext&&I.ext.trace&&delete I.ext.trace,I.ext&&I.ext.user&&I.ext.user.id&&delete I.ext.user.id,Er&&(I.ext=n.optimizeObject(I.ext),I.baseData&&(I.baseData=n.optimizeObject(I.baseData)),I.data&&(I.data=n.optimizeObject(I.data))),I.sync){if(Ue||ke)I.latency=3,I.sync=!1;else if(Ve){Er&&(I=n.optimizeObject(I)),Ve.sendSynchronousBatch(Zt.create(I.iKey,[I]),I.sync===!0?1:I.sync,3);return}}var U=I.latency,Z=mr,ye=Or;U===4&&(Z=Ge,ye=It);var Oe=!1;if(Z<ye)Oe=!_i(I,M);else{var Wt=1,dr=te;U===4&&(Wt=4,dr=1),Oe=!0,Na(I.iKey,I.latency,Wt,dr)&&(Oe=!_i(I,M))}Oe&&k(Re,[I],n.EventsDiscardedReason.QueueFull)}Ne.setEventQueueLimits=function(I,M){Or=I>0?I:1e4,Mt=M>0?M:0,ce();var U=mr>I;if(!U&&mt>0)for(var Z=1;!U&&Z<=3;Z++){var ye=ft[Z];ye&&ye.batches&&n.arrForEach(ye.batches,function(Oe){Oe&&Oe.count()>=mt&&(U=!0)})}hi(!0,U)},Ne.pause=function(){In(),ke=!0,Ve.pause()},Ne.resume=function(){ke=!1,Ve.resume(),fr()},Ne.addResponseHandler=function(I){Ve._responseHandlers.push(I)},Ne._loadTransmitProfiles=function(I){_n(),n.objForEachKey(I,function(M,U){var Z=U.length;if(Z>=2){var ye=Z>2?U[2]:0;if(U.splice(0,Z-2),U[1]<0&&(U[0]=-1),U[1]>0&&U[0]>0){var Oe=U[0]/U[1];U[0]=Math.ceil(Oe)*U[1]}ye>=0&&U[1]>=0&&ye>U[1]&&(ye=U[1]),U.push(ye),Dt[M]=U}})},Ne.flush=function(I,M,U){if(I===void 0&&(I=!0),!ke)if(U=U||1,I)X==null?(In(),wa(1,0,U),X=vi(function(){X=null,Ki(M,U)},0)):le.push(M);else{var Z=In();Zn(1,1,U),M!=null&&M(),Z&&fr()}},Ne.setMsaAuthTicket=function(I){Ve.addHeader(Fr,I)},Ne.hasEvents=Ra,Ne._setTransmitProfile=function(I){Pe!==I&&Dt[I]!==void 0&&(In(),Pe=I,fr())};function Zn(I,M,U){var Z=wa(I,M,U);return Ve.sendQueuedRequests(M,U),Z}function Ra(){return mr>0}function fr(){if(gt>=0&&wa(gt,0,Lt)&&Ve.sendQueuedRequests(0,Lt),Ge>0&&!qe&&!ke){var I=Dt[Pe][2];I>=0&&(qe=vi(function(){qe=null,Zn(4,0,1),fr()},I))}var M=Dt[Pe][1];!lt&&!X&&M>=0&&!ke&&(Ra()?lt=vi(function(){lt=null,Zn(rt===0?3:1,0,1),rt++,rt%=2,fr()},M):rt=0)}Ne._backOffTransmission=function(){Ue<Te&&(Ue++,In(),fr())},Ne._clearBackOff=function(){Ue&&(Ue=0,In(),fr())};function An(){D=null,_e=!1,le=[],X=null,ke=!1,Ge=0,It=500,mr=0,Or=1e4,Dt={},Pe=s,lt=null,qe=null,Ue=0,rt=0,xt=null,ft={},Mt=void 0,mt=0,gt=-1,Lt=null,Er=!0,Le=!1,cr=De,tt=B,lr=null,qt=be(),Ve=new Be(Ze,de,_t,{requeue:T,send:ue,sent:He,drop:we,rspFail:Ye,oth:je},qt),Da(),Jn(),ce()}function vi(I,M){M===0&&Ue&&(M=1);var U=1e3;return Ue&&(U=Bi(Ue-1)),qt.set(I,M*U)}function In(){return lt!==null?(qt.clear(lt),lt=null,rt=0,!0):!1}function Un(I,M){In(),X&&(qt.clear(X),X=null),ke||Zn(1,I,M)}function Jn(){ft[4]={batches:[],iKeyMap:{}},ft[3]={batches:[],iKeyMap:{}},ft[2]={batches:[],iKeyMap:{}},ft[1]={batches:[],iKeyMap:{}}}function cn(I,M,U){var Z=ft[M];Z||(M=1,Z=ft[M]);var ye=Z.iKeyMap[I];return!ye&&U&&(ye=Zt.create(I),Z.batches.push(ye),Z.iKeyMap[I]=ye),ye}function hi(I,M){Ve.canSendRequest()&&!Ue&&(Mt>0&&mr>Mt&&(M=!0),M&&X==null&&Ne.flush(I,null,20))}function _i(I,M){Er&&(I=n.optimizeObject(I));var U=I.latency,Z=cn(I.iKey,U,!0);return Z.addEvent(I)?(U!==4?(mr++,M&&I.sendAttempt===0&&hi(!I.sync,mt>0&&Z.count()>=mt)):Ge++,!0):!1}function Na(I,M,U,Z){for(;U<=M;){var ye=cn(I,M,!0);if(ye&&ye.count()>0){var Oe=ye.split(0,Z),Wt=Oe.count();if(Wt>0)return U===4?Ge-=Wt:mr-=Wt,$(Re,[Oe],n.EventsDiscardedReason.QueueFull),!0}U++}return bn(),!1}function bn(){for(var I=0,M=0,U=function(ye){var Oe=ft[ye];Oe&&Oe.batches&&n.arrForEach(Oe.batches,function(Wt){ye===4?I+=Wt.count():M+=Wt.count()})},Z=1;Z<=4;Z++)U(Z);mr=M,Ge=I}function wa(I,M,U){var Z=!1,ye=M===0;return!ye||Ve.canSendRequest()?n.doPerf(Ne.core,function(){return"PostChannel._queueBatches"},function(){for(var Oe=[],Wt=4;Wt>=I;){var dr=ft[Wt];dr&&dr.batches&&dr.batches.length>0&&(n.arrForEach(dr.batches,function($r){Ve.addBatch($r)?Z=Z||$r&&$r.count()>0:Oe=Oe.concat($r.events()),Wt===4?Ge-=$r.count():mr-=$r.count()}),dr.batches=[],dr.iKeyMap={}),Wt--}Oe.length>0&&k(Re,Oe,n.EventsDiscardedReason.KillSwitch),Z&&gt>=I&&(gt=-1,Lt=0)},function(){return{latency:I,sendType:M,sendReason:U}},!ye):(gt=gt>=0?Math.min(gt,I):I,Lt=Math.max(Lt,U)),Z}function Ki(I,M){Zn(1,0,M),bn(),On(function(){I&&I(),le.length>0?X=vi(function(){X=null,Ki(le.shift(),M)},0):(X=null,fr())})}function On(I){Ve.isCompletelyIdle()?I():X=vi(function(){X=null,On(I)},ot)}function _n(){In(),Da(),Pe=s,fr()}function Da(){Dt={},Dt[s]=[2,1,0],Dt[u]=[6,3,0],Dt[f]=[18,9,0]}function T(I,M){var U=[],Z=cr;Le&&(Z=tt),n.arrForEach(I,function(ye){ye&&ye.count()>0&&n.arrForEach(ye.events(),function(Oe){Oe&&(Oe.sync&&(Oe.latency=4,Oe.sync=!1),Oe.sendAttempt<Z?(n.setProcessTelemetryTimings(Oe,Ne.identifier),pi(Oe,!1)):U.push(Oe))})}),U.length>0&&k(Re,U,n.EventsDiscardedReason.NonRetryableStatus),Le&&Un(2,2)}function j(I,M){var U=Ne._notificationManager||{},Z=U[I];if(Z)try{Z.apply(U,M)}catch(ye){n._throwInternal(Ne.diagLog(),1,74,I+" notification failed: "+ye)}}function k(I,M){for(var U=[],Z=2;Z<arguments.length;Z++)U[Z-2]=arguments[Z];M&&M.length>0&&j(I,[M].concat(U))}function $(I,M){for(var U=[],Z=2;Z<arguments.length;Z++)U[Z-2]=arguments[Z];M&&M.length>0&&n.arrForEach(M,function(ye){ye&&ye.count()>0&&j(I,[ye.events()].concat(U))})}function ue(I,M,U){I&&I.length>0&&j("eventsSendRequest",[M>=1e3&&M<=1999?M-1e3:0,U!==!0])}function He(I,M){$("eventsSent",I,M),fr()}function we(I,M){$(Re,I,M>=8e3&&M<=8999?M-8e3:n.EventsDiscardedReason.Unknown)}function Ye(I){$(Re,I,n.EventsDiscardedReason.NonRetryableStatus),fr()}function je(I,M){$(Re,I,n.EventsDiscardedReason.Unknown),fr()}function ce(){!D||!D.disableAutoBatchFlushLimit?mt=Math.max(Ze*(de+1),Or/6):mt=0}n.objDefineAccessors(Ne,"_setTimeoutOverride",function(){return qt.set},function(I){qt=be(I,qt.clear)}),n.objDefineAccessors(Ne,"_clearTimeoutOverride",function(){return qt.clear},function(I){qt=be(qt.set,I)})}),K}return oe}(n.BaseTelemetryPlugin);e.BE_PROFILE=f,e.NRT_PROFILE=u,e.PostChannel=zi,e.RT_PROFILE=s,function(ie,oe,K){var D=Object.defineProperty;if(D)try{return D(ie,oe,K)}catch{}return K&&typeof K.value!==void 0&&(ie[oe]=K.value),ie}(e,"__esModule",{value:!0})})});var Mr=_((CH,RE)=>{"use strict";var zR=function(){function e(){}return e.info=function(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];e.enableDebug&&console.info(e.TAG+t,r)},e.warn=function(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];e.disableWarnings||console.warn(e.TAG+t,r)},e.enableDebug=!1,e.disableWarnings=!1,e.disableErrors=!1,e.TAG="ApplicationInsights:",e}();RE.exports=zR});var Ep=_(ea=>{"use strict";var Mo=ea&&ea.__assign||function(){return Mo=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Mo.apply(this,arguments)};Object.defineProperty(ea,"__esModule",{value:!0});ea.AsyncScopeManager=ea.OpenTelemetryScopeManagerWrapper=void 0;var ja=Fa(),KR=require("events"),NE=function(){function e(){}return e.prototype.active=function(){var t=this,r=ja.CorrelationContextManager.getCurrentContext();return Mo(Mo({},r),{getValue:function(n){return t._activeSymbol?n===t._activeSymbol?r:!1:(t._activeSymbol=n,r)},setValue:function(){}})},e.prototype.with=function(t,r){var n=t.parentSpanId,i=t.name,a=e._spanToContext(t,n,i);return ja.CorrelationContextManager.runWithContext(a,r)()},e.prototype.bind=function(t){return typeof t=="function"?ja.CorrelationContextManager.wrapCallback(t):(t instanceof KR.EventEmitter&&ja.CorrelationContextManager.wrapEmitter(t),t)},e.prototype.enable=function(){return ja.CorrelationContextManager.enable(),this},e.prototype.disable=function(){return ja.CorrelationContextManager.disable(),this},e._spanToContext=function(t,r,n){var i=r?"|"+t.spanContext().traceId+"."+r+".":t.spanContext().traceId,a=Mo(Mo({},t.spanContext()),{traceFlags:t.spanContext().traceFlags}),s=ja.CorrelationContextManager.spanToContextObject(a,i,n);return s},e}();ea.OpenTelemetryScopeManagerWrapper=NE;ea.AsyncScopeManager=new NE});var $E=_((ze,KE)=>{ze=KE.exports=dt;var Rt;typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?Rt=function(){var e=Array.prototype.slice.call(arguments,0);e.unshift("SEMVER"),console.log.apply(console,e)}:Rt=function(){};ze.SEMVER_SPEC_VERSION="2.0.0";var Tp=256,Kc=Number.MAX_SAFE_INTEGER||9007199254740991,yp=16,jt=ze.re=[],G=ze.src=[],st=0,Lo=st++;G[Lo]="0|[1-9]\\d*";var xo=st++;G[xo]="[0-9]+";var bp=st++;G[bp]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var DE=st++;G[DE]="("+G[Lo]+")\\.("+G[Lo]+")\\.("+G[Lo]+")";var ME=st++;G[ME]="("+G[xo]+")\\.("+G[xo]+")\\.("+G[xo]+")";var Sp=st++;G[Sp]="(?:"+G[Lo]+"|"+G[bp]+")";var Ap=st++;G[Ap]="(?:"+G[xo]+"|"+G[bp]+")";var Op=st++;G[Op]="(?:-("+G[Sp]+"(?:\\."+G[Sp]+")*))";var Pp=st++;G[Pp]="(?:-?("+G[Ap]+"(?:\\."+G[Ap]+")*))";var Ip=st++;G[Ip]="[0-9A-Za-z-]+";var du=st++;G[du]="(?:\\+("+G[Ip]+"(?:\\."+G[Ip]+")*))";var Cp=st++,LE="v?"+G[DE]+G[Op]+"?"+G[du]+"?";G[Cp]="^"+LE+"$";var Rp="[v=\\s]*"+G[ME]+G[Pp]+"?"+G[du]+"?",Np=st++;G[Np]="^"+Rp+"$";var Fo=st++;G[Fo]="((?:<|>)?=?)";var $c=st++;G[$c]=G[xo]+"|x|X|\\*";var Xc=st++;G[Xc]=G[Lo]+"|x|X|\\*";var ka=st++;G[ka]="[v=\\s]*("+G[Xc]+")(?:\\.("+G[Xc]+")(?:\\.("+G[Xc]+")(?:"+G[Op]+")?"+G[du]+"?)?)?";var jo=st++;G[jo]="[v=\\s]*("+G[$c]+")(?:\\.("+G[$c]+")(?:\\.("+G[$c]+")(?:"+G[Pp]+")?"+G[du]+"?)?)?";var xE=st++;G[xE]="^"+G[Fo]+"\\s*"+G[ka]+"$";var qE=st++;G[qE]="^"+G[Fo]+"\\s*"+G[jo]+"$";var jE=st++;G[jE]="(?:^|[^\\d])(\\d{1,"+yp+"})(?:\\.(\\d{1,"+yp+"}))?(?:\\.(\\d{1,"+yp+"}))?(?:$|[^\\d])";var el=st++;G[el]="(?:~>?)";var Wc=st++;G[Wc]="(\\s*)"+G[el]+"\\s+";jt[Wc]=new RegExp(G[Wc],"g");var $R="$1~",FE=st++;G[FE]="^"+G[el]+G[ka]+"$";var kE=st++;G[kE]="^"+G[el]+G[jo]+"$";var tl=st++;G[tl]="(?:\\^)";var Yc=st++;G[Yc]="(\\s*)"+G[tl]+"\\s+";jt[Yc]=new RegExp(G[Yc],"g");var XR="$1^",UE=st++;G[UE]="^"+G[tl]+G[ka]+"$";var HE=st++;G[HE]="^"+G[tl]+G[jo]+"$";var wp=st++;G[wp]="^"+G[Fo]+"\\s*("+Rp+")$|^$";var Dp=st++;G[Dp]="^"+G[Fo]+"\\s*("+LE+")$|^$";var lu=st++;G[lu]="(\\s*)"+G[Fo]+"\\s*("+Rp+"|"+G[ka]+")";jt[lu]=new RegExp(G[lu],"g");var WR="$1$2$3",BE=st++;G[BE]="^\\s*("+G[ka]+")\\s+-\\s+("+G[ka]+")\\s*$";var GE=st++;G[GE]="^\\s*("+G[jo]+")\\s+-\\s+("+G[jo]+")\\s*$";var VE=st++;G[VE]="(<|>)?=?\\s*\\*";for(ta=0;ta<st;ta++)Rt(ta,G[ta]),jt[ta]||(jt[ta]=new RegExp(G[ta]));var ta;ze.parse=Ua;function Ua(e,t){if((!t||typeof t!="object")&&(t={loose:!!t,includePrerelease:!1}),e instanceof dt)return e;if(typeof e!="string"||e.length>Tp)return null;var r=t.loose?jt[Np]:jt[Cp];if(!r.test(e))return null;try{return new dt(e,t)}catch{return null}}ze.valid=YR;function YR(e,t){var r=Ua(e,t);return r?r.version:null}ze.clean=QR;function QR(e,t){var r=Ua(e.trim().replace(/^[=v]+/,""),t);return r?r.version:null}ze.SemVer=dt;function dt(e,t){if((!t||typeof t!="object")&&(t={loose:!!t,includePrerelease:!1}),e instanceof dt){if(e.loose===t.loose)return e;e=e.version}else if(typeof e!="string")throw new TypeError("Invalid Version: "+e);if(e.length>Tp)throw new TypeError("version is longer than "+Tp+" characters");if(!(this instanceof dt))return new dt(e,t);Rt("SemVer",e,t),this.options=t,this.loose=!!t.loose;var r=e.trim().match(t.loose?jt[Np]:jt[Cp]);if(!r)throw new TypeError("Invalid Version: "+e);if(this.raw=e,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>Kc||this.major<0)throw new TypeError("Invalid major version");if(this.minor>Kc||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>Kc||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(function(n){if(/^[0-9]+$/.test(n)){var i=+n;if(i>=0&&i<Kc)return i}return n}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}dt.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version};dt.prototype.toString=function(){return this.version};dt.prototype.compare=function(e){return Rt("SemVer.compare",this.version,this.options,e),e instanceof dt||(e=new dt(e,this.options)),this.compareMain(e)||this.comparePre(e)};dt.prototype.compareMain=function(e){return e instanceof dt||(e=new dt(e,this.options)),qo(this.major,e.major)||qo(this.minor,e.minor)||qo(this.patch,e.patch)};dt.prototype.comparePre=function(e){if(e instanceof dt||(e=new dt(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;var t=0;do{var r=this.prerelease[t],n=e.prerelease[t];if(Rt("prerelease compare",t,r,n),r===void 0&&n===void 0)return 0;if(n===void 0)return 1;if(r===void 0)return-1;if(r===n)continue;return qo(r,n)}while(++t)};dt.prototype.inc=function(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",t),this.inc("pre",t);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{for(var r=this.prerelease.length;--r>=0;)typeof this.prerelease[r]=="number"&&(this.prerelease[r]++,r=-2);r===-1&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error("invalid increment argument: "+e)}return this.format(),this.raw=this.version,this};ze.inc=ZR;function ZR(e,t,r,n){typeof r=="string"&&(n=r,r=void 0);try{return new dt(e,r).inc(t,n).version}catch{return null}}ze.diff=JR;function JR(e,t){if(Mp(e,t))return null;var r=Ua(e),n=Ua(t),i="";if(r.prerelease.length||n.prerelease.length){i="pre";var a="prerelease"}for(var s in r)if((s==="major"||s==="minor"||s==="patch")&&r[s]!==n[s])return i+s;return a}ze.compareIdentifiers=qo;var wE=/^[0-9]+$/;function qo(e,t){var r=wE.test(e),n=wE.test(t);return r&&n&&(e=+e,t=+t),e===t?0:r&&!n?-1:n&&!r?1:e<t?-1:1}ze.rcompareIdentifiers=eN;function eN(e,t){return qo(t,e)}ze.major=tN;function tN(e,t){return new dt(e,t).major}ze.minor=rN;function rN(e,t){return new dt(e,t).minor}ze.patch=nN;function nN(e,t){return new dt(e,t).patch}ze.compare=Si;function Si(e,t,r){return new dt(e,r).compare(new dt(t,r))}ze.compareLoose=iN;function iN(e,t){return Si(e,t,!0)}ze.rcompare=aN;function aN(e,t,r){return Si(t,e,r)}ze.sort=oN;function oN(e,t){return e.sort(function(r,n){return ze.compare(r,n,t)})}ze.rsort=sN;function sN(e,t){return e.sort(function(r,n){return ze.rcompare(r,n,t)})}ze.gt=fu;function fu(e,t,r){return Si(e,t,r)>0}ze.lt=Qc;function Qc(e,t,r){return Si(e,t,r)<0}ze.eq=Mp;function Mp(e,t,r){return Si(e,t,r)===0}ze.neq=zE;function zE(e,t,r){return Si(e,t,r)!==0}ze.gte=Lp;function Lp(e,t,r){return Si(e,t,r)>=0}ze.lte=xp;function xp(e,t,r){return Si(e,t,r)<=0}ze.cmp=Zc;function Zc(e,t,r,n){switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof r=="object"&&(r=r.version),e===r;case"!==":return typeof e=="object"&&(e=e.version),typeof r=="object"&&(r=r.version),e!==r;case"":case"=":case"==":return Mp(e,r,n);case"!=":return zE(e,r,n);case">":return fu(e,r,n);case">=":return Lp(e,r,n);case"<":return Qc(e,r,n);case"<=":return xp(e,r,n);default:throw new TypeError("Invalid operator: "+t)}}ze.Comparator=Cn;function Cn(e,t){if((!t||typeof t!="object")&&(t={loose:!!t,includePrerelease:!1}),e instanceof Cn){if(e.loose===!!t.loose)return e;e=e.value}if(!(this instanceof Cn))return new Cn(e,t);Rt("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===pu?this.value="":this.value=this.operator+this.semver.version,Rt("comp",this)}var pu={};Cn.prototype.parse=function(e){var t=this.options.loose?jt[wp]:jt[Dp],r=e.match(t);if(!r)throw new TypeError("Invalid comparator: "+e);this.operator=r[1],this.operator==="="&&(this.operator=""),r[2]?this.semver=new dt(r[2],this.options.loose):this.semver=pu};Cn.prototype.toString=function(){return this.value};Cn.prototype.test=function(e){return Rt("Comparator.test",e,this.options.loose),this.semver===pu?!0:(typeof e=="string"&&(e=new dt(e,this.options)),Zc(e,this.operator,this.semver,this.options))};Cn.prototype.intersects=function(e,t){if(!(e instanceof Cn))throw new TypeError("a Comparator is required");(!t||typeof t!="object")&&(t={loose:!!t,includePrerelease:!1});var r;if(this.operator==="")return r=new Jt(e.value,t),Jc(this.value,r,t);if(e.operator==="")return r=new Jt(this.value,t),Jc(e.semver,r,t);var n=(this.operator===">="||this.operator===">")&&(e.operator===">="||e.operator===">"),i=(this.operator==="<="||this.operator==="<")&&(e.operator==="<="||e.operator==="<"),a=this.semver.version===e.semver.version,s=(this.operator===">="||this.operator==="<=")&&(e.operator===">="||e.operator==="<="),u=Zc(this.semver,"<",e.semver,t)&&(this.operator===">="||this.operator===">")&&(e.operator==="<="||e.operator==="<"),f=Zc(this.semver,">",e.semver,t)&&(this.operator==="<="||this.operator==="<")&&(e.operator===">="||e.operator===">");return n||i||a&&s||u||f};ze.Range=Jt;function Jt(e,t){if((!t||typeof t!="object")&&(t={loose:!!t,includePrerelease:!1}),e instanceof Jt)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new Jt(e.raw,t);if(e instanceof Cn)return new Jt(e.value,t);if(!(this instanceof Jt))return new Jt(e,t);if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e,this.set=e.split(/\s*\|\|\s*/).map(function(r){return this.parseRange(r.trim())},this).filter(function(r){return r.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+e);this.format()}Jt.prototype.format=function(){return this.range=this.set.map(function(e){return e.join(" ").trim()}).join("||").trim(),this.range};Jt.prototype.toString=function(){return this.range};Jt.prototype.parseRange=function(e){var t=this.options.loose;e=e.trim();var r=t?jt[GE]:jt[BE];e=e.replace(r,gN),Rt("hyphen replace",e),e=e.replace(jt[lu],WR),Rt("comparator trim",e,jt[lu]),e=e.replace(jt[Wc],$R),e=e.replace(jt[Yc],XR),e=e.split(/\s+/).join(" ");var n=t?jt[wp]:jt[Dp],i=e.split(" ").map(function(a){return cN(a,this.options)},this).join(" ").split(/\s+/);return this.options.loose&&(i=i.filter(function(a){return!!a.match(n)})),i=i.map(function(a){return new Cn(a,this.options)},this),i};Jt.prototype.intersects=function(e,t){if(!(e instanceof Jt))throw new TypeError("a Range is required");return this.set.some(function(r){return r.every(function(n){return e.set.some(function(i){return i.every(function(a){return n.intersects(a,t)})})})})};ze.toComparators=uN;function uN(e,t){return new Jt(e,t).set.map(function(r){return r.map(function(n){return n.value}).join(" ").trim().split(" ")})}function cN(e,t){return Rt("comp",e,t),e=dN(e,t),Rt("caret",e),e=lN(e,t),Rt("tildes",e),e=vN(e,t),Rt("xrange",e),e=_N(e,t),Rt("stars",e),e}function tn(e){return!e||e.toLowerCase()==="x"||e==="*"}function lN(e,t){return e.trim().split(/\s+/).map(function(r){return fN(r,t)}).join(" ")}function fN(e,t){var r=t.loose?jt[kE]:jt[FE];return e.replace(r,function(n,i,a,s,u){Rt("tilde",e,n,i,a,s,u);var f;return tn(i)?f="":tn(a)?f=">="+i+".0.0 <"+(+i+1)+".0.0":tn(s)?f=">="+i+"."+a+".0 <"+i+"."+(+a+1)+".0":u?(Rt("replaceTilde pr",u),f=">="+i+"."+a+"."+s+"-"+u+" <"+i+"."+(+a+1)+".0"):f=">="+i+"."+a+"."+s+" <"+i+"."+(+a+1)+".0",Rt("tilde return",f),f})}function dN(e,t){return e.trim().split(/\s+/).map(function(r){return pN(r,t)}).join(" ")}function pN(e,t){Rt("caret",e,t);var r=t.loose?jt[HE]:jt[UE];return e.replace(r,function(n,i,a,s,u){Rt("caret",e,n,i,a,s,u);var f;return tn(i)?f="":tn(a)?f=">="+i+".0.0 <"+(+i+1)+".0.0":tn(s)?i==="0"?f=">="+i+"."+a+".0 <"+i+"."+(+a+1)+".0":f=">="+i+"."+a+".0 <"+(+i+1)+".0.0":u?(Rt("replaceCaret pr",u),i==="0"?a==="0"?f=">="+i+"."+a+"."+s+"-"+u+" <"+i+"."+a+"."+(+s+1):f=">="+i+"."+a+"."+s+"-"+u+" <"+i+"."+(+a+1)+".0":f=">="+i+"."+a+"."+s+"-"+u+" <"+(+i+1)+".0.0"):(Rt("no pr"),i==="0"?a==="0"?f=">="+i+"."+a+"."+s+" <"+i+"."+a+"."+(+s+1):f=">="+i+"."+a+"."+s+" <"+i+"."+(+a+1)+".0":f=">="+i+"."+a+"."+s+" <"+(+i+1)+".0.0"),Rt("caret return",f),f})}function vN(e,t){return Rt("replaceXRanges",e,t),e.split(/\s+/).map(function(r){return hN(r,t)}).join(" ")}function hN(e,t){e=e.trim();var r=t.loose?jt[qE]:jt[xE];return e.replace(r,function(n,i,a,s,u,f){Rt("xRange",e,n,i,a,s,u,f);var d=tn(a),h=d||tn(s),E=h||tn(u),S=E;return i==="="&&S&&(i=""),d?i===">"||i==="<"?n="<0.0.0":n="*":i&&S?(h&&(s=0),u=0,i===">"?(i=">=",h?(a=+a+1,s=0,u=0):(s=+s+1,u=0)):i==="<="&&(i="<",h?a=+a+1:s=+s+1),n=i+a+"."+s+"."+u):h?n=">="+a+".0.0 <"+(+a+1)+".0.0":E&&(n=">="+a+"."+s+".0 <"+a+"."+(+s+1)+".0"),Rt("xRange return",n),n})}function _N(e,t){return Rt("replaceStars",e,t),e.trim().replace(jt[VE],"")}function gN(e,t,r,n,i,a,s,u,f,d,h,E,S){return tn(r)?t="":tn(n)?t=">="+r+".0.0":tn(i)?t=">="+r+"."+n+".0":t=">="+t,tn(f)?u="":tn(d)?u="<"+(+f+1)+".0.0":tn(h)?u="<"+f+"."+(+d+1)+".0":E?u="<="+f+"."+d+"."+h+"-"+E:u="<="+u,(t+" "+u).trim()}Jt.prototype.test=function(e){if(!e)return!1;typeof e=="string"&&(e=new dt(e,this.options));for(var t=0;t<this.set.length;t++)if(mN(this.set[t],e,this.options))return!0;return!1};function mN(e,t,r){for(var n=0;n<e.length;n++)if(!e[n].test(t))return!1;if(t.prerelease.length&&!r.includePrerelease){for(n=0;n<e.length;n++)if(Rt(e[n].semver),e[n].semver!==pu&&e[n].semver.prerelease.length>0){var i=e[n].semver;if(i.major===t.major&&i.minor===t.minor&&i.patch===t.patch)return!0}return!1}return!0}ze.satisfies=Jc;function Jc(e,t,r){try{t=new Jt(t,r)}catch{return!1}return t.test(e)}ze.maxSatisfying=EN;function EN(e,t,r){var n=null,i=null;try{var a=new Jt(t,r)}catch{return null}return e.forEach(function(s){a.test(s)&&(!n||i.compare(s)===-1)&&(n=s,i=new dt(n,r))}),n}ze.minSatisfying=yN;function yN(e,t,r){var n=null,i=null;try{var a=new Jt(t,r)}catch{return null}return e.forEach(function(s){a.test(s)&&(!n||i.compare(s)===1)&&(n=s,i=new dt(n,r))}),n}ze.minVersion=TN;function TN(e,t){e=new Jt(e,t);var r=new dt("0.0.0");if(e.test(r)||(r=new dt("0.0.0-0"),e.test(r)))return r;r=null;for(var n=0;n<e.set.length;++n){var i=e.set[n];i.forEach(function(a){var s=new dt(a.semver.version);switch(a.operator){case">":s.prerelease.length===0?s.patch++:s.prerelease.push(0),s.raw=s.format();case"":case">=":(!r||fu(r,s))&&(r=s);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+a.operator)}})}return r&&e.test(r)?r:null}ze.validRange=SN;function SN(e,t){try{return new Jt(e,t).range||"*"}catch{return null}}ze.ltr=AN;function AN(e,t,r){return qp(e,t,"<",r)}ze.gtr=IN;function IN(e,t,r){return qp(e,t,">",r)}ze.outside=qp;function qp(e,t,r,n){e=new dt(e,n),t=new Jt(t,n);var i,a,s,u,f;switch(r){case">":i=fu,a=xp,s=Qc,u=">",f=">=";break;case"<":i=Qc,a=Lp,s=fu,u="<",f="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(Jc(e,t,n))return!1;for(var d=0;d<t.set.length;++d){var h=t.set[d],E=null,S=null;if(h.forEach(function(C){C.semver===pu&&(C=new Cn(">=0.0.0")),E=E||C,S=S||C,i(C.semver,E.semver,n)?E=C:s(C.semver,S.semver,n)&&(S=C)}),E.operator===u||E.operator===f||(!S.operator||S.operator===u)&&a(e,S.semver))return!1;if(S.operator===f&&s(e,S.semver))return!1}return!0}ze.prerelease=bN;function bN(e,t){var r=Ua(e,t);return r&&r.prerelease.length?r.prerelease:null}ze.intersects=ON;function ON(e,t,r){return e=new Jt(e,r),t=new Jt(t,r),e.intersects(t)}ze.coerce=PN;function PN(e){if(e instanceof dt)return e;if(typeof e!="string")return null;var t=e.match(jt[jE]);return t==null?null:Ua(t[1]+"."+(t[2]||"0")+"."+(t[3]||"0"))}});var jp=_(rl=>{"use strict";Object.defineProperty(rl,"__esModule",{value:!0});rl.makePatchingRequire=void 0;var CN=require("path"),RN=$E(),WE=require("module"),NN=Object.keys(process.binding("natives")),XE=WE.prototype.require;function wN(e){var t={};return function(n){var i=XE.apply(this,arguments);if(e[n]){var a=WE._resolveFilename(n,this);if(t.hasOwnProperty(a))return t[a];var s=void 0;if(NN.indexOf(n)<0)try{s=XE.call(this,CN.join(n,"package.json")).version}catch{return i}else s=process.version.substring(1);var u=s.indexOf("-");u>=0&&(s=s.substring(0,u));for(var f=i,d=0,h=e[n];d<h.length;d++){var E=h[d];RN.satisfies(s,E.versionSpecifier)&&(f=E.patch(f,a))}return t[a]=f}return i}}rl.makePatchingRequire=wN});var YE=_((wH,DN)=>{DN.exports={name:"diagnostic-channel",version:"1.0.0",main:"./dist/src/channel.js",types:"./dist/src/channel.d.ts",scripts:{build:"tsc",lint:"tslint -c tslint.json -p tsconfig.json",clean:"rimraf ./dist",test:"mocha ./dist/tests/**/*.js"},homepage:"https://github.com/Microsoft/node-diagnostic-channel",bugs:{url:"https://github.com/Microsoft/node-diagnostic-channel/issues"},repository:{type:"git",url:"https://github.com/Microsoft/node-diagnostic-channel.git"},description:"Provides a context-saving pub/sub channel to connect diagnostic event publishers and subscribers",dependencies:{semver:"^5.3.0"},devDependencies:{"@types/mocha":"^2.2.40","@types/node":"~8.0.0",mocha:"^3.2.0",rimraf:"^2.6.1",tslint:"^5.0.0",typescript:"4.1.2"},files:["dist/src/**/*.d.ts","dist/src/**/*.js","LICENSE","README.md","package.json"],license:"MIT"}});var pr=_(ko=>{"use strict";Object.defineProperty(ko,"__esModule",{value:!0});ko.channel=ko.makePatchingRequire=void 0;var MN=jp(),LN=jp();Object.defineProperty(ko,"makePatchingRequire",{enumerable:!0,get:function(){return LN.makePatchingRequire}});var QE=function(e){return!0},xN=function(){function e(){this.version=YE().version,this.subscribers={},this.contextPreservationFunction=function(t){return t},this.knownPatches={},this.currentlyPublishing=!1}return e.prototype.shouldPublish=function(t){var r=this.subscribers[t];return r?r.some(function(n){var i=n.filter;return!i||i(!1)}):!1},e.prototype.publish=function(t,r){if(!this.currentlyPublishing){var n=this.subscribers[t];if(n){var i={timestamp:Date.now(),data:r};this.currentlyPublishing=!0,n.forEach(function(a){var s=a.listener,u=a.filter;try{u&&u(!0)&&s(i)}catch{}}),this.currentlyPublishing=!1}}},e.prototype.subscribe=function(t,r,n){n===void 0&&(n=QE),this.subscribers[t]||(this.subscribers[t]=[]),this.subscribers[t].push({listener:r,filter:n})},e.prototype.unsubscribe=function(t,r,n){n===void 0&&(n=QE);var i=this.subscribers[t];if(i){for(var a=0;a<i.length;++a)if(i[a].listener===r&&i[a].filter===n)return i.splice(a,1),!0}return!1},e.prototype.reset=function(){var t=this;this.subscribers={},this.contextPreservationFunction=function(r){return r},Object.getOwnPropertyNames(this.knownPatches).forEach(function(r){return delete t.knownPatches[r]})},e.prototype.bindToContext=function(t){return this.contextPreservationFunction(t)},e.prototype.addContextPreservation=function(t){var r=this.contextPreservationFunction;this.contextPreservationFunction=function(n){return t(r(n))}},e.prototype.registerMonkeyPatch=function(t,r){this.knownPatches[t]||(this.knownPatches[t]=[]),this.knownPatches[t].push(r)},e.prototype.getPatchesObject=function(){return this.knownPatches},e}();global.diagnosticsSource||(global.diagnosticsSource=new xN,ZE=require("module"),ZE.prototype.require=MN.makePatchingRequire(global.diagnosticsSource.getPatchesObject()));var ZE;ko.channel=global.diagnosticsSource});var ey=_(JE=>{"use strict";Object.defineProperty(JE,"__esModule",{value:!0})});var ty=_(nl=>{"use strict";Object.defineProperty(nl,"__esModule",{value:!0});nl._globalThis=void 0;nl._globalThis=typeof globalThis=="object"?globalThis:global});var ry=_(Ha=>{"use strict";var qN=Ha&&Ha.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),jN=Ha&&Ha.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&qN(t,e,r)};Object.defineProperty(Ha,"__esModule",{value:!0});jN(ty(),Ha)});var ny=_(Ba=>{"use strict";var FN=Ba&&Ba.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),kN=Ba&&Ba.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&FN(t,e,r)};Object.defineProperty(Ba,"__esModule",{value:!0});kN(ry(),Ba)});var Fp=_(il=>{"use strict";Object.defineProperty(il,"__esModule",{value:!0});il.VERSION=void 0;il.VERSION="1.0.3"});var oy=_(Uo=>{"use strict";Object.defineProperty(Uo,"__esModule",{value:!0});Uo.isCompatible=Uo._makeCompatibilityCheck=void 0;var UN=Fp(),iy=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;function ay(e){var t=new Set([e]),r=new Set,n=e.match(iy);if(!n)return function(){return!1};var i={major:+n[1],minor:+n[2],patch:+n[3],prerelease:n[4]};if(i.prerelease!=null)return function(f){return f===e};function a(u){return r.add(u),!1}function s(u){return t.add(u),!0}return function(f){if(t.has(f))return!0;if(r.has(f))return!1;var d=f.match(iy);if(!d)return a(f);var h={major:+d[1],minor:+d[2],patch:+d[3],prerelease:d[4]};return h.prerelease!=null||i.major!==h.major?a(f):i.major===0?i.minor===h.minor&&i.patch<=h.patch?s(f):a(f):i.minor<=h.minor?s(f):a(f)}}Uo._makeCompatibilityCheck=ay;Uo.isCompatible=ay(UN.VERSION)});var Ho=_(ra=>{"use strict";Object.defineProperty(ra,"__esModule",{value:!0});ra.unregisterGlobal=ra.getGlobal=ra.registerGlobal=void 0;var HN=ny(),vu=Fp(),BN=oy(),GN=vu.VERSION.split(".")[0],hu=Symbol.for("opentelemetry.js.api."+GN),_u=HN._globalThis;function VN(e,t,r,n){var i;n===void 0&&(n=!1);var a=_u[hu]=(i=_u[hu])!==null&&i!==void 0?i:{version:vu.VERSION};if(!n&&a[e]){var s=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+e);return r.error(s.stack||s.message),!1}if(a.version!==vu.VERSION){var s=new Error("@opentelemetry/api: All API registration versions must match");return r.error(s.stack||s.message),!1}return a[e]=t,r.debug("@opentelemetry/api: Registered a global for "+e+" v"+vu.VERSION+"."),!0}ra.registerGlobal=VN;function zN(e){var t,r,n=(t=_u[hu])===null||t===void 0?void 0:t.version;if(!(!n||!BN.isCompatible(n)))return(r=_u[hu])===null||r===void 0?void 0:r[e]}ra.getGlobal=zN;function KN(e,t){t.debug("@opentelemetry/api: Unregistering a global for "+e+" v"+vu.VERSION+".");var r=_u[hu];r&&delete r[e]}ra.unregisterGlobal=KN});var sy=_(al=>{"use strict";Object.defineProperty(al,"__esModule",{value:!0});al.DiagComponentLogger=void 0;var $N=Ho(),XN=function(){function e(t){this._namespace=t.namespace||"DiagComponentLogger"}return e.prototype.debug=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return gu("debug",this._namespace,t)},e.prototype.error=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return gu("error",this._namespace,t)},e.prototype.info=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return gu("info",this._namespace,t)},e.prototype.warn=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return gu("warn",this._namespace,t)},e.prototype.verbose=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return gu("verbose",this._namespace,t)},e}();al.DiagComponentLogger=XN;function gu(e,t,r){var n=$N.getGlobal("diag");if(!!n)return r.unshift(t),n[e].apply(n,r)}});var ol=_(mu=>{"use strict";Object.defineProperty(mu,"__esModule",{value:!0});mu.DiagLogLevel=void 0;var WN;(function(e){e[e.NONE=0]="NONE",e[e.ERROR=30]="ERROR",e[e.WARN=50]="WARN",e[e.INFO=60]="INFO",e[e.DEBUG=70]="DEBUG",e[e.VERBOSE=80]="VERBOSE",e[e.ALL=9999]="ALL"})(WN=mu.DiagLogLevel||(mu.DiagLogLevel={}))});var uy=_(sl=>{"use strict";Object.defineProperty(sl,"__esModule",{value:!0});sl.createLogLevelDiagLogger=void 0;var Ai=ol();function YN(e,t){e<Ai.DiagLogLevel.NONE?e=Ai.DiagLogLevel.NONE:e>Ai.DiagLogLevel.ALL&&(e=Ai.DiagLogLevel.ALL),t=t||{};function r(n,i){var a=t[n];return typeof a=="function"&&e>=i?a.bind(t):function(){}}return{error:r("error",Ai.DiagLogLevel.ERROR),warn:r("warn",Ai.DiagLogLevel.WARN),info:r("info",Ai.DiagLogLevel.INFO),debug:r("debug",Ai.DiagLogLevel.DEBUG),verbose:r("verbose",Ai.DiagLogLevel.VERBOSE)}}sl.createLogLevelDiagLogger=YN});var Bo=_(cl=>{"use strict";Object.defineProperty(cl,"__esModule",{value:!0});cl.DiagAPI=void 0;var QN=sy(),ZN=uy(),JN=ol(),ul=Ho(),ew="diag",tw=function(){function e(){function t(n){return function(){var i=ul.getGlobal("diag");if(!!i)return i[n].apply(i,arguments)}}var r=this;r.setLogger=function(n,i){var a,s;if(i===void 0&&(i=JN.DiagLogLevel.INFO),n===r){var u=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return r.error((a=u.stack)!==null&&a!==void 0?a:u.message),!1}var f=ul.getGlobal("diag"),d=ZN.createLogLevelDiagLogger(i,n);if(f){var h=(s=new Error().stack)!==null&&s!==void 0?s:"<failed to generate stacktrace>";f.warn("Current logger will be overwritten from "+h),d.warn("Current logger will overwrite one already registered from "+h)}return ul.registerGlobal("diag",d,r,!0)},r.disable=function(){ul.unregisterGlobal(ew,r)},r.createComponentLogger=function(n){return new QN.DiagComponentLogger(n)},r.verbose=t("verbose"),r.debug=t("debug"),r.info=t("info"),r.warn=t("warn"),r.error=t("error")}return e.instance=function(){return this._instance||(this._instance=new e),this._instance},e}();cl.DiagAPI=tw});var cy=_(ll=>{"use strict";Object.defineProperty(ll,"__esModule",{value:!0});ll.BaggageImpl=void 0;var rw=function(){function e(t){this._entries=t?new Map(t):new Map}return e.prototype.getEntry=function(t){var r=this._entries.get(t);if(!!r)return Object.assign({},r)},e.prototype.getAllEntries=function(){return Array.from(this._entries.entries()).map(function(t){var r=t[0],n=t[1];return[r,n]})},e.prototype.setEntry=function(t,r){var n=new e(this._entries);return n._entries.set(t,r),n},e.prototype.removeEntry=function(t){var r=new e(this._entries);return r._entries.delete(t),r},e.prototype.removeEntries=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];for(var n=new e(this._entries),i=0,a=t;i<a.length;i++){var s=a[i];n._entries.delete(s)}return n},e.prototype.clear=function(){return new e},e}();ll.BaggageImpl=rw});var ly=_(fl=>{"use strict";Object.defineProperty(fl,"__esModule",{value:!0});fl.baggageEntryMetadataSymbol=void 0;fl.baggageEntryMetadataSymbol=Symbol("BaggageEntryMetadata")});var kp=_(Go=>{"use strict";Object.defineProperty(Go,"__esModule",{value:!0});Go.baggageEntryMetadataFromString=Go.createBaggage=void 0;var nw=Bo(),iw=cy(),aw=ly(),ow=nw.DiagAPI.instance();function sw(e){return e===void 0&&(e={}),new iw.BaggageImpl(new Map(Object.entries(e)))}Go.createBaggage=sw;function uw(e){return typeof e!="string"&&(ow.error("Cannot create baggage metadata from unknown type: "+typeof e),e=""),{__TYPE__:aw.baggageEntryMetadataSymbol,toString:function(){return e}}}Go.baggageEntryMetadataFromString=uw});var dy=_(fy=>{"use strict";Object.defineProperty(fy,"__esModule",{value:!0})});var vy=_(py=>{"use strict";Object.defineProperty(py,"__esModule",{value:!0})});var hy=_(dl=>{"use strict";Object.defineProperty(dl,"__esModule",{value:!0});dl.DiagConsoleLogger=void 0;var Up=[{n:"error",c:"error"},{n:"warn",c:"warn"},{n:"info",c:"info"},{n:"debug",c:"debug"},{n:"verbose",c:"trace"}],cw=function(){function e(){function t(n){return function(){var i=arguments;if(console){var a=console[n];if(typeof a!="function"&&(a=console.log),typeof a=="function")return a.apply(console,i)}}}for(var r=0;r<Up.length;r++)this[Up[r].n]=t(Up[r].c)}return e}();dl.DiagConsoleLogger=cw});var gy=_(na=>{"use strict";var lw=na&&na.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),_y=na&&na.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&lw(t,e,r)};Object.defineProperty(na,"__esModule",{value:!0});_y(hy(),na);_y(ol(),na)});var Hp=_(Vo=>{"use strict";Object.defineProperty(Vo,"__esModule",{value:!0});Vo.defaultTextMapSetter=Vo.defaultTextMapGetter=void 0;Vo.defaultTextMapGetter={get:function(e,t){if(e!=null)return e[t]},keys:function(e){return e==null?[]:Object.keys(e)}};Vo.defaultTextMapSetter={set:function(e,t,r){e!=null&&(e[t]=r)}}});var Ey=_(my=>{"use strict";Object.defineProperty(my,"__esModule",{value:!0})});var Ty=_(yy=>{"use strict";Object.defineProperty(yy,"__esModule",{value:!0})});var Eu=_(zo=>{"use strict";Object.defineProperty(zo,"__esModule",{value:!0});zo.ROOT_CONTEXT=zo.createContextKey=void 0;function fw(e){return Symbol.for(e)}zo.createContextKey=fw;var dw=function(){function e(t){var r=this;r._currentContext=t?new Map(t):new Map,r.getValue=function(n){return r._currentContext.get(n)},r.setValue=function(n,i){var a=new e(r._currentContext);return a._currentContext.set(n,i),a},r.deleteValue=function(n){var i=new e(r._currentContext);return i._currentContext.delete(n),i}}return e}();zo.ROOT_CONTEXT=new dw});var Sy=_(Ko=>{"use strict";var pw=Ko&&Ko.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty(Ko,"__esModule",{value:!0});Ko.NoopContextManager=void 0;var vw=Eu(),hw=function(){function e(){}return e.prototype.active=function(){return vw.ROOT_CONTEXT},e.prototype.with=function(t,r,n){for(var i=[],a=3;a<arguments.length;a++)i[a-3]=arguments[a];return r.call.apply(r,pw([n],i))},e.prototype.bind=function(t,r){return r},e.prototype.enable=function(){return this},e.prototype.disable=function(){return this},e}();Ko.NoopContextManager=hw});var Vp=_($o=>{"use strict";var _w=$o&&$o.__spreadArray||function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};Object.defineProperty($o,"__esModule",{value:!0});$o.ContextAPI=void 0;var gw=Sy(),Bp=Ho(),Ay=Bo(),Gp="context",mw=new gw.NoopContextManager,Ew=function(){function e(){}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalContextManager=function(t){return Bp.registerGlobal(Gp,t,Ay.DiagAPI.instance())},e.prototype.active=function(){return this._getContextManager().active()},e.prototype.with=function(t,r,n){for(var i,a=[],s=3;s<arguments.length;s++)a[s-3]=arguments[s];return(i=this._getContextManager()).with.apply(i,_w([t,r,n],a))},e.prototype.bind=function(t,r){return this._getContextManager().bind(t,r)},e.prototype._getContextManager=function(){return Bp.getGlobal(Gp)||mw},e.prototype.disable=function(){this._getContextManager().disable(),Bp.unregisterGlobal(Gp,Ay.DiagAPI.instance())},e}();$o.ContextAPI=Ew});var zp=_(yu=>{"use strict";Object.defineProperty(yu,"__esModule",{value:!0});yu.TraceFlags=void 0;var yw;(function(e){e[e.NONE=0]="NONE",e[e.SAMPLED=1]="SAMPLED"})(yw=yu.TraceFlags||(yu.TraceFlags={}))});var pl=_(ei=>{"use strict";Object.defineProperty(ei,"__esModule",{value:!0});ei.INVALID_SPAN_CONTEXT=ei.INVALID_TRACEID=ei.INVALID_SPANID=void 0;var Tw=zp();ei.INVALID_SPANID="0000000000000000";ei.INVALID_TRACEID="00000000000000000000000000000000";ei.INVALID_SPAN_CONTEXT={traceId:ei.INVALID_TRACEID,spanId:ei.INVALID_SPANID,traceFlags:Tw.TraceFlags.NONE}});var hl=_(vl=>{"use strict";Object.defineProperty(vl,"__esModule",{value:!0});vl.NonRecordingSpan=void 0;var Sw=pl(),Aw=function(){function e(t){t===void 0&&(t=Sw.INVALID_SPAN_CONTEXT),this._spanContext=t}return e.prototype.spanContext=function(){return this._spanContext},e.prototype.setAttribute=function(t,r){return this},e.prototype.setAttributes=function(t){return this},e.prototype.addEvent=function(t,r){return this},e.prototype.setStatus=function(t){return this},e.prototype.updateName=function(t){return this},e.prototype.end=function(t){},e.prototype.isRecording=function(){return!1},e.prototype.recordException=function(t,r){},e}();vl.NonRecordingSpan=Aw});var $p=_(Rn=>{"use strict";Object.defineProperty(Rn,"__esModule",{value:!0});Rn.getSpanContext=Rn.setSpanContext=Rn.deleteSpan=Rn.setSpan=Rn.getSpan=void 0;var Iw=Eu(),bw=hl(),Kp=Iw.createContextKey("OpenTelemetry Context Key SPAN");function Iy(e){return e.getValue(Kp)||void 0}Rn.getSpan=Iy;function by(e,t){return e.setValue(Kp,t)}Rn.setSpan=by;function Ow(e){return e.deleteValue(Kp)}Rn.deleteSpan=Ow;function Pw(e,t){return by(e,new bw.NonRecordingSpan(t))}Rn.setSpanContext=Pw;function Cw(e){var t;return(t=Iy(e))===null||t===void 0?void 0:t.spanContext()}Rn.getSpanContext=Cw});var _l=_(ti=>{"use strict";Object.defineProperty(ti,"__esModule",{value:!0});ti.wrapSpanContext=ti.isSpanContextValid=ti.isValidSpanId=ti.isValidTraceId=void 0;var Oy=pl(),Rw=hl(),Nw=/^([0-9a-f]{32})$/i,ww=/^[0-9a-f]{16}$/i;function Py(e){return Nw.test(e)&&e!==Oy.INVALID_TRACEID}ti.isValidTraceId=Py;function Cy(e){return ww.test(e)&&e!==Oy.INVALID_SPANID}ti.isValidSpanId=Cy;function Dw(e){return Py(e.traceId)&&Cy(e.spanId)}ti.isSpanContextValid=Dw;function Mw(e){return new Rw.NonRecordingSpan(e)}ti.wrapSpanContext=Mw});var Wp=_(gl=>{"use strict";Object.defineProperty(gl,"__esModule",{value:!0});gl.NoopTracer=void 0;var Lw=Vp(),Ry=$p(),Xp=hl(),xw=_l(),Ny=Lw.ContextAPI.getInstance(),qw=function(){function e(){}return e.prototype.startSpan=function(t,r,n){var i=Boolean(r==null?void 0:r.root);if(i)return new Xp.NonRecordingSpan;var a=n&&Ry.getSpanContext(n);return jw(a)&&xw.isSpanContextValid(a)?new Xp.NonRecordingSpan(a):new Xp.NonRecordingSpan},e.prototype.startActiveSpan=function(t,r,n,i){var a,s,u;if(!(arguments.length<2)){arguments.length===2?u=r:arguments.length===3?(a=r,u=n):(a=r,s=n,u=i);var f=s??Ny.active(),d=this.startSpan(t,a,f),h=Ry.setSpan(f,d);return Ny.with(h,u,void 0,d)}},e}();gl.NoopTracer=qw;function jw(e){return typeof e=="object"&&typeof e.spanId=="string"&&typeof e.traceId=="string"&&typeof e.traceFlags=="number"}});var Yp=_(ml=>{"use strict";Object.defineProperty(ml,"__esModule",{value:!0});ml.ProxyTracer=void 0;var Fw=Wp(),kw=new Fw.NoopTracer,Uw=function(){function e(t,r,n){this._provider=t,this.name=r,this.version=n}return e.prototype.startSpan=function(t,r,n){return this._getTracer().startSpan(t,r,n)},e.prototype.startActiveSpan=function(t,r,n,i){var a=this._getTracer();return Reflect.apply(a.startActiveSpan,a,arguments)},e.prototype._getTracer=function(){if(this._delegate)return this._delegate;var t=this._provider.getDelegateTracer(this.name,this.version);return t?(this._delegate=t,this._delegate):kw},e}();ml.ProxyTracer=Uw});var wy=_(El=>{"use strict";Object.defineProperty(El,"__esModule",{value:!0});El.NoopTracerProvider=void 0;var Hw=Wp(),Bw=function(){function e(){}return e.prototype.getTracer=function(t,r){return new Hw.NoopTracer},e}();El.NoopTracerProvider=Bw});var Qp=_(yl=>{"use strict";Object.defineProperty(yl,"__esModule",{value:!0});yl.ProxyTracerProvider=void 0;var Gw=Yp(),Vw=wy(),zw=new Vw.NoopTracerProvider,Kw=function(){function e(){}return e.prototype.getTracer=function(t,r){var n;return(n=this.getDelegateTracer(t,r))!==null&&n!==void 0?n:new Gw.ProxyTracer(this,t,r)},e.prototype.getDelegate=function(){var t;return(t=this._delegate)!==null&&t!==void 0?t:zw},e.prototype.setDelegate=function(t){this._delegate=t},e.prototype.getDelegateTracer=function(t,r){var n;return(n=this._delegate)===null||n===void 0?void 0:n.getTracer(t,r)},e}();yl.ProxyTracerProvider=Kw});var My=_(Dy=>{"use strict";Object.defineProperty(Dy,"__esModule",{value:!0})});var Ly=_(Tu=>{"use strict";Object.defineProperty(Tu,"__esModule",{value:!0});Tu.SamplingDecision=void 0;var $w;(function(e){e[e.NOT_RECORD=0]="NOT_RECORD",e[e.RECORD=1]="RECORD",e[e.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"})($w=Tu.SamplingDecision||(Tu.SamplingDecision={}))});var qy=_(xy=>{"use strict";Object.defineProperty(xy,"__esModule",{value:!0})});var jy=_(Su=>{"use strict";Object.defineProperty(Su,"__esModule",{value:!0});Su.SpanKind=void 0;var Xw;(function(e){e[e.INTERNAL=0]="INTERNAL",e[e.SERVER=1]="SERVER",e[e.CLIENT=2]="CLIENT",e[e.PRODUCER=3]="PRODUCER",e[e.CONSUMER=4]="CONSUMER"})(Xw=Su.SpanKind||(Su.SpanKind={}))});var ky=_(Fy=>{"use strict";Object.defineProperty(Fy,"__esModule",{value:!0})});var Hy=_(Uy=>{"use strict";Object.defineProperty(Uy,"__esModule",{value:!0})});var By=_(Au=>{"use strict";Object.defineProperty(Au,"__esModule",{value:!0});Au.SpanStatusCode=void 0;var Ww;(function(e){e[e.UNSET=0]="UNSET",e[e.OK=1]="OK",e[e.ERROR=2]="ERROR"})(Ww=Au.SpanStatusCode||(Au.SpanStatusCode={}))});var Vy=_(Gy=>{"use strict";Object.defineProperty(Gy,"__esModule",{value:!0})});var Ky=_(zy=>{"use strict";Object.defineProperty(zy,"__esModule",{value:!0})});var Xy=_($y=>{"use strict";Object.defineProperty($y,"__esModule",{value:!0})});var Yy=_(Wy=>{"use strict";Object.defineProperty(Wy,"__esModule",{value:!0})});var eT=_(Tl=>{"use strict";Object.defineProperty(Tl,"__esModule",{value:!0});Tl.TraceAPI=void 0;var Zp=Ho(),Qy=Qp(),Zy=_l(),Iu=$p(),Jy=Bo(),Jp="trace",Yw=function(){function e(){this._proxyTracerProvider=new Qy.ProxyTracerProvider,this.wrapSpanContext=Zy.wrapSpanContext,this.isSpanContextValid=Zy.isSpanContextValid,this.deleteSpan=Iu.deleteSpan,this.getSpan=Iu.getSpan,this.getSpanContext=Iu.getSpanContext,this.setSpan=Iu.setSpan,this.setSpanContext=Iu.setSpanContext}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalTracerProvider=function(t){var r=Zp.registerGlobal(Jp,this._proxyTracerProvider,Jy.DiagAPI.instance());return r&&this._proxyTracerProvider.setDelegate(t),r},e.prototype.getTracerProvider=function(){return Zp.getGlobal(Jp)||this._proxyTracerProvider},e.prototype.getTracer=function(t,r){return this.getTracerProvider().getTracer(t,r)},e.prototype.disable=function(){Zp.unregisterGlobal(Jp,Jy.DiagAPI.instance()),this._proxyTracerProvider=new Qy.ProxyTracerProvider},e}();Tl.TraceAPI=Yw});var tT=_(Sl=>{"use strict";Object.defineProperty(Sl,"__esModule",{value:!0});Sl.NoopTextMapPropagator=void 0;var Qw=function(){function e(){}return e.prototype.inject=function(t,r){},e.prototype.extract=function(t,r){return t},e.prototype.fields=function(){return[]},e}();Sl.NoopTextMapPropagator=Qw});var rT=_(ia=>{"use strict";Object.defineProperty(ia,"__esModule",{value:!0});ia.deleteBaggage=ia.setBaggage=ia.getBaggage=void 0;var Zw=Eu(),ev=Zw.createContextKey("OpenTelemetry Baggage Key");function Jw(e){return e.getValue(ev)||void 0}ia.getBaggage=Jw;function eD(e,t){return e.setValue(ev,t)}ia.setBaggage=eD;function tD(e){return e.deleteValue(ev)}ia.deleteBaggage=tD});var aT=_(Al=>{"use strict";Object.defineProperty(Al,"__esModule",{value:!0});Al.PropagationAPI=void 0;var tv=Ho(),rD=tT(),nT=Hp(),rv=rT(),nD=kp(),iT=Bo(),nv="propagation",iD=new rD.NoopTextMapPropagator,aD=function(){function e(){this.createBaggage=nD.createBaggage,this.getBaggage=rv.getBaggage,this.setBaggage=rv.setBaggage,this.deleteBaggage=rv.deleteBaggage}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalPropagator=function(t){return tv.registerGlobal(nv,t,iT.DiagAPI.instance())},e.prototype.inject=function(t,r,n){return n===void 0&&(n=nT.defaultTextMapSetter),this._getGlobalPropagator().inject(t,r,n)},e.prototype.extract=function(t,r,n){return n===void 0&&(n=nT.defaultTextMapGetter),this._getGlobalPropagator().extract(t,r,n)},e.prototype.fields=function(){return this._getGlobalPropagator().fields()},e.prototype.disable=function(){tv.unregisterGlobal(nv,iT.DiagAPI.instance())},e.prototype._getGlobalPropagator=function(){return tv.getGlobal(nv)||iD},e}();Al.PropagationAPI=aD});var Vt=_(Se=>{"use strict";var oD=Se&&Se.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),ir=Se&&Se.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&oD(t,e,r)};Object.defineProperty(Se,"__esModule",{value:!0});Se.diag=Se.propagation=Se.trace=Se.context=Se.INVALID_SPAN_CONTEXT=Se.INVALID_TRACEID=Se.INVALID_SPANID=Se.isValidSpanId=Se.isValidTraceId=Se.isSpanContextValid=Se.baggageEntryMetadataFromString=void 0;ir(ey(),Se);var sD=kp();Object.defineProperty(Se,"baggageEntryMetadataFromString",{enumerable:!0,get:function(){return sD.baggageEntryMetadataFromString}});ir(dy(),Se);ir(vy(),Se);ir(gy(),Se);ir(Hp(),Se);ir(Ey(),Se);ir(Ty(),Se);ir(Yp(),Se);ir(Qp(),Se);ir(My(),Se);ir(Ly(),Se);ir(qy(),Se);ir(jy(),Se);ir(ky(),Se);ir(Hy(),Se);ir(By(),Se);ir(zp(),Se);ir(Vy(),Se);ir(Ky(),Se);ir(Xy(),Se);var iv=_l();Object.defineProperty(Se,"isSpanContextValid",{enumerable:!0,get:function(){return iv.isSpanContextValid}});Object.defineProperty(Se,"isValidTraceId",{enumerable:!0,get:function(){return iv.isValidTraceId}});Object.defineProperty(Se,"isValidSpanId",{enumerable:!0,get:function(){return iv.isValidSpanId}});var av=pl();Object.defineProperty(Se,"INVALID_SPANID",{enumerable:!0,get:function(){return av.INVALID_SPANID}});Object.defineProperty(Se,"INVALID_TRACEID",{enumerable:!0,get:function(){return av.INVALID_TRACEID}});Object.defineProperty(Se,"INVALID_SPAN_CONTEXT",{enumerable:!0,get:function(){return av.INVALID_SPAN_CONTEXT}});ir(Eu(),Se);ir(Yy(),Se);var uD=Vp();Se.context=uD.ContextAPI.getInstance();var cD=eT();Se.trace=cD.TraceAPI.getInstance();var lD=aT();Se.propagation=lD.PropagationAPI.getInstance();var fD=Bo();Se.diag=fD.DiagAPI.instance();Se.default={trace:Se.trace,context:Se.context,propagation:Se.propagation,diag:Se.diag}});var Il=_(aa=>{"use strict";Object.defineProperty(aa,"__esModule",{value:!0});aa.isTracingSuppressed=aa.unsuppressTracing=aa.suppressTracing=void 0;var dD=Vt(),ov=dD.createContextKey("OpenTelemetry SDK Context Key SUPPRESS_TRACING");function pD(e){return e.setValue(ov,!0)}aa.suppressTracing=pD;function vD(e){return e.deleteValue(ov)}aa.unsuppressTracing=vD;function hD(e){return e.getValue(ov)===!0}aa.isTracingSuppressed=hD});var sv=_(Wr=>{"use strict";Object.defineProperty(Wr,"__esModule",{value:!0});Wr.BAGGAGE_MAX_TOTAL_LENGTH=Wr.BAGGAGE_MAX_PER_NAME_VALUE_PAIRS=Wr.BAGGAGE_MAX_NAME_VALUE_PAIRS=Wr.BAGGAGE_HEADER=Wr.BAGGAGE_ITEMS_SEPARATOR=Wr.BAGGAGE_PROPERTIES_SEPARATOR=Wr.BAGGAGE_KEY_PAIR_SEPARATOR=void 0;Wr.BAGGAGE_KEY_PAIR_SEPARATOR="=";Wr.BAGGAGE_PROPERTIES_SEPARATOR=";";Wr.BAGGAGE_ITEMS_SEPARATOR=",";Wr.BAGGAGE_HEADER="baggage";Wr.BAGGAGE_MAX_NAME_VALUE_PAIRS=180;Wr.BAGGAGE_MAX_PER_NAME_VALUE_PAIRS=4096;Wr.BAGGAGE_MAX_TOTAL_LENGTH=8192});var uv=_(Hn=>{"use strict";Object.defineProperty(Hn,"__esModule",{value:!0});Hn.parseKeyPairsIntoRecord=Hn.parsePairKeyValue=Hn.getKeyPairs=Hn.serializeKeyPairs=void 0;var _D=Vt(),Xo=sv(),gD=e=>e.reduce((t,r)=>{let n=`${t}${t!==""?Xo.BAGGAGE_ITEMS_SEPARATOR:""}${r}`;return n.length>Xo.BAGGAGE_MAX_TOTAL_LENGTH?t:n},"");Hn.serializeKeyPairs=gD;var mD=e=>e.getAllEntries().map(([t,r])=>`${encodeURIComponent(t)}=${encodeURIComponent(r.value)}`);Hn.getKeyPairs=mD;var ED=e=>{let t=e.split(Xo.BAGGAGE_PROPERTIES_SEPARATOR);if(t.length<=0)return;let r=t.shift();if(!r)return;let n=r.split(Xo.BAGGAGE_KEY_PAIR_SEPARATOR);if(n.length!==2)return;let i=decodeURIComponent(n[0].trim()),a=decodeURIComponent(n[1].trim()),s;return t.length>0&&(s=_D.baggageEntryMetadataFromString(t.join(Xo.BAGGAGE_PROPERTIES_SEPARATOR))),{key:i,value:a,metadata:s}};Hn.parsePairKeyValue=ED;var yD=e=>typeof e!="string"||e.length===0?{}:e.split(Xo.BAGGAGE_ITEMS_SEPARATOR).map(t=>Hn.parsePairKeyValue(t)).filter(t=>t!==void 0&&t.value.length>0).reduce((t,r)=>(t[r.key]=r.value,t),{});Hn.parseKeyPairsIntoRecord=yD});var oT=_(bl=>{"use strict";Object.defineProperty(bl,"__esModule",{value:!0});bl.HttpBaggagePropagator=void 0;var cv=Vt(),TD=Il(),Wo=sv(),lv=uv(),fv=class{inject(t,r,n){let i=cv.propagation.getBaggage(t);if(!i||TD.isTracingSuppressed(t))return;let a=lv.getKeyPairs(i).filter(u=>u.length<=Wo.BAGGAGE_MAX_PER_NAME_VALUE_PAIRS).slice(0,Wo.BAGGAGE_MAX_NAME_VALUE_PAIRS),s=lv.serializeKeyPairs(a);s.length>0&&n.set(r,Wo.BAGGAGE_HEADER,s)}extract(t,r,n){let i=n.get(r,Wo.BAGGAGE_HEADER);if(!i)return t;let a={};return i.length===0||(i.split(Wo.BAGGAGE_ITEMS_SEPARATOR).forEach(u=>{let f=lv.parsePairKeyValue(u);if(f){let d={value:f.value};f.metadata&&(d.metadata=f.metadata),a[f.key]=d}}),Object.entries(a).length===0)?t:cv.propagation.setBaggage(t,cv.propagation.createBaggage(a))}fields(){return[Wo.BAGGAGE_HEADER]}};bl.HttpBaggagePropagator=fv});var cT=_(Yo=>{"use strict";Object.defineProperty(Yo,"__esModule",{value:!0});Yo.isAttributeValue=Yo.sanitizeAttributes=void 0;function SD(e){let t={};if(e==null||typeof e!="object")return t;for(let[r,n]of Object.entries(e))sT(n)&&(Array.isArray(n)?t[r]=n.slice():t[r]=n);return t}Yo.sanitizeAttributes=SD;function sT(e){return e==null?!0:Array.isArray(e)?AD(e):uT(e)}Yo.isAttributeValue=sT;function AD(e){let t;for(let r of e)if(r!=null){if(!t){if(uT(r)){t=typeof r;continue}return!1}if(typeof r!==t)return!1}return!0}function uT(e){switch(typeof e){case"number":return!0;case"boolean":return!0;case"string":return!0}return!1}});var dv=_(Ol=>{"use strict";Object.defineProperty(Ol,"__esModule",{value:!0});Ol.loggingErrorHandler=void 0;var ID=Vt();function bD(){return e=>{ID.diag.error(OD(e))}}Ol.loggingErrorHandler=bD;function OD(e){return typeof e=="string"?e:JSON.stringify(PD(e))}function PD(e){let t={},r=e;for(;r!==null;)Object.getOwnPropertyNames(r).forEach(n=>{if(t[n])return;let i=r[n];i&&(t[n]=String(i))}),r=Object.getPrototypeOf(r);return t}});var pv=_(Qo=>{"use strict";Object.defineProperty(Qo,"__esModule",{value:!0});Qo.globalErrorHandler=Qo.setGlobalErrorHandler=void 0;var CD=dv(),lT=CD.loggingErrorHandler();function RD(e){lT=e}Qo.setGlobalErrorHandler=RD;var ND=e=>{try{lT(e)}catch{}};Qo.globalErrorHandler=ND});var vv=_(bu=>{"use strict";Object.defineProperty(bu,"__esModule",{value:!0});bu.TracesSamplerValues=void 0;var wD;(function(e){e.AlwaysOff="always_off",e.AlwaysOn="always_on",e.ParentBasedAlwaysOff="parentbased_always_off",e.ParentBasedAlwaysOn="parentbased_always_on",e.ParentBasedTraceIdRatio="parentbased_traceidratio",e.TraceIdRatio="traceidratio"})(wD=bu.TracesSamplerValues||(bu.TracesSamplerValues={}))});var hv=_(Ga=>{"use strict";Object.defineProperty(Ga,"__esModule",{value:!0});Ga.parseEnvironment=Ga.DEFAULT_ENVIRONMENT=void 0;var oa=Vt(),DD=vv(),MD=",",LD=["OTEL_BSP_EXPORT_TIMEOUT","OTEL_BSP_MAX_EXPORT_BATCH_SIZE","OTEL_BSP_MAX_QUEUE_SIZE","OTEL_BSP_SCHEDULE_DELAY","OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_EVENT_COUNT_LIMIT","OTEL_SPAN_LINK_COUNT_LIMIT"];function xD(e){return LD.indexOf(e)>-1}var qD=["OTEL_NO_PATCH_MODULES","OTEL_PROPAGATORS"];function jD(e){return qD.indexOf(e)>-1}Ga.DEFAULT_ENVIRONMENT={CONTAINER_NAME:"",ECS_CONTAINER_METADATA_URI_V4:"",ECS_CONTAINER_METADATA_URI:"",HOSTNAME:"",KUBERNETES_SERVICE_HOST:"",NAMESPACE:"",OTEL_BSP_EXPORT_TIMEOUT:3e4,OTEL_BSP_MAX_EXPORT_BATCH_SIZE:512,OTEL_BSP_MAX_QUEUE_SIZE:2048,OTEL_BSP_SCHEDULE_DELAY:5e3,OTEL_EXPORTER_JAEGER_AGENT_HOST:"",OTEL_EXPORTER_JAEGER_ENDPOINT:"",OTEL_EXPORTER_JAEGER_PASSWORD:"",OTEL_EXPORTER_JAEGER_USER:"",OTEL_EXPORTER_OTLP_ENDPOINT:"",OTEL_EXPORTER_OTLP_TRACES_ENDPOINT:"",OTEL_EXPORTER_OTLP_METRICS_ENDPOINT:"",OTEL_EXPORTER_OTLP_HEADERS:"",OTEL_EXPORTER_OTLP_TRACES_HEADERS:"",OTEL_EXPORTER_OTLP_METRICS_HEADERS:"",OTEL_EXPORTER_ZIPKIN_ENDPOINT:"http://localhost:9411/api/v2/spans",OTEL_LOG_LEVEL:oa.DiagLogLevel.INFO,OTEL_NO_PATCH_MODULES:[],OTEL_PROPAGATORS:["tracecontext","baggage"],OTEL_RESOURCE_ATTRIBUTES:"",OTEL_SERVICE_NAME:"",OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT:128,OTEL_SPAN_EVENT_COUNT_LIMIT:128,OTEL_SPAN_LINK_COUNT_LIMIT:128,OTEL_TRACES_EXPORTER:"none",OTEL_TRACES_SAMPLER:DD.TracesSamplerValues.ParentBasedAlwaysOn,OTEL_TRACES_SAMPLER_ARG:""};function FD(e,t,r,n=-1/0,i=1/0){if(typeof r[e]<"u"){let a=Number(r[e]);isNaN(a)||(a<n?t[e]=n:a>i?t[e]=i:t[e]=a)}}function kD(e,t,r,n=MD){let i=r[e];typeof i=="string"&&(t[e]=i.split(n).map(a=>a.trim()))}var UD={ALL:oa.DiagLogLevel.ALL,VERBOSE:oa.DiagLogLevel.VERBOSE,DEBUG:oa.DiagLogLevel.DEBUG,INFO:oa.DiagLogLevel.INFO,WARN:oa.DiagLogLevel.WARN,ERROR:oa.DiagLogLevel.ERROR,NONE:oa.DiagLogLevel.NONE};function HD(e,t,r){let n=r[e];if(typeof n=="string"){let i=UD[n.toUpperCase()];i!=null&&(t[e]=i)}}function BD(e){let t={};for(let r in Ga.DEFAULT_ENVIRONMENT){let n=r;switch(n){case"OTEL_LOG_LEVEL":HD(n,t,e);break;default:if(xD(n))FD(n,t,e);else if(jD(n))kD(n,t,e);else{let i=e[n];typeof i<"u"&&i!==null&&(t[n]=String(i))}}}return t}Ga.parseEnvironment=BD});var dT=_(Pl=>{"use strict";Object.defineProperty(Pl,"__esModule",{value:!0});Pl.getEnv=void 0;var GD=require("os"),fT=hv();function VD(){let e=fT.parseEnvironment(process.env);return Object.assign({HOSTNAME:GD.hostname()},fT.DEFAULT_ENVIRONMENT,e)}Pl.getEnv=VD});var pT=_(Cl=>{"use strict";Object.defineProperty(Cl,"__esModule",{value:!0});Cl.hexToBase64=void 0;function zD(e){let t=e.length,r="";for(let n=0;n<t;n+=2){let i=e.substring(n,n+2),a=parseInt(i,16);r+=String.fromCharCode(a)}return Buffer.from(r,"ascii").toString("base64")}Cl.hexToBase64=zD});var _T=_(Nl=>{"use strict";Object.defineProperty(Nl,"__esModule",{value:!0});Nl.RandomIdGenerator=void 0;var KD=8,hT=16,_v=class{constructor(){this.generateTraceId=vT(hT),this.generateSpanId=vT(KD)}};Nl.RandomIdGenerator=_v;var Rl=Buffer.allocUnsafe(hT);function vT(e){return function(){for(let r=0;r<e/4;r++)Rl.writeUInt32BE(Math.random()*2**32>>>0,r*4);for(let r=0;r<e&&!(Rl[r]>0);r++)r===e-1&&(Rl[e-1]=1);return Rl.toString("hex",0,e)}}});var gT=_(wl=>{"use strict";Object.defineProperty(wl,"__esModule",{value:!0});wl.otperformance=void 0;var $D=require("perf_hooks");wl.otperformance=$D.performance});var Ml=_(Dl=>{"use strict";Object.defineProperty(Dl,"__esModule",{value:!0});Dl.VERSION=void 0;Dl.VERSION="0.23.0"});var mT=_(ht=>{"use strict";Object.defineProperty(ht,"__esModule",{value:!0});ht.RpcGrpcStatusCodeValues=ht.MessagingOperationValues=ht.MessagingDestinationKindValues=ht.HttpFlavorValues=ht.NetTransportValues=ht.FaasInvokedProviderValues=ht.FaasDocumentOperationValues=ht.FaasTriggerValues=ht.DbCassandraConsistencyLevelValues=ht.DbSystemValues=ht.SemanticAttributes=void 0;ht.SemanticAttributes={DB_SYSTEM:"db.system",DB_CONNECTION_STRING:"db.connection_string",DB_USER:"db.user",DB_JDBC_DRIVER_CLASSNAME:"db.jdbc.driver_classname",DB_NAME:"db.name",DB_STATEMENT:"db.statement",DB_OPERATION:"db.operation",DB_MSSQL_INSTANCE_NAME:"db.mssql.instance_name",DB_CASSANDRA_KEYSPACE:"db.cassandra.keyspace",DB_CASSANDRA_PAGE_SIZE:"db.cassandra.page_size",DB_CASSANDRA_CONSISTENCY_LEVEL:"db.cassandra.consistency_level",DB_CASSANDRA_TABLE:"db.cassandra.table",DB_CASSANDRA_IDEMPOTENCE:"db.cassandra.idempotence",DB_CASSANDRA_SPECULATIVE_EXECUTION_COUNT:"db.cassandra.speculative_execution_count",DB_CASSANDRA_COORDINATOR_ID:"db.cassandra.coordinator.id",DB_CASSANDRA_COORDINATOR_DC:"db.cassandra.coordinator.dc",DB_HBASE_NAMESPACE:"db.hbase.namespace",DB_REDIS_DATABASE_INDEX:"db.redis.database_index",DB_MONGODB_COLLECTION:"db.mongodb.collection",DB_SQL_TABLE:"db.sql.table",EXCEPTION_TYPE:"exception.type",EXCEPTION_MESSAGE:"exception.message",EXCEPTION_STACKTRACE:"exception.stacktrace",EXCEPTION_ESCAPED:"exception.escaped",FAAS_TRIGGER:"faas.trigger",FAAS_EXECUTION:"faas.execution",FAAS_DOCUMENT_COLLECTION:"faas.document.collection",FAAS_DOCUMENT_OPERATION:"faas.document.operation",FAAS_DOCUMENT_TIME:"faas.document.time",FAAS_DOCUMENT_NAME:"faas.document.name",FAAS_TIME:"faas.time",FAAS_CRON:"faas.cron",FAAS_COLDSTART:"faas.coldstart",FAAS_INVOKED_NAME:"faas.invoked_name",FAAS_INVOKED_PROVIDER:"faas.invoked_provider",FAAS_INVOKED_REGION:"faas.invoked_region",NET_TRANSPORT:"net.transport",NET_PEER_IP:"net.peer.ip",NET_PEER_PORT:"net.peer.port",NET_PEER_NAME:"net.peer.name",NET_HOST_IP:"net.host.ip",NET_HOST_PORT:"net.host.port",NET_HOST_NAME:"net.host.name",PEER_SERVICE:"peer.service",ENDUSER_ID:"enduser.id",ENDUSER_ROLE:"enduser.role",ENDUSER_SCOPE:"enduser.scope",THREAD_ID:"thread.id",THREAD_NAME:"thread.name",CODE_FUNCTION:"code.function",CODE_NAMESPACE:"code.namespace",CODE_FILEPATH:"code.filepath",CODE_LINENO:"code.lineno",HTTP_METHOD:"http.method",HTTP_URL:"http.url",HTTP_TARGET:"http.target",HTTP_HOST:"http.host",HTTP_SCHEME:"http.scheme",HTTP_STATUS_CODE:"http.status_code",HTTP_FLAVOR:"http.flavor",HTTP_USER_AGENT:"http.user_agent",HTTP_REQUEST_CONTENT_LENGTH:"http.request_content_length",HTTP_REQUEST_CONTENT_LENGTH_UNCOMPRESSED:"http.request_content_length_uncompressed",HTTP_RESPONSE_CONTENT_LENGTH:"http.response_content_length",HTTP_RESPONSE_CONTENT_LENGTH_UNCOMPRESSED:"http.response_content_length_uncompressed",HTTP_SERVER_NAME:"http.server_name",HTTP_ROUTE:"http.route",HTTP_CLIENT_IP:"http.client_ip",AWS_DYNAMODB_TABLE_NAMES:"aws.dynamodb.table_names",AWS_DYNAMODB_CONSUMED_CAPACITY:"aws.dynamodb.consumed_capacity",AWS_DYNAMODB_ITEM_COLLECTION_METRICS:"aws.dynamodb.item_collection_metrics",AWS_DYNAMODB_PROVISIONED_READ_CAPACITY:"aws.dynamodb.provisioned_read_capacity",AWS_DYNAMODB_PROVISIONED_WRITE_CAPACITY:"aws.dynamodb.provisioned_write_capacity",AWS_DYNAMODB_CONSISTENT_READ:"aws.dynamodb.consistent_read",AWS_DYNAMODB_PROJECTION:"aws.dynamodb.projection",AWS_DYNAMODB_LIMIT:"aws.dynamodb.limit",AWS_DYNAMODB_ATTRIBUTES_TO_GET:"aws.dynamodb.attributes_to_get",AWS_DYNAMODB_INDEX_NAME:"aws.dynamodb.index_name",AWS_DYNAMODB_SELECT:"aws.dynamodb.select",AWS_DYNAMODB_GLOBAL_SECONDARY_INDEXES:"aws.dynamodb.global_secondary_indexes",AWS_DYNAMODB_LOCAL_SECONDARY_INDEXES:"aws.dynamodb.local_secondary_indexes",AWS_DYNAMODB_EXCLUSIVE_START_TABLE:"aws.dynamodb.exclusive_start_table",AWS_DYNAMODB_TABLE_COUNT:"aws.dynamodb.table_count",AWS_DYNAMODB_SCAN_FORWARD:"aws.dynamodb.scan_forward",AWS_DYNAMODB_SEGMENT:"aws.dynamodb.segment",AWS_DYNAMODB_TOTAL_SEGMENTS:"aws.dynamodb.total_segments",AWS_DYNAMODB_COUNT:"aws.dynamodb.count",AWS_DYNAMODB_SCANNED_COUNT:"aws.dynamodb.scanned_count",AWS_DYNAMODB_ATTRIBUTE_DEFINITIONS:"aws.dynamodb.attribute_definitions",AWS_DYNAMODB_GLOBAL_SECONDARY_INDEX_UPDATES:"aws.dynamodb.global_secondary_index_updates",MESSAGING_SYSTEM:"messaging.system",MESSAGING_DESTINATION:"messaging.destination",MESSAGING_DESTINATION_KIND:"messaging.destination_kind",MESSAGING_TEMP_DESTINATION:"messaging.temp_destination",MESSAGING_PROTOCOL:"messaging.protocol",MESSAGING_PROTOCOL_VERSION:"messaging.protocol_version",MESSAGING_URL:"messaging.url",MESSAGING_MESSAGE_ID:"messaging.message_id",MESSAGING_CONVERSATION_ID:"messaging.conversation_id",MESSAGING_MESSAGE_PAYLOAD_SIZE_BYTES:"messaging.message_payload_size_bytes",MESSAGING_MESSAGE_PAYLOAD_COMPRESSED_SIZE_BYTES:"messaging.message_payload_compressed_size_bytes",MESSAGING_OPERATION:"messaging.operation",MESSAGING_RABBITMQ_ROUTING_KEY:"messaging.rabbitmq.routing_key",MESSAGING_KAFKA_MESSAGE_KEY:"messaging.kafka.message_key",MESSAGING_KAFKA_CONSUMER_GROUP:"messaging.kafka.consumer_group",MESSAGING_KAFKA_CLIENT_ID:"messaging.kafka.client_id",MESSAGING_KAFKA_PARTITION:"messaging.kafka.partition",MESSAGING_KAFKA_TOMBSTONE:"messaging.kafka.tombstone",RPC_SYSTEM:"rpc.system",RPC_SERVICE:"rpc.service",RPC_METHOD:"rpc.method",RPC_GRPC_STATUS_CODE:"rpc.grpc.status_code",RPC_JSONRPC_VERSION:"rpc.jsonrpc.version",RPC_JSONRPC_METHOD:"rpc.jsonrpc.method",RPC_JSONRPC_REQUEST_ID:"rpc.jsonrpc.request_id",RPC_JSONRPC_ERROR_CODE:"rpc.jsonrpc.error_code",RPC_JSONRPC_ERROR_MESSAGE:"rpc.jsonrpc.error_message"};var XD;(function(e){e.OTHER_SQL="other_sql",e.MSSQL="mssql",e.MYSQL="mysql",e.ORACLE="oracle",e.DB2="db2",e.POSTGRESQL="postgresql",e.REDSHIFT="redshift",e.HIVE="hive",e.CLOUDSCAPE="cloudscape",e.HSQLDB="hsqldb",e.PROGRESS="progress",e.MAXDB="maxdb",e.HANADB="hanadb",e.INGRES="ingres",e.FIRSTSQL="firstsql",e.EDB="edb",e.CACHE="cache",e.ADABAS="adabas",e.FIREBIRD="firebird",e.DERBY="derby",e.FILEMAKER="filemaker",e.INFORMIX="informix",e.INSTANTDB="instantdb",e.INTERBASE="interbase",e.MARIADB="mariadb",e.NETEZZA="netezza",e.PERVASIVE="pervasive",e.POINTBASE="pointbase",e.SQLITE="sqlite",e.SYBASE="sybase",e.TERADATA="teradata",e.VERTICA="vertica",e.H2="h2",e.COLDFUSION="coldfusion",e.CASSANDRA="cassandra",e.HBASE="hbase",e.MONGODB="mongodb",e.REDIS="redis",e.COUCHBASE="couchbase",e.COUCHDB="couchdb",e.COSMOSDB="cosmosdb",e.DYNAMODB="dynamodb",e.NEO4J="neo4j",e.GEODE="geode",e.ELASTICSEARCH="elasticsearch",e.MEMCACHED="memcached",e.COCKROACHDB="cockroachdb"})(XD=ht.DbSystemValues||(ht.DbSystemValues={}));var WD;(function(e){e.ALL="all",e.EACH_QUORUM="each_quorum",e.QUORUM="quorum",e.LOCAL_QUORUM="local_quorum",e.ONE="one",e.TWO="two",e.THREE="three",e.LOCAL_ONE="local_one",e.ANY="any",e.SERIAL="serial",e.LOCAL_SERIAL="local_serial"})(WD=ht.DbCassandraConsistencyLevelValues||(ht.DbCassandraConsistencyLevelValues={}));var YD;(function(e){e.DATASOURCE="datasource",e.HTTP="http",e.PUBSUB="pubsub",e.TIMER="timer",e.OTHER="other"})(YD=ht.FaasTriggerValues||(ht.FaasTriggerValues={}));var QD;(function(e){e.INSERT="insert",e.EDIT="edit",e.DELETE="delete"})(QD=ht.FaasDocumentOperationValues||(ht.FaasDocumentOperationValues={}));var ZD;(function(e){e.AWS="aws",e.AZURE="azure",e.GCP="gcp"})(ZD=ht.FaasInvokedProviderValues||(ht.FaasInvokedProviderValues={}));var JD;(function(e){e.IP_TCP="ip_tcp",e.IP_UDP="ip_udp",e.IP="ip",e.UNIX="unix",e.PIPE="pipe",e.INPROC="inproc",e.OTHER="other"})(JD=ht.NetTransportValues||(ht.NetTransportValues={}));var eM;(function(e){e.HTTP_1_0="1.0",e.HTTP_1_1="1.1",e.HTTP_2_0="2.0",e.SPDY="SPDY",e.QUIC="QUIC"})(eM=ht.HttpFlavorValues||(ht.HttpFlavorValues={}));var tM;(function(e){e.QUEUE="queue",e.TOPIC="topic"})(tM=ht.MessagingDestinationKindValues||(ht.MessagingDestinationKindValues={}));var rM;(function(e){e.RECEIVE="receive",e.PROCESS="process"})(rM=ht.MessagingOperationValues||(ht.MessagingOperationValues={}));var nM;(function(e){e[e.OK=0]="OK",e[e.CANCELLED=1]="CANCELLED",e[e.UNKNOWN=2]="UNKNOWN",e[e.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",e[e.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",e[e.NOT_FOUND=5]="NOT_FOUND",e[e.ALREADY_EXISTS=6]="ALREADY_EXISTS",e[e.PERMISSION_DENIED=7]="PERMISSION_DENIED",e[e.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",e[e.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",e[e.ABORTED=10]="ABORTED",e[e.OUT_OF_RANGE=11]="OUT_OF_RANGE",e[e.UNIMPLEMENTED=12]="UNIMPLEMENTED",e[e.INTERNAL=13]="INTERNAL",e[e.UNAVAILABLE=14]="UNAVAILABLE",e[e.DATA_LOSS=15]="DATA_LOSS",e[e.UNAUTHENTICATED=16]="UNAUTHENTICATED"})(nM=ht.RpcGrpcStatusCodeValues||(ht.RpcGrpcStatusCodeValues={}))});var ET=_(Va=>{"use strict";var iM=Va&&Va.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),aM=Va&&Va.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&iM(t,e,r)};Object.defineProperty(Va,"__esModule",{value:!0});aM(mT(),Va)});var yT=_(ar=>{"use strict";Object.defineProperty(ar,"__esModule",{value:!0});ar.TelemetrySdkLanguageValues=ar.OsTypeValues=ar.HostArchValues=ar.AwsEcsLaunchtypeValues=ar.CloudPlatformValues=ar.CloudProviderValues=ar.ResourceAttributes=void 0;ar.ResourceAttributes={CLOUD_PROVIDER:"cloud.provider",CLOUD_ACCOUNT_ID:"cloud.account.id",CLOUD_REGION:"cloud.region",CLOUD_AVAILABILITY_ZONE:"cloud.availability_zone",CLOUD_PLATFORM:"cloud.platform",AWS_ECS_CONTAINER_ARN:"aws.ecs.container.arn",AWS_ECS_CLUSTER_ARN:"aws.ecs.cluster.arn",AWS_ECS_LAUNCHTYPE:"aws.ecs.launchtype",AWS_ECS_TASK_ARN:"aws.ecs.task.arn",AWS_ECS_TASK_FAMILY:"aws.ecs.task.family",AWS_ECS_TASK_REVISION:"aws.ecs.task.revision",AWS_EKS_CLUSTER_ARN:"aws.eks.cluster.arn",AWS_LOG_GROUP_NAMES:"aws.log.group.names",AWS_LOG_GROUP_ARNS:"aws.log.group.arns",AWS_LOG_STREAM_NAMES:"aws.log.stream.names",AWS_LOG_STREAM_ARNS:"aws.log.stream.arns",CONTAINER_NAME:"container.name",CONTAINER_ID:"container.id",CONTAINER_RUNTIME:"container.runtime",CONTAINER_IMAGE_NAME:"container.image.name",CONTAINER_IMAGE_TAG:"container.image.tag",DEPLOYMENT_ENVIRONMENT:"deployment.environment",DEVICE_ID:"device.id",DEVICE_MODEL_IDENTIFIER:"device.model.identifier",DEVICE_MODEL_NAME:"device.model.name",FAAS_NAME:"faas.name",FAAS_ID:"faas.id",FAAS_VERSION:"faas.version",FAAS_INSTANCE:"faas.instance",FAAS_MAX_MEMORY:"faas.max_memory",HOST_ID:"host.id",HOST_NAME:"host.name",HOST_TYPE:"host.type",HOST_ARCH:"host.arch",HOST_IMAGE_NAME:"host.image.name",HOST_IMAGE_ID:"host.image.id",HOST_IMAGE_VERSION:"host.image.version",K8S_CLUSTER_NAME:"k8s.cluster.name",K8S_NODE_NAME:"k8s.node.name",K8S_NODE_UID:"k8s.node.uid",K8S_NAMESPACE_NAME:"k8s.namespace.name",K8S_POD_UID:"k8s.pod.uid",K8S_POD_NAME:"k8s.pod.name",K8S_CONTAINER_NAME:"k8s.container.name",K8S_REPLICASET_UID:"k8s.replicaset.uid",K8S_REPLICASET_NAME:"k8s.replicaset.name",K8S_DEPLOYMENT_UID:"k8s.deployment.uid",K8S_DEPLOYMENT_NAME:"k8s.deployment.name",K8S_STATEFULSET_UID:"k8s.statefulset.uid",K8S_STATEFULSET_NAME:"k8s.statefulset.name",K8S_DAEMONSET_UID:"k8s.daemonset.uid",K8S_DAEMONSET_NAME:"k8s.daemonset.name",K8S_JOB_UID:"k8s.job.uid",K8S_JOB_NAME:"k8s.job.name",K8S_CRONJOB_UID:"k8s.cronjob.uid",K8S_CRONJOB_NAME:"k8s.cronjob.name",OS_TYPE:"os.type",OS_DESCRIPTION:"os.description",OS_NAME:"os.name",OS_VERSION:"os.version",PROCESS_PID:"process.pid",PROCESS_EXECUTABLE_NAME:"process.executable.name",PROCESS_EXECUTABLE_PATH:"process.executable.path",PROCESS_COMMAND:"process.command",PROCESS_COMMAND_LINE:"process.command_line",PROCESS_COMMAND_ARGS:"process.command_args",PROCESS_OWNER:"process.owner",PROCESS_RUNTIME_NAME:"process.runtime.name",PROCESS_RUNTIME_VERSION:"process.runtime.version",PROCESS_RUNTIME_DESCRIPTION:"process.runtime.description",SERVICE_NAME:"service.name",SERVICE_NAMESPACE:"service.namespace",SERVICE_INSTANCE_ID:"service.instance.id",SERVICE_VERSION:"service.version",TELEMETRY_SDK_NAME:"telemetry.sdk.name",TELEMETRY_SDK_LANGUAGE:"telemetry.sdk.language",TELEMETRY_SDK_VERSION:"telemetry.sdk.version",TELEMETRY_AUTO_VERSION:"telemetry.auto.version",WEBENGINE_NAME:"webengine.name",WEBENGINE_VERSION:"webengine.version",WEBENGINE_DESCRIPTION:"webengine.description"};var oM;(function(e){e.AWS="aws",e.AZURE="azure",e.GCP="gcp"})(oM=ar.CloudProviderValues||(ar.CloudProviderValues={}));var sM;(function(e){e.AWS_EC2="aws_ec2",e.AWS_ECS="aws_ecs",e.AWS_EKS="aws_eks",e.AWS_LAMBDA="aws_lambda",e.AWS_ELASTIC_BEANSTALK="aws_elastic_beanstalk",e.AZURE_VM="azure_vm",e.AZURE_CONTAINER_INSTANCES="azure_container_instances",e.AZURE_AKS="azure_aks",e.AZURE_FUNCTIONS="azure_functions",e.AZURE_APP_SERVICE="azure_app_service",e.GCP_COMPUTE_ENGINE="gcp_compute_engine",e.GCP_CLOUD_RUN="gcp_cloud_run",e.GCP_KUBERNETES_ENGINE="gcp_kubernetes_engine",e.GCP_CLOUD_FUNCTIONS="gcp_cloud_functions",e.GCP_APP_ENGINE="gcp_app_engine"})(sM=ar.CloudPlatformValues||(ar.CloudPlatformValues={}));var uM;(function(e){e.EC2="ec2",e.FARGATE="fargate"})(uM=ar.AwsEcsLaunchtypeValues||(ar.AwsEcsLaunchtypeValues={}));var cM;(function(e){e.AMD64="amd64",e.ARM32="arm32",e.ARM64="arm64",e.IA64="ia64",e.PPC32="ppc32",e.PPC64="ppc64",e.X86="x86"})(cM=ar.HostArchValues||(ar.HostArchValues={}));var lM;(function(e){e.WINDOWS="windows",e.LINUX="linux",e.DARWIN="darwin",e.FREEBSD="freebsd",e.NETBSD="netbsd",e.OPENBSD="openbsd",e.DRAGONFLYBSD="dragonflybsd",e.HPUX="hpux",e.AIX="aix",e.SOLARIS="solaris",e.Z_OS="z_os"})(lM=ar.OsTypeValues||(ar.OsTypeValues={}));var fM;(function(e){e.CPP="cpp",e.DOTNET="dotnet",e.ERLANG="erlang",e.GO="go",e.JAVA="java",e.NODEJS="nodejs",e.PHP="php",e.PYTHON="python",e.RUBY="ruby",e.WEBJS="webjs"})(fM=ar.TelemetrySdkLanguageValues||(ar.TelemetrySdkLanguageValues={}))});var TT=_(za=>{"use strict";var dM=za&&za.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),pM=za&&za.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&dM(t,e,r)};Object.defineProperty(za,"__esModule",{value:!0});pM(yT(),za)});var Zo=_(sa=>{"use strict";var vM=sa&&sa.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),ST=sa&&sa.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&vM(t,e,r)};Object.defineProperty(sa,"__esModule",{value:!0});ST(ET(),sa);ST(TT(),sa)});var AT=_(Ll=>{"use strict";Object.defineProperty(Ll,"__esModule",{value:!0});Ll.SDK_INFO=void 0;var hM=Ml(),Ou=Zo();Ll.SDK_INFO={[Ou.ResourceAttributes.TELEMETRY_SDK_NAME]:"opentelemetry",[Ou.ResourceAttributes.PROCESS_RUNTIME_NAME]:"node",[Ou.ResourceAttributes.TELEMETRY_SDK_LANGUAGE]:Ou.TelemetrySdkLanguageValues.NODEJS,[Ou.ResourceAttributes.TELEMETRY_SDK_VERSION]:hM.VERSION}});var IT=_(xl=>{"use strict";Object.defineProperty(xl,"__esModule",{value:!0});xl.unrefTimer=void 0;function _M(e){e.unref()}xl.unrefTimer=_M});var bT=_(Nn=>{"use strict";var gM=Nn&&Nn.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),Jo=Nn&&Nn.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&gM(t,e,r)};Object.defineProperty(Nn,"__esModule",{value:!0});Jo(dT(),Nn);Jo(pT(),Nn);Jo(_T(),Nn);Jo(gT(),Nn);Jo(AT(),Nn);Jo(IT(),Nn)});var gv=_(Ka=>{"use strict";var mM=Ka&&Ka.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),EM=Ka&&Ka.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&mM(t,e,r)};Object.defineProperty(Ka,"__esModule",{value:!0});EM(bT(),Ka)});var CT=_(Sr=>{"use strict";Object.defineProperty(Sr,"__esModule",{value:!0});Sr.isTimeInput=Sr.isTimeInputHrTime=Sr.hrTimeToMicroseconds=Sr.hrTimeToMilliseconds=Sr.hrTimeToNanoseconds=Sr.hrTimeToTimeStamp=Sr.hrTimeDuration=Sr.timeInputToHrTime=Sr.hrTime=void 0;var mv=gv(),Ev=9,Pu=Math.pow(10,Ev);function ql(e){let t=e/1e3,r=Math.trunc(t),n=Number((t-r).toFixed(Ev))*Pu;return[r,n]}function OT(){let e=mv.otperformance.timeOrigin;if(typeof e!="number"){let t=mv.otperformance;e=t.timing&&t.timing.fetchStart}return e}function PT(e){let t=ql(OT()),r=ql(typeof e=="number"?e:mv.otperformance.now()),n=t[0]+r[0],i=t[1]+r[1];return i>Pu&&(i-=Pu,n+=1),[n,i]}Sr.hrTime=PT;function yM(e){if(yv(e))return e;if(typeof e=="number")return e<OT()?PT(e):ql(e);if(e instanceof Date)return ql(e.getTime());throw TypeError("Invalid input type")}Sr.timeInputToHrTime=yM;function TM(e,t){let r=t[0]-e[0],n=t[1]-e[1];return n<0&&(r-=1,n+=Pu),[r,n]}Sr.hrTimeDuration=TM;function SM(e){let t=Ev,r=`${"0".repeat(t)}${e[1]}Z`,n=r.substr(r.length-t-1);return new Date(e[0]*1e3).toISOString().replace("000Z",n)}Sr.hrTimeToTimeStamp=SM;function AM(e){return e[0]*Pu+e[1]}Sr.hrTimeToNanoseconds=AM;function IM(e){return Math.round(e[0]*1e3+e[1]/1e6)}Sr.hrTimeToMilliseconds=IM;function bM(e){return Math.round(e[0]*1e6+e[1]/1e3)}Sr.hrTimeToMicroseconds=bM;function yv(e){return Array.isArray(e)&&e.length===2&&typeof e[0]=="number"&&typeof e[1]=="number"}Sr.isTimeInputHrTime=yv;function OM(e){return yv(e)||typeof e=="number"||e instanceof Date}Sr.isTimeInput=OM});var NT=_(RT=>{"use strict";Object.defineProperty(RT,"__esModule",{value:!0})});var wT=_(Cu=>{"use strict";Object.defineProperty(Cu,"__esModule",{value:!0});Cu.ExportResultCode=void 0;var PM;(function(e){e[e.SUCCESS=0]="SUCCESS",e[e.FAILED=1]="FAILED"})(PM=Cu.ExportResultCode||(Cu.ExportResultCode={}))});var MT=_(jl=>{"use strict";Object.defineProperty(jl,"__esModule",{value:!0});jl.CompositePropagator=void 0;var DT=Vt(),Tv=class{constructor(t={}){var r;this._propagators=(r=t.propagators)!==null&&r!==void 0?r:[],this._fields=Array.from(new Set(this._propagators.map(n=>typeof n.fields=="function"?n.fields():[]).reduce((n,i)=>n.concat(i),[])))}inject(t,r,n){for(let i of this._propagators)try{i.inject(t,r,n)}catch(a){DT.diag.warn(`Failed to inject with ${i.constructor.name}. Err: ${a.message}`)}}extract(t,r,n){return this._propagators.reduce((i,a)=>{try{return a.extract(i,r,n)}catch(s){DT.diag.warn(`Failed to inject with ${a.constructor.name}. Err: ${s.message}`)}return i},t)}fields(){return this._fields.slice()}};jl.CompositePropagator=Tv});var LT=_(es=>{"use strict";Object.defineProperty(es,"__esModule",{value:!0});es.validateValue=es.validateKey=void 0;var Sv="[_0-9a-z-*/]",CM=`[a-z]${Sv}{0,255}`,RM=`[a-z0-9]${Sv}{0,240}@[a-z]${Sv}{0,13}`,NM=new RegExp(`^(?:${CM}|${RM})$`),wM=/^[ -~]{0,255}[!-~]$/,DM=/,|=/;function MM(e){return NM.test(e)}es.validateKey=MM;function LM(e){return wM.test(e)&&!DM.test(e)}es.validateValue=LM});var Av=_(Fl=>{"use strict";Object.defineProperty(Fl,"__esModule",{value:!0});Fl.TraceState=void 0;var xT=LT(),qT=32,xM=512,jT=",",FT="=",Ru=class{constructor(t){this._internalState=new Map,t&&this._parse(t)}set(t,r){let n=this._clone();return n._internalState.has(t)&&n._internalState.delete(t),n._internalState.set(t,r),n}unset(t){let r=this._clone();return r._internalState.delete(t),r}get(t){return this._internalState.get(t)}serialize(){return this._keys().reduce((t,r)=>(t.push(r+FT+this.get(r)),t),[]).join(jT)}_parse(t){t.length>xM||(this._internalState=t.split(jT).reverse().reduce((r,n)=>{let i=n.trim(),a=i.indexOf(FT);if(a!==-1){let s=i.slice(0,a),u=i.slice(a+1,n.length);xT.validateKey(s)&&xT.validateValue(u)&&r.set(s,u)}return r},new Map),this._internalState.size>qT&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,qT))))}_keys(){return Array.from(this._internalState.keys()).reverse()}_clone(){let t=new Ru;return t._internalState=new Map(this._internalState),t}};Fl.TraceState=Ru});var UT=_(Yr=>{"use strict";Object.defineProperty(Yr,"__esModule",{value:!0});Yr.HttpTraceContextPropagator=Yr.parseTraceParent=Yr.TRACE_STATE_HEADER=Yr.TRACE_PARENT_HEADER=void 0;var kl=Vt(),qM=Il(),jM=Av();Yr.TRACE_PARENT_HEADER="traceparent";Yr.TRACE_STATE_HEADER="tracestate";var FM="00",kM="(?!ff)[\\da-f]{2}",UM="(?![0]{32})[\\da-f]{32}",HM="(?![0]{16})[\\da-f]{16}",BM="[\\da-f]{2}",GM=new RegExp(`^\\s?(${kM})-(${UM})-(${HM})-(${BM})(-.*)?\\s?$`);function kT(e){let t=GM.exec(e);return!t||t[1]==="00"&&t[5]?null:{traceId:t[2],spanId:t[3],traceFlags:parseInt(t[4],16)}}Yr.parseTraceParent=kT;var Iv=class{inject(t,r,n){let i=kl.trace.getSpanContext(t);if(!i||qM.isTracingSuppressed(t)||!kl.isSpanContextValid(i))return;let a=`${FM}-${i.traceId}-${i.spanId}-0${Number(i.traceFlags||kl.TraceFlags.NONE).toString(16)}`;n.set(r,Yr.TRACE_PARENT_HEADER,a),i.traceState&&n.set(r,Yr.TRACE_STATE_HEADER,i.traceState.serialize())}extract(t,r,n){let i=n.get(r,Yr.TRACE_PARENT_HEADER);if(!i)return t;let a=Array.isArray(i)?i[0]:i;if(typeof a!="string")return t;let s=kT(a);if(!s)return t;s.isRemote=!0;let u=n.get(r,Yr.TRACE_STATE_HEADER);if(u){let f=Array.isArray(u)?u.join(","):u;s.traceState=new jM.TraceState(typeof f=="string"?f:void 0)}return kl.trace.setSpanContext(t,s)}fields(){return[Yr.TRACE_PARENT_HEADER,Yr.TRACE_STATE_HEADER]}};Yr.HttpTraceContextPropagator=Iv});var BT=_(HT=>{"use strict";Object.defineProperty(HT,"__esModule",{value:!0})});var GT=_(Bn=>{"use strict";Object.defineProperty(Bn,"__esModule",{value:!0});Bn.getRPCMetadata=Bn.deleteRPCMetadata=Bn.setRPCMetadata=Bn.RPCType=void 0;var VM=Vt(),bv=VM.createContextKey("OpenTelemetry SDK Context Key RPC_METADATA"),zM;(function(e){e.HTTP="http"})(zM=Bn.RPCType||(Bn.RPCType={}));function KM(e,t){return e.setValue(bv,t)}Bn.setRPCMetadata=KM;function $M(e){return e.deleteValue(bv)}Bn.deleteRPCMetadata=$M;function XM(e){return e.getValue(bv)}Bn.getRPCMetadata=XM});var Pv=_(Ul=>{"use strict";Object.defineProperty(Ul,"__esModule",{value:!0});Ul.AlwaysOffSampler=void 0;var WM=Vt(),Ov=class{shouldSample(){return{decision:WM.SamplingDecision.NOT_RECORD}}toString(){return"AlwaysOffSampler"}};Ul.AlwaysOffSampler=Ov});var Rv=_(Hl=>{"use strict";Object.defineProperty(Hl,"__esModule",{value:!0});Hl.AlwaysOnSampler=void 0;var YM=Vt(),Cv=class{shouldSample(){return{decision:YM.SamplingDecision.RECORD_AND_SAMPLED}}toString(){return"AlwaysOnSampler"}};Hl.AlwaysOnSampler=Cv});var zT=_(Gl=>{"use strict";Object.defineProperty(Gl,"__esModule",{value:!0});Gl.ParentBasedSampler=void 0;var Bl=Vt(),QM=pv(),VT=Pv(),Nv=Rv(),wv=class{constructor(t){var r,n,i,a;this._root=t.root,this._root||(QM.globalErrorHandler(new Error("ParentBasedSampler must have a root sampler configured")),this._root=new Nv.AlwaysOnSampler),this._remoteParentSampled=(r=t.remoteParentSampled)!==null&&r!==void 0?r:new Nv.AlwaysOnSampler,this._remoteParentNotSampled=(n=t.remoteParentNotSampled)!==null&&n!==void 0?n:new VT.AlwaysOffSampler,this._localParentSampled=(i=t.localParentSampled)!==null&&i!==void 0?i:new Nv.AlwaysOnSampler,this._localParentNotSampled=(a=t.localParentNotSampled)!==null&&a!==void 0?a:new VT.AlwaysOffSampler}shouldSample(t,r,n,i,a,s){let u=Bl.trace.getSpanContext(t);return!u||!Bl.isSpanContextValid(u)?this._root.shouldSample(t,r,n,i,a,s):u.isRemote?u.traceFlags&Bl.TraceFlags.SAMPLED?this._remoteParentSampled.shouldSample(t,r,n,i,a,s):this._remoteParentNotSampled.shouldSample(t,r,n,i,a,s):u.traceFlags&Bl.TraceFlags.SAMPLED?this._localParentSampled.shouldSample(t,r,n,i,a,s):this._localParentNotSampled.shouldSample(t,r,n,i,a,s)}toString(){return`ParentBased{root=${this._root.toString()}, remoteParentSampled=${this._remoteParentSampled.toString()}, remoteParentNotSampled=${this._remoteParentNotSampled.toString()}, localParentSampled=${this._localParentSampled.toString()}, localParentNotSampled=${this._localParentNotSampled.toString()}}`}};Gl.ParentBasedSampler=wv});var KT=_(Vl=>{"use strict";Object.defineProperty(Vl,"__esModule",{value:!0});Vl.TraceIdRatioBasedSampler=void 0;var Dv=Vt(),Mv=class{constructor(t=0){this._ratio=t,this._ratio=this._normalize(t),this._upperBound=Math.floor(this._ratio*4294967295)}shouldSample(t,r){return{decision:Dv.isValidTraceId(r)&&this._accumulate(r)<this._upperBound?Dv.SamplingDecision.RECORD_AND_SAMPLED:Dv.SamplingDecision.NOT_RECORD}}toString(){return`TraceIdRatioBased{${this._ratio}}`}_normalize(t){return typeof t!="number"||isNaN(t)?0:t>=1?1:t<=0?0:t}_accumulate(t){let r=0;for(let n=0;n<t.length/8;n++){let i=n*8,a=parseInt(t.slice(i,i+8),16);r=(r^a)>>>0}return r}};Vl.TraceIdRatioBasedSampler=Mv});var XT=_(ts=>{"use strict";Object.defineProperty(ts,"__esModule",{value:!0});ts.isUrlIgnored=ts.urlMatches=void 0;function $T(e,t){return typeof t=="string"?e===t:t.test(e)}ts.urlMatches=$T;function ZM(e,t){if(!t)return!1;for(let r of t)if($T(e,r))return!0;return!1}ts.isUrlIgnored=ZM});var WT=_(zl=>{"use strict";Object.defineProperty(zl,"__esModule",{value:!0});zl.isWrapped=void 0;function JM(e){return typeof e=="function"&&typeof e.__original=="function"&&typeof e.__unwrap=="function"&&e.__wrapped===!0}zl.isWrapped=JM});var wn=_(yt=>{"use strict";var eL=yt&&yt.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),Yt=yt&&yt.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&eL(t,e,r)};Object.defineProperty(yt,"__esModule",{value:!0});yt.baggageUtils=void 0;Yt(oT(),yt);Yt(cT(),yt);Yt(pv(),yt);Yt(dv(),yt);Yt(CT(),yt);Yt(NT(),yt);Yt(wT(),yt);Yt(Ml(),yt);yt.baggageUtils=uv();Yt(gv(),yt);Yt(MT(),yt);Yt(UT(),yt);Yt(BT(),yt);Yt(GT(),yt);Yt(Pv(),yt);Yt(Rv(),yt);Yt(zT(),yt);Yt(KT(),yt);Yt(Il(),yt);Yt(Av(),yt);Yt(hv(),yt);Yt(vv(),yt);Yt(XT(),yt);Yt(WT(),yt);Yt(Ml(),yt)});var YT=_(Kl=>{"use strict";Object.defineProperty(Kl,"__esModule",{value:!0});Kl.ExceptionEventName=void 0;Kl.ExceptionEventName="exception"});var xv=_($l=>{"use strict";Object.defineProperty($l,"__esModule",{value:!0});$l.Span=void 0;var ua=Vt(),ri=wn(),$a=Zo(),tL=YT(),Lv=class{constructor(t,r,n,i,a,s,u=[],f=ri.hrTime()){this.attributes={},this.links=[],this.events=[],this.status={code:ua.SpanStatusCode.UNSET},this.endTime=[0,0],this._ended=!1,this._duration=[-1,-1],this.name=n,this._spanContext=i,this.parentSpanId=s,this.kind=a,this.links=u,this.startTime=ri.timeInputToHrTime(f),this.resource=t.resource,this.instrumentationLibrary=t.instrumentationLibrary,this._spanLimits=t.getSpanLimits(),this._spanProcessor=t.getActiveSpanProcessor(),this._spanProcessor.onStart(this,r)}spanContext(){return this._spanContext}setAttribute(t,r){return r==null||this._isSpanEnded()?this:t.length===0?(ua.diag.warn(`Invalid attribute key: ${t}`),this):ri.isAttributeValue(r)?Object.keys(this.attributes).length>=this._spanLimits.attributeCountLimit&&!Object.prototype.hasOwnProperty.call(this.attributes,t)?this:(this.attributes[t]=r,this):(ua.diag.warn(`Invalid attribute value set for key: ${t}`),this)}setAttributes(t){for(let[r,n]of Object.entries(t))this.setAttribute(r,n);return this}addEvent(t,r,n){return this._isSpanEnded()?this:(this.events.length>=this._spanLimits.eventCountLimit&&(ua.diag.warn("Dropping extra events."),this.events.shift()),ri.isTimeInput(r)&&(typeof n>"u"&&(n=r),r=void 0),typeof n>"u"&&(n=ri.hrTime()),this.events.push({name:t,attributes:r,time:ri.timeInputToHrTime(n)}),this)}setStatus(t){return this._isSpanEnded()?this:(this.status=t,this)}updateName(t){return this._isSpanEnded()?this:(this.name=t,this)}end(t=ri.hrTime()){if(this._isSpanEnded()){ua.diag.error("You can only call end() on a span once.");return}this._ended=!0,this.endTime=ri.timeInputToHrTime(t),this._duration=ri.hrTimeDuration(this.startTime,this.endTime),this._duration[0]<0&&ua.diag.warn("Inconsistent start and end time, startTime > endTime",this.startTime,this.endTime),this._spanProcessor.onEnd(this)}isRecording(){return this._ended===!1}recordException(t,r=ri.hrTime()){let n={};typeof t=="string"?n[$a.SemanticAttributes.EXCEPTION_MESSAGE]=t:t&&(t.code?n[$a.SemanticAttributes.EXCEPTION_TYPE]=t.code.toString():t.name&&(n[$a.SemanticAttributes.EXCEPTION_TYPE]=t.name),t.message&&(n[$a.SemanticAttributes.EXCEPTION_MESSAGE]=t.message),t.stack&&(n[$a.SemanticAttributes.EXCEPTION_STACKTRACE]=t.stack)),n[$a.SemanticAttributes.EXCEPTION_TYPE]||n[$a.SemanticAttributes.EXCEPTION_MESSAGE]?this.addEvent(tL.ExceptionEventName,n,r):ua.diag.warn(`Failed to record an exception ${t}`)}get duration(){return this._duration}get ended(){return this._ended}_isSpanEnded(){return this._ended&&ua.diag.warn("Can not execute the operation on ended Span {traceId: %s, spanId: %s}",this._spanContext.traceId,this._spanContext.spanId),this._ended}};$l.Span=Lv});var qv=_(ns=>{"use strict";Object.defineProperty(ns,"__esModule",{value:!0});ns.buildSamplerFromEnv=ns.DEFAULT_CONFIG=void 0;var Xl=Vt(),or=wn(),rL=or.getEnv(),nL=or.TracesSamplerValues.AlwaysOn;ns.DEFAULT_CONFIG={sampler:ZT(rL),forceFlushTimeoutMillis:3e4,spanLimits:{attributeCountLimit:or.getEnv().OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT,linkCountLimit:or.getEnv().OTEL_SPAN_LINK_COUNT_LIMIT,eventCountLimit:or.getEnv().OTEL_SPAN_EVENT_COUNT_LIMIT}};function ZT(e=or.getEnv()){switch(e.OTEL_TRACES_SAMPLER){case or.TracesSamplerValues.AlwaysOn:return new or.AlwaysOnSampler;case or.TracesSamplerValues.AlwaysOff:return new or.AlwaysOffSampler;case or.TracesSamplerValues.ParentBasedAlwaysOn:return new or.ParentBasedSampler({root:new or.AlwaysOnSampler});case or.TracesSamplerValues.ParentBasedAlwaysOff:return new or.ParentBasedSampler({root:new or.AlwaysOffSampler});case or.TracesSamplerValues.TraceIdRatio:return new or.TraceIdRatioBasedSampler(QT(e));case or.TracesSamplerValues.ParentBasedTraceIdRatio:return new or.ParentBasedSampler({root:new or.TraceIdRatioBasedSampler(QT(e))});default:return Xl.diag.error(`OTEL_TRACES_SAMPLER value "${e.OTEL_TRACES_SAMPLER} invalid, defaulting to ${nL}".`),new or.AlwaysOnSampler}}ns.buildSamplerFromEnv=ZT;var rs=1;function QT(e){if(e.OTEL_TRACES_SAMPLER_ARG===void 0||e.OTEL_TRACES_SAMPLER_ARG==="")return Xl.diag.error(`OTEL_TRACES_SAMPLER_ARG is blank, defaulting to ${rs}.`),rs;let t=Number(e.OTEL_TRACES_SAMPLER_ARG);return isNaN(t)?(Xl.diag.error(`OTEL_TRACES_SAMPLER_ARG=${e.OTEL_TRACES_SAMPLER_ARG} was given, but it is invalid, defaulting to ${rs}.`),rs):t<0||t>1?(Xl.diag.error(`OTEL_TRACES_SAMPLER_ARG=${e.OTEL_TRACES_SAMPLER_ARG} was given, but it is out of range ([0..1]), defaulting to ${rs}.`),rs):t}});var JT=_(Wl=>{"use strict";Object.defineProperty(Wl,"__esModule",{value:!0});Wl.mergeConfig=void 0;var jv=qv();function iL(e){let t={sampler:jv.buildSamplerFromEnv()},r=Object.assign({},jv.DEFAULT_CONFIG,t,e);return r.spanLimits=Object.assign({},jv.DEFAULT_CONFIG.spanLimits,e.spanLimits||{}),r}Wl.mergeConfig=iL});var eS=_(Yl=>{"use strict";Object.defineProperty(Yl,"__esModule",{value:!0});Yl.Tracer=void 0;var Lr=Vt(),Fv=wn(),aL=xv(),oL=JT(),kv=class{constructor(t,r,n){this._tracerProvider=n;let i=oL.mergeConfig(r);this._sampler=i.sampler,this._spanLimits=i.spanLimits,this._idGenerator=r.idGenerator||new Fv.RandomIdGenerator,this.resource=n.resource,this.instrumentationLibrary=t}startSpan(t,r={},n=Lr.context.active()){var i,a;if(Fv.isTracingSuppressed(n))return Lr.diag.debug("Instrumentation suppressed, returning Noop Span"),Lr.trace.wrapSpanContext(Lr.INVALID_SPAN_CONTEXT);let s=sL(r,n),u=this._idGenerator.generateSpanId(),f,d,h;!s||!Lr.trace.isSpanContextValid(s)?f=this._idGenerator.generateTraceId():(f=s.traceId,d=s.traceState,h=s.spanId);let E=(i=r.kind)!==null&&i!==void 0?i:Lr.SpanKind.INTERNAL,S=(a=r.links)!==null&&a!==void 0?a:[],C=Fv.sanitizeAttributes(r.attributes),q=this._sampler.shouldSample(r.root?Lr.trace.setSpanContext(n,Lr.INVALID_SPAN_CONTEXT):n,f,t,E,C,S),se=q.decision===Lr.SamplingDecision.RECORD_AND_SAMPLED?Lr.TraceFlags.SAMPLED:Lr.TraceFlags.NONE,Ce={traceId:f,spanId:u,traceFlags:se,traceState:d};if(q.decision===Lr.SamplingDecision.NOT_RECORD)return Lr.diag.debug("Recording is off, propagating context in a non-recording span"),Lr.trace.wrapSpanContext(Ce);let Fe=new aL.Span(this,n,t,Ce,E,h,S,r.startTime);return Fe.setAttributes(Object.assign(C,q.attributes)),Fe}startActiveSpan(t,r,n,i){let a,s,u;if(arguments.length<2)return;arguments.length===2?u=r:arguments.length===3?(a=r,u=n):(a=r,s=n,u=i);let f=s??Lr.context.active(),d=this.startSpan(t,a,f),h=Lr.trace.setSpan(f,d);return Lr.context.with(h,u,void 0,d)}getSpanLimits(){return this._spanLimits}getActiveSpanProcessor(){return this._tracerProvider.getActiveSpanProcessor()}};Yl.Tracer=kv;function sL(e,t){if(!e.root)return Lr.trace.getSpanContext(t)}});var tS=_(Ql=>{"use strict";Object.defineProperty(Ql,"__esModule",{value:!0});Ql.defaultServiceName=void 0;function uL(){return`unknown_service:${process.argv0}`}Ql.defaultServiceName=uL});var nS=_(Zl=>{"use strict";Object.defineProperty(Zl,"__esModule",{value:!0});Zl.detectResources=void 0;var rS=Hv(),Uv=Vt(),cL=require("util"),lL=async(e={})=>{let t=Object.assign(e),r=await Promise.all((t.detectors||[]).map(async n=>{try{let i=await n.detect(t);return Uv.diag.debug(`${n.constructor.name} found resource.`,i),i}catch(i){return Uv.diag.debug(`${n.constructor.name} failed: ${i.message}`),rS.Resource.empty()}}));return fL(r),r.reduce((n,i)=>n.merge(i),rS.Resource.empty())};Zl.detectResources=lL;var fL=e=>{e.forEach(t=>{if(Object.keys(t.attributes).length>0){let r=cL.inspect(t.attributes,{depth:2,breakLength:1/0,sorted:!0,compact:!1});Uv.diag.verbose(r)}})}});var iS=_(Jl=>{"use strict";Object.defineProperty(Jl,"__esModule",{value:!0});Jl.envDetector=void 0;var dL=Vt(),pL=wn(),vL=Zo(),hL=ef(),Bv=class{constructor(){this._MAX_LENGTH=255,this._COMMA_SEPARATOR=",",this._LABEL_KEY_VALUE_SPLITTER="=",this._ERROR_MESSAGE_INVALID_CHARS="should be a ASCII string with a length greater than 0 and not exceed "+this._MAX_LENGTH+" characters.",this._ERROR_MESSAGE_INVALID_VALUE="should be a ASCII string with a length not exceed "+this._MAX_LENGTH+" characters."}async detect(t){let r={},n=pL.getEnv(),i=n.OTEL_RESOURCE_ATTRIBUTES,a=n.OTEL_SERVICE_NAME;if(i)try{let s=this._parseResourceAttributes(i);Object.assign(r,s)}catch(s){dL.diag.debug(`EnvDetector failed: ${s.message}`)}return a&&(r[vL.ResourceAttributes.SERVICE_NAME]=a),new hL.Resource(r)}_parseResourceAttributes(t){if(!t)return{};let r={},n=t.split(this._COMMA_SEPARATOR,-1);for(let i of n){let a=i.split(this._LABEL_KEY_VALUE_SPLITTER,-1);if(a.length!==2)continue;let[s,u]=a;if(s=s.trim(),u=u.trim().split('^"|"$').join(""),!this._isValidAndNotEmpty(s))throw new Error(`Attribute key ${this._ERROR_MESSAGE_INVALID_CHARS}`);if(!this._isValid(u))throw new Error(`Attribute value ${this._ERROR_MESSAGE_INVALID_VALUE}`);r[s]=u}return r}_isValid(t){return t.length<=this._MAX_LENGTH&&this._isPrintableString(t)}_isPrintableString(t){for(let r=0;r<t.length;r++){let n=t.charAt(r);if(n<=" "||n>="~")return!1}return!0}_isValidAndNotEmpty(t){return t.length>0&&this._isValid(t)}};Jl.envDetector=new Bv});var oS=_(tf=>{"use strict";Object.defineProperty(tf,"__esModule",{value:!0});tf.processDetector=void 0;var _L=Vt(),ca=Zo(),aS=ef(),Gv=class{async detect(t){let r={[ca.ResourceAttributes.PROCESS_PID]:process.pid,[ca.ResourceAttributes.PROCESS_EXECUTABLE_NAME]:process.title||"",[ca.ResourceAttributes.PROCESS_COMMAND]:process.argv[1]||"",[ca.ResourceAttributes.PROCESS_COMMAND_LINE]:process.argv.join(" ")||""};return this._getResourceAttributes(r,t)}_getResourceAttributes(t,r){return t[ca.ResourceAttributes.PROCESS_EXECUTABLE_NAME]===""||t[ca.ResourceAttributes.PROCESS_EXECUTABLE_PATH]===""||t[ca.ResourceAttributes.PROCESS_COMMAND]===""||t[ca.ResourceAttributes.PROCESS_COMMAND_LINE]===""?(_L.diag.debug("ProcessDetector failed: Unable to find required process resources. "),aS.Resource.empty()):new aS.Resource(Object.assign({},t))}};tf.processDetector=new Gv});var uS=_(la=>{"use strict";var gL=la&&la.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),sS=la&&la.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&gL(t,e,r)};Object.defineProperty(la,"__esModule",{value:!0});sS(iS(),la);sS(oS(),la)});var cS=_(Ii=>{"use strict";var mL=Ii&&Ii.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),Vv=Ii&&Ii.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&mL(t,e,r)};Object.defineProperty(Ii,"__esModule",{value:!0});Vv(tS(),Ii);Vv(nS(),Ii);Vv(uS(),Ii)});var zv=_(Xa=>{"use strict";var EL=Xa&&Xa.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),yL=Xa&&Xa.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&EL(t,e,r)};Object.defineProperty(Xa,"__esModule",{value:!0});yL(cS(),Xa)});var Hv=_(rf=>{"use strict";Object.defineProperty(rf,"__esModule",{value:!0});rf.Resource=void 0;var Wa=Zo(),Kv=wn(),TL=zv(),bi=class{constructor(t){this.attributes=t}static empty(){return bi.EMPTY}static default(){return new bi({[Wa.ResourceAttributes.SERVICE_NAME]:TL.defaultServiceName(),[Wa.ResourceAttributes.TELEMETRY_SDK_LANGUAGE]:Kv.SDK_INFO[Wa.ResourceAttributes.TELEMETRY_SDK_LANGUAGE],[Wa.ResourceAttributes.TELEMETRY_SDK_NAME]:Kv.SDK_INFO[Wa.ResourceAttributes.TELEMETRY_SDK_NAME],[Wa.ResourceAttributes.TELEMETRY_SDK_VERSION]:Kv.SDK_INFO[Wa.ResourceAttributes.TELEMETRY_SDK_VERSION]})}merge(t){if(!t||!Object.keys(t.attributes).length)return this;let r=Object.assign({},this.attributes,t.attributes);return new bi(r)}};rf.Resource=bi;bi.EMPTY=new bi({})});var fS=_(lS=>{"use strict";Object.defineProperty(lS,"__esModule",{value:!0})});var pS=_(dS=>{"use strict";Object.defineProperty(dS,"__esModule",{value:!0})});var ef=_(ni=>{"use strict";var SL=ni&&ni.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),nf=ni&&ni.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&SL(t,e,r)};Object.defineProperty(ni,"__esModule",{value:!0});nf(Hv(),ni);nf(zv(),ni);nf(fS(),ni);nf(pS(),ni)});var vS=_(af=>{"use strict";Object.defineProperty(af,"__esModule",{value:!0});af.MultiSpanProcessor=void 0;var AL=wn(),$v=class{constructor(t){this._spanProcessors=t}forceFlush(){let t=[];for(let r of this._spanProcessors)t.push(r.forceFlush());return new Promise(r=>{Promise.all(t).then(()=>{r()}).catch(n=>{AL.globalErrorHandler(n||new Error("MultiSpanProcessor: forceFlush failed")),r()})})}onStart(t,r){for(let n of this._spanProcessors)n.onStart(t,r)}onEnd(t){for(let r of this._spanProcessors)r.onEnd(t)}shutdown(){let t=[];for(let r of this._spanProcessors)t.push(r.shutdown());return new Promise((r,n)=>{Promise.all(t).then(()=>{r()},n)})}};af.MultiSpanProcessor=$v});var Wv=_(of=>{"use strict";Object.defineProperty(of,"__esModule",{value:!0});of.NoopSpanProcessor=void 0;var Xv=class{onStart(t,r){}onEnd(t){}shutdown(){return Promise.resolve()}forceFlush(){return Promise.resolve()}};of.NoopSpanProcessor=Xv});var GS=_((Nu,is)=>{var IL=200,IS="__lodash_hash_undefined__",bL=800,OL=16,bS=9007199254740991,OS="[object Arguments]",PL="[object Array]",CL="[object AsyncFunction]",RL="[object Boolean]",NL="[object Date]",wL="[object Error]",PS="[object Function]",DL="[object GeneratorFunction]",ML="[object Map]",LL="[object Number]",xL="[object Null]",CS="[object Object]",qL="[object Proxy]",jL="[object RegExp]",FL="[object Set]",kL="[object String]",UL="[object Undefined]",HL="[object WeakMap]",BL="[object ArrayBuffer]",GL="[object DataView]",VL="[object Float32Array]",zL="[object Float64Array]",KL="[object Int8Array]",$L="[object Int16Array]",XL="[object Int32Array]",WL="[object Uint8Array]",YL="[object Uint8ClampedArray]",QL="[object Uint16Array]",ZL="[object Uint32Array]",JL=/[\\^$.*+?()[\]{}|]/g,ex=/^\[object .+?Constructor\]$/,tx=/^(?:0|[1-9]\d*)$/,zt={};zt[VL]=zt[zL]=zt[KL]=zt[$L]=zt[XL]=zt[WL]=zt[YL]=zt[QL]=zt[ZL]=!0;zt[OS]=zt[PL]=zt[BL]=zt[RL]=zt[GL]=zt[NL]=zt[wL]=zt[PS]=zt[ML]=zt[LL]=zt[CS]=zt[jL]=zt[FL]=zt[kL]=zt[HL]=!1;var RS=typeof global=="object"&&global&&global.Object===Object&&global,rx=typeof self=="object"&&self&&self.Object===Object&&self,Mu=RS||rx||Function("return this")(),NS=typeof Nu=="object"&&Nu&&!Nu.nodeType&&Nu,wu=NS&&typeof is=="object"&&is&&!is.nodeType&&is,wS=wu&&wu.exports===NS,Yv=wS&&RS.process,hS=function(){try{var e=wu&&wu.require&&wu.require("util").types;return e||Yv&&Yv.binding&&Yv.binding("util")}catch{}}(),_S=hS&&hS.isTypedArray;function nx(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}function ix(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}function ax(e){return function(t){return e(t)}}function ox(e,t){return e==null?void 0:e[t]}function sx(e,t){return function(r){return e(t(r))}}var ux=Array.prototype,cx=Function.prototype,cf=Object.prototype,Qv=Mu["__core-js_shared__"],lf=cx.toString,Oi=cf.hasOwnProperty,gS=function(){var e=/[^.]+$/.exec(Qv&&Qv.keys&&Qv.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),DS=cf.toString,lx=lf.call(Object),fx=RegExp("^"+lf.call(Oi).replace(JL,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),sf=wS?Mu.Buffer:void 0,mS=Mu.Symbol,ES=Mu.Uint8Array,yS=sf?sf.allocUnsafe:void 0,MS=sx(Object.getPrototypeOf,Object),TS=Object.create,dx=cf.propertyIsEnumerable,px=ux.splice,Ya=mS?mS.toStringTag:void 0,uf=function(){try{var e=nh(Object,"defineProperty");return e({},"",{}),e}catch{}}(),vx=sf?sf.isBuffer:void 0,SS=Math.max,hx=Date.now,LS=nh(Mu,"Map"),Du=nh(Object,"create"),_x=function(){function e(){}return function(t){if(!Za(t))return{};if(TS)return TS(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}();function Qa(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function gx(){this.__data__=Du?Du(null):{},this.size=0}function mx(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}function Ex(e){var t=this.__data__;if(Du){var r=t[e];return r===IS?void 0:r}return Oi.call(t,e)?t[e]:void 0}function yx(e){var t=this.__data__;return Du?t[e]!==void 0:Oi.call(t,e)}function Tx(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=Du&&t===void 0?IS:t,this}Qa.prototype.clear=gx;Qa.prototype.delete=mx;Qa.prototype.get=Ex;Qa.prototype.has=yx;Qa.prototype.set=Tx;function Pi(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Sx(){this.__data__=[],this.size=0}function Ax(e){var t=this.__data__,r=ff(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():px.call(t,r,1),--this.size,!0}function Ix(e){var t=this.__data__,r=ff(t,e);return r<0?void 0:t[r][1]}function bx(e){return ff(this.__data__,e)>-1}function Ox(e,t){var r=this.__data__,n=ff(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}Pi.prototype.clear=Sx;Pi.prototype.delete=Ax;Pi.prototype.get=Ix;Pi.prototype.has=bx;Pi.prototype.set=Ox;function as(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Px(){this.size=0,this.__data__={hash:new Qa,map:new(LS||Pi),string:new Qa}}function Cx(e){var t=pf(this,e).delete(e);return this.size-=t?1:0,t}function Rx(e){return pf(this,e).get(e)}function Nx(e){return pf(this,e).has(e)}function wx(e,t){var r=pf(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}as.prototype.clear=Px;as.prototype.delete=Cx;as.prototype.get=Rx;as.prototype.has=Nx;as.prototype.set=wx;function os(e){var t=this.__data__=new Pi(e);this.size=t.size}function Dx(){this.__data__=new Pi,this.size=0}function Mx(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}function Lx(e){return this.__data__.get(e)}function xx(e){return this.__data__.has(e)}function qx(e,t){var r=this.__data__;if(r instanceof Pi){var n=r.__data__;if(!LS||n.length<IL-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new as(n)}return r.set(e,t),this.size=r.size,this}os.prototype.clear=Dx;os.prototype.delete=Mx;os.prototype.get=Lx;os.prototype.has=xx;os.prototype.set=qx;function jx(e,t){var r=th(e),n=!r&&eh(e),i=!r&&!n&&FS(e),a=!r&&!n&&!i&&US(e),s=r||n||i||a,u=s?ix(e.length,String):[],f=u.length;for(var d in e)(t||Oi.call(e,d))&&!(s&&(d=="length"||i&&(d=="offset"||d=="parent")||a&&(d=="buffer"||d=="byteLength"||d=="byteOffset")||qS(d,f)))&&u.push(d);return u}function Zv(e,t,r){(r!==void 0&&!vf(e[t],r)||r===void 0&&!(t in e))&&rh(e,t,r)}function Fx(e,t,r){var n=e[t];(!(Oi.call(e,t)&&vf(n,r))||r===void 0&&!(t in e))&&rh(e,t,r)}function ff(e,t){for(var r=e.length;r--;)if(vf(e[r][0],t))return r;return-1}function rh(e,t,r){t=="__proto__"&&uf?uf(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}var kx=Zx();function df(e){return e==null?e===void 0?UL:xL:Ya&&Ya in Object(e)?Jx(e):aq(e)}function AS(e){return Lu(e)&&df(e)==OS}function Ux(e){if(!Za(e)||nq(e))return!1;var t=ah(e)?fx:ex;return t.test(cq(e))}function Hx(e){return Lu(e)&&kS(e.length)&&!!zt[df(e)]}function Bx(e){if(!Za(e))return iq(e);var t=jS(e),r=[];for(var n in e)n=="constructor"&&(t||!Oi.call(e,n))||r.push(n);return r}function xS(e,t,r,n,i){e!==t&&kx(t,function(a,s){if(i||(i=new os),Za(a))Gx(e,t,s,r,xS,n,i);else{var u=n?n(Jv(e,s),a,s+"",e,t,i):void 0;u===void 0&&(u=a),Zv(e,s,u)}},HS)}function Gx(e,t,r,n,i,a,s){var u=Jv(e,r),f=Jv(t,r),d=s.get(f);if(d){Zv(e,r,d);return}var h=a?a(u,f,r+"",e,t,s):void 0,E=h===void 0;if(E){var S=th(f),C=!S&&FS(f),q=!S&&!C&&US(f);h=f,S||C||q?th(u)?h=u:lq(u)?h=Wx(u):C?(E=!1,h=Kx(f,!0)):q?(E=!1,h=Xx(f,!0)):h=[]:fq(f)||eh(f)?(h=u,eh(u)?h=dq(u):(!Za(u)||ah(u))&&(h=eq(f))):E=!1}E&&(s.set(f,h),i(h,f,n,a,s),s.delete(f)),Zv(e,r,h)}function Vx(e,t){return sq(oq(e,t,BS),e+"")}var zx=uf?function(e,t){return uf(e,"toString",{configurable:!0,enumerable:!1,value:vq(t),writable:!0})}:BS;function Kx(e,t){if(t)return e.slice();var r=e.length,n=yS?yS(r):new e.constructor(r);return e.copy(n),n}function $x(e){var t=new e.constructor(e.byteLength);return new ES(t).set(new ES(e)),t}function Xx(e,t){var r=t?$x(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}function Wx(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}function Yx(e,t,r,n){var i=!r;r||(r={});for(var a=-1,s=t.length;++a<s;){var u=t[a],f=n?n(r[u],e[u],u,r,e):void 0;f===void 0&&(f=e[u]),i?rh(r,u,f):Fx(r,u,f)}return r}function Qx(e){return Vx(function(t,r){var n=-1,i=r.length,a=i>1?r[i-1]:void 0,s=i>2?r[2]:void 0;for(a=e.length>3&&typeof a=="function"?(i--,a):void 0,s&&tq(r[0],r[1],s)&&(a=i<3?void 0:a,i=1),t=Object(t);++n<i;){var u=r[n];u&&e(t,u,n,a)}return t})}function Zx(e){return function(t,r,n){for(var i=-1,a=Object(t),s=n(t),u=s.length;u--;){var f=s[e?u:++i];if(r(a[f],f,a)===!1)break}return t}}function pf(e,t){var r=e.__data__;return rq(t)?r[typeof t=="string"?"string":"hash"]:r.map}function nh(e,t){var r=ox(e,t);return Ux(r)?r:void 0}function Jx(e){var t=Oi.call(e,Ya),r=e[Ya];try{e[Ya]=void 0;var n=!0}catch{}var i=DS.call(e);return n&&(t?e[Ya]=r:delete e[Ya]),i}function eq(e){return typeof e.constructor=="function"&&!jS(e)?_x(MS(e)):{}}function qS(e,t){var r=typeof e;return t=t??bS,!!t&&(r=="number"||r!="symbol"&&tx.test(e))&&e>-1&&e%1==0&&e<t}function tq(e,t,r){if(!Za(r))return!1;var n=typeof t;return(n=="number"?ih(r)&&qS(t,r.length):n=="string"&&t in r)?vf(r[t],e):!1}function rq(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function nq(e){return!!gS&&gS in e}function jS(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||cf;return e===r}function iq(e){var t=[];if(e!=null)for(var r in Object(e))t.push(r);return t}function aq(e){return DS.call(e)}function oq(e,t,r){return t=SS(t===void 0?e.length-1:t,0),function(){for(var n=arguments,i=-1,a=SS(n.length-t,0),s=Array(a);++i<a;)s[i]=n[t+i];i=-1;for(var u=Array(t+1);++i<t;)u[i]=n[i];return u[t]=r(s),nx(e,this,u)}}function Jv(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}var sq=uq(zx);function uq(e){var t=0,r=0;return function(){var n=hx(),i=OL-(n-r);if(r=n,i>0){if(++t>=bL)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}function cq(e){if(e!=null){try{return lf.call(e)}catch{}try{return e+""}catch{}}return""}function vf(e,t){return e===t||e!==e&&t!==t}var eh=AS(function(){return arguments}())?AS:function(e){return Lu(e)&&Oi.call(e,"callee")&&!dx.call(e,"callee")},th=Array.isArray;function ih(e){return e!=null&&kS(e.length)&&!ah(e)}function lq(e){return Lu(e)&&ih(e)}var FS=vx||hq;function ah(e){if(!Za(e))return!1;var t=df(e);return t==PS||t==DL||t==CL||t==qL}function kS(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=bS}function Za(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}function Lu(e){return e!=null&&typeof e=="object"}function fq(e){if(!Lu(e)||df(e)!=CS)return!1;var t=MS(e);if(t===null)return!0;var r=Oi.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&lf.call(r)==lx}var US=_S?ax(_S):Hx;function dq(e){return Yx(e,HS(e))}function HS(e){return ih(e)?jx(e,!0):Bx(e)}var pq=Qx(function(e,t,r){xS(e,t,r)});function vq(e){return function(){return e}}function BS(e){return e}function hq(){return!1}is.exports=pq});var zS=_(hf=>{"use strict";Object.defineProperty(hf,"__esModule",{value:!0});hf.BatchSpanProcessorBase=void 0;var VS=Vt(),xu=wn(),oh=class{constructor(t,r){this._exporter=t,this._finishedSpans=[],this._isShutdown=!1,this._shuttingDownPromise=Promise.resolve();let n=xu.getEnv();this._maxExportBatchSize=typeof(r==null?void 0:r.maxExportBatchSize)=="number"?r.maxExportBatchSize:n.OTEL_BSP_MAX_EXPORT_BATCH_SIZE,this._maxQueueSize=typeof(r==null?void 0:r.maxQueueSize)=="number"?r.maxQueueSize:n.OTEL_BSP_MAX_QUEUE_SIZE,this._scheduledDelayMillis=typeof(r==null?void 0:r.scheduledDelayMillis)=="number"?r.scheduledDelayMillis:n.OTEL_BSP_SCHEDULE_DELAY,this._exportTimeoutMillis=typeof(r==null?void 0:r.exportTimeoutMillis)=="number"?r.exportTimeoutMillis:n.OTEL_BSP_EXPORT_TIMEOUT}forceFlush(){return this._isShutdown?this._shuttingDownPromise:this._flushAll()}onStart(t){}onEnd(t){this._isShutdown||this._addToBuffer(t)}shutdown(){return this._isShutdown?this._shuttingDownPromise:(this._isShutdown=!0,this._shuttingDownPromise=new Promise((t,r)=>{Promise.resolve().then(()=>this.onShutdown()).then(()=>this._flushAll()).then(()=>this._exporter.shutdown()).then(t).catch(n=>{r(n)})}),this._shuttingDownPromise)}_addToBuffer(t){this._finishedSpans.length>=this._maxQueueSize||(this._finishedSpans.push(t),this._maybeStartTimer())}_flushAll(){return new Promise((t,r)=>{let n=[],i=Math.ceil(this._finishedSpans.length/this._maxExportBatchSize);for(let a=0,s=i;a<s;a++)n.push(this._flushOneBatch());Promise.all(n).then(()=>{t()}).catch(r)})}_flushOneBatch(){return this._clearTimer(),this._finishedSpans.length===0?Promise.resolve():new Promise((t,r)=>{let n=setTimeout(()=>{r(new Error("Timeout"))},this._exportTimeoutMillis);VS.context.with(xu.suppressTracing(VS.context.active()),()=>{this._exporter.export(this._finishedSpans.splice(0,this._maxExportBatchSize),i=>{var a;clearTimeout(n),i.code===xu.ExportResultCode.SUCCESS?t():r((a=i.error)!==null&&a!==void 0?a:new Error("BatchSpanProcessor: span export failed"))})})})}_maybeStartTimer(){this._timer===void 0&&(this._timer=setTimeout(()=>{this._flushOneBatch().then(()=>{this._finishedSpans.length>0&&(this._clearTimer(),this._maybeStartTimer())}).catch(t=>{xu.globalErrorHandler(t)})},this._scheduledDelayMillis),xu.unrefTimer(this._timer))}_clearTimer(){this._timer!==void 0&&(clearTimeout(this._timer),this._timer=void 0)}};hf.BatchSpanProcessorBase=oh});var KS=_(_f=>{"use strict";Object.defineProperty(_f,"__esModule",{value:!0});_f.BatchSpanProcessor=void 0;var _q=zS(),sh=class extends _q.BatchSpanProcessorBase{onShutdown(){}};_f.BatchSpanProcessor=sh});var $S=_(Ja=>{"use strict";var gq=Ja&&Ja.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),mq=Ja&&Ja.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&gq(t,e,r)};Object.defineProperty(Ja,"__esModule",{value:!0});mq(KS(),Ja)});var uh=_(eo=>{"use strict";var Eq=eo&&eo.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),yq=eo&&eo.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&Eq(t,e,r)};Object.defineProperty(eo,"__esModule",{value:!0});yq($S(),eo)});var WS=_(to=>{"use strict";Object.defineProperty(to,"__esModule",{value:!0});to.BasicTracerProvider=to.ForceFlushState=void 0;var ss=Vt(),qu=wn(),XS=ef(),Tq=ch(),Sq=qv(),Aq=vS(),Iq=Wv(),bq=GS(),Oq=uh(),us;(function(e){e[e.resolved=0]="resolved",e[e.timeout=1]="timeout",e[e.error=2]="error",e[e.unresolved=3]="unresolved"})(us=to.ForceFlushState||(to.ForceFlushState={}));var fa=class{constructor(t={}){var r;this._registeredSpanProcessors=[],this._tracers=new Map;let n=bq({},Sq.DEFAULT_CONFIG,t);this.resource=(r=n.resource)!==null&&r!==void 0?r:XS.Resource.empty(),this.resource=XS.Resource.default().merge(this.resource),this._config=Object.assign({},n,{resource:this.resource});let i=this._buildExporterFromEnv();if(i!==void 0){let a=new Oq.BatchSpanProcessor(i);this.activeSpanProcessor=a}else this.activeSpanProcessor=new Iq.NoopSpanProcessor}getTracer(t,r){let n=`${t}@${r||""}`;return this._tracers.has(n)||this._tracers.set(n,new Tq.Tracer({name:t,version:r},this._config,this)),this._tracers.get(n)}addSpanProcessor(t){this._registeredSpanProcessors.length===0&&this.activeSpanProcessor.shutdown().catch(r=>ss.diag.error("Error while trying to shutdown current span processor",r)),this._registeredSpanProcessors.push(t),this.activeSpanProcessor=new Aq.MultiSpanProcessor(this._registeredSpanProcessors)}getActiveSpanProcessor(){return this.activeSpanProcessor}register(t={}){ss.trace.setGlobalTracerProvider(this),t.propagator===void 0&&(t.propagator=this._buildPropagatorFromEnv()),t.contextManager&&ss.context.setGlobalContextManager(t.contextManager),t.propagator&&ss.propagation.setGlobalPropagator(t.propagator)}forceFlush(){let t=this._config.forceFlushTimeoutMillis,r=this._registeredSpanProcessors.map(n=>new Promise(i=>{let a,s=setTimeout(()=>{i(new Error(`Span processor did not completed within timeout period of ${t} ms`)),a=us.timeout},t);n.forceFlush().then(()=>{clearTimeout(s),a!==us.timeout&&(a=us.resolved,i(a))}).catch(u=>{clearTimeout(s),a=us.error,i(u)})}));return new Promise((n,i)=>{Promise.all(r).then(a=>{let s=a.filter(u=>u!==us.resolved);s.length>0?i(s):n()}).catch(a=>i([a]))})}shutdown(){return this.activeSpanProcessor.shutdown()}_getPropagator(t){var r;return(r=fa._registeredPropagators.get(t))===null||r===void 0?void 0:r()}_getSpanExporter(t){var r;return(r=fa._registeredExporters.get(t))===null||r===void 0?void 0:r()}_buildPropagatorFromEnv(){let t=Array.from(new Set(qu.getEnv().OTEL_PROPAGATORS)),n=t.map(i=>{let a=this._getPropagator(i);return a||ss.diag.warn(`Propagator "${i}" requested through environment variable is unavailable.`),a}).reduce((i,a)=>(a&&i.push(a),i),[]);if(n.length!==0)return t.length===1?n[0]:new qu.CompositePropagator({propagators:n})}_buildExporterFromEnv(){let t=qu.getEnv().OTEL_TRACES_EXPORTER;if(t==="none")return;let r=this._getSpanExporter(t);return r||ss.diag.error(`Exporter "${t}" requested through environment variable is unavailable.`),r}};to.BasicTracerProvider=fa;fa._registeredPropagators=new Map([["tracecontext",()=>new qu.HttpTraceContextPropagator],["baggage",()=>new qu.HttpBaggagePropagator]]);fa._registeredExporters=new Map});var YS=_(gf=>{"use strict";Object.defineProperty(gf,"__esModule",{value:!0});gf.ConsoleSpanExporter=void 0;var lh=wn(),fh=class{export(t,r){return this._sendSpans(t,r)}shutdown(){return this._sendSpans([]),Promise.resolve()}_exportInfo(t){return{traceId:t.spanContext().traceId,parentId:t.parentSpanId,name:t.name,id:t.spanContext().spanId,kind:t.kind,timestamp:lh.hrTimeToMicroseconds(t.startTime),duration:lh.hrTimeToMicroseconds(t.duration),attributes:t.attributes,status:t.status,events:t.events}}_sendSpans(t,r){for(let n of t)console.log(this._exportInfo(n));if(r)return r({code:lh.ExportResultCode.SUCCESS})}};gf.ConsoleSpanExporter=fh});var ZS=_(mf=>{"use strict";Object.defineProperty(mf,"__esModule",{value:!0});mf.InMemorySpanExporter=void 0;var QS=wn(),dh=class{constructor(){this._finishedSpans=[],this._stopped=!1}export(t,r){if(this._stopped)return r({code:QS.ExportResultCode.FAILED,error:new Error("Exporter has been stopped")});this._finishedSpans.push(...t),setTimeout(()=>r({code:QS.ExportResultCode.SUCCESS}),0)}shutdown(){return this._stopped=!0,this._finishedSpans=[],Promise.resolve()}reset(){this._finishedSpans=[]}getFinishedSpans(){return this._finishedSpans}};mf.InMemorySpanExporter=dh});var e0=_(JS=>{"use strict";Object.defineProperty(JS,"__esModule",{value:!0})});var r0=_(Ef=>{"use strict";Object.defineProperty(Ef,"__esModule",{value:!0});Ef.SimpleSpanProcessor=void 0;var t0=Vt(),ph=wn(),vh=class{constructor(t){this._exporter=t,this._isShutdown=!1,this._shuttingDownPromise=Promise.resolve()}forceFlush(){return Promise.resolve()}onStart(t){}onEnd(t){this._isShutdown||t0.context.with(ph.suppressTracing(t0.context.active()),()=>{this._exporter.export([t],r=>{var n;r.code!==ph.ExportResultCode.SUCCESS&&ph.globalErrorHandler((n=r.error)!==null&&n!==void 0?n:new Error(`SimpleSpanProcessor: span export failed (status ${r})`))})})}shutdown(){return this._isShutdown?this._shuttingDownPromise:(this._isShutdown=!0,this._shuttingDownPromise=new Promise((t,r)=>{Promise.resolve().then(()=>this._exporter.shutdown()).then(t).catch(n=>{r(n)})}),this._shuttingDownPromise)}};Ef.SimpleSpanProcessor=vh});var i0=_(n0=>{"use strict";Object.defineProperty(n0,"__esModule",{value:!0})});var o0=_(a0=>{"use strict";Object.defineProperty(a0,"__esModule",{value:!0})});var u0=_(s0=>{"use strict";Object.defineProperty(s0,"__esModule",{value:!0})});var l0=_(c0=>{"use strict";Object.defineProperty(c0,"__esModule",{value:!0})});var ch=_(Rr=>{"use strict";var Pq=Rr&&Rr.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),gn=Rr&&Rr.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&Pq(t,e,r)};Object.defineProperty(Rr,"__esModule",{value:!0});gn(eS(),Rr);gn(WS(),Rr);gn(uh(),Rr);gn(YS(),Rr);gn(ZS(),Rr);gn(e0(),Rr);gn(r0(),Rr);gn(i0(),Rr);gn(Wv(),Rr);gn(xv(),Rr);gn(o0(),Rr);gn(u0(),Rr);gn(l0(),Rr)});var p0=_(ii=>{"use strict";Object.defineProperty(ii,"__esModule",{value:!0});ii.enable=ii.azureCoreTracing=ii.AzureMonitorSymbol=void 0;var d0=pr();ii.AzureMonitorSymbol="Azure_Monitor_Tracer";var f0=!1,Cq=function(e){if(f0)return e;try{var t=ch(),r=Vt(),n=new t.BasicTracerProvider,i=n.getTracer("applicationinsights tracer"),a=e.setTracer;e.setTracer=function(s){var u=s.startSpan;s.startSpan=function(f,d,h){var E=u.call(this,f,d,h),S=E.end;return E.end=function(){var C=S.apply(this,arguments);return d0.channel.publish("azure-coretracing",E),C},E},s[ii.AzureMonitorSymbol]=!0,a.call(this,s)},r.trace.getSpan(r.context.active()),e.setTracer(i),f0=!0}catch{}return e};ii.azureCoreTracing={versionSpecifier:">= 1.0.0 < 2.0.0",patch:Cq};function Rq(){d0.channel.registerMonkeyPatch("@azure/core-tracing",ii.azureCoreTracing)}ii.enable=Rq});var h0=_(ro=>{"use strict";Object.defineProperty(ro,"__esModule",{value:!0});ro.enable=ro.bunyan=void 0;var v0=pr(),Nq=function(e){var t=e.prototype._emit;return e.prototype._emit=function(r,n){var i=t.apply(this,arguments);if(!n){var a=i;a||(a=t.call(this,r,!0)),v0.channel.publish("bunyan",{level:r.level,result:a})}return i},e};ro.bunyan={versionSpecifier:">= 1.0.0 < 2.0.0",patch:Nq};function wq(){v0.channel.registerMonkeyPatch("bunyan",ro.bunyan)}ro.enable=wq});var g0=_(no=>{"use strict";Object.defineProperty(no,"__esModule",{value:!0});no.enable=no.console=void 0;var hh=pr(),_0=require("stream"),Dq=function(e){var t=new _0.Writable,r=new _0.Writable;t.write=function(d){if(!d)return!0;var h=d.toString();return hh.channel.publish("console",{message:h}),!0},r.write=function(d){if(!d)return!0;var h=d.toString();return hh.channel.publish("console",{message:h,stderr:!0}),!0};for(var n=new e.Console(t,r),i=["log","info","warn","error","dir","time","timeEnd","trace","assert"],a=function(d){var h=e[d];h&&(e[d]=function(){if(n[d])try{n[d].apply(n,arguments)}catch{}return h.apply(e,arguments)})},s=0,u=i;s<u.length;s++){var f=u[s];a(f)}return e};no.console={versionSpecifier:">= 4.0.0",patch:Dq};function Mq(){hh.channel.registerMonkeyPatch("console",no.console),require("console")}no.enable=Mq});var m0=_(io=>{"use strict";Object.defineProperty(io,"__esModule",{value:!0});io.enable=io.mongoCore=void 0;var _h=pr(),Lq=function(e){var t=e.Server.prototype.connect;return e.Server.prototype.connect=function(){var n=t.apply(this,arguments),i=this.s.pool.write;this.s.pool.write=function(){var u=typeof arguments[1]=="function"?1:2;return typeof arguments[u]=="function"&&(arguments[u]=_h.channel.bindToContext(arguments[u])),i.apply(this,arguments)};var a=this.s.pool.logout;return this.s.pool.logout=function(){return typeof arguments[1]=="function"&&(arguments[1]=_h.channel.bindToContext(arguments[1])),a.apply(this,arguments)},n},e};io.mongoCore={versionSpecifier:">= 2.0.0 < 4.0.0",patch:Lq};function xq(){_h.channel.registerMonkeyPatch("mongodb-core",io.mongoCore)}io.enable=xq});var E0=_(rn=>{"use strict";var cs=rn&&rn.__assign||function(){return cs=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},cs.apply(this,arguments)};Object.defineProperty(rn,"__esModule",{value:!0});rn.enable=rn.mongo330=rn.mongo3=rn.mongo2=void 0;var Qr=pr(),qq=function(e){var t=e.instrument({operationIdGenerator:{next:function(){return Qr.channel.bindToContext(function(n){return n()})}}}),r={};return t.on("started",function(n){r[n.requestId]||(r[n.requestId]=cs(cs({},n),{time:new Date}))}),t.on("succeeded",function(n){var i=r[n.requestId];i&&delete r[n.requestId],typeof n.operationId=="function"?n.operationId(function(){return Qr.channel.publish("mongodb",{startedData:i,event:n,succeeded:!0})}):Qr.channel.publish("mongodb",{startedData:i,event:n,succeeded:!0})}),t.on("failed",function(n){var i=r[n.requestId];i&&delete r[n.requestId],typeof n.operationId=="function"?n.operationId(function(){return Qr.channel.publish("mongodb",{startedData:i,event:n,succeeded:!1})}):Qr.channel.publish("mongodb",{startedData:i,event:n,succeeded:!1})}),e},jq=function(e){var t=e.instrument(),r={},n={};return t.on("started",function(i){r[i.requestId]||(n[i.requestId]=Qr.channel.bindToContext(function(a){return a()}),r[i.requestId]=cs(cs({},i),{time:new Date}))}),t.on("succeeded",function(i){var a=r[i.requestId];a&&delete r[i.requestId],typeof i=="object"&&typeof n[i.requestId]=="function"&&(n[i.requestId](function(){return Qr.channel.publish("mongodb",{startedData:a,event:i,succeeded:!0})}),delete n[i.requestId])}),t.on("failed",function(i){var a=r[i.requestId];a&&delete r[i.requestId],typeof i=="object"&&typeof n[i.requestId]=="function"&&(n[i.requestId](function(){return Qr.channel.publish("mongodb",{startedData:a,event:i,succeeded:!1})}),delete n[i.requestId])}),e},Fq=function(e){var t=e.Server.prototype.connect;return e.Server.prototype.connect=function(){var n=t.apply(this,arguments),i=this.s.coreTopology.s.pool.write;this.s.coreTopology.s.pool.write=function(){var u=typeof arguments[1]=="function"?1:2;return typeof arguments[u]=="function"&&(arguments[u]=Qr.channel.bindToContext(arguments[u])),i.apply(this,arguments)};var a=this.s.coreTopology.s.pool.logout;return this.s.coreTopology.s.pool.logout=function(){return typeof arguments[1]=="function"&&(arguments[1]=Qr.channel.bindToContext(arguments[1])),a.apply(this,arguments)},n},e},kq=function(e){Fq(e);var t=e.instrument(),r={},n={};return t.on("started",function(i){r[i.requestId]||(n[i.requestId]=Qr.channel.bindToContext(function(a){return a()}),r[i.requestId]=i)}),t.on("succeeded",function(i){var a=r[i.requestId];a&&delete r[i.requestId],typeof i=="object"&&typeof n[i.requestId]=="function"&&(n[i.requestId](function(){return Qr.channel.publish("mongodb",{startedData:a,event:i,succeeded:!0})}),delete n[i.requestId])}),t.on("failed",function(i){var a=r[i.requestId];a&&delete r[i.requestId],typeof i=="object"&&typeof n[i.requestId]=="function"&&(n[i.requestId](function(){return Qr.channel.publish("mongodb",{startedData:a,event:i,succeeded:!1})}),delete n[i.requestId])}),e};rn.mongo2={versionSpecifier:">= 2.0.0 <= 3.0.5",patch:qq};rn.mongo3={versionSpecifier:"> 3.0.5 < 3.3.0",patch:jq};rn.mongo330={versionSpecifier:">= 3.3.0 < 4.0.0",patch:kq};function Uq(){Qr.channel.registerMonkeyPatch("mongodb",rn.mongo2),Qr.channel.registerMonkeyPatch("mongodb",rn.mongo3),Qr.channel.registerMonkeyPatch("mongodb",rn.mongo330)}rn.enable=Uq});var T0=_(ao=>{"use strict";Object.defineProperty(ao,"__esModule",{value:!0});ao.enable=ao.mysql=void 0;var yf=pr(),y0=require("path"),Hq=function(e,t){var r=function(f,d){return function(h,E){var S=f[h];S&&(f[h]=function(){for(var q=arguments.length-1,se=arguments.length-1;se>=0;--se)if(typeof arguments[se]=="function"){q=se;break}else if(typeof arguments[se]<"u")break;var Ce=arguments[q],Fe={result:null,startTime:null,startDate:null};typeof Ce=="function"&&(E?(Fe.startTime=process.hrtime(),Fe.startDate=new Date,arguments[q]=yf.channel.bindToContext(E(Fe,Ce))):arguments[q]=yf.channel.bindToContext(Ce));var et=S.apply(this,arguments);return Fe.result=et,et})}},n=function(f,d){return r(f.prototype,d+".prototype")},i=["connect","changeUser","ping","statistics","end"],a=require(y0.dirname(t)+"/lib/Connection");i.forEach(function(f){return n(a,"Connection")(f)}),r(a,"Connection")("createQuery",function(f,d){return function(h){var E=process.hrtime(f.startTime),S=E[0]*1e3+E[1]/1e6|0;yf.channel.publish("mysql",{query:f.result,callbackArgs:arguments,err:h,duration:S,time:f.startDate}),d.apply(this,arguments)}});var s=["_enqueueCallback"],u=require(y0.dirname(t)+"/lib/Pool");return s.forEach(function(f){return n(u,"Pool")(f)}),e};ao.mysql={versionSpecifier:">= 2.0.0 < 3.0.0",patch:Hq};function Bq(){yf.channel.registerMonkeyPatch("mysql",ao.mysql)}ao.enable=Bq});var A0=_(oo=>{"use strict";Object.defineProperty(oo,"__esModule",{value:!0});oo.enable=oo.postgresPool1=void 0;var S0=pr();function Gq(e){var t=e.prototype.connect;return e.prototype.connect=function(n){return n&&(arguments[0]=S0.channel.bindToContext(n)),t.apply(this,arguments)},e}oo.postgresPool1={versionSpecifier:">= 1.0.0 < 3.0.0",patch:Gq};function Vq(){S0.channel.registerMonkeyPatch("pg-pool",oo.postgresPool1)}oo.enable=Vq});var b0=_(ai=>{"use strict";Object.defineProperty(ai,"__esModule",{value:!0});ai.enable=ai.postgres7=ai.postgres6=void 0;var ls=pr(),I0=require("events");function zq(e,t){var r=e.Client.prototype.query,n="__diagnosticOriginalFunc";return e.Client.prototype.query=function(a,s,u){var f={query:{},database:{host:this.connectionParameters.host,port:this.connectionParameters.port},result:null,error:null,duration:0,time:new Date},d=process.hrtime(),h;function E(S){S&&S[n]&&(S=S[n]);var C=ls.channel.bindToContext(function(q,se){var Ce=process.hrtime(d);if(f.result=se&&{rowCount:se.rowCount,command:se.command},f.error=q,f.duration=Math.ceil(Ce[0]*1e3+Ce[1]/1e6),ls.channel.publish("postgres",f),q){if(S)return S.apply(this,arguments);h&&h instanceof I0.EventEmitter&&h.emit("error",q)}else S&&S.apply(this,arguments)});try{return Object.defineProperty(C,n,{value:S}),C}catch{return S}}try{typeof a=="string"?s instanceof Array?(f.query.preparable={text:a,args:s},u=E(u)):(f.query.text=a,u?u=E(u):s=E(s)):(typeof a.name=="string"?f.query.plan=a.name:a.values instanceof Array?f.query.preparable={text:a.text,args:a.values}:f.query.text=a.text,u?u=E(u):s?s=E(s):a.callback=E(a.callback))}catch{return r.apply(this,arguments)}return arguments[0]=a,arguments[1]=s,arguments[2]=u,arguments.length=arguments.length>3?arguments.length:3,h=r.apply(this,arguments),h},e}function Kq(e,t){var r=e.Client.prototype.query,n="__diagnosticOriginalFunc";return e.Client.prototype.query=function(a,s,u){var f=this,d=!!u,h={query:{},database:{host:this.connectionParameters.host,port:this.connectionParameters.port},result:null,error:null,duration:0,time:new Date},E=process.hrtime(),S;function C(q){q&&q[n]&&(q=q[n]);var se=ls.channel.bindToContext(function(Ce,Fe){var et=process.hrtime(E);if(h.result=Fe&&{rowCount:Fe.rowCount,command:Fe.command},h.error=Ce,h.duration=Math.ceil(et[0]*1e3+et[1]/1e6),ls.channel.publish("postgres",h),Ce){if(q)return q.apply(this,arguments);S&&S instanceof I0.EventEmitter&&S.emit("error",Ce)}else q&&q.apply(this,arguments)});try{return Object.defineProperty(se,n,{value:q}),se}catch{return q}}try{typeof a=="string"?s instanceof Array?(h.query.preparable={text:a,args:s},d=typeof u=="function",u=d?C(u):u):(h.query.text=a,u?(d=typeof u=="function",u=d?C(u):u):(d=typeof s=="function",s=d?C(s):s)):(typeof a.name=="string"?h.query.plan=a.name:a.values instanceof Array?h.query.preparable={text:a.text,args:a.values}:h.query.text=a.text,u?(d=typeof u=="function",u=C(u)):s?(d=typeof s=="function",s=d?C(s):s):(d=typeof a.callback=="function",a.callback=d?C(a.callback):a.callback))}catch{return r.apply(this,arguments)}return arguments[0]=a,arguments[1]=s,arguments[2]=u,arguments.length=arguments.length>3?arguments.length:3,S=r.apply(this,arguments),d?S:S.then(function(q){return C()(void 0,q),new f._Promise(function(se,Ce){se(q)})}).catch(function(q){return C()(q,void 0),new f._Promise(function(se,Ce){Ce(q)})})},e}ai.postgres6={versionSpecifier:"6.*",patch:zq};ai.postgres7={versionSpecifier:">=7.* <=8.*",patch:Kq};function $q(){ls.channel.registerMonkeyPatch("pg",ai.postgres6),ls.channel.registerMonkeyPatch("pg",ai.postgres7)}ai.enable=$q});var O0=_(so=>{"use strict";Object.defineProperty(so,"__esModule",{value:!0});so.enable=so.redis=void 0;var gh=pr(),Xq=function(e){var t=e.RedisClient.prototype.internal_send_command;return e.RedisClient.prototype.internal_send_command=function(r){if(r){var n=r.callback;if(!n||!n.pubsubBound){var i=this.address,a=process.hrtime(),s=new Date;r.callback=gh.channel.bindToContext(function(u,f){var d=process.hrtime(a),h=d[0]*1e3+d[1]/1e6|0;gh.channel.publish("redis",{duration:h,address:i,commandObj:r,err:u,result:f,time:s}),typeof n=="function"&&n.apply(this,arguments)}),r.callback.pubsubBound=!0}}return t.call(this,r)},e};so.redis={versionSpecifier:">= 2.0.0 < 4.0.0",patch:Xq};function Wq(){gh.channel.registerMonkeyPatch("redis",so.redis)}so.enable=Wq});var P0=_(Ci=>{"use strict";var Tf=Ci&&Ci.__assign||function(){return Tf=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Tf.apply(this,arguments)};Object.defineProperty(Ci,"__esModule",{value:!0});Ci.enable=Ci.tedious=void 0;var mh=pr(),Yq=function(e){var t=e.Connection.prototype.makeRequest;return e.Connection.prototype.makeRequest=function(){function n(a){var s=process.hrtime(),u={query:{},database:{host:null,port:null},result:null,error:null,duration:0};return mh.channel.bindToContext(function(f,d,h){var E=process.hrtime(s);u=Tf(Tf({},u),{database:{host:this.connection.config.server,port:this.connection.config.options.port},result:!f&&{rowCount:d,rows:h},query:{text:this.parametersByName.statement.value},error:f,duration:Math.ceil(E[0]*1e3+E[1]/1e6)}),mh.channel.publish("tedious",u),a.call(this,f,d,h)})}var i=arguments[0];arguments[0].callback=n(i.callback),t.apply(this,arguments)},e};Ci.tedious={versionSpecifier:">= 6.0.0 < 9.0.0",patch:Yq};function Qq(){mh.channel.registerMonkeyPatch("tedious",Ci.tedious)}Ci.enable=Qq});var C0=_(fn=>{"use strict";var Zq=fn&&fn.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Jq=fn&&fn.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r};Object.defineProperty(fn,"__esModule",{value:!0});fn.enable=fn.winston2=fn.winston3=void 0;var Sf=pr(),e1=function(e){var t=e.Logger.prototype.log,r,n=function(i,a,s){var u;return r===e.config.npm.levels?u="npm":r===e.config.syslog.levels?u="syslog":u="unknown",Sf.channel.publish("winston",{level:i,message:a,meta:s,levelKind:u}),a};return e.Logger.prototype.log=function(){return r=this.levels,!this.filters||this.filters.length===0?this.filters=[n]:this.filters[this.filters.length-1]!==n&&(this.filters=this.filters.filter(function(a){return a!==n}),this.filters.push(n)),t.apply(this,arguments)},e},t1=function(e){var t=function(s,u){var f;return s.config.npm.levels[u]!=null?f="npm":s.config.syslog.levels[u]!=null?f="syslog":f="unknown",f},r=function(s){Zq(u,s);function u(f,d){var h=s.call(this,d)||this;return h.winston=f,h}return u.prototype.log=function(f,d){var h=f.message,E=f.level,S=f.meta,C=Jq(f,["message","level","meta"]);E=typeof Symbol.for=="function"?f[Symbol.for("level")]:E,h=f instanceof Error?f:h;var q=t(this.winston,E);S=S||{};for(var se in C)C.hasOwnProperty(se)&&(S[se]=C[se]);Sf.channel.publish("winston",{message:h,level:E,levelKind:q,meta:S}),d()},u}(e.Transport);function n(){var s=arguments[0].levels||e.config.npm.levels,u;for(var f in s)s.hasOwnProperty(f)&&(u=u===void 0||s[f]>s[u]?f:u);this.add(new r(e,{level:u}))}var i=e.createLogger;e.createLogger=function(){var u=arguments[0].levels||e.config.npm.levels,f;for(var d in u)u.hasOwnProperty(d)&&(f=f===void 0||u[d]>u[f]?d:f);var h=i.apply(this,arguments);h.add(new r(e,{level:f}));var E=h.configure;return h.configure=function(){E.apply(this,arguments),n.apply(this,arguments)},h};var a=e.configure;return e.configure=function(){a.apply(this,arguments),n.apply(this,arguments)},e.add(new r(e)),e};fn.winston3={versionSpecifier:"3.x",patch:t1};fn.winston2={versionSpecifier:"2.x",patch:e1};function r1(){Sf.channel.registerMonkeyPatch("winston",fn.winston2),Sf.channel.registerMonkeyPatch("winston",fn.winston3)}fn.enable=r1});var U0=_(Bt=>{"use strict";Object.defineProperty(Bt,"__esModule",{value:!0});Bt.enable=Bt.tedious=Bt.pgPool=Bt.pg=Bt.winston=Bt.redis=Bt.mysql=Bt.mongodb=Bt.mongodbCore=Bt.console=Bt.bunyan=Bt.azuresdk=void 0;var R0=p0();Bt.azuresdk=R0;var N0=h0();Bt.bunyan=N0;var w0=g0();Bt.console=w0;var D0=m0();Bt.mongodbCore=D0;var M0=E0();Bt.mongodb=M0;var L0=T0();Bt.mysql=L0;var x0=A0();Bt.pgPool=x0;var q0=b0();Bt.pg=q0;var j0=O0();Bt.redis=j0;var F0=P0();Bt.tedious=F0;var k0=C0();Bt.winston=k0;function n1(){N0.enable(),w0.enable(),D0.enable(),M0.enable(),L0.enable(),q0.enable(),x0.enable(),j0.enable(),k0.enable(),R0.enable(),F0.enable()}Bt.enable=n1});var bf=_(da=>{"use strict";Object.defineProperty(da,"__esModule",{value:!0});da.registerContextPreservation=da.IsInitialized=void 0;var i1=Ep(),Eh=Mr();da.IsInitialized=!process.env.APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL;var yh="DiagnosticChannel";if(da.IsInitialized){Gn=U0(),H0=process.env.APPLICATION_INSIGHTS_NO_PATCH_MODULES||"",Af=H0.split(","),Th={bunyan:Gn.bunyan,console:Gn.console,mongodb:Gn.mongodb,mongodbCore:Gn.mongodbCore,mysql:Gn.mysql,redis:Gn.redis,pg:Gn.pg,pgPool:Gn.pgPool,winston:Gn.winston,azuresdk:Gn.azuresdk};for(If in Th)Af.indexOf(If)===-1&&(Th[If].enable(),Eh.info(yh,"Subscribed to "+If+" events"));Af.length>0&&Eh.info(yh,"Some modules will not be patched",Af)}else Eh.info(yh,"Not subscribing to dependency autocollection because APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL was set");var Gn,H0,Af,Th,If;function a1(e){if(!!da.IsInitialized){var t=pr();t.channel.addContextPreservation(e),t.channel.spanContextPropagator=i1.AsyncScopeManager}}da.registerContextPreservation=a1});var fs=_((iV,B0)=>{"use strict";B0.exports={requestContextHeader:"request-context",requestContextSourceKey:"appId",requestContextTargetKey:"appId",requestIdHeader:"request-id",parentIdHeader:"x-ms-request-id",rootIdHeader:"x-ms-request-root-id",correlationContextHeader:"correlation-context",traceparentHeader:"traceparent",traceStateHeader:"tracestate"}});var mn=_((Ah,V0)=>{"use strict";var pa=Ah&&Ah.__assign||function(){return pa=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},pa.apply(this,arguments)},o1=require("http"),G0=require("https"),Sh=require("url"),Of=require("constants"),ju=Mr(),ds=fs(),s1=function(){function e(){}return e.getCookie=function(t,r){var n="";if(t&&t.length&&typeof r=="string")for(var i=t+"=",a=r.split(";"),s=0;s<a.length;s++){var r=a[s];if(r=e.trim(r),r&&r.indexOf(i)===0){n=r.substring(i.length,a[s].length);break}}return n},e.trim=function(t){return typeof t=="string"?t.replace(/^\s+|\s+$/g,""):""},e.int32ArrayToBase64=function(t){var r=function(u,f){return String.fromCharCode(u>>f&255)},n=function(u){return r(u,24)+r(u,16)+r(u,8)+r(u,0)},i=t.map(n).join(""),a=Buffer.from?Buffer.from(i,"binary"):new Buffer(i,"binary"),s=a.toString("base64");return s.substr(0,s.indexOf("="))},e.random32=function(){return 4294967296*Math.random()|0},e.randomu32=function(){return e.random32()+2147483648},e.w3cTraceId=function(){for(var t=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],r="",n,i=0;i<4;i++)n=e.random32(),r+=t[n&15]+t[n>>4&15]+t[n>>8&15]+t[n>>12&15]+t[n>>16&15]+t[n>>20&15]+t[n>>24&15]+t[n>>28&15];var a=t[8+Math.random()*4|0];return r.substr(0,8)+r.substr(9,4)+"4"+r.substr(13,3)+a+r.substr(16,3)+r.substr(19,12)},e.w3cSpanId=function(){return e.w3cTraceId().substring(16)},e.isValidW3CId=function(t){return t.length===32&&t!=="00000000000000000000000000000000"},e.isArray=function(t){return Object.prototype.toString.call(t)==="[object Array]"},e.isError=function(t){return t instanceof Error},e.isPrimitive=function(t){var r=typeof t;return r==="string"||r==="number"||r==="boolean"},e.isDate=function(t){return Object.prototype.toString.call(t)==="[object Date]"},e.msToTimeSpan=function(t){(isNaN(t)||t<0)&&(t=0);var r=(t/1e3%60).toFixed(7).replace(/0{0,4}$/,""),n=""+Math.floor(t/(1e3*60))%60,i=""+Math.floor(t/(1e3*60*60))%24,a=Math.floor(t/(1e3*60*60*24));r=r.indexOf(".")<2?"0"+r:r,n=n.length<2?"0"+n:n,i=i.length<2?"0"+i:i;var s=a>0?a+".":"";return s+i+":"+n+":"+r},e.extractError=function(t){var r=t;return{message:t.message,code:r.code||r.id||""}},e.extractObject=function(t){return t instanceof Error?e.extractError(t):typeof t.toJSON=="function"?t.toJSON():t},e.validateStringMap=function(t){if(typeof t!="object"){ju.info("Invalid properties dropped from payload");return}var r={};for(var n in t){var i="",a=t[n],s=typeof a;if(e.isPrimitive(a))i=a.toString();else if(a===null||s==="undefined")i="";else if(s==="function"){ju.info("key: "+n+" was function; will not serialize");continue}else{var u=e.isArray(a)?a:e.extractObject(a);try{e.isPrimitive(u)?i=u:i=JSON.stringify(u)}catch(f){i=a.constructor.name.toString()+" (Error: "+f.message+")",ju.info("key: "+n+", could not be serialized")}}r[n]=i.substring(0,e.MAX_PROPERTY_LENGTH)}return r},e.canIncludeCorrelationHeader=function(t,r){var n=t&&t.config&&t.config.correlationHeaderExcludedDomains;if(!n||n.length==0||!r)return!0;for(var i=0;i<n.length;i++){var a=new RegExp(n[i].replace(/\./g,".").replace(/\*/g,".*"));if(a.test(Sh.parse(r).hostname))return!1}return!0},e.getCorrelationContextTarget=function(t,r){var n=t.headers&&t.headers[ds.requestContextHeader];if(n)for(var i=n.split(","),a=0;a<i.length;++a){var s=i[a].split("=");if(s.length==2&&s[0]==r)return s[1]}},e.makeRequest=function(t,r,n,i){r&&r.indexOf("//")===0&&(r="https:"+r);var a=Sh.parse(r),s=pa(pa({},n),{host:a.hostname,port:a.port,path:a.pathname}),u=void 0;if(a.protocol==="https:"&&(u=t.proxyHttpsUrl||void 0),a.protocol==="http:"&&(u=t.proxyHttpUrl||void 0),u){u.indexOf("//")===0&&(u="http:"+u);var f=Sh.parse(u);f.protocol==="https:"?(ju.info("Proxies that use HTTPS are not supported"),u=void 0):s=pa(pa({},s),{host:f.hostname,port:f.port||"80",path:r,headers:pa(pa({},s.headers),{Host:a.hostname})})}var d=a.protocol==="https:"&&!u;return d&&t.httpsAgent!==void 0?s.agent=t.httpsAgent:!d&&t.httpAgent!==void 0?s.agent=t.httpAgent:d&&(s.agent=e.tlsRestrictedAgent),d?G0.request(s,i):o1.request(s,i)},e.safeIncludeCorrelationHeader=function(t,r,n){var i;if(typeof n=="string")i=n;else if(n instanceof Array)i=n.join(",");else if(n&&typeof n.toString=="function")try{i=n.toString()}catch(a){ju.warn("Outgoing request-context header could not be read. Correlation of requests may be lost.",a,n)}i?e.addCorrelationIdHeaderFromString(t,r,i):r.setHeader(ds.requestContextHeader,ds.requestContextSourceKey+"="+t.config.correlationId)},e.dumpObj=function(t){var r=Object.prototype.toString.call(t),n="";return r==="[object Error]"?n="{ stack: '"+t.stack+"', message: '"+t.message+"', name: '"+t.name+"'":n=JSON.stringify(t),r+n},e.addCorrelationIdHeaderFromString=function(t,r,n){var i=n.split(","),a=ds.requestContextSourceKey+"=",s=i.some(function(u){return u.substring(0,a.length)===a});s||r.setHeader(ds.requestContextHeader,n+","+ds.requestContextSourceKey+"="+t.config.correlationId)},e.MAX_PROPERTY_LENGTH=8192,e.tlsRestrictedAgent=new G0.Agent({keepAlive:!0,maxSockets:25,secureOptions:Of.SSL_OP_NO_SSLv2|Of.SSL_OP_NO_SSLv3|Of.SSL_OP_NO_TLSv1|Of.SSL_OP_NO_TLSv1_1}),e}();V0.exports=s1});var uo=_((aV,z0)=>{"use strict";var Pf=mn(),Ih=Mr(),u1=function(){function e(){}return e.queryCorrelationId=function(t,r){var n=t.profileQueryEndpoint+"/api/profiles/"+t.instrumentationKey+"/appId";if(e.completedLookups.hasOwnProperty(n)){r(e.completedLookups[n]);return}else if(e.pendingLookups[n]){e.pendingLookups[n].push(r);return}e.pendingLookups[n]=[r];var i=function(){if(!!e.pendingLookups[n]){var a={method:"GET",disableAppInsightsAutoCollection:!0};Ih.info(e.TAG,a);var s=Pf.makeRequest(t,n,a,function(u){if(u.statusCode===200){var f="";u.setEncoding("utf-8"),u.on("data",function(d){f+=d}),u.on("end",function(){Ih.info(e.TAG,f);var d=e.correlationIdPrefix+f;e.completedLookups[n]=d,e.pendingLookups[n]&&e.pendingLookups[n].forEach(function(h){return h(d)}),delete e.pendingLookups[n]})}else u.statusCode>=400&&u.statusCode<500?(e.completedLookups[n]=void 0,delete e.pendingLookups[n]):setTimeout(i,t.correlationIdRetryIntervalMs)});s&&(s.on("error",function(u){Ih.warn(e.TAG,u)}),s.end())}};setTimeout(i,0)},e.cancelCorrelationIdQuery=function(t,r){var n=t.profileQueryEndpoint+"/api/profiles/"+t.instrumentationKey+"/appId",i=e.pendingLookups[n];i&&(e.pendingLookups[n]=i.filter(function(a){return a!=r}),e.pendingLookups[n].length==0&&delete e.pendingLookups[n])},e.generateRequestId=function(t){if(t){t=t[0]=="|"?t:"|"+t,t[t.length-1]!=="."&&(t+=".");var r=(e.currentRootId++).toString(16);return e.appendSuffix(t,r,"_")}else return e.generateRootId()},e.getRootId=function(t){var r=t.indexOf(".");r<0&&(r=t.length);var n=t[0]==="|"?1:0;return t.substring(n,r)},e.generateRootId=function(){return"|"+Pf.w3cTraceId()+"."},e.appendSuffix=function(t,r,n){if(t.length+r.length<e.requestIdMaxLength)return t+r+n;var i=e.requestIdMaxLength-9;if(t.length>i)for(;i>1;--i){var a=t[i-1];if(a==="."||a==="_")break}if(i<=1)return e.generateRootId();for(r=Pf.randomu32().toString(16);r.length<8;)r="0"+r;return t.substring(0,i)+r+"#"},e.TAG="CorrelationIdManager",e.correlationIdPrefix="cid-v1:",e.w3cEnabled=!0,e.pendingLookups={},e.completedLookups={},e.requestIdMaxLength=1024,e.currentRootId=Pf.randomu32(),e}();z0.exports=u1});var Fu=_((oV,K0)=>{"use strict";var Br=mn(),c1=uo(),l1=function(){function e(t,r){if(this.traceFlag=e.DEFAULT_TRACE_FLAG,this.version=e.DEFAULT_VERSION,t&&typeof t=="string")if(t.split(",").length>1)this.traceId=Br.w3cTraceId(),this.spanId=Br.w3cTraceId().substr(0,16);else{var n=t.trim().split("-"),i=n.length;i>=4?(this.version=n[0],this.traceId=n[1],this.spanId=n[2],this.traceFlag=n[3]):(this.traceId=Br.w3cTraceId(),this.spanId=Br.w3cTraceId().substr(0,16)),this.version.match(/^[0-9a-f]{2}$/g)||(this.version=e.DEFAULT_VERSION,this.traceId=Br.w3cTraceId()),this.version==="00"&&i!==4&&(this.traceId=Br.w3cTraceId(),this.spanId=Br.w3cTraceId().substr(0,16)),this.version==="ff"&&(this.version=e.DEFAULT_VERSION,this.traceId=Br.w3cTraceId(),this.spanId=Br.w3cTraceId().substr(0,16)),this.version.match(/^0[0-9a-f]$/g)||(this.version=e.DEFAULT_VERSION),this.traceFlag.match(/^[0-9a-f]{2}$/g)||(this.traceFlag=e.DEFAULT_TRACE_FLAG,this.traceId=Br.w3cTraceId()),e.isValidTraceId(this.traceId)||(this.traceId=Br.w3cTraceId()),e.isValidSpanId(this.spanId)||(this.spanId=Br.w3cTraceId().substr(0,16),this.traceId=Br.w3cTraceId()),this.parentId=this.getBackCompatRequestId()}else if(r){this.parentId=r.slice();var a=c1.getRootId(r);e.isValidTraceId(a)||(this.legacyRootId=a,a=Br.w3cTraceId()),r.indexOf("|")!==-1&&(r=r.substring(1+r.substring(0,r.length-1).lastIndexOf("."),r.length-1)),this.traceId=a,this.spanId=r}else this.traceId=Br.w3cTraceId(),this.spanId=Br.w3cTraceId().substr(0,16)}return e.isValidTraceId=function(t){return t.match(/^[0-9a-f]{32}$/)&&t!=="00000000000000000000000000000000"},e.isValidSpanId=function(t){return t.match(/^[0-9a-f]{16}$/)&&t!=="0000000000000000"},e.formatOpenTelemetryTraceFlags=function(t){var r="0"+t.toString(16);return r.substring(r.length-2)},e.prototype.getBackCompatRequestId=function(){return"|"+this.traceId+"."+this.spanId+"."},e.prototype.toString=function(){return this.version+"-"+this.traceId+"-"+this.spanId+"-"+this.traceFlag},e.prototype.updateSpanId=function(){this.spanId=Br.w3cTraceId().substr(0,16)},e.DEFAULT_TRACE_FLAG="01",e.DEFAULT_VERSION="00",e}();K0.exports=l1});var bh=_((sV,$0)=>{"use strict";var f1=function(){function e(t){this.fieldmap=[],t&&(this.fieldmap=this.parseHeader(t))}return e.prototype.toString=function(){var t=this.fieldmap;return!t||t.length==0?null:t.join(", ")},e.validateKeyChars=function(t){var r=t.split("@");if(r.length==2){var n=r[0].trim(),i=r[1].trim(),a=Boolean(n.match(/^[\ ]?[a-z0-9\*\-\_/]{1,241}$/)),s=Boolean(i.match(/^[\ ]?[a-z0-9\*\-\_/]{1,14}$/));return a&&s}else if(r.length==1)return Boolean(t.match(/^[\ ]?[a-z0-9\*\-\_/]{1,256}$/));return!1},e.prototype.parseHeader=function(t){var r=[],n={},i=t.split(",");if(i.length>32)return null;for(var a=0,s=i;a<s.length;a++){var u=s[a],f=u.trim();if(f.length!==0){var d=f.split("=");if(d.length!==2||!e.validateKeyChars(d[0])||n[d[0]])return null;n[d[0]]=!0,r.push(f)}}return r},e.strict=!0,e}();$0.exports=f1});var Ri=_((uV,X0)=>{"use strict";var d1=function(){function e(){}return e}();X0.exports=d1});var Y0=_((Oh,W0)=>{"use strict";var p1=Oh&&Oh.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),v1=Ri(),h1=function(e){p1(t,e);function t(){var r=e.call(this)||this;return r.ver=2,r.properties={},r.measurements={},r}return t}(v1);W0.exports=h1});var Ph=_((cV,Q0)=>{"use strict";var _1=function(){function e(){}return e}();Q0.exports=_1});var J0=_((lV,Z0)=>{"use strict";var g1=function(){function e(){this.applicationVersion="ai.application.ver",this.deviceId="ai.device.id",this.deviceLocale="ai.device.locale",this.deviceModel="ai.device.model",this.deviceOEMName="ai.device.oemName",this.deviceOSVersion="ai.device.osVersion",this.deviceType="ai.device.type",this.locationIp="ai.location.ip",this.operationId="ai.operation.id",this.operationName="ai.operation.name",this.operationParentId="ai.operation.parentId",this.operationSyntheticSource="ai.operation.syntheticSource",this.operationCorrelationVector="ai.operation.correlationVector",this.sessionId="ai.session.id",this.sessionIsFirst="ai.session.isFirst",this.userAccountId="ai.user.accountId",this.userId="ai.user.id",this.userAuthUserId="ai.user.authUserId",this.cloudRole="ai.cloud.role",this.cloudRoleInstance="ai.cloud.roleInstance",this.internalSdkVersion="ai.internal.sdkVersion",this.internalAgentVersion="ai.internal.agentVersion",this.internalNodeName="ai.internal.nodeName"}return e}();Z0.exports=g1});var tA=_((Ch,eA)=>{"use strict";var m1=Ch&&Ch.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),E1=Ph(),y1=function(e){m1(t,e);function t(){return e.call(this)||this}return t}(E1);eA.exports=y1});var Nh=_((fV,rA)=>{"use strict";var Rh;(function(e){e[e.Measurement=0]="Measurement",e[e.Aggregation=1]="Aggregation"})(Rh||(Rh={}));rA.exports=Rh});var iA=_((dV,nA)=>{"use strict";var T1=Nh(),S1=function(){function e(){this.kind=T1.Measurement}return e}();nA.exports=S1});var oA=_((pV,aA)=>{"use strict";var A1=function(){function e(){this.ver=1,this.sampleRate=100,this.tags={}}return e}();aA.exports=A1});var Dh=_((wh,sA)=>{"use strict";var I1=wh&&wh.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),b1=Ri(),O1=function(e){I1(t,e);function t(){var r=e.call(this)||this;return r.ver=2,r.properties={},r.measurements={},r}return t}(b1);sA.exports=O1});var cA=_((Mh,uA)=>{"use strict";var P1=Mh&&Mh.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),C1=Ri(),R1=function(e){P1(t,e);function t(){var r=e.call(this)||this;return r.ver=2,r.exceptions=[],r.properties={},r.measurements={},r}return t}(C1);uA.exports=R1});var fA=_((vV,lA)=>{"use strict";var N1=function(){function e(){this.hasFullStack=!0,this.parsedStack=[]}return e}();lA.exports=N1});var pA=_((Lh,dA)=>{"use strict";var w1=Lh&&Lh.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),D1=Ri(),M1=function(e){w1(t,e);function t(){var r=e.call(this)||this;return r.ver=2,r.properties={},r}return t}(D1);dA.exports=M1});var hA=_((xh,vA)=>{"use strict";var L1=xh&&xh.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),x1=Ri(),q1=function(e){L1(t,e);function t(){var r=e.call(this)||this;return r.ver=2,r.metrics=[],r.properties={},r}return t}(x1);vA.exports=q1});var gA=_((qh,_A)=>{"use strict";var j1=qh&&qh.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),F1=Dh(),k1=function(e){j1(t,e);function t(){var r=e.call(this)||this;return r.ver=2,r.properties={},r.measurements={},r}return t}(F1);_A.exports=k1});var EA=_((jh,mA)=>{"use strict";var U1=jh&&jh.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),H1=Ri(),B1=function(e){U1(t,e);function t(){var r=e.call(this)||this;return r.ver=2,r.success=!0,r.properties={},r.measurements={},r}return t}(H1);mA.exports=B1});var TA=_((Fh,yA)=>{"use strict";var G1=Fh&&Fh.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),V1=Ri(),z1=function(e){G1(t,e);function t(){var r=e.call(this)||this;return r.ver=2,r.properties={},r.measurements={},r}return t}(V1);yA.exports=z1});var AA=_((hV,SA)=>{"use strict";var kh;(function(e){e[e.Verbose=0]="Verbose",e[e.Information=1]="Information",e[e.Warning=2]="Warning",e[e.Error=3]="Error",e[e.Critical=4]="Critical"})(kh||(kh={}));SA.exports=kh});var bA=_((_V,IA)=>{"use strict";var K1=function(){function e(){}return e}();IA.exports=K1});var Uh=_(Ar=>{"use strict";Object.defineProperty(Ar,"__esModule",{value:!0});Ar.AvailabilityData=Y0();Ar.Base=Ph();Ar.ContextTagKeys=J0();Ar.Data=tA();Ar.DataPoint=iA();Ar.DataPointType=Nh();Ar.Domain=Ri();Ar.Envelope=oA();Ar.EventData=Dh();Ar.ExceptionData=cA();Ar.ExceptionDetails=fA();Ar.MessageData=pA();Ar.MetricData=hA();Ar.PageViewData=gA();Ar.RemoteDependencyData=EA();Ar.RequestData=TA();Ar.SeverityLevel=AA();Ar.StackFrame=bA()});var OA=_(ps=>{"use strict";Object.defineProperty(ps,"__esModule",{value:!0});ps.domainSupportsProperties=ps.RemoteDependencyDataConstants=void 0;var co=Uh(),$1=function(){function e(){}return e.TYPE_HTTP="Http",e.TYPE_AI="Http (tracked component)",e}();ps.RemoteDependencyDataConstants=$1;function X1(e){return"properties"in e||e instanceof co.EventData||e instanceof co.ExceptionData||e instanceof co.MessageData||e instanceof co.MetricData||e instanceof co.PageViewData||e instanceof co.RemoteDependencyData||e instanceof co.RequestData}ps.domainSupportsProperties=X1});var CA=_(PA=>{"use strict";Object.defineProperty(PA,"__esModule",{value:!0})});var NA=_(RA=>{"use strict";Object.defineProperty(RA,"__esModule",{value:!0})});var DA=_(wA=>{"use strict";Object.defineProperty(wA,"__esModule",{value:!0})});var LA=_(MA=>{"use strict";Object.defineProperty(MA,"__esModule",{value:!0})});var qA=_(xA=>{"use strict";Object.defineProperty(xA,"__esModule",{value:!0})});var FA=_(jA=>{"use strict";Object.defineProperty(jA,"__esModule",{value:!0})});var UA=_(kA=>{"use strict";Object.defineProperty(kA,"__esModule",{value:!0})});var BA=_(HA=>{"use strict";Object.defineProperty(HA,"__esModule",{value:!0})});var VA=_(GA=>{"use strict";Object.defineProperty(GA,"__esModule",{value:!0})});var KA=_(zA=>{"use strict";Object.defineProperty(zA,"__esModule",{value:!0})});var XA=_($A=>{"use strict";Object.defineProperty($A,"__esModule",{value:!0})});var YA=_(WA=>{"use strict";Object.defineProperty(WA,"__esModule",{value:!0})});var QA=_(Vn=>{"use strict";Object.defineProperty(Vn,"__esModule",{value:!0});Vn.TelemetryType=Vn.TelemetryTypeString=Vn.baseTypeToTelemetryType=Vn.telemetryTypeToBaseType=void 0;function W1(e){switch(e){case Gr.Event:return"EventData";case Gr.Exception:return"ExceptionData";case Gr.Trace:return"MessageData";case Gr.Metric:return"MetricData";case Gr.Request:return"RequestData";case Gr.Dependency:return"RemoteDependencyData";case Gr.Availability:return"AvailabilityData";case Gr.PageView:return"PageViewData"}}Vn.telemetryTypeToBaseType=W1;function Y1(e){switch(e){case"EventData":return Gr.Event;case"ExceptionData":return Gr.Exception;case"MessageData":return Gr.Trace;case"MetricData":return Gr.Metric;case"RequestData":return Gr.Request;case"RemoteDependencyData":return Gr.Dependency;case"AvailabilityData":return Gr.Availability;case"PageViewData":return Gr.PageView}}Vn.baseTypeToTelemetryType=Y1;Vn.TelemetryTypeString={Event:"EventData",Exception:"ExceptionData",Trace:"MessageData",Metric:"MetricData",Request:"RequestData",Dependency:"RemoteDependencyData",Availability:"AvailabilityData",PageView:"PageViewData"};var Gr;(function(e){e[e.Event=0]="Event",e[e.Exception=1]="Exception",e[e.Trace=2]="Trace",e[e.Metric=3]="Metric",e[e.Request=4]="Request",e[e.Dependency=5]="Dependency",e[e.Availability=6]="Availability",e[e.PageView=7]="PageView"})(Gr=Vn.TelemetryType||(Vn.TelemetryType={}))});var ZA=_(Nr=>{"use strict";var Q1=Nr&&Nr.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),En=Nr&&Nr.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&Q1(t,e,r)};Object.defineProperty(Nr,"__esModule",{value:!0});En(CA(),Nr);En(NA(),Nr);En(DA(),Nr);En(LA(),Nr);En(qA(),Nr);En(FA(),Nr);En(UA(),Nr);En(BA(),Nr);En(VA(),Nr);En(KA(),Nr);En(XA(),Nr);En(YA(),Nr);En(QA(),Nr)});var eI=_(JA=>{"use strict";Object.defineProperty(JA,"__esModule",{value:!0})});var rI=_(tI=>{"use strict";Object.defineProperty(tI,"__esModule",{value:!0})});var iI=_(nI=>{"use strict";Object.defineProperty(nI,"__esModule",{value:!0})});var oI=_(aI=>{"use strict";Object.defineProperty(aI,"__esModule",{value:!0})});var uI=_(sI=>{"use strict";Object.defineProperty(sI,"__esModule",{value:!0})});var lI=_(cI=>{"use strict";Object.defineProperty(cI,"__esModule",{value:!0})});var dI=_(fI=>{"use strict";Object.defineProperty(fI,"__esModule",{value:!0})});var vI=_(pI=>{"use strict";Object.defineProperty(pI,"__esModule",{value:!0})});var hI=_(dn=>{"use strict";var Z1=dn&&dn.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),va=dn&&dn.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&Z1(t,e,r)};Object.defineProperty(dn,"__esModule",{value:!0});va(eI(),dn);va(rI(),dn);va(iI(),dn);va(oI(),dn);va(uI(),dn);va(lI(),dn);va(dI(),dn);va(vI(),dn)});var nn=_(oi=>{"use strict";var J1=oi&&oi.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),Cf=oi&&oi.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&J1(t,e,r)};Object.defineProperty(oi,"__esModule",{value:!0});Cf(OA(),oi);Cf(Uh(),oi);Cf(ZA(),oi);Cf(hI(),oi)});var Hh=_((GV,_I)=>{"use strict";var ej=function(){function e(){}return e.prototype.getUrl=function(){return this.url},e.prototype.RequestParser=function(){this.startTime=+new Date},e.prototype._setStatus=function(t,r){var n=+new Date;this.duration=n-this.startTime,this.statusCode=t;var i=this.properties||{};if(r){if(typeof r=="string")i.error=r;else if(r instanceof Error)i.error=r.message;else if(typeof r=="object")for(var a in r)i[a]=r[a]&&r[a].toString&&r[a].toString()}this.properties=i},e.prototype._isSuccess=function(){return 0<this.statusCode&&this.statusCode<400},e}();_I.exports=ej});var Vh=_((Gh,mI)=>{"use strict";var tj=Gh&&Gh.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Rf=require("url"),rj=nn(),gI=mn(),yn=fs(),nj=Hh(),ha=uo(),ij=bh(),Bh=Fu(),aj=function(e){tj(t,e);function t(r,n){var i=e.call(this)||this;return r&&(i.method=r.method,i.url=i._getAbsoluteUrl(r),i.startTime=+new Date,i.socketRemoteAddress=r.socket&&r.socket.remoteAddress,i.parseHeaders(r,n),r.connection&&(i.connectionRemoteAddress=r.connection.remoteAddress,i.legacySocketRemoteAddress=r.connection.socket&&r.connection.socket.remoteAddress)),i}return t.prototype.onError=function(r,n){this._setStatus(void 0,r),n&&(this.duration=n)},t.prototype.onResponse=function(r,n){this._setStatus(r.statusCode,void 0),n&&(this.duration=n)},t.prototype.getRequestTelemetry=function(r){var n={id:this.requestId,name:this.method+" "+Rf.parse(this.url).pathname,url:this.url,source:this.sourceCorrelationId,duration:this.duration,resultCode:this.statusCode?this.statusCode.toString():null,success:this._isSuccess(),properties:this.properties};if(r&&r.time?n.time=r.time:this.startTime&&(n.time=new Date(this.startTime)),r){for(var i in r)n[i]||(n[i]=r[i]);if(r.properties)for(var i in r.properties)n.properties[i]=r.properties[i]}return n},t.prototype.getRequestTags=function(r){var n={};for(var i in r)n[i]=r[i];return n[t.keys.locationIp]=r[t.keys.locationIp]||this._getIp(),n[t.keys.sessionId]=r[t.keys.sessionId]||this._getId("ai_session"),n[t.keys.userId]=r[t.keys.userId]||this._getId("ai_user"),n[t.keys.userAuthUserId]=r[t.keys.userAuthUserId]||this._getId("ai_authUser"),n[t.keys.operationName]=this.getOperationName(r),n[t.keys.operationParentId]=this.getOperationParentId(r),n[t.keys.operationId]=this.getOperationId(r),n},t.prototype.getOperationId=function(r){return r[t.keys.operationId]||this.operationId},t.prototype.getOperationParentId=function(r){return r[t.keys.operationParentId]||this.parentId||this.getOperationId(r)},t.prototype.getOperationName=function(r){return r[t.keys.operationName]||this.method+" "+Rf.parse(this.url).pathname},t.prototype.getRequestId=function(){return this.requestId},t.prototype.getCorrelationContextHeader=function(){return this.correlationContextHeader},t.prototype.getTraceparent=function(){return this.traceparent},t.prototype.getTracestate=function(){return this.tracestate},t.prototype.getLegacyRootId=function(){return this.legacyRootId},t.prototype._getAbsoluteUrl=function(r){if(!r.headers)return r.url;var n=r.connection?r.connection.encrypted:null,i=Rf.parse(r.url),a=i.pathname,s=i.search,u=n||r.headers["x-forwarded-proto"]=="https"?"https":"http",f=Rf.format({protocol:u,host:r.headers.host,pathname:a,search:s});return f},t.prototype._getIp=function(){var r=/[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}/,n=function(a){var s=r.exec(a);if(s)return s[0]},i=n(this.rawHeaders["x-forwarded-for"])||n(this.rawHeaders["x-client-ip"])||n(this.rawHeaders["x-real-ip"])||n(this.connectionRemoteAddress)||n(this.socketRemoteAddress)||n(this.legacySocketRemoteAddress);return!i&&this.connectionRemoteAddress&&this.connectionRemoteAddress.substr&&this.connectionRemoteAddress.substr(0,2)==="::"&&(i="127.0.0.1"),i},t.prototype._getId=function(r){var n=this.rawHeaders&&this.rawHeaders.cookie&&typeof this.rawHeaders.cookie=="string"&&this.rawHeaders.cookie||"",i=t.parseId(gI.getCookie(r,n));return i},t.prototype.setBackCompatFromThisTraceContext=function(){this.operationId=this.traceparent.traceId,this.traceparent.legacyRootId&&(this.legacyRootId=this.traceparent.legacyRootId),this.parentId=this.traceparent.parentId,this.traceparent.updateSpanId(),this.requestId=this.traceparent.getBackCompatRequestId()},t.prototype.parseHeaders=function(r,n){if(this.rawHeaders=r.headers||r.rawHeaders,this.userAgent=r.headers&&r.headers["user-agent"],this.sourceCorrelationId=gI.getCorrelationContextTarget(r,yn.requestContextSourceKey),r.headers){var i=r.headers[yn.traceStateHeader]?r.headers[yn.traceStateHeader].toString():null,a=r.headers[yn.traceparentHeader]?r.headers[yn.traceparentHeader].toString():null,s=r.headers[yn.requestIdHeader]?r.headers[yn.requestIdHeader].toString():null,u=r.headers[yn.parentIdHeader]?r.headers[yn.parentIdHeader].toString():null,f=r.headers[yn.rootIdHeader]?r.headers[yn.rootIdHeader].toString():null;this.correlationContextHeader=r.headers[yn.correlationContextHeader]?r.headers[yn.correlationContextHeader].toString():null,ha.w3cEnabled&&(a||i)?(this.traceparent=new Bh(a?a.toString():null),this.tracestate=a&&i&&new ij(i?i.toString():null),this.setBackCompatFromThisTraceContext()):s?ha.w3cEnabled?(this.traceparent=new Bh(null,s),this.setBackCompatFromThisTraceContext()):(this.parentId=s,this.requestId=ha.generateRequestId(this.parentId),this.operationId=ha.getRootId(this.requestId)):ha.w3cEnabled?(this.traceparent=new Bh,this.traceparent.parentId=u,this.traceparent.legacyRootId=f||u,this.setBackCompatFromThisTraceContext()):(this.parentId=u,this.requestId=ha.generateRequestId(f||this.parentId),this.correlationContextHeader=null,this.operationId=ha.getRootId(this.requestId)),n&&(this.requestId=n,this.operationId=ha.getRootId(this.requestId))}},t.parseId=function(r){var n=r.split("|");return n.length>0?n[0]:""},t.keys=new rj.ContextTagKeys,t}(nj);mI.exports=aj});var xI=_((Ke,LI)=>{Ke=LI.exports=pt;var Nt;typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?Nt=function(){var e=Array.prototype.slice.call(arguments,0);e.unshift("SEMVER"),console.log.apply(console,e)}:Nt=function(){};Ke.SEMVER_SPEC_VERSION="2.0.0";var Kh=256,Nf=Number.MAX_SAFE_INTEGER||9007199254740991,zh=16,Ft=Ke.re=[],V=Ke.src=[],ut=0,vs=ut++;V[vs]="0|[1-9]\\d*";var hs=ut++;V[hs]="[0-9]+";var Yh=ut++;V[Yh]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var yI=ut++;V[yI]="("+V[vs]+")\\.("+V[vs]+")\\.("+V[vs]+")";var TI=ut++;V[TI]="("+V[hs]+")\\.("+V[hs]+")\\.("+V[hs]+")";var $h=ut++;V[$h]="(?:"+V[vs]+"|"+V[Yh]+")";var Xh=ut++;V[Xh]="(?:"+V[hs]+"|"+V[Yh]+")";var Qh=ut++;V[Qh]="(?:-("+V[$h]+"(?:\\."+V[$h]+")*))";var Zh=ut++;V[Zh]="(?:-?("+V[Xh]+"(?:\\."+V[Xh]+")*))";var Wh=ut++;V[Wh]="[0-9A-Za-z-]+";var Hu=ut++;V[Hu]="(?:\\+("+V[Wh]+"(?:\\."+V[Wh]+")*))";var Jh=ut++,SI="v?"+V[yI]+V[Qh]+"?"+V[Hu]+"?";V[Jh]="^"+SI+"$";var e_="[v=\\s]*"+V[TI]+V[Zh]+"?"+V[Hu]+"?",t_=ut++;V[t_]="^"+e_+"$";var ms=ut++;V[ms]="((?:<|>)?=?)";var wf=ut++;V[wf]=V[hs]+"|x|X|\\*";var Df=ut++;V[Df]=V[vs]+"|x|X|\\*";var lo=ut++;V[lo]="[v=\\s]*("+V[Df]+")(?:\\.("+V[Df]+")(?:\\.("+V[Df]+")(?:"+V[Qh]+")?"+V[Hu]+"?)?)?";var gs=ut++;V[gs]="[v=\\s]*("+V[wf]+")(?:\\.("+V[wf]+")(?:\\.("+V[wf]+")(?:"+V[Zh]+")?"+V[Hu]+"?)?)?";var AI=ut++;V[AI]="^"+V[ms]+"\\s*"+V[lo]+"$";var II=ut++;V[II]="^"+V[ms]+"\\s*"+V[gs]+"$";var bI=ut++;V[bI]="(?:^|[^\\d])(\\d{1,"+zh+"})(?:\\.(\\d{1,"+zh+"}))?(?:\\.(\\d{1,"+zh+"}))?(?:$|[^\\d])";var Ff=ut++;V[Ff]="(?:~>?)";var Mf=ut++;V[Mf]="(\\s*)"+V[Ff]+"\\s+";Ft[Mf]=new RegExp(V[Mf],"g");var oj="$1~",OI=ut++;V[OI]="^"+V[Ff]+V[lo]+"$";var PI=ut++;V[PI]="^"+V[Ff]+V[gs]+"$";var kf=ut++;V[kf]="(?:\\^)";var Lf=ut++;V[Lf]="(\\s*)"+V[kf]+"\\s+";Ft[Lf]=new RegExp(V[Lf],"g");var sj="$1^",CI=ut++;V[CI]="^"+V[kf]+V[lo]+"$";var RI=ut++;V[RI]="^"+V[kf]+V[gs]+"$";var r_=ut++;V[r_]="^"+V[ms]+"\\s*("+e_+")$|^$";var n_=ut++;V[n_]="^"+V[ms]+"\\s*("+SI+")$|^$";var ku=ut++;V[ku]="(\\s*)"+V[ms]+"\\s*("+e_+"|"+V[lo]+")";Ft[ku]=new RegExp(V[ku],"g");var uj="$1$2$3",NI=ut++;V[NI]="^\\s*("+V[lo]+")\\s+-\\s+("+V[lo]+")\\s*$";var wI=ut++;V[wI]="^\\s*("+V[gs]+")\\s+-\\s+("+V[gs]+")\\s*$";var DI=ut++;V[DI]="(<|>)?=?\\s*\\*";for(_a=0;_a<ut;_a++)Nt(_a,V[_a]),Ft[_a]||(Ft[_a]=new RegExp(V[_a]));var _a;Ke.parse=fo;function fo(e,t){if((!t||typeof t!="object")&&(t={loose:!!t,includePrerelease:!1}),e instanceof pt)return e;if(typeof e!="string"||e.length>Kh)return null;var r=t.loose?Ft[t_]:Ft[Jh];if(!r.test(e))return null;try{return new pt(e,t)}catch{return null}}Ke.valid=cj;function cj(e,t){var r=fo(e,t);return r?r.version:null}Ke.clean=lj;function lj(e,t){var r=fo(e.trim().replace(/^[=v]+/,""),t);return r?r.version:null}Ke.SemVer=pt;function pt(e,t){if((!t||typeof t!="object")&&(t={loose:!!t,includePrerelease:!1}),e instanceof pt){if(e.loose===t.loose)return e;e=e.version}else if(typeof e!="string")throw new TypeError("Invalid Version: "+e);if(e.length>Kh)throw new TypeError("version is longer than "+Kh+" characters");if(!(this instanceof pt))return new pt(e,t);Nt("SemVer",e,t),this.options=t,this.loose=!!t.loose;var r=e.trim().match(t.loose?Ft[t_]:Ft[Jh]);if(!r)throw new TypeError("Invalid Version: "+e);if(this.raw=e,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>Nf||this.major<0)throw new TypeError("Invalid major version");if(this.minor>Nf||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>Nf||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(function(n){if(/^[0-9]+$/.test(n)){var i=+n;if(i>=0&&i<Nf)return i}return n}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}pt.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version};pt.prototype.toString=function(){return this.version};pt.prototype.compare=function(e){return Nt("SemVer.compare",this.version,this.options,e),e instanceof pt||(e=new pt(e,this.options)),this.compareMain(e)||this.comparePre(e)};pt.prototype.compareMain=function(e){return e instanceof pt||(e=new pt(e,this.options)),_s(this.major,e.major)||_s(this.minor,e.minor)||_s(this.patch,e.patch)};pt.prototype.comparePre=function(e){if(e instanceof pt||(e=new pt(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;var t=0;do{var r=this.prerelease[t],n=e.prerelease[t];if(Nt("prerelease compare",t,r,n),r===void 0&&n===void 0)return 0;if(n===void 0)return 1;if(r===void 0)return-1;if(r===n)continue;return _s(r,n)}while(++t)};pt.prototype.inc=function(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",t),this.inc("pre",t);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{for(var r=this.prerelease.length;--r>=0;)typeof this.prerelease[r]=="number"&&(this.prerelease[r]++,r=-2);r===-1&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error("invalid increment argument: "+e)}return this.format(),this.raw=this.version,this};Ke.inc=fj;function fj(e,t,r,n){typeof r=="string"&&(n=r,r=void 0);try{return new pt(e,r).inc(t,n).version}catch{return null}}Ke.diff=dj;function dj(e,t){if(i_(e,t))return null;var r=fo(e),n=fo(t),i="";if(r.prerelease.length||n.prerelease.length){i="pre";var a="prerelease"}for(var s in r)if((s==="major"||s==="minor"||s==="patch")&&r[s]!==n[s])return i+s;return a}Ke.compareIdentifiers=_s;var EI=/^[0-9]+$/;function _s(e,t){var r=EI.test(e),n=EI.test(t);return r&&n&&(e=+e,t=+t),e===t?0:r&&!n?-1:n&&!r?1:e<t?-1:1}Ke.rcompareIdentifiers=pj;function pj(e,t){return _s(t,e)}Ke.major=vj;function vj(e,t){return new pt(e,t).major}Ke.minor=hj;function hj(e,t){return new pt(e,t).minor}Ke.patch=_j;function _j(e,t){return new pt(e,t).patch}Ke.compare=Ni;function Ni(e,t,r){return new pt(e,r).compare(new pt(t,r))}Ke.compareLoose=gj;function gj(e,t){return Ni(e,t,!0)}Ke.rcompare=mj;function mj(e,t,r){return Ni(t,e,r)}Ke.sort=Ej;function Ej(e,t){return e.sort(function(r,n){return Ke.compare(r,n,t)})}Ke.rsort=yj;function yj(e,t){return e.sort(function(r,n){return Ke.rcompare(r,n,t)})}Ke.gt=Uu;function Uu(e,t,r){return Ni(e,t,r)>0}Ke.lt=xf;function xf(e,t,r){return Ni(e,t,r)<0}Ke.eq=i_;function i_(e,t,r){return Ni(e,t,r)===0}Ke.neq=MI;function MI(e,t,r){return Ni(e,t,r)!==0}Ke.gte=a_;function a_(e,t,r){return Ni(e,t,r)>=0}Ke.lte=o_;function o_(e,t,r){return Ni(e,t,r)<=0}Ke.cmp=qf;function qf(e,t,r,n){switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof r=="object"&&(r=r.version),e===r;case"!==":return typeof e=="object"&&(e=e.version),typeof r=="object"&&(r=r.version),e!==r;case"":case"=":case"==":return i_(e,r,n);case"!=":return MI(e,r,n);case">":return Uu(e,r,n);case">=":return a_(e,r,n);case"<":return xf(e,r,n);case"<=":return o_(e,r,n);default:throw new TypeError("Invalid operator: "+t)}}Ke.Comparator=Dn;function Dn(e,t){if((!t||typeof t!="object")&&(t={loose:!!t,includePrerelease:!1}),e instanceof Dn){if(e.loose===!!t.loose)return e;e=e.value}if(!(this instanceof Dn))return new Dn(e,t);Nt("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===Bu?this.value="":this.value=this.operator+this.semver.version,Nt("comp",this)}var Bu={};Dn.prototype.parse=function(e){var t=this.options.loose?Ft[r_]:Ft[n_],r=e.match(t);if(!r)throw new TypeError("Invalid comparator: "+e);this.operator=r[1],this.operator==="="&&(this.operator=""),r[2]?this.semver=new pt(r[2],this.options.loose):this.semver=Bu};Dn.prototype.toString=function(){return this.value};Dn.prototype.test=function(e){return Nt("Comparator.test",e,this.options.loose),this.semver===Bu?!0:(typeof e=="string"&&(e=new pt(e,this.options)),qf(e,this.operator,this.semver,this.options))};Dn.prototype.intersects=function(e,t){if(!(e instanceof Dn))throw new TypeError("a Comparator is required");(!t||typeof t!="object")&&(t={loose:!!t,includePrerelease:!1});var r;if(this.operator==="")return r=new er(e.value,t),jf(this.value,r,t);if(e.operator==="")return r=new er(this.value,t),jf(e.semver,r,t);var n=(this.operator===">="||this.operator===">")&&(e.operator===">="||e.operator===">"),i=(this.operator==="<="||this.operator==="<")&&(e.operator==="<="||e.operator==="<"),a=this.semver.version===e.semver.version,s=(this.operator===">="||this.operator==="<=")&&(e.operator===">="||e.operator==="<="),u=qf(this.semver,"<",e.semver,t)&&(this.operator===">="||this.operator===">")&&(e.operator==="<="||e.operator==="<"),f=qf(this.semver,">",e.semver,t)&&(this.operator==="<="||this.operator==="<")&&(e.operator===">="||e.operator===">");return n||i||a&&s||u||f};Ke.Range=er;function er(e,t){if((!t||typeof t!="object")&&(t={loose:!!t,includePrerelease:!1}),e instanceof er)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new er(e.raw,t);if(e instanceof Dn)return new er(e.value,t);if(!(this instanceof er))return new er(e,t);if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e,this.set=e.split(/\s*\|\|\s*/).map(function(r){return this.parseRange(r.trim())},this).filter(function(r){return r.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+e);this.format()}er.prototype.format=function(){return this.range=this.set.map(function(e){return e.join(" ").trim()}).join("||").trim(),this.range};er.prototype.toString=function(){return this.range};er.prototype.parseRange=function(e){var t=this.options.loose;e=e.trim();var r=t?Ft[wI]:Ft[NI];e=e.replace(r,Nj),Nt("hyphen replace",e),e=e.replace(Ft[ku],uj),Nt("comparator trim",e,Ft[ku]),e=e.replace(Ft[Mf],oj),e=e.replace(Ft[Lf],sj),e=e.split(/\s+/).join(" ");var n=t?Ft[r_]:Ft[n_],i=e.split(" ").map(function(a){return Sj(a,this.options)},this).join(" ").split(/\s+/);return this.options.loose&&(i=i.filter(function(a){return!!a.match(n)})),i=i.map(function(a){return new Dn(a,this.options)},this),i};er.prototype.intersects=function(e,t){if(!(e instanceof er))throw new TypeError("a Range is required");return this.set.some(function(r){return r.every(function(n){return e.set.some(function(i){return i.every(function(a){return n.intersects(a,t)})})})})};Ke.toComparators=Tj;function Tj(e,t){return new er(e,t).set.map(function(r){return r.map(function(n){return n.value}).join(" ").trim().split(" ")})}function Sj(e,t){return Nt("comp",e,t),e=bj(e,t),Nt("caret",e),e=Aj(e,t),Nt("tildes",e),e=Pj(e,t),Nt("xrange",e),e=Rj(e,t),Nt("stars",e),e}function an(e){return!e||e.toLowerCase()==="x"||e==="*"}function Aj(e,t){return e.trim().split(/\s+/).map(function(r){return Ij(r,t)}).join(" ")}function Ij(e,t){var r=t.loose?Ft[PI]:Ft[OI];return e.replace(r,function(n,i,a,s,u){Nt("tilde",e,n,i,a,s,u);var f;return an(i)?f="":an(a)?f=">="+i+".0.0 <"+(+i+1)+".0.0":an(s)?f=">="+i+"."+a+".0 <"+i+"."+(+a+1)+".0":u?(Nt("replaceTilde pr",u),f=">="+i+"."+a+"."+s+"-"+u+" <"+i+"."+(+a+1)+".0"):f=">="+i+"."+a+"."+s+" <"+i+"."+(+a+1)+".0",Nt("tilde return",f),f})}function bj(e,t){return e.trim().split(/\s+/).map(function(r){return Oj(r,t)}).join(" ")}function Oj(e,t){Nt("caret",e,t);var r=t.loose?Ft[RI]:Ft[CI];return e.replace(r,function(n,i,a,s,u){Nt("caret",e,n,i,a,s,u);var f;return an(i)?f="":an(a)?f=">="+i+".0.0 <"+(+i+1)+".0.0":an(s)?i==="0"?f=">="+i+"."+a+".0 <"+i+"."+(+a+1)+".0":f=">="+i+"."+a+".0 <"+(+i+1)+".0.0":u?(Nt("replaceCaret pr",u),i==="0"?a==="0"?f=">="+i+"."+a+"."+s+"-"+u+" <"+i+"."+a+"."+(+s+1):f=">="+i+"."+a+"."+s+"-"+u+" <"+i+"."+(+a+1)+".0":f=">="+i+"."+a+"."+s+"-"+u+" <"+(+i+1)+".0.0"):(Nt("no pr"),i==="0"?a==="0"?f=">="+i+"."+a+"."+s+" <"+i+"."+a+"."+(+s+1):f=">="+i+"."+a+"."+s+" <"+i+"."+(+a+1)+".0":f=">="+i+"."+a+"."+s+" <"+(+i+1)+".0.0"),Nt("caret return",f),f})}function Pj(e,t){return Nt("replaceXRanges",e,t),e.split(/\s+/).map(function(r){return Cj(r,t)}).join(" ")}function Cj(e,t){e=e.trim();var r=t.loose?Ft[II]:Ft[AI];return e.replace(r,function(n,i,a,s,u,f){Nt("xRange",e,n,i,a,s,u,f);var d=an(a),h=d||an(s),E=h||an(u),S=E;return i==="="&&S&&(i=""),d?i===">"||i==="<"?n="<0.0.0":n="*":i&&S?(h&&(s=0),u=0,i===">"?(i=">=",h?(a=+a+1,s=0,u=0):(s=+s+1,u=0)):i==="<="&&(i="<",h?a=+a+1:s=+s+1),n=i+a+"."+s+"."+u):h?n=">="+a+".0.0 <"+(+a+1)+".0.0":E&&(n=">="+a+"."+s+".0 <"+a+"."+(+s+1)+".0"),Nt("xRange return",n),n})}function Rj(e,t){return Nt("replaceStars",e,t),e.trim().replace(Ft[DI],"")}function Nj(e,t,r,n,i,a,s,u,f,d,h,E,S){return an(r)?t="":an(n)?t=">="+r+".0.0":an(i)?t=">="+r+"."+n+".0":t=">="+t,an(f)?u="":an(d)?u="<"+(+f+1)+".0.0":an(h)?u="<"+f+"."+(+d+1)+".0":E?u="<="+f+"."+d+"."+h+"-"+E:u="<="+u,(t+" "+u).trim()}er.prototype.test=function(e){if(!e)return!1;typeof e=="string"&&(e=new pt(e,this.options));for(var t=0;t<this.set.length;t++)if(wj(this.set[t],e,this.options))return!0;return!1};function wj(e,t,r){for(var n=0;n<e.length;n++)if(!e[n].test(t))return!1;if(t.prerelease.length&&!r.includePrerelease){for(n=0;n<e.length;n++)if(Nt(e[n].semver),e[n].semver!==Bu&&e[n].semver.prerelease.length>0){var i=e[n].semver;if(i.major===t.major&&i.minor===t.minor&&i.patch===t.patch)return!0}return!1}return!0}Ke.satisfies=jf;function jf(e,t,r){try{t=new er(t,r)}catch{return!1}return t.test(e)}Ke.maxSatisfying=Dj;function Dj(e,t,r){var n=null,i=null;try{var a=new er(t,r)}catch{return null}return e.forEach(function(s){a.test(s)&&(!n||i.compare(s)===-1)&&(n=s,i=new pt(n,r))}),n}Ke.minSatisfying=Mj;function Mj(e,t,r){var n=null,i=null;try{var a=new er(t,r)}catch{return null}return e.forEach(function(s){a.test(s)&&(!n||i.compare(s)===1)&&(n=s,i=new pt(n,r))}),n}Ke.minVersion=Lj;function Lj(e,t){e=new er(e,t);var r=new pt("0.0.0");if(e.test(r)||(r=new pt("0.0.0-0"),e.test(r)))return r;r=null;for(var n=0;n<e.set.length;++n){var i=e.set[n];i.forEach(function(a){var s=new pt(a.semver.version);switch(a.operator){case">":s.prerelease.length===0?s.patch++:s.prerelease.push(0),s.raw=s.format();case"":case">=":(!r||Uu(r,s))&&(r=s);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+a.operator)}})}return r&&e.test(r)?r:null}Ke.validRange=xj;function xj(e,t){try{return new er(e,t).range||"*"}catch{return null}}Ke.ltr=qj;function qj(e,t,r){return s_(e,t,"<",r)}Ke.gtr=jj;function jj(e,t,r){return s_(e,t,">",r)}Ke.outside=s_;function s_(e,t,r,n){e=new pt(e,n),t=new er(t,n);var i,a,s,u,f;switch(r){case">":i=Uu,a=o_,s=xf,u=">",f=">=";break;case"<":i=xf,a=a_,s=Uu,u="<",f="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(jf(e,t,n))return!1;for(var d=0;d<t.set.length;++d){var h=t.set[d],E=null,S=null;if(h.forEach(function(C){C.semver===Bu&&(C=new Dn(">=0.0.0")),E=E||C,S=S||C,i(C.semver,E.semver,n)?E=C:s(C.semver,S.semver,n)&&(S=C)}),E.operator===u||E.operator===f||(!S.operator||S.operator===u)&&a(e,S.semver))return!1;if(S.operator===f&&s(e,S.semver))return!1}return!0}Ke.prerelease=Fj;function Fj(e,t){var r=fo(e,t);return r&&r.prerelease.length?r.prerelease:null}Ke.intersects=kj;function kj(e,t,r){return e=new er(e,r),t=new er(t,r),e.intersects(t)}Ke.coerce=Uj;function Uj(e){if(e instanceof pt)return e;if(typeof e!="string")return null;var t=e.match(Ft[bI]);return t==null?null:fo(t[1]+"."+(t[2]||"0")+"."+(t[3]||"0"))}});var Uf=_((VV,FI)=>{"use strict";function u_(e){return typeof e=="function"}var on=console.error.bind(console);function Gu(e,t,r){var n=!!e[t]&&e.propertyIsEnumerable(t);Object.defineProperty(e,t,{configurable:!0,enumerable:n,writable:!0,value:r})}function Vu(e){e&&e.logger&&(u_(e.logger)?on=e.logger:on("new logger isn't a function, not replacing"))}function qI(e,t,r){if(!e||!e[t]){on("no original function "+t+" to wrap");return}if(!r){on("no wrapper function"),on(new Error().stack);return}if(!u_(e[t])||!u_(r)){on("original object and wrapper must be functions");return}var n=e[t],i=r(n,t);return Gu(i,"__original",n),Gu(i,"__unwrap",function(){e[t]===i&&Gu(e,t,n)}),Gu(i,"__wrapped",!0),Gu(e,t,i),i}function Hj(e,t,r){if(e)Array.isArray(e)||(e=[e]);else{on("must provide one or more modules to patch"),on(new Error().stack);return}if(!(t&&Array.isArray(t))){on("must provide one or more functions to wrap on modules");return}e.forEach(function(n){t.forEach(function(i){qI(n,i,r)})})}function jI(e,t){if(!e||!e[t]){on("no function to unwrap."),on(new Error().stack);return}if(!e[t].__unwrap)on("no original to unwrap to -- has "+t+" already been unwrapped?");else return e[t].__unwrap()}function Bj(e,t){if(e)Array.isArray(e)||(e=[e]);else{on("must provide one or more modules to patch"),on(new Error().stack);return}if(!(t&&Array.isArray(t))){on("must provide one or more functions to unwrap on modules");return}e.forEach(function(r){t.forEach(function(n){jI(r,n)})})}Vu.wrap=qI;Vu.massWrap=Hj;Vu.unwrap=jI;Vu.massUnwrap=Bj;FI.exports=Vu});var Gf=_((zV,BI)=>{"use strict";var UI=Uf(),Es=UI.wrap,Hf=UI.unwrap,wi="wrap@before";function Bf(e,t,r){var n=!!e[t]&&e.propertyIsEnumerable(t);Object.defineProperty(e,t,{configurable:!0,enumerable:n,writable:!0,value:r})}function Gj(e,t){for(var r=t.length,n=0;n<r;n++){var i=t[n],a=e[wi];if(typeof a=="function")a(i);else if(Array.isArray(a))for(var s=a.length,u=0;u<s;u++)a[u](i)}}function HI(e,t){var r;return r=e._events&&e._events[t],Array.isArray(r)||(r?r=[r]:r=[]),r}function Vj(e,t,r){var n=HI(e,t),i=n.filter(function(a){return r.indexOf(a)===-1});i.length>0&&Gj(e,i)}function kI(e,t){if(!!e){var r=e;if(typeof e=="function")r=t(e);else if(Array.isArray(e)){r=[];for(var n=0;n<e.length;n++)r[n]=t(e[n])}return r}}BI.exports=function(t,r,n){if(!t||!t.on||!t.addListener||!t.removeListener||!t.emit)throw new Error("can only wrap real EEs");if(!r)throw new Error("must have function to run on listener addition");if(!n)throw new Error("must have function to wrap listeners when emitting");function i(s){return function(f,d){var h=HI(this,f).slice();try{var E=s.call(this,f,d);return Vj(this,f,h),E}finally{this.on.__wrapped||Es(this,"on",i),this.addListener.__wrapped||Es(this,"addListener",i)}}}function a(s){return function(f){if(!this._events||!this._events[f])return s.apply(this,arguments);var d=this._events[f];function h(E){return function(){this._events[f]=d;try{return E.apply(this,arguments)}finally{d=this._events[f],this._events[f]=kI(d,n)}}}Es(this,"removeListener",h);try{return this._events[f]=kI(d,n),s.apply(this,arguments)}finally{Hf(this,"removeListener"),this._events[f]=d}}}t[wi]?typeof t[wi]=="function"?Bf(t,wi,[t[wi],r]):Array.isArray(t[wi])&&t[wi].push(r):Bf(t,wi,r),t.__wrapped||(Es(t,"addListener",i),Es(t,"on",i),Es(t,"emit",a),Bf(t,"__unwrap",function(){Hf(t,"addListener"),Hf(t,"on"),Hf(t,"emit"),delete t[wi],delete t.__wrapped}),Bf(t,"__wrapped",!0))}});var KI=_((KV,zI)=>{"use strict";var At=require("util"),Di=require("assert"),zj=Gf(),Kt=require("async_hooks"),zu="cls@contexts",Ku="error@context",tr=process.env.DEBUG_CLS_HOOKED,St=-1;zI.exports={getNamespace:GI,createNamespace:Kj,destroyNamespace:VI,reset:$j,ERROR_SYMBOL:Ku};function Mn(e){this.name=e,this.active=null,this._set=[],this.id=null,this._contexts=new Map,this._indent=0}Mn.prototype.set=function(t,r){if(!this.active)throw new Error("No context available. ns.run() or ns.bind() must be called first.");if(this.active[t]=r,tr){let n=" ".repeat(this._indent<0?0:this._indent);Qt(n+"CONTEXT-SET KEY:"+t+"="+r+" in ns:"+this.name+" currentUid:"+St+" active:"+At.inspect(this.active,{showHidden:!0,depth:2,colors:!0}))}return r};Mn.prototype.get=function(t){if(!this.active){if(tr){let r=Kt.currentId(),n=Kt.triggerAsyncId(),i=" ".repeat(this._indent<0?0:this._indent);Qt(`${i}CONTEXT-GETTING KEY NO ACTIVE NS: (${this.name}) ${t}=undefined currentUid:${St} asyncHooksCurrentId:${r} triggerId:${n} len:${this._set.length}`)}return}if(tr){let r=Kt.executionAsyncId(),n=Kt.triggerAsyncId(),i=" ".repeat(this._indent<0?0:this._indent);Qt(i+"CONTEXT-GETTING KEY:"+t+"="+this.active[t]+" ("+this.name+") currentUid:"+St+" active:"+At.inspect(this.active,{showHidden:!0,depth:2,colors:!0})),Qt(`${i}CONTEXT-GETTING KEY: (${this.name}) ${t}=${this.active[t]} currentUid:${St} asyncHooksCurrentId:${r} triggerId:${n} len:${this._set.length} active:${At.inspect(this.active)}`)}return this.active[t]};Mn.prototype.createContext=function(){let t=Object.create(this.active?this.active:Object.prototype);if(t._ns_name=this.name,t.id=St,tr){let r=Kt.executionAsyncId(),n=Kt.triggerAsyncId(),i=" ".repeat(this._indent<0?0:this._indent);Qt(`${i}CONTEXT-CREATED Context: (${this.name}) currentUid:${St} asyncHooksCurrentId:${r} triggerId:${n} len:${this._set.length} context:${At.inspect(t,{showHidden:!0,depth:2,colors:!0})}`)}return t};Mn.prototype.run=function(t){let r=this.createContext();this.enter(r);try{if(tr){let n=Kt.triggerAsyncId(),i=Kt.executionAsyncId(),a=" ".repeat(this._indent<0?0:this._indent);Qt(`${a}CONTEXT-RUN BEGIN: (${this.name}) currentUid:${St} triggerId:${n} asyncHooksCurrentId:${i} len:${this._set.length} context:${At.inspect(r)}`)}return t(r),r}catch(n){throw n&&(n[Ku]=r),n}finally{if(tr){let n=Kt.triggerAsyncId(),i=Kt.executionAsyncId(),a=" ".repeat(this._indent<0?0:this._indent);Qt(`${a}CONTEXT-RUN END: (${this.name}) currentUid:${St} triggerId:${n} asyncHooksCurrentId:${i} len:${this._set.length} ${At.inspect(r)}`)}this.exit(r)}};Mn.prototype.runAndReturn=function(t){let r;return this.run(function(n){r=t(n)}),r};Mn.prototype.runPromise=function(t){let r=this.createContext();this.enter(r);let n=t(r);if(!n||!n.then||!n.catch)throw new Error("fn must return a promise.");return tr&&Qt("CONTEXT-runPromise BEFORE: ("+this.name+") currentUid:"+St+" len:"+this._set.length+" "+At.inspect(r)),n.then(i=>(tr&&Qt("CONTEXT-runPromise AFTER then: ("+this.name+") currentUid:"+St+" len:"+this._set.length+" "+At.inspect(r)),this.exit(r),i)).catch(i=>{throw i[Ku]=r,tr&&Qt("CONTEXT-runPromise AFTER catch: ("+this.name+") currentUid:"+St+" len:"+this._set.length+" "+At.inspect(r)),this.exit(r),i})};Mn.prototype.bind=function(t,r){r||(this.active?r=this.active:r=this.createContext());let n=this;return function(){n.enter(r);try{return t.apply(this,arguments)}catch(a){throw a&&(a[Ku]=r),a}finally{n.exit(r)}}};Mn.prototype.enter=function(t){if(Di.ok(t,"context must be provided for entering"),tr){let r=Kt.executionAsyncId(),n=Kt.triggerAsyncId(),i=" ".repeat(this._indent<0?0:this._indent);Qt(`${i}CONTEXT-ENTER: (${this.name}) currentUid:${St} triggerId:${n} asyncHooksCurrentId:${r} len:${this._set.length} ${At.inspect(t)}`)}this._set.push(this.active),this.active=t};Mn.prototype.exit=function(t){if(Di.ok(t,"context must be provided for exiting"),tr){let n=Kt.executionAsyncId(),i=Kt.triggerAsyncId(),a=" ".repeat(this._indent<0?0:this._indent);Qt(`${a}CONTEXT-EXIT: (${this.name}) currentUid:${St} triggerId:${i} asyncHooksCurrentId:${n} len:${this._set.length} ${At.inspect(t)}`)}if(this.active===t){Di.ok(this._set.length,"can't remove top context"),this.active=this._set.pop();return}let r=this._set.lastIndexOf(t);r<0?(tr&&Qt("??ERROR?? context exiting but not entered - ignoring: "+At.inspect(t)),Di.ok(r>=0,`context not currently entered; can't exit. 
`+At.inspect(this)+`
`+At.inspect(t))):(Di.ok(r,"can't remove top context"),this._set.splice(r,1))};Mn.prototype.bindEmitter=function(t){Di.ok(t.on&&t.addListener&&t.emit,"can only bind real EEs");let r=this,n="context@"+this.name;function i(s){!s||(s[zu]||(s[zu]=Object.create(null)),s[zu][n]={namespace:r,context:r.active})}function a(s){if(!(s&&s[zu]))return s;let u=s,f=s[zu];return Object.keys(f).forEach(function(d){let h=f[d];u=h.namespace.bind(u,h.context)}),u}zj(t,i,a)};Mn.prototype.fromException=function(t){return t[Ku]};function GI(e){return process.namespaces[e]}function Kj(e){Di.ok(e,"namespace must be given a name."),tr&&Qt(`NS-CREATING NAMESPACE (${e})`);let t=new Mn(e);return t.id=St,Kt.createHook({init(n,i,a,s){if(St=Kt.executionAsyncId(),t.active){if(t._contexts.set(n,t.active),tr){let u=" ".repeat(t._indent<0?0:t._indent);Qt(`${u}INIT [${i}] (${e}) asyncId:${n} currentUid:${St} triggerId:${a} active:${At.inspect(t.active,{showHidden:!0,depth:2,colors:!0})} resource:${s}`)}}else if(St===0){let u=Kt.triggerAsyncId(),f=t._contexts.get(u);if(f){if(t._contexts.set(n,f),tr){let d=" ".repeat(t._indent<0?0:t._indent);Qt(`${d}INIT USING CONTEXT FROM TRIGGERID [${i}] (${e}) asyncId:${n} currentUid:${St} triggerId:${u} active:${At.inspect(t.active,{showHidden:!0,depth:2,colors:!0})} resource:${s}`)}}else if(tr){let d=" ".repeat(t._indent<0?0:t._indent);Qt(`${d}INIT MISSING CONTEXT [${i}] (${e}) asyncId:${n} currentUid:${St} triggerId:${u} active:${At.inspect(t.active,{showHidden:!0,depth:2,colors:!0})} resource:${s}`)}}if(tr&&i==="PROMISE"){Qt(At.inspect(s,{showHidden:!0}));let u=s.parentId,f=" ".repeat(t._indent<0?0:t._indent);Qt(`${f}INIT RESOURCE-PROMISE [${i}] (${e}) parentId:${u} asyncId:${n} currentUid:${St} triggerId:${a} active:${At.inspect(t.active,{showHidden:!0,depth:2,colors:!0})} resource:${s}`)}},before(n){St=Kt.executionAsyncId();let i;if(i=t._contexts.get(n)||t._contexts.get(St),i){if(tr){let a=Kt.triggerAsyncId(),s=" ".repeat(t._indent<0?0:t._indent);Qt(`${s}BEFORE (${e}) asyncId:${n} currentUid:${St} triggerId:${a} active:${At.inspect(t.active,{showHidden:!0,depth:2,colors:!0})} context:${At.inspect(i)}`),t._indent+=2}t.enter(i)}else if(tr){let a=Kt.triggerAsyncId(),s=" ".repeat(t._indent<0?0:t._indent);Qt(`${s}BEFORE MISSING CONTEXT (${e}) asyncId:${n} currentUid:${St} triggerId:${a} active:${At.inspect(t.active,{showHidden:!0,depth:2,colors:!0})} namespace._contexts:${At.inspect(t._contexts,{showHidden:!0,depth:2,colors:!0})}`),t._indent+=2}},after(n){St=Kt.executionAsyncId();let i;if(i=t._contexts.get(n)||t._contexts.get(St),i){if(tr){let a=Kt.triggerAsyncId();t._indent-=2;let s=" ".repeat(t._indent<0?0:t._indent);Qt(`${s}AFTER (${e}) asyncId:${n} currentUid:${St} triggerId:${a} active:${At.inspect(t.active,{showHidden:!0,depth:2,colors:!0})} context:${At.inspect(i)}`)}t.exit(i)}else if(tr){let a=Kt.triggerAsyncId();t._indent-=2;let s=" ".repeat(t._indent<0?0:t._indent);Qt(`${s}AFTER MISSING CONTEXT (${e}) asyncId:${n} currentUid:${St} triggerId:${a} active:${At.inspect(t.active,{showHidden:!0,depth:2,colors:!0})} context:${At.inspect(i)}`)}},destroy(n){if(St=Kt.executionAsyncId(),tr){let i=Kt.triggerAsyncId(),a=" ".repeat(t._indent<0?0:t._indent);Qt(`${a}DESTROY (${e}) currentUid:${St} asyncId:${n} triggerId:${i} active:${At.inspect(t.active,{showHidden:!0,depth:2,colors:!0})} context:${At.inspect(t._contexts.get(St))}`)}t._contexts.delete(n)}}).enable(),process.namespaces[e]=t,t}function VI(e){let t=GI(e);Di.ok(t,`can't delete nonexistent namespace! "`+e+'"'),Di.ok(t.id,"don't assign to process.namespaces directly! "+At.inspect(t)),process.namespaces[e]=null}function $j(){process.namespaces&&Object.keys(process.namespaces).forEach(function(e){VI(e)}),process.namespaces=Object.create(null)}process.namespaces={};function Qt(...e){tr&&process._rawDebug(`${At.format(...e)}`)}});var XI=_(($V,$I)=>{"use strict";function Xj(){}$I.exports=function(){let t=this._hooks,r=this._state,n=process.nextTick;process.nextTick=function(){if(!r.enabled)return n.apply(process,arguments);let i=new Array(arguments.length);for(let f=0;f<arguments.length;f++)i[f]=arguments[f];let a=i[0];if(typeof a!="function")throw new TypeError("callback is not a function");let s=new Xj,u=--r.counter;return t.init.call(s,u,0,null,null),i[0]=function(){t.pre.call(s,u);let f=!0;try{a.apply(this,arguments),f=!1}finally{f&&process.listenerCount("uncaughtException")>0&&process.once("uncaughtException",function(){t.post.call(s,u,!0),t.destroy.call(null,u)})}t.post.call(s,u,!1),t.destroy.call(null,u)},n.apply(process,i)}}});var YI=_((XV,WI)=>{"use strict";function Wj(){}WI.exports=function(){let t=this._hooks,r=this._state,n=global.Promise,i=n.prototype.then;n.prototype.then=f;function a(d,h,E,S){return typeof d!="function"?S?s(E):u(E):function(){t.pre.call(h,E);try{return d.apply(this,arguments)}finally{t.post.call(h,E,!1),t.destroy.call(null,E)}}}function s(d){return function(E){return t.destroy.call(null,d),E}}function u(d){return function(E){throw t.destroy.call(null,d),E}}function f(d,h){if(!r.enabled)return i.call(this,d,h);let E=new Wj,S=--r.counter;return t.init.call(E,S,0,null,null),i.call(this,a(d,E,S,!0),a(h,E,S,!1))}}});var ZI=_((WV,QI)=>{"use strict";var Tn=require("timers");function Yj(){}function Qj(){}function Zj(){}var Jj=new Map,eF=new Map,tF=new Map,c_=null,l_=!1;QI.exports=function(){f_(this._hooks,this._state,"setTimeout","clearTimeout",Yj,Jj,!0),f_(this._hooks,this._state,"setInterval","clearInterval",Qj,eF,!1),f_(this._hooks,this._state,"setImmediate","clearImmediate",Zj,tF,!0),global.setTimeout=Tn.setTimeout,global.setInterval=Tn.setInterval,global.setImmediate=Tn.setImmediate,global.clearTimeout=Tn.clearTimeout,global.clearInterval=Tn.clearInterval,global.clearImmediate=Tn.clearImmediate};function f_(e,t,r,n,i,a,s){let u=Tn[r],f=Tn[n];Tn[r]=function(){if(!t.enabled)return u.apply(Tn,arguments);let d=new Array(arguments.length);for(let q=0;q<arguments.length;q++)d[q]=arguments[q];let h=d[0];if(typeof h!="function")throw new TypeError('"callback" argument must be a function');let E=new i,S=--t.counter,C;return e.init.call(E,S,0,null,null),d[0]=function(){c_=C,e.pre.call(E,S);let q=!0;try{h.apply(this,arguments),q=!1}finally{q&&process.listenerCount("uncaughtException")>0&&process.once("uncaughtException",function(){e.post.call(E,S,!0),a.delete(C),e.destroy.call(null,S)})}e.post.call(E,S,!1),c_=null,(s||l_)&&(l_=!1,a.delete(C),e.destroy.call(null,S))},C=u.apply(Tn,d),a.set(C,S),C},Tn[n]=function(d){if(c_===d&&d!==null)l_=!0;else if(a.has(d)){let h=a.get(d);a.delete(d),e.destroy.call(null,h)}f.apply(Tn,arguments)}}});var d_=_((YV,rF)=>{rF.exports={name:"async-hook-jl",description:"Inspect the life of handle objects in node",version:"1.7.6",author:"Andreas Madsen <amwebdk@gmail.com>",main:"./index.js",scripts:{test:"node ./test/runner.js && eslint ."},repository:{type:"git",url:"git://github.com/jeff-lewis/async-hook-jl.git"},keywords:["async","async hooks","inspect","async wrap"],license:"MIT",dependencies:{"stack-chain":"^1.3.7"},devDependencies:{async:"1.5.x","cli-color":"1.1.x",eslint:"^3.4.0",endpoint:"0.4.x"},engines:{node:"^4.7 || >=6.9 || >=7.3"}}});var tb=_((QV,eb)=>{"use strict";var Xu=process.binding("async_wrap"),nF=Xu.Providers.TIMERWRAP,JI={nextTick:XI(),promise:YI(),timers:ZI()},$u=new Set;function iF(){this.enabled=!1,this.counter=0}function p_(){let e=this.initFns=[],t=this.preFns=[],r=this.postFns=[],n=this.destroyFns=[];this.init=function(i,a,s,u){if(a===nF){$u.add(i);return}for(let f of e)f(i,this,a,s,u)},this.pre=function(i){if(!$u.has(i))for(let a of t)a(i,this)},this.post=function(i,a){if(!$u.has(i))for(let s of r)s(i,this,a)},this.destroy=function(i){if($u.has(i)){$u.delete(i);return}for(let a of n)a(i)}}p_.prototype.add=function(e){e.init&&this.initFns.push(e.init),e.pre&&this.preFns.push(e.pre),e.post&&this.postFns.push(e.post),e.destroy&&this.destroyFns.push(e.destroy)};function Vf(e,t){let r=e.indexOf(t);r!==-1&&e.splice(r,1)}p_.prototype.remove=function(e){e.init&&Vf(this.initFns,e.init),e.pre&&Vf(this.preFns,e.pre),e.post&&Vf(this.postFns,e.post),e.destroy&&Vf(this.destroyFns,e.destroy)};function Wu(){this._state=new iF,this._hooks=new p_,this.version=d_().version,this.providers=Xu.Providers;for(let e of Object.keys(JI))JI[e].call(this);process.env.hasOwnProperty("NODE_ASYNC_HOOK_WARNING")&&console.warn("warning: you are using async-hook-jl which is unstable."),Xu.setupHooks({init:this._hooks.init,pre:this._hooks.pre,post:this._hooks.post,destroy:this._hooks.destroy})}eb.exports=Wu;Wu.prototype.addHooks=function(e){this._hooks.add(e)};Wu.prototype.removeHooks=function(e){this._hooks.remove(e)};Wu.prototype.enable=function(){this._state.enabled=!0,Xu.enable()};Wu.prototype.disable=function(){this._state.enabled=!1,Xu.disable()}});var v_=_((ZV,aF)=>{aF.exports={name:"stack-chain",description:"API for combining call site modifiers",version:"1.3.7",author:"Andreas Madsen <amwebdk@gmail.com>",scripts:{test:"tap ./test/simple"},repository:{type:"git",url:"git://github.com/AndreasMadsen/stack-chain.git"},keywords:["stack","chain","trace","call site","concat","format"],devDependencies:{tap:"2.x.x","uglify-js":"2.5.x"},license:"MIT"}});var nb=_((JV,rb)=>{function oF(e){try{return Error.prototype.toString.call(e)}catch(t){try{return"<error: "+t+">"}catch{return"<error>"}}}rb.exports=function(t,r){var n=[];n.push(oF(t));for(var i=0;i<r.length;i++){var a=r[i],s;try{s=a.toString()}catch(u){try{s="<error: "+u+">"}catch{s="<error>"}}n.push("    at "+s)}return n.join(`
`)}});var sb=_((ez,ob)=>{var zf=nb();function ab(){this.extend=new Yu,this.filter=new Yu,this.format=new Qu,this.version=v_().version}var __=!1;ab.prototype.callSite=function e(t){t||(t={}),__=!0;var r={};Error.captureStackTrace(r,e);var n=r.stack;return __=!1,n=n.slice(t.slice||0),t.extend&&(n=this.extend._modify(r,n)),t.filter&&(n=this.filter._modify(r,n)),n};var ga=new ab;function Yu(){this._modifiers=[]}Yu.prototype._modify=function(e,t){for(var r=0,n=this._modifiers.length;r<n;r++)t=this._modifiers[r](e,t);return t};Yu.prototype.attach=function(e){this._modifiers.push(e)};Yu.prototype.deattach=function(e){var t=this._modifiers.indexOf(e);return t===-1?!1:(this._modifiers.splice(t,1),!0)};function Qu(){this._formater=zf,this._previous=void 0}Qu.prototype.replace=function(e){e?this._formater=e:this.restore()};Qu.prototype.restore=function(){this._formater=zf,this._previous=void 0};Qu.prototype._backup=function(){this._previous=this._formater};Qu.prototype._roolback=function(){this._previous===zf?this.replace(void 0):this.replace(this._previous),this._previous=void 0};Error.prepareStackTrace&&ga.format.replace(Error.prepareStackTrace);var h_=!1;function ib(e,t){if(__)return t;if(h_)return zf(e,t);var r=t.concat();r=ga.extend._modify(e,r),r=ga.filter._modify(e,r),r=r.slice(0,Error.stackTraceLimit),Object.isExtensible(e)&&Object.getOwnPropertyDescriptor(e,"callSite")===void 0&&(e.callSite={original:t,mutated:r}),h_=!0;var n=ga.format._formater(e,r);return h_=!1,n}Object.defineProperty(Error,"prepareStackTrace",{get:function(){return ib},set:function(e){e===ib?ga.format._roolback():(ga.format._backup(),ga.format.replace(e))}});function sF(){return this.stack,this.callSite}Object.defineProperty(Error.prototype,"callSite",{get:sF,set:function(e){Object.defineProperty(this,"callSite",{value:e,writable:!0,configurable:!0})},configurable:!0});ob.exports=ga});var m_=_((tz,g_)=>{if(global._stackChain)if(global._stackChain.version===v_().version)g_.exports=global._stackChain;else throw new Error("Conflicting version of stack-chain found");else g_.exports=global._stackChain=sb()});var ub=_((rz,E_)=>{"use strict";var uF=tb();if(global._asyncHook)if(global._asyncHook.version===d_().version)E_.exports=global._asyncHook;else throw new Error("Conflicting version of async-hook-jl found");else m_().filter.attach(function(t,r){return r.filter(function(n){let i=n.getFileName();return!(i&&i.slice(0,__dirname.length)===__dirname)})}),E_.exports=global._asyncHook=new uF});var vb=_((nz,pb)=>{"use strict";var hr=require("util"),Mi=require("assert"),cF=Gf(),ys=ub(),Zu="cls@contexts",Ju="error@context",lb=[];for(let e in ys.providers)lb[ys.providers[e]]=e;var sr=process.env.DEBUG_CLS_HOOKED,Ir=-1;pb.exports={getNamespace:fb,createNamespace:lF,destroyNamespace:db,reset:fF,ERROR_SYMBOL:Ju};function Ln(e){this.name=e,this.active=null,this._set=[],this.id=null,this._contexts=new Map}Ln.prototype.set=function(t,r){if(!this.active)throw new Error("No context available. ns.run() or ns.bind() must be called first.");return sr&&vr("    SETTING KEY:"+t+"="+r+" in ns:"+this.name+" uid:"+Ir+" active:"+hr.inspect(this.active,!0)),this.active[t]=r,r};Ln.prototype.get=function(t){if(!this.active){sr&&vr("    GETTING KEY:"+t+"=undefined "+this.name+" uid:"+Ir+" active:"+hr.inspect(this.active,!0));return}return sr&&vr("    GETTING KEY:"+t+"="+this.active[t]+" "+this.name+" uid:"+Ir+" active:"+hr.inspect(this.active,!0)),this.active[t]};Ln.prototype.createContext=function(){sr&&vr("   CREATING Context: "+this.name+" uid:"+Ir+" len:"+this._set.length+"  active:"+hr.inspect(this.active,!0,2,!0));let t=Object.create(this.active?this.active:Object.prototype);return t._ns_name=this.name,t.id=Ir,sr&&vr("   CREATED Context: "+this.name+" uid:"+Ir+" len:"+this._set.length+"  context:"+hr.inspect(t,!0,2,!0)),t};Ln.prototype.run=function(t){let r=this.createContext();this.enter(r);try{return sr&&vr(" BEFORE RUN: "+this.name+" uid:"+Ir+" len:"+this._set.length+" "+hr.inspect(r)),t(r),r}catch(n){throw n&&(n[Ju]=r),n}finally{sr&&vr(" AFTER RUN: "+this.name+" uid:"+Ir+" len:"+this._set.length+" "+hr.inspect(r)),this.exit(r)}};Ln.prototype.runAndReturn=function(t){var r;return this.run(function(n){r=t(n)}),r};Ln.prototype.runPromise=function(t){let r=this.createContext();this.enter(r);let n=t(r);if(!n||!n.then||!n.catch)throw new Error("fn must return a promise.");return sr&&vr(" BEFORE runPromise: "+this.name+" uid:"+Ir+" len:"+this._set.length+" "+hr.inspect(r)),n.then(i=>(sr&&vr(" AFTER runPromise: "+this.name+" uid:"+Ir+" len:"+this._set.length+" "+hr.inspect(r)),this.exit(r),i)).catch(i=>{throw i[Ju]=r,sr&&vr(" AFTER runPromise: "+this.name+" uid:"+Ir+" len:"+this._set.length+" "+hr.inspect(r)),this.exit(r),i})};Ln.prototype.bind=function(t,r){r||(this.active?r=this.active:r=this.createContext());let n=this;return function(){n.enter(r);try{return t.apply(this,arguments)}catch(a){throw a&&(a[Ju]=r),a}finally{n.exit(r)}}};Ln.prototype.enter=function(t){Mi.ok(t,"context must be provided for entering"),sr&&vr("  ENTER "+this.name+" uid:"+Ir+" len:"+this._set.length+" context: "+hr.inspect(t)),this._set.push(this.active),this.active=t};Ln.prototype.exit=function(t){if(Mi.ok(t,"context must be provided for exiting"),sr&&vr("  EXIT "+this.name+" uid:"+Ir+" len:"+this._set.length+" context: "+hr.inspect(t)),this.active===t){Mi.ok(this._set.length,"can't remove top context"),this.active=this._set.pop();return}let r=this._set.lastIndexOf(t);r<0?(sr&&vr("??ERROR?? context exiting but not entered - ignoring: "+hr.inspect(t)),Mi.ok(r>=0,`context not currently entered; can't exit. 
`+hr.inspect(this)+`
`+hr.inspect(t))):(Mi.ok(r,"can't remove top context"),this._set.splice(r,1))};Ln.prototype.bindEmitter=function(t){Mi.ok(t.on&&t.addListener&&t.emit,"can only bind real EEs");let r=this,n="context@"+this.name;function i(s){!s||(s[Zu]||(s[Zu]=Object.create(null)),s[Zu][n]={namespace:r,context:r.active})}function a(s){if(!(s&&s[Zu]))return s;let u=s,f=s[Zu];return Object.keys(f).forEach(function(d){let h=f[d];u=h.namespace.bind(u,h.context)}),u}cF(t,i,a)};Ln.prototype.fromException=function(t){return t[Ju]};function fb(e){return process.namespaces[e]}function lF(e){Mi.ok(e,"namespace must be given a name."),sr&&vr("CREATING NAMESPACE "+e);let t=new Ln(e);return t.id=Ir,ys.addHooks({init(r,n,i,a,s){Ir=r,a?(t._contexts.set(r,t._contexts.get(a)),sr&&vr("PARENTID: "+e+" uid:"+r+" parent:"+a+" provider:"+i)):t._contexts.set(Ir,t.active),sr&&vr("INIT "+e+" uid:"+r+" parent:"+a+" provider:"+lb[i]+" active:"+hr.inspect(t.active,!0))},pre(r,n){Ir=r;let i=t._contexts.get(r);i?(sr&&vr(" PRE "+e+" uid:"+r+" handle:"+Kf(n)+" context:"+hr.inspect(i)),t.enter(i)):sr&&vr(" PRE MISSING CONTEXT "+e+" uid:"+r+" handle:"+Kf(n))},post(r,n){Ir=r;let i=t._contexts.get(r);i?(sr&&vr(" POST "+e+" uid:"+r+" handle:"+Kf(n)+" context:"+hr.inspect(i)),t.exit(i)):sr&&vr(" POST MISSING CONTEXT "+e+" uid:"+r+" handle:"+Kf(n))},destroy(r){Ir=r,sr&&vr("DESTROY "+e+" uid:"+r+" context:"+hr.inspect(t._contexts.get(Ir))+" active:"+hr.inspect(t.active,!0)),t._contexts.delete(r)}}),process.namespaces[e]=t,t}function db(e){let t=fb(e);Mi.ok(t,`can't delete nonexistent namespace! "`+e+'"'),Mi.ok(t.id,"don't assign to process.namespaces directly! "+hr.inspect(t)),process.namespaces[e]=null}function fF(){process.namespaces&&Object.keys(process.namespaces).forEach(function(e){db(e)}),process.namespaces=Object.create(null)}process.namespaces={};ys._state&&!ys._state.enabled&&ys.enable();function vr(e){process.env.DEBUG&&process._rawDebug(e)}function Kf(e){if(!e)return e;if(typeof e=="function")return e.name?e.name:(e.toString().trim().match(/^function\s*([^\s(]+)/)||[])[1];if(e.constructor&&e.constructor.name)return e.constructor.name}if(sr){y_=m_();for(cb in y_.filter._modifiers)y_.filter.deattach(cb)}var y_,cb});var hb=_((iz,T_)=>{"use strict";var dF=xI();process&&dF.gte(process.versions.node,"8.0.0")?T_.exports=KI():T_.exports=vb()});var Db=_(($e,wb)=>{$e=wb.exports=vt;var wt;typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?wt=function(){var e=Array.prototype.slice.call(arguments,0);e.unshift("SEMVER"),console.log.apply(console,e)}:wt=function(){};$e.SEMVER_SPEC_VERSION="2.0.0";var A_=256,$f=Number.MAX_SAFE_INTEGER||9007199254740991,S_=16,kt=$e.re=[],z=$e.src=[],ct=0,Ts=ct++;z[Ts]="0|[1-9]\\d*";var Ss=ct++;z[Ss]="[0-9]+";var P_=ct++;z[P_]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var gb=ct++;z[gb]="("+z[Ts]+")\\.("+z[Ts]+")\\.("+z[Ts]+")";var mb=ct++;z[mb]="("+z[Ss]+")\\.("+z[Ss]+")\\.("+z[Ss]+")";var I_=ct++;z[I_]="(?:"+z[Ts]+"|"+z[P_]+")";var b_=ct++;z[b_]="(?:"+z[Ss]+"|"+z[P_]+")";var C_=ct++;z[C_]="(?:-("+z[I_]+"(?:\\."+z[I_]+")*))";var R_=ct++;z[R_]="(?:-?("+z[b_]+"(?:\\."+z[b_]+")*))";var O_=ct++;z[O_]="[0-9A-Za-z-]+";var rc=ct++;z[rc]="(?:\\+("+z[O_]+"(?:\\."+z[O_]+")*))";var N_=ct++,Eb="v?"+z[gb]+z[C_]+"?"+z[rc]+"?";z[N_]="^"+Eb+"$";var w_="[v=\\s]*"+z[mb]+z[R_]+"?"+z[rc]+"?",D_=ct++;z[D_]="^"+w_+"$";var bs=ct++;z[bs]="((?:<|>)?=?)";var Xf=ct++;z[Xf]=z[Ss]+"|x|X|\\*";var Wf=ct++;z[Wf]=z[Ts]+"|x|X|\\*";var po=ct++;z[po]="[v=\\s]*("+z[Wf]+")(?:\\.("+z[Wf]+")(?:\\.("+z[Wf]+")(?:"+z[C_]+")?"+z[rc]+"?)?)?";var Is=ct++;z[Is]="[v=\\s]*("+z[Xf]+")(?:\\.("+z[Xf]+")(?:\\.("+z[Xf]+")(?:"+z[R_]+")?"+z[rc]+"?)?)?";var yb=ct++;z[yb]="^"+z[bs]+"\\s*"+z[po]+"$";var Tb=ct++;z[Tb]="^"+z[bs]+"\\s*"+z[Is]+"$";var Sb=ct++;z[Sb]="(?:^|[^\\d])(\\d{1,"+S_+"})(?:\\.(\\d{1,"+S_+"}))?(?:\\.(\\d{1,"+S_+"}))?(?:$|[^\\d])";var td=ct++;z[td]="(?:~>?)";var Yf=ct++;z[Yf]="(\\s*)"+z[td]+"\\s+";kt[Yf]=new RegExp(z[Yf],"g");var pF="$1~",Ab=ct++;z[Ab]="^"+z[td]+z[po]+"$";var Ib=ct++;z[Ib]="^"+z[td]+z[Is]+"$";var rd=ct++;z[rd]="(?:\\^)";var Qf=ct++;z[Qf]="(\\s*)"+z[rd]+"\\s+";kt[Qf]=new RegExp(z[Qf],"g");var vF="$1^",bb=ct++;z[bb]="^"+z[rd]+z[po]+"$";var Ob=ct++;z[Ob]="^"+z[rd]+z[Is]+"$";var M_=ct++;z[M_]="^"+z[bs]+"\\s*("+w_+")$|^$";var L_=ct++;z[L_]="^"+z[bs]+"\\s*("+Eb+")$|^$";var ec=ct++;z[ec]="(\\s*)"+z[bs]+"\\s*("+w_+"|"+z[po]+")";kt[ec]=new RegExp(z[ec],"g");var hF="$1$2$3",Pb=ct++;z[Pb]="^\\s*("+z[po]+")\\s+-\\s+("+z[po]+")\\s*$";var Cb=ct++;z[Cb]="^\\s*("+z[Is]+")\\s+-\\s+("+z[Is]+")\\s*$";var Rb=ct++;z[Rb]="(<|>)?=?\\s*\\*";for(ma=0;ma<ct;ma++)wt(ma,z[ma]),kt[ma]||(kt[ma]=new RegExp(z[ma]));var ma;$e.parse=vo;function vo(e,t){if((!t||typeof t!="object")&&(t={loose:!!t,includePrerelease:!1}),e instanceof vt)return e;if(typeof e!="string"||e.length>A_)return null;var r=t.loose?kt[D_]:kt[N_];if(!r.test(e))return null;try{return new vt(e,t)}catch{return null}}$e.valid=_F;function _F(e,t){var r=vo(e,t);return r?r.version:null}$e.clean=gF;function gF(e,t){var r=vo(e.trim().replace(/^[=v]+/,""),t);return r?r.version:null}$e.SemVer=vt;function vt(e,t){if((!t||typeof t!="object")&&(t={loose:!!t,includePrerelease:!1}),e instanceof vt){if(e.loose===t.loose)return e;e=e.version}else if(typeof e!="string")throw new TypeError("Invalid Version: "+e);if(e.length>A_)throw new TypeError("version is longer than "+A_+" characters");if(!(this instanceof vt))return new vt(e,t);wt("SemVer",e,t),this.options=t,this.loose=!!t.loose;var r=e.trim().match(t.loose?kt[D_]:kt[N_]);if(!r)throw new TypeError("Invalid Version: "+e);if(this.raw=e,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>$f||this.major<0)throw new TypeError("Invalid major version");if(this.minor>$f||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>$f||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(function(n){if(/^[0-9]+$/.test(n)){var i=+n;if(i>=0&&i<$f)return i}return n}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}vt.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version};vt.prototype.toString=function(){return this.version};vt.prototype.compare=function(e){return wt("SemVer.compare",this.version,this.options,e),e instanceof vt||(e=new vt(e,this.options)),this.compareMain(e)||this.comparePre(e)};vt.prototype.compareMain=function(e){return e instanceof vt||(e=new vt(e,this.options)),As(this.major,e.major)||As(this.minor,e.minor)||As(this.patch,e.patch)};vt.prototype.comparePre=function(e){if(e instanceof vt||(e=new vt(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;var t=0;do{var r=this.prerelease[t],n=e.prerelease[t];if(wt("prerelease compare",t,r,n),r===void 0&&n===void 0)return 0;if(n===void 0)return 1;if(r===void 0)return-1;if(r===n)continue;return As(r,n)}while(++t)};vt.prototype.inc=function(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",t),this.inc("pre",t);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{for(var r=this.prerelease.length;--r>=0;)typeof this.prerelease[r]=="number"&&(this.prerelease[r]++,r=-2);r===-1&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error("invalid increment argument: "+e)}return this.format(),this.raw=this.version,this};$e.inc=mF;function mF(e,t,r,n){typeof r=="string"&&(n=r,r=void 0);try{return new vt(e,r).inc(t,n).version}catch{return null}}$e.diff=EF;function EF(e,t){if(x_(e,t))return null;var r=vo(e),n=vo(t),i="";if(r.prerelease.length||n.prerelease.length){i="pre";var a="prerelease"}for(var s in r)if((s==="major"||s==="minor"||s==="patch")&&r[s]!==n[s])return i+s;return a}$e.compareIdentifiers=As;var _b=/^[0-9]+$/;function As(e,t){var r=_b.test(e),n=_b.test(t);return r&&n&&(e=+e,t=+t),e===t?0:r&&!n?-1:n&&!r?1:e<t?-1:1}$e.rcompareIdentifiers=yF;function yF(e,t){return As(t,e)}$e.major=TF;function TF(e,t){return new vt(e,t).major}$e.minor=SF;function SF(e,t){return new vt(e,t).minor}$e.patch=AF;function AF(e,t){return new vt(e,t).patch}$e.compare=Li;function Li(e,t,r){return new vt(e,r).compare(new vt(t,r))}$e.compareLoose=IF;function IF(e,t){return Li(e,t,!0)}$e.rcompare=bF;function bF(e,t,r){return Li(t,e,r)}$e.sort=OF;function OF(e,t){return e.sort(function(r,n){return $e.compare(r,n,t)})}$e.rsort=PF;function PF(e,t){return e.sort(function(r,n){return $e.rcompare(r,n,t)})}$e.gt=tc;function tc(e,t,r){return Li(e,t,r)>0}$e.lt=Zf;function Zf(e,t,r){return Li(e,t,r)<0}$e.eq=x_;function x_(e,t,r){return Li(e,t,r)===0}$e.neq=Nb;function Nb(e,t,r){return Li(e,t,r)!==0}$e.gte=q_;function q_(e,t,r){return Li(e,t,r)>=0}$e.lte=j_;function j_(e,t,r){return Li(e,t,r)<=0}$e.cmp=Jf;function Jf(e,t,r,n){switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof r=="object"&&(r=r.version),e===r;case"!==":return typeof e=="object"&&(e=e.version),typeof r=="object"&&(r=r.version),e!==r;case"":case"=":case"==":return x_(e,r,n);case"!=":return Nb(e,r,n);case">":return tc(e,r,n);case">=":return q_(e,r,n);case"<":return Zf(e,r,n);case"<=":return j_(e,r,n);default:throw new TypeError("Invalid operator: "+t)}}$e.Comparator=xn;function xn(e,t){if((!t||typeof t!="object")&&(t={loose:!!t,includePrerelease:!1}),e instanceof xn){if(e.loose===!!t.loose)return e;e=e.value}if(!(this instanceof xn))return new xn(e,t);wt("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===nc?this.value="":this.value=this.operator+this.semver.version,wt("comp",this)}var nc={};xn.prototype.parse=function(e){var t=this.options.loose?kt[M_]:kt[L_],r=e.match(t);if(!r)throw new TypeError("Invalid comparator: "+e);this.operator=r[1],this.operator==="="&&(this.operator=""),r[2]?this.semver=new vt(r[2],this.options.loose):this.semver=nc};xn.prototype.toString=function(){return this.value};xn.prototype.test=function(e){return wt("Comparator.test",e,this.options.loose),this.semver===nc?!0:(typeof e=="string"&&(e=new vt(e,this.options)),Jf(e,this.operator,this.semver,this.options))};xn.prototype.intersects=function(e,t){if(!(e instanceof xn))throw new TypeError("a Comparator is required");(!t||typeof t!="object")&&(t={loose:!!t,includePrerelease:!1});var r;if(this.operator==="")return r=new rr(e.value,t),ed(this.value,r,t);if(e.operator==="")return r=new rr(this.value,t),ed(e.semver,r,t);var n=(this.operator===">="||this.operator===">")&&(e.operator===">="||e.operator===">"),i=(this.operator==="<="||this.operator==="<")&&(e.operator==="<="||e.operator==="<"),a=this.semver.version===e.semver.version,s=(this.operator===">="||this.operator==="<=")&&(e.operator===">="||e.operator==="<="),u=Jf(this.semver,"<",e.semver,t)&&(this.operator===">="||this.operator===">")&&(e.operator==="<="||e.operator==="<"),f=Jf(this.semver,">",e.semver,t)&&(this.operator==="<="||this.operator==="<")&&(e.operator===">="||e.operator===">");return n||i||a&&s||u||f};$e.Range=rr;function rr(e,t){if((!t||typeof t!="object")&&(t={loose:!!t,includePrerelease:!1}),e instanceof rr)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new rr(e.raw,t);if(e instanceof xn)return new rr(e.value,t);if(!(this instanceof rr))return new rr(e,t);if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e,this.set=e.split(/\s*\|\|\s*/).map(function(r){return this.parseRange(r.trim())},this).filter(function(r){return r.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+e);this.format()}rr.prototype.format=function(){return this.range=this.set.map(function(e){return e.join(" ").trim()}).join("||").trim(),this.range};rr.prototype.toString=function(){return this.range};rr.prototype.parseRange=function(e){var t=this.options.loose;e=e.trim();var r=t?kt[Cb]:kt[Pb];e=e.replace(r,jF),wt("hyphen replace",e),e=e.replace(kt[ec],hF),wt("comparator trim",e,kt[ec]),e=e.replace(kt[Yf],pF),e=e.replace(kt[Qf],vF),e=e.split(/\s+/).join(" ");var n=t?kt[M_]:kt[L_],i=e.split(" ").map(function(a){return RF(a,this.options)},this).join(" ").split(/\s+/);return this.options.loose&&(i=i.filter(function(a){return!!a.match(n)})),i=i.map(function(a){return new xn(a,this.options)},this),i};rr.prototype.intersects=function(e,t){if(!(e instanceof rr))throw new TypeError("a Range is required");return this.set.some(function(r){return r.every(function(n){return e.set.some(function(i){return i.every(function(a){return n.intersects(a,t)})})})})};$e.toComparators=CF;function CF(e,t){return new rr(e,t).set.map(function(r){return r.map(function(n){return n.value}).join(" ").trim().split(" ")})}function RF(e,t){return wt("comp",e,t),e=DF(e,t),wt("caret",e),e=NF(e,t),wt("tildes",e),e=LF(e,t),wt("xrange",e),e=qF(e,t),wt("stars",e),e}function sn(e){return!e||e.toLowerCase()==="x"||e==="*"}function NF(e,t){return e.trim().split(/\s+/).map(function(r){return wF(r,t)}).join(" ")}function wF(e,t){var r=t.loose?kt[Ib]:kt[Ab];return e.replace(r,function(n,i,a,s,u){wt("tilde",e,n,i,a,s,u);var f;return sn(i)?f="":sn(a)?f=">="+i+".0.0 <"+(+i+1)+".0.0":sn(s)?f=">="+i+"."+a+".0 <"+i+"."+(+a+1)+".0":u?(wt("replaceTilde pr",u),f=">="+i+"."+a+"."+s+"-"+u+" <"+i+"."+(+a+1)+".0"):f=">="+i+"."+a+"."+s+" <"+i+"."+(+a+1)+".0",wt("tilde return",f),f})}function DF(e,t){return e.trim().split(/\s+/).map(function(r){return MF(r,t)}).join(" ")}function MF(e,t){wt("caret",e,t);var r=t.loose?kt[Ob]:kt[bb];return e.replace(r,function(n,i,a,s,u){wt("caret",e,n,i,a,s,u);var f;return sn(i)?f="":sn(a)?f=">="+i+".0.0 <"+(+i+1)+".0.0":sn(s)?i==="0"?f=">="+i+"."+a+".0 <"+i+"."+(+a+1)+".0":f=">="+i+"."+a+".0 <"+(+i+1)+".0.0":u?(wt("replaceCaret pr",u),i==="0"?a==="0"?f=">="+i+"."+a+"."+s+"-"+u+" <"+i+"."+a+"."+(+s+1):f=">="+i+"."+a+"."+s+"-"+u+" <"+i+"."+(+a+1)+".0":f=">="+i+"."+a+"."+s+"-"+u+" <"+(+i+1)+".0.0"):(wt("no pr"),i==="0"?a==="0"?f=">="+i+"."+a+"."+s+" <"+i+"."+a+"."+(+s+1):f=">="+i+"."+a+"."+s+" <"+i+"."+(+a+1)+".0":f=">="+i+"."+a+"."+s+" <"+(+i+1)+".0.0"),wt("caret return",f),f})}function LF(e,t){return wt("replaceXRanges",e,t),e.split(/\s+/).map(function(r){return xF(r,t)}).join(" ")}function xF(e,t){e=e.trim();var r=t.loose?kt[Tb]:kt[yb];return e.replace(r,function(n,i,a,s,u,f){wt("xRange",e,n,i,a,s,u,f);var d=sn(a),h=d||sn(s),E=h||sn(u),S=E;return i==="="&&S&&(i=""),d?i===">"||i==="<"?n="<0.0.0":n="*":i&&S?(h&&(s=0),u=0,i===">"?(i=">=",h?(a=+a+1,s=0,u=0):(s=+s+1,u=0)):i==="<="&&(i="<",h?a=+a+1:s=+s+1),n=i+a+"."+s+"."+u):h?n=">="+a+".0.0 <"+(+a+1)+".0.0":E&&(n=">="+a+"."+s+".0 <"+a+"."+(+s+1)+".0"),wt("xRange return",n),n})}function qF(e,t){return wt("replaceStars",e,t),e.trim().replace(kt[Rb],"")}function jF(e,t,r,n,i,a,s,u,f,d,h,E,S){return sn(r)?t="":sn(n)?t=">="+r+".0.0":sn(i)?t=">="+r+"."+n+".0":t=">="+t,sn(f)?u="":sn(d)?u="<"+(+f+1)+".0.0":sn(h)?u="<"+f+"."+(+d+1)+".0":E?u="<="+f+"."+d+"."+h+"-"+E:u="<="+u,(t+" "+u).trim()}rr.prototype.test=function(e){if(!e)return!1;typeof e=="string"&&(e=new vt(e,this.options));for(var t=0;t<this.set.length;t++)if(FF(this.set[t],e,this.options))return!0;return!1};function FF(e,t,r){for(var n=0;n<e.length;n++)if(!e[n].test(t))return!1;if(t.prerelease.length&&!r.includePrerelease){for(n=0;n<e.length;n++)if(wt(e[n].semver),e[n].semver!==nc&&e[n].semver.prerelease.length>0){var i=e[n].semver;if(i.major===t.major&&i.minor===t.minor&&i.patch===t.patch)return!0}return!1}return!0}$e.satisfies=ed;function ed(e,t,r){try{t=new rr(t,r)}catch{return!1}return t.test(e)}$e.maxSatisfying=kF;function kF(e,t,r){var n=null,i=null;try{var a=new rr(t,r)}catch{return null}return e.forEach(function(s){a.test(s)&&(!n||i.compare(s)===-1)&&(n=s,i=new vt(n,r))}),n}$e.minSatisfying=UF;function UF(e,t,r){var n=null,i=null;try{var a=new rr(t,r)}catch{return null}return e.forEach(function(s){a.test(s)&&(!n||i.compare(s)===1)&&(n=s,i=new vt(n,r))}),n}$e.minVersion=HF;function HF(e,t){e=new rr(e,t);var r=new vt("0.0.0");if(e.test(r)||(r=new vt("0.0.0-0"),e.test(r)))return r;r=null;for(var n=0;n<e.set.length;++n){var i=e.set[n];i.forEach(function(a){var s=new vt(a.semver.version);switch(a.operator){case">":s.prerelease.length===0?s.patch++:s.prerelease.push(0),s.raw=s.format();case"":case">=":(!r||tc(r,s))&&(r=s);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+a.operator)}})}return r&&e.test(r)?r:null}$e.validRange=BF;function BF(e,t){try{return new rr(e,t).range||"*"}catch{return null}}$e.ltr=GF;function GF(e,t,r){return F_(e,t,"<",r)}$e.gtr=VF;function VF(e,t,r){return F_(e,t,">",r)}$e.outside=F_;function F_(e,t,r,n){e=new vt(e,n),t=new rr(t,n);var i,a,s,u,f;switch(r){case">":i=tc,a=j_,s=Zf,u=">",f=">=";break;case"<":i=Zf,a=q_,s=tc,u="<",f="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(ed(e,t,n))return!1;for(var d=0;d<t.set.length;++d){var h=t.set[d],E=null,S=null;if(h.forEach(function(C){C.semver===nc&&(C=new xn(">=0.0.0")),E=E||C,S=S||C,i(C.semver,E.semver,n)?E=C:s(C.semver,S.semver,n)&&(S=C)}),E.operator===u||E.operator===f||(!S.operator||S.operator===u)&&a(e,S.semver))return!1;if(S.operator===f&&s(e,S.semver))return!1}return!0}$e.prerelease=zF;function zF(e,t){var r=vo(e,t);return r&&r.prerelease.length?r.prerelease:null}$e.intersects=KF;function KF(e,t,r){return e=new rr(e,r),t=new rr(t,r),e.intersects(t)}$e.coerce=$F;function $F(e){if(e instanceof vt)return e;if(typeof e!="string")return null;var t=e.match(kt[Sb]);return t==null?null:vo(t[1]+"."+(t[2]||"0")+"."+(t[3]||"0"))}});var xb=_((az,Lb)=>{var XF=Uf().wrap,U_=1<<0,H_=1<<1,B_=1<<2,id=1<<3,Ut=[],WF=0,Zr=!1,Ea=[],Os,G_;function V_(e,t){var r=e.length,n=t.length,i=[];if(r===0&&n===0)return i;for(var a=0;a<r;a++)i[a]=e[a];if(n===0)return i;for(var s=0;s<n;s++){var u=!0;for(a=0;a<r;a++)if(e[a].uid===t[s].uid){u=!1;break}u&&i.push(t[s])}return i}process._fatalException?(nd=!1,Os=function(t){var r=Ut.length;if(nd||r===0)return!1;var n=!1;nd=!0;for(var i=0;i<r;++i){var a=Ut[i];if((a.flags&id)!==0){var s=Ps&&Ps[a.uid];n=a.error(s,t)||n}}return nd=!1,Ea.length>0&&(Ut=Ea.pop()),Ps=void 0,n&&!Zr},G_=function(t,r,n){var i=[];Zr=!0;for(var a=0;a<n;++a){var s=r[a];if(i[s.uid]=s.data,(s.flags&U_)!==0){var u=s.create(s.data);u!==void 0&&(i[s.uid]=u)}}return Zr=!1,function(){Ps=i,Ea.push(Ut),Ut=V_(r,Ut),Zr=!0;for(var f=0;f<n;++f)(r[f].flags&H_)>0&&r[f].before(this,i[r[f].uid]);Zr=!1;var d=t.apply(this,arguments);for(Zr=!0,f=0;f<n;++f)(r[f].flags&B_)>0&&r[f].after(this,i[r[f].uid]);return Zr=!1,Ut=Ea.pop(),Ps=void 0,d}},XF(process,"_fatalException",function(e){return function(r){return Os(r)||e(r)}})):(k_=!1,Os=function(t){if(k_)throw t;for(var r=!1,n=Ut.length,i=0;i<n;++i){var a=Ut[i];(a.flags&id)!==0&&(r=a.error(null,t)||r)}if(!r&&Zr)throw t},G_=function(t,r,n){var i=[];Zr=!0;for(var a=0;a<n;++a){var s=r[a];if(i[s.uid]=s.data,(s.flags&U_)!==0){var u=s.create(s.data);u!==void 0&&(i[s.uid]=u)}}return Zr=!1,function(){var f=!1,d=!1;Ea.push(Ut),Ut=V_(r,Ut),Zr=!0;for(var h=0;h<n;++h)(r[h].flags&H_)>0&&r[h].before(this,i[r[h].uid]);Zr=!1;var E;try{E=t.apply(this,arguments)}catch(S){f=!0;for(var h=0;h<n;++h)if((Ut[h].flags&id)!=0)try{d=Ut[h].error(i[r[h].uid],S)||d}catch(q){throw k_=!0,q}if(!d)throw process.removeListener("uncaughtException",Os),process._originalNextTick(function(){process.addListener("uncaughtException",Os)}),S}finally{if(!f||d){for(Zr=!0,h=0;h<n;++h)(r[h].flags&B_)>0&&r[h].after(this,i[r[h].uid]);Zr=!1}Ut=Ea.pop()}return E}},process.addListener("uncaughtException",Os));var nd,Ps,k_;function YF(e,t,r){Zr=!0;for(var n=0;n<r;++n){var i=t[n];i.create&&i.create(i.data)}return Zr=!1,function(){Ea.push(Ut),Ut=V_(t,Ut);var a=e.apply(this,arguments);return Ut=Ea.pop(),a}}function QF(e){var t=Ut.length;if(t===0)return e;for(var r=Ut.slice(),n=0;n<t;++n)if(r[n].flags>0)return G_(e,r,t);return YF(e,r,t)}function si(e,t){typeof e.create=="function"&&(this.create=e.create,this.flags|=U_),typeof e.before=="function"&&(this.before=e.before,this.flags|=H_),typeof e.after=="function"&&(this.after=e.after,this.flags|=B_),typeof e.error=="function"&&(this.error=e.error,this.flags|=id),this.uid=++WF,this.data=t===void 0?null:t}si.prototype.create=void 0;si.prototype.before=void 0;si.prototype.after=void 0;si.prototype.error=void 0;si.prototype.data=void 0;si.prototype.uid=0;si.prototype.flags=0;function Mb(e,t){if(typeof e!="object"||!e)throw new TypeError("callbacks argument must be an object");return e instanceof si?e:new si(e,t)}function ZF(e,t){var r;e instanceof si?r=e:r=Mb(e,t);for(var n=!1,i=0;i<Ut.length;i++)if(r===Ut[i]){n=!0;break}return n||Ut.push(r),r}function JF(e){for(var t=0;t<Ut.length;t++)if(e===Ut[t]){Ut.splice(t,1);break}}process.createAsyncListener=Mb;process.addAsyncListener=ZF;process.removeAsyncListener=JF;Lb.exports=QF});var jb=_((sz,qb)=>{"use strict";qb.exports=(e,t)=>class extends e{constructor(n){var i,a;super(u);var s=this;try{n.apply(i,a)}catch(f){a[1](f)}return s;function u(f,d){i=this,a=[h,E];function h(S){return t(s,!1),f(S)}function E(S){return t(s,!1),d(S)}}}}});var Vb=_(()=>{"use strict";if(process.addAsyncListener)throw new Error("Don't require polyfill unless needed");var Hb=Uf(),od=Db(),pn=Hb.wrap,ya=Hb.massWrap,nr=xb(),ek=require("util"),tk=od.gte(process.version,"6.0.0"),$_=od.gte(process.version,"7.0.0"),rk=od.gte(process.version,"8.0.0"),nk=od.gte(process.version,"11.0.0"),ui=require("net");$_&&!ui._normalizeArgs?ui._normalizeArgs=function(e){if(e.length===0)return[{},null];var t=e[0],r={};typeof t=="object"&&t!==null?r=t:uk(t)?r.path=t:(r.port=t,e.length>1&&typeof e[1]=="string"&&(r.host=e[1]));var n=e[e.length-1];return typeof n!="function"?[r,null]:[r,n]}:!$_&&!ui._normalizeConnectArgs&&(ui._normalizeConnectArgs=function(e){var t={};function r(i){return(i=Number(i))>=0?i:!1}typeof e[0]=="object"&&e[0]!==null?t=e[0]:typeof e[0]=="string"&&r(e[0])===!1?t.path=e[0]:(t.port=e[0],typeof e[1]=="string"&&(t.host=e[1]));var n=e[e.length-1];return typeof n=="function"?[t,n]:[t]});"_setUpListenHandle"in ui.Server.prototype?pn(ui.Server.prototype,"_setUpListenHandle",Fb):pn(ui.Server.prototype,"_listen2",Fb);function Fb(e){return function(){this.on("connection",function(t){t._handle&&(t._handle.onread=nr(t._handle.onread))});try{return e.apply(this,arguments)}finally{this._handle&&this._handle.onconnection&&(this._handle.onconnection=nr(this._handle.onconnection))}}}function Bb(e){if(e&&e._handle){var t=e._handle;t._originalOnread||(t._originalOnread=t.onread),t.onread=nr(t._originalOnread)}}pn(ui.Socket.prototype,"connect",function(e){return function(){var t;rk&&Array.isArray(arguments[0])&&Object.getOwnPropertySymbols(arguments[0]).length>0?t=arguments[0]:t=$_?ui._normalizeArgs(arguments):ui._normalizeConnectArgs(arguments),t[1]&&(t[1]=nr(t[1]));var r=e.apply(this,t);return Bb(this),r}});var ik=require("http");pn(ik.Agent.prototype,"addRequest",function(e){return function(t){var r=t.onSocket;return t.onSocket=nr(function(n){return Bb(n),r.apply(this,arguments)}),e.apply(this,arguments)}});var z_=require("child_process");function kb(e){Array.isArray(e.stdio)&&e.stdio.forEach(function(t){t&&t._handle&&(t._handle.onread=nr(t._handle.onread),pn(t._handle,"close",sd))}),e._handle&&(e._handle.onexit=nr(e._handle.onexit))}z_.ChildProcess?pn(z_.ChildProcess.prototype,"spawn",function(e){return function(){var t=e.apply(this,arguments);return kb(this),t}}):ya(z_,["execFile","fork","spawn"],function(e){return function(){var t=e.apply(this,arguments);return kb(t),t}});process._fatalException||(process._originalNextTick=process.nextTick);var Y_=[];process._nextDomainTick&&Y_.push("_nextDomainTick");process._tickDomainCallback&&Y_.push("_tickDomainCallback");ya(process,Y_,ci);pn(process,"nextTick",sd);var Q_=["setTimeout","setInterval"];global.setImmediate&&Q_.push("setImmediate");var Gb=require("timers"),ak=global.setTimeout===Gb.setTimeout;ya(Gb,Q_,sd);ak&&ya(global,Q_,sd);var X_=require("dns");ya(X_,["lookup","resolve","resolve4","resolve6","resolveCname","resolveMx","resolveNs","resolveTxt","resolveSrv","reverse"],ci);X_.resolveNaptr&&pn(X_,"resolveNaptr",ci);var _o=require("fs");ya(_o,["watch","rename","truncate","chown","fchown","chmod","fchmod","stat","lstat","fstat","link","symlink","readlink","realpath","unlink","rmdir","mkdir","readdir","close","open","utimes","futimes","fsync","write","read","readFile","writeFile","appendFile","watchFile","unwatchFile","exists"],ci);_o.lchown&&pn(_o,"lchown",ci);_o.lchmod&&pn(_o,"lchmod",ci);_o.ftruncate&&pn(_o,"ftruncate",ci);var ic;try{ic=require("zlib")}catch{}ic&&ic.Deflate&&ic.Deflate.prototype&&(ho=Object.getPrototypeOf(ic.Deflate.prototype),ho._transform?pn(ho,"_transform",ci):ho.write&&ho.flush&&ho.end&&ya(ho,["write","flush","end"],ci));var ho,W_;try{W_=require("crypto")}catch{}W_&&(K_=["pbkdf2","randomBytes"],nk||K_.push("pseudoRandomBytes"),ya(W_,K_,ci));var K_,ad=!!global.Promise&&Promise.toString()==="function Promise() { [native code] }"&&Promise.toString.toString()==="function toString() { [native code] }";ad&&(Ub=process.addAsyncListener({create:function(){ad=!1}}),global.Promise.resolve(!0).then(function(){ad=!1}),process.removeAsyncListener(Ub));var Ub;ad&&ok();function ok(){var e=global.Promise;function t(s){if(!(this instanceof t))return e(s);if(typeof s!="function")return new e(s);var u,f,d=new e(h);d.__proto__=t.prototype;try{s.apply(u,f)}catch(E){f[1](E)}return d;function h(E,S){u=this,f=[C,q];function C(se){return n(d,!1),E(se)}function q(se){return n(d,!1),S(se)}}}if(ek.inherits(t,e),pn(e.prototype,"then",a),e.prototype.chain&&pn(e.prototype,"chain",a),tk)global.Promise=jb()(e,n);else{var r=["all","race","reject","resolve","accept","defer"];r.forEach(function(s){typeof e[s]=="function"&&(t[s]=e[s])}),global.Promise=t}function n(s,u){(!s.__asl_wrapper||u)&&(s.__asl_wrapper=nr(i))}function i(s,u,f,d){var h;try{return h=u.call(s,f),{returnVal:h,error:!1}}catch(E){return{errorVal:E,error:!0}}finally{h instanceof e?d.__asl_wrapper=function(){var S=h.__asl_wrapper||i;return S.apply(this,arguments)}:n(d,!0)}}function a(s){return function(){var f=this,d=s.apply(f,Array.prototype.map.call(arguments,h));return d.__asl_wrapper=function(S,C,q,se){return f.__asl_wrapper?(f.__asl_wrapper(S,function(){},null,d),d.__asl_wrapper(S,C,q,se)):i(S,C,q,se)},d;function h(E){return typeof E!="function"?E:nr(function(S){var C=(f.__asl_wrapper||i)(this,E,S,d);if(C.error)throw C.errorVal;return C.returnVal})}}}}function ci(e){var t=function(){var r,n=arguments.length-1;if(typeof arguments[n]=="function"){r=Array(arguments.length);for(var i=0;i<arguments.length-1;i++)r[i]=arguments[i];r[n]=nr(arguments[n])}return e.apply(this,r||arguments)};switch(e.length){case 1:return function(r){return arguments.length!==1?t.apply(this,arguments):(typeof r=="function"&&(r=nr(r)),e.call(this,r))};case 2:return function(r,n){return arguments.length!==2?t.apply(this,arguments):(typeof n=="function"&&(n=nr(n)),e.call(this,r,n))};case 3:return function(r,n,i){return arguments.length!==3?t.apply(this,arguments):(typeof i=="function"&&(i=nr(i)),e.call(this,r,n,i))};case 4:return function(r,n,i,a){return arguments.length!==4?t.apply(this,arguments):(typeof a=="function"&&(a=nr(a)),e.call(this,r,n,i,a))};case 5:return function(r,n,i,a,s){return arguments.length!==5?t.apply(this,arguments):(typeof s=="function"&&(s=nr(s)),e.call(this,r,n,i,a,s))};case 6:return function(r,n,i,a,s,u){return arguments.length!==6?t.apply(this,arguments):(typeof u=="function"&&(u=nr(u)),e.call(this,r,n,i,a,s,u))};default:return t}}function sd(e){var t=function(){var r;if(typeof arguments[0]=="function"){r=Array(arguments.length),r[0]=nr(arguments[0]);for(var n=1;n<arguments.length;n++)r[n]=arguments[n]}return e.apply(this,r||arguments)};switch(e.length){case 1:return function(r){return arguments.length!==1?t.apply(this,arguments):(typeof r=="function"&&(r=nr(r)),e.call(this,r))};case 2:return function(r,n){return arguments.length!==2?t.apply(this,arguments):(typeof r=="function"&&(r=nr(r)),e.call(this,r,n))};case 3:return function(r,n,i){return arguments.length!==3?t.apply(this,arguments):(typeof r=="function"&&(r=nr(r)),e.call(this,r,n,i))};case 4:return function(r,n,i,a){return arguments.length!==4?t.apply(this,arguments):(typeof r=="function"&&(r=nr(r)),e.call(this,r,n,i,a))};case 5:return function(r,n,i,a,s){return arguments.length!==5?t.apply(this,arguments):(typeof r=="function"&&(r=nr(r)),e.call(this,r,n,i,a,s))};case 6:return function(r,n,i,a,s,u){return arguments.length!==6?t.apply(this,arguments):(typeof r=="function"&&(r=nr(r)),e.call(this,r,n,i,a,s,u))};default:return t}}function sk(e){return(e=Number(e))>=0?e:!1}function uk(e){return typeof e=="string"&&sk(e)===!1}});var Wb=_((lz,Xb)=>{"use strict";var xi=require("assert"),ck=Gf(),ac="cls@contexts",Z_="error@context";process.addAsyncListener||Vb();function zn(e){this.name=e,this.active=null,this._set=[],this.id=null}zn.prototype.set=function(e,t){if(!this.active)throw new Error("No context available. ns.run() or ns.bind() must be called first.");return this.active[e]=t,t};zn.prototype.get=function(e){if(!!this.active)return this.active[e]};zn.prototype.createContext=function(){return Object.create(this.active)};zn.prototype.run=function(e){var t=this.createContext();this.enter(t);try{return e(t),t}catch(r){throw r&&(r[Z_]=t),r}finally{this.exit(t)}};zn.prototype.runAndReturn=function(e){var t;return this.run(function(r){t=e(r)}),t};zn.prototype.bind=function(e,t){t||(this.active?t=this.active:t=this.createContext());var r=this;return function(){r.enter(t);try{return e.apply(this,arguments)}catch(n){throw n&&(n[Z_]=t),n}finally{r.exit(t)}}};zn.prototype.enter=function(e){xi.ok(e,"context must be provided for entering"),this._set.push(this.active),this.active=e};zn.prototype.exit=function(e){if(xi.ok(e,"context must be provided for exiting"),this.active===e){xi.ok(this._set.length,"can't remove top context"),this.active=this._set.pop();return}var t=this._set.lastIndexOf(e);xi.ok(t>=0,"context not currently entered; can't exit"),xi.ok(t,"can't remove top context"),this._set.splice(t,1)};zn.prototype.bindEmitter=function(e){xi.ok(e.on&&e.addListener&&e.emit,"can only bind real EEs");var t=this,r="context@"+this.name;function n(a){!a||(a[ac]||(a[ac]=Object.create(null)),a[ac][r]={namespace:t,context:t.active})}function i(a){if(!(a&&a[ac]))return a;var s=a,u=a[ac];return Object.keys(u).forEach(function(f){var d=u[f];s=d.namespace.bind(s,d.context)}),s}ck(e,n,i)};zn.prototype.fromException=function(e){return e[Z_]};function zb(e){return process.namespaces[e]}function lk(e){xi.ok(e,"namespace must be given a name!");var t=new zn(e);return t.id=process.addAsyncListener({create:function(){return t.active},before:function(r,n){n&&t.enter(n)},after:function(r,n){n&&t.exit(n)},error:function(r){r&&t.exit(r)}}),process.namespaces[e]=t,t}function Kb(e){var t=zb(e);xi.ok(t,"can't delete nonexistent namespace!"),xi.ok(t.id,"don't assign to process.namespaces directly!"),process.removeAsyncListener(t.id),process.namespaces[e]=null}function $b(){process.namespaces&&Object.keys(process.namespaces).forEach(function(e){Kb(e)}),process.namespaces=Object.create(null)}process.namespaces||$b();Xb.exports={getNamespace:zb,createNamespace:lk,destroyNamespace:Kb,reset:$b}});var Fa=_(ud=>{"use strict";Object.defineProperty(ud,"__esModule",{value:!0});ud.CorrelationContextManager=void 0;var Qb=Mr(),fk=bf(),Cs=Fu(),J_=bh(),Yb=Vh(),dk=function(){function e(){}return e.getCurrentContext=function(){if(!e.enabled)return null;var t=e.session.get(e.CONTEXT_NAME);return t===void 0?null:t},e.generateContextObject=function(t,r,n,i,a,s){return r=r||t,this.enabled?{operation:{name:n,id:t,parentId:r,traceparent:a,tracestate:s},customProperties:new pk(i)}:null},e.spanToContextObject=function(t,r,n){var i=new Cs;return i.traceId=t.traceId,i.spanId=t.spanId,i.traceFlag=Cs.formatOpenTelemetryTraceFlags(t.traceFlags)||Cs.DEFAULT_TRACE_FLAG,i.parentId=r,e.generateContextObject(i.traceId,i.parentId,n,null,i)},e.runWithContext=function(t,r){var n;return e.enabled?e.session.bind(r,(n={},n[e.CONTEXT_NAME]=t,n))():r()},e.wrapEmitter=function(t){e.enabled&&e.session.bindEmitter(t)},e.wrapCallback=function(t,r){var n;return e.enabled?e.session.bind(t,r?(n={},n[e.CONTEXT_NAME]=r,n):void 0):t},e.enable=function(t){if(!this.enabled){if(!this.isNodeVersionCompatible()){this.enabled=!1;return}e.hasEverEnabled||(this.forceClsHooked=t,this.hasEverEnabled=!0,typeof this.cls>"u"&&(e.forceClsHooked===!0||e.forceClsHooked===void 0&&e.shouldUseClsHooked()?this.cls=hb():this.cls=Wb()),e.session=this.cls.createNamespace("AI-CLS-Session"),fk.registerContextPreservation(function(r){return e.session.bind(r)})),this.enabled=!0}},e.startOperation=function(t,r){var n=t&&t.traceContext||null,i=t&&t.traceId?t:null,a=t&&t.headers;if(i){var s=new Cs("00-"+i.traceId+"-"+i.spanId+"-01"),u=new J_(i.traceState?i.traceState.serialize():null),f=e.generateContextObject(i.traceId,"|"+i.traceId+"."+i.spanId+".",typeof r=="string"?r:"",void 0,s,u);return f}if(n){var s=new Cs(n.traceparent),u=new J_(n.tracestate),d=typeof r=="object"?new Yb(r):null,f=e.generateContextObject(s.traceId,s.parentId,typeof r=="string"?r:d.getOperationName({}),d&&d.getCorrelationContextHeader()||void 0,s,u);return f}if(a){var s=new Cs(a.traceparent?a.traceparent.toString():null),u=new J_(a.tracestate?a.tracestate.toString():null),d=new Yb(t),f=e.generateContextObject(s.traceId,s.parentId,d.getOperationName({}),d.getCorrelationContextHeader(),s,u);return f}return Qb.warn("startOperation was called with invalid arguments",arguments),null},e.disable=function(){this.enabled=!1},e.reset=function(){e.hasEverEnabled&&(e.session=null,e.session=this.cls.createNamespace("AI-CLS-Session"))},e.isNodeVersionCompatible=function(){var t=process.versions.node.split(".");return parseInt(t[0])>3||parseInt(t[0])>2&&parseInt(t[1])>2},e.shouldUseClsHooked=function(){var t=process.versions.node.split(".");return parseInt(t[0])>8||parseInt(t[0])>=8&&parseInt(t[1])>=2},e.canUseClsHooked=function(){var t=process.versions.node.split("."),r=parseInt(t[0])>8||parseInt(t[0])>=8&&parseInt(t[1])>=0,n=parseInt(t[0])<8||parseInt(t[0])<=8&&parseInt(t[1])<2,i=parseInt(t[0])>4||parseInt(t[0])>=4&&parseInt(t[1])>=7;return!(r&&n)&&i},e.enabled=!1,e.hasEverEnabled=!1,e.forceClsHooked=void 0,e.CONTEXT_NAME="ApplicationInsights-Context",e}();ud.CorrelationContextManager=dk;var pk=function(){function e(t){this.props=[],this.addHeaderData(t)}return e.prototype.addHeaderData=function(t){var r=t?t.split(", "):[];this.props=r.map(function(n){var i=n.split("=");return{key:i[0],value:i[1]}}).concat(this.props)},e.prototype.serializeToHeader=function(){return this.props.map(function(t){return t.key+"="+t.value}).join(", ")},e.prototype.getProperty=function(t){for(var r=0;r<this.props.length;++r){var n=this.props[r];if(n.key===t)return n.value}},e.prototype.setProperty=function(t,r){if(e.bannedCharacters.test(t)||e.bannedCharacters.test(r)){Qb.warn("Correlation context property keys and values must not contain ',' or '='. setProperty was called with key: "+t+" and value: "+r);return}for(var n=0;n<this.props.length;++n){var i=this.props[n];if(i.key===t){i.value=r;return}}this.props.push({key:t,value:r})},e.bannedCharacters=/[,=]/,e}()});var Jb=_(Rs=>{"use strict";Object.defineProperty(Rs,"__esModule",{value:!0});Rs.dispose=Rs.enable=void 0;var Zb=nn(),eg=pr(),go=[],tg=function(e){var t=e.data.message;go.forEach(function(r){t instanceof Error?r.trackException({exception:t}):(t.lastIndexOf(`
`)==t.length-1&&(t=t.substring(0,t.length-1)),r.trackTrace({message:t,severity:e.data.stderr?Zb.SeverityLevel.Warning:Zb.SeverityLevel.Information}))})};function vk(e,t){e?(go.length===0&&eg.channel.subscribe("console",tg),go.push(t)):(go=go.filter(function(r){return r!=t}),go.length===0&&eg.channel.unsubscribe("console",tg))}Rs.enable=vk;function hk(){eg.channel.unsubscribe("console",tg),go=[]}Rs.dispose=hk});var eO=_(ws=>{"use strict";Object.defineProperty(ws,"__esModule",{value:!0});ws.dispose=ws.enable=void 0;var Ns=nn(),rg=pr(),mo=[],_k={10:Ns.SeverityLevel.Verbose,20:Ns.SeverityLevel.Verbose,30:Ns.SeverityLevel.Information,40:Ns.SeverityLevel.Warning,50:Ns.SeverityLevel.Error,60:Ns.SeverityLevel.Critical},ng=function(e){var t=e.data.result;mo.forEach(function(r){var n=_k[e.data.level];t instanceof Error?r.trackException({exception:t}):r.trackTrace({message:t,severity:n})})};function gk(e,t){e?(mo.length===0&&rg.channel.subscribe("bunyan",ng),mo.push(t)):(mo=mo.filter(function(r){return r!=t}),mo.length===0&&rg.channel.unsubscribe("bunyan",ng))}ws.enable=gk;function mk(){rg.channel.unsubscribe("bunyan",ng),mo=[]}ws.dispose=mk});var tO=_(Ds=>{"use strict";Object.defineProperty(Ds,"__esModule",{value:!0});Ds.dispose=Ds.enable=void 0;var Vr=nn(),ig=pr(),Eo=[],Ek={syslog:function(e){var t={emerg:Vr.SeverityLevel.Critical,alert:Vr.SeverityLevel.Critical,crit:Vr.SeverityLevel.Critical,error:Vr.SeverityLevel.Error,warning:Vr.SeverityLevel.Warning,notice:Vr.SeverityLevel.Information,info:Vr.SeverityLevel.Information,debug:Vr.SeverityLevel.Verbose};return t[e]===void 0?Vr.SeverityLevel.Information:t[e]},npm:function(e){var t={error:Vr.SeverityLevel.Error,warn:Vr.SeverityLevel.Warning,info:Vr.SeverityLevel.Information,verbose:Vr.SeverityLevel.Verbose,debug:Vr.SeverityLevel.Verbose,silly:Vr.SeverityLevel.Verbose};return t[e]===void 0?Vr.SeverityLevel.Information:t[e]},unknown:function(e){return Vr.SeverityLevel.Information}},ag=function(e){var t=e.data.message;Eo.forEach(function(r){if(t instanceof Error)r.trackException({exception:t,properties:e.data.meta});else{var n=Ek[e.data.levelKind](e.data.level);r.trackTrace({message:t,severity:n,properties:e.data.meta})}})};function yk(e,t){e?(Eo.length===0&&ig.channel.subscribe("winston",ag),Eo.push(t)):(Eo=Eo.filter(function(r){return r!=t}),Eo.length===0&&ig.channel.unsubscribe("winston",ag))}Ds.enable=yk;function Tk(){ig.channel.unsubscribe("winston",ag),Eo=[]}Ds.dispose=Tk});var nO=_((hz,rO)=>{"use strict";var Sk=bf(),Ak=function(){function e(t){if(e.INSTANCE)throw new Error("Console logging adapter tracking should be configured from the applicationInsights object");this._client=t,e.INSTANCE=this}return e.prototype.enable=function(t,r){Sk.IsInitialized&&(Jb().enable(t&&r,this._client),eO().enable(t,this._client),tO().enable(t,this._client))},e.prototype.isInitialized=function(){return this._isInitialized},e.prototype.dispose=function(){e.INSTANCE=null,this.enable(!1,!1)},e._methodNames=["debug","info","log","warn","error"],e}();rO.exports=Ak});var aO=_((_z,iO)=>{"use strict";var Ik=function(){function e(t){if(e.INSTANCE)throw new Error("Exception tracking should be configured from the applicationInsights object");e.INSTANCE=this,this._client=t;var r=process.versions.node.split(".");e._canUseUncaughtExceptionMonitor=parseInt(r[0])>13||parseInt(r[0])===13&&parseInt(r[1])>=7}return e.prototype.isInitialized=function(){return this._isInitialized},e.prototype.enable=function(t){var r=this;if(t){this._isInitialized=!0;var n=this;if(!this._exceptionListenerHandle){var i=function(a,s,u){u===void 0&&(u=new Error(e._FALLBACK_ERROR_MESSAGE)),r._client.trackException({exception:u}),r._client.flush({isAppCrashing:!0}),a&&s&&process.listeners(s).length===1&&(console.error(u),process.exit(1))};e._canUseUncaughtExceptionMonitor?(this._exceptionListenerHandle=i.bind(this,!1,void 0),process.on(e.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME,this._exceptionListenerHandle)):(this._exceptionListenerHandle=i.bind(this,!0,e.UNCAUGHT_EXCEPTION_HANDLER_NAME),this._rejectionListenerHandle=i.bind(this,!1,void 0),process.on(e.UNCAUGHT_EXCEPTION_HANDLER_NAME,this._exceptionListenerHandle),process.on(e.UNHANDLED_REJECTION_HANDLER_NAME,this._rejectionListenerHandle))}}else this._exceptionListenerHandle&&(e._canUseUncaughtExceptionMonitor?process.removeListener(e.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME,this._exceptionListenerHandle):(process.removeListener(e.UNCAUGHT_EXCEPTION_HANDLER_NAME,this._exceptionListenerHandle),process.removeListener(e.UNHANDLED_REJECTION_HANDLER_NAME,this._rejectionListenerHandle)),this._exceptionListenerHandle=void 0,this._rejectionListenerHandle=void 0,delete this._exceptionListenerHandle,delete this._rejectionListenerHandle)},e.prototype.dispose=function(){e.INSTANCE=null,this.enable(!1),this._isInitialized=!1},e.INSTANCE=null,e.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME="uncaughtExceptionMonitor",e.UNCAUGHT_EXCEPTION_HANDLER_NAME="uncaughtException",e.UNHANDLED_REJECTION_HANDLER_NAME="unhandledRejection",e._RETHROW_EXIT_MESSAGE="Application Insights Rethrow Exception Handler",e._FALLBACK_ERROR_MESSAGE="A promise was rejected without providing an error. Application Insights generated this error stack for you.",e._canUseUncaughtExceptionMonitor=!1,e}();iO.exports=Ik});var qi=_(Me=>{"use strict";var Kn;Object.defineProperty(Me,"__esModule",{value:!0});Me.HeartBeatMetricName=Me.DependencyTypeName=Me.SpanAttribute=Me.TelemetryTypeStringToQuickPulseDocumentType=Me.TelemetryTypeStringToQuickPulseType=Me.QuickPulseType=Me.QuickPulseDocumentType=Me.PerformanceToQuickPulseCounter=Me.MetricId=Me.PerformanceCounter=Me.QuickPulseCounter=Me.DEFAULT_LIVEMETRICS_HOST=Me.DEFAULT_LIVEMETRICS_ENDPOINT=Me.DEFAULT_BREEZE_ENDPOINT=void 0;Me.DEFAULT_BREEZE_ENDPOINT="https://dc.services.visualstudio.com";Me.DEFAULT_LIVEMETRICS_ENDPOINT="https://rt.services.visualstudio.com";Me.DEFAULT_LIVEMETRICS_HOST="rt.services.visualstudio.com";var Jr;(function(e){e.COMMITTED_BYTES="\\Memory\\Committed Bytes",e.PROCESSOR_TIME="\\Processor(_Total)\\% Processor Time",e.REQUEST_RATE="\\ApplicationInsights\\Requests/Sec",e.REQUEST_FAILURE_RATE="\\ApplicationInsights\\Requests Failed/Sec",e.REQUEST_DURATION="\\ApplicationInsights\\Request Duration",e.DEPENDENCY_RATE="\\ApplicationInsights\\Dependency Calls/Sec",e.DEPENDENCY_FAILURE_RATE="\\ApplicationInsights\\Dependency Calls Failed/Sec",e.DEPENDENCY_DURATION="\\ApplicationInsights\\Dependency Call Duration",e.EXCEPTION_RATE="\\ApplicationInsights\\Exceptions/Sec"})(Jr=Me.QuickPulseCounter||(Me.QuickPulseCounter={}));var cd;(function(e){e.PRIVATE_BYTES="\\Process(??APP_WIN32_PROC??)\\Private Bytes",e.AVAILABLE_BYTES="\\Memory\\Available Bytes",e.PROCESSOR_TIME="\\Processor(_Total)\\% Processor Time",e.PROCESS_TIME="\\Process(??APP_WIN32_PROC??)\\% Processor Time",e.REQUEST_RATE="\\ASP.NET Applications(??APP_W3SVC_PROC??)\\Requests/Sec",e.REQUEST_DURATION="\\ASP.NET Applications(??APP_W3SVC_PROC??)\\Request Execution Time"})(cd=Me.PerformanceCounter||(Me.PerformanceCounter={}));var bk;(function(e){e.REQUESTS_DURATION="requests/duration",e.DEPENDENCIES_DURATION="dependencies/duration",e.EXCEPTIONS_COUNT="exceptions/count",e.TRACES_COUNT="traces/count"})(bk=Me.MetricId||(Me.MetricId={}));Me.PerformanceToQuickPulseCounter=(Kn={},Kn[cd.PROCESSOR_TIME]=Jr.PROCESSOR_TIME,Kn[cd.REQUEST_RATE]=Jr.REQUEST_RATE,Kn[cd.REQUEST_DURATION]=Jr.REQUEST_DURATION,Kn[Jr.COMMITTED_BYTES]=Jr.COMMITTED_BYTES,Kn[Jr.REQUEST_FAILURE_RATE]=Jr.REQUEST_FAILURE_RATE,Kn[Jr.DEPENDENCY_RATE]=Jr.DEPENDENCY_RATE,Kn[Jr.DEPENDENCY_FAILURE_RATE]=Jr.DEPENDENCY_FAILURE_RATE,Kn[Jr.DEPENDENCY_DURATION]=Jr.DEPENDENCY_DURATION,Kn[Jr.EXCEPTION_RATE]=Jr.EXCEPTION_RATE,Kn);Me.QuickPulseDocumentType={Event:"Event",Exception:"Exception",Trace:"Trace",Metric:"Metric",Request:"Request",Dependency:"RemoteDependency",Availability:"Availability",PageView:"PageView"};Me.QuickPulseType={Event:"EventTelemetryDocument",Exception:"ExceptionTelemetryDocument",Trace:"TraceTelemetryDocument",Metric:"MetricTelemetryDocument",Request:"RequestTelemetryDocument",Dependency:"DependencyTelemetryDocument",Availability:"AvailabilityTelemetryDocument",PageView:"PageViewTelemetryDocument"};Me.TelemetryTypeStringToQuickPulseType={EventData:Me.QuickPulseType.Event,ExceptionData:Me.QuickPulseType.Exception,MessageData:Me.QuickPulseType.Trace,MetricData:Me.QuickPulseType.Metric,RequestData:Me.QuickPulseType.Request,RemoteDependencyData:Me.QuickPulseType.Dependency,AvailabilityData:Me.QuickPulseType.Availability,PageViewData:Me.QuickPulseType.PageView};Me.TelemetryTypeStringToQuickPulseDocumentType={EventData:Me.QuickPulseDocumentType.Event,ExceptionData:Me.QuickPulseDocumentType.Exception,MessageData:Me.QuickPulseDocumentType.Trace,MetricData:Me.QuickPulseDocumentType.Metric,RequestData:Me.QuickPulseDocumentType.Request,RemoteDependencyData:Me.QuickPulseDocumentType.Dependency,AvailabilityData:Me.QuickPulseDocumentType.Availability,PageViewData:Me.QuickPulseDocumentType.PageView};Me.SpanAttribute={HttpHost:"http.host",HttpMethod:"http.method",HttpPort:"http.port",HttpStatusCode:"http.status_code",HttpUrl:"http.url",HttpUserAgent:"http.user_agent",GrpcMethod:"grpc.method",GrpcService:"rpc.service"};Me.DependencyTypeName={Grpc:"GRPC",Http:"HTTP",InProc:"InProc"};Me.HeartBeatMetricName="HeartBeat"});var fd=_((mz,oO)=>{"use strict";var ld=require("os"),qn=qi(),Ok=function(){function e(t,r,n){r===void 0&&(r=6e4),n===void 0&&(n=!1),this._lastIntervalRequestExecutionTime=0,this._lastIntervalDependencyExecutionTime=0,e.INSTANCE||(e.INSTANCE=this),this._isInitialized=!1,this._client=t,this._collectionInterval=r,this._enableLiveMetricsCounters=n}return e.prototype.enable=function(t,r){var n=this;this._isEnabled=t,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),t?this._handle||(this._lastCpus=ld.cpus(),this._lastRequests={totalRequestCount:e._totalRequestCount,totalFailedRequestCount:e._totalFailedRequestCount,time:+new Date},this._lastDependencies={totalDependencyCount:e._totalDependencyCount,totalFailedDependencyCount:e._totalFailedDependencyCount,time:+new Date},this._lastExceptions={totalExceptionCount:e._totalExceptionCount,time:+new Date},typeof process.cpuUsage=="function"&&(this._lastAppCpuUsage=process.cpuUsage()),this._lastHrtime=process.hrtime(),this._collectionInterval=r||this._collectionInterval,this._handle=setInterval(function(){return n.trackPerformance()},this._collectionInterval),this._handle.unref()):this._handle&&(clearInterval(this._handle),this._handle=void 0)},e.countRequest=function(t,r){var n;if(!!e.isEnabled()){if(typeof t=="string")n=+new Date("1970-01-01T"+t+"Z");else if(typeof t=="number")n=t;else return;e._intervalRequestExecutionTime+=n,r===!1&&e._totalFailedRequestCount++,e._totalRequestCount++}},e.countException=function(){e._totalExceptionCount++},e.countDependency=function(t,r){var n;if(!!e.isEnabled()){if(typeof t=="string")n=+new Date("1970-01-01T"+t+"Z");else if(typeof t=="number")n=t;else return;e._intervalDependencyExecutionTime+=n,r===!1&&e._totalFailedDependencyCount++,e._totalDependencyCount++}},e.prototype.isInitialized=function(){return this._isInitialized},e.isEnabled=function(){return e.INSTANCE&&e.INSTANCE._isEnabled},e.prototype.trackPerformance=function(){this._trackCpu(),this._trackMemory(),this._trackNetwork(),this._trackDependencyRate(),this._trackExceptionRate()},e.prototype._trackCpu=function(){var t=ld.cpus();if(t&&t.length&&this._lastCpus&&t.length===this._lastCpus.length){for(var r=0,n=0,i=0,a=0,s=0,u=0;!!t&&u<t.length;u++){var f=t[u],d=this._lastCpus[u],h="% cpu("+u+") ",E=f.model,S=f.speed,C=f.times,q=d.times,se=C.user-q.user||0;r+=se;var Ce=C.sys-q.sys||0;n+=Ce;var Fe=C.nice-q.nice||0;i+=Fe;var et=C.idle-q.idle||0;a+=et;var bt=C.irq-q.irq||0;s+=bt}var me=void 0;if(typeof process.cpuUsage=="function"){var $t=process.cpuUsage(),Ot=process.hrtime(),Gt=$t.user-this._lastAppCpuUsage.user+($t.system-this._lastAppCpuUsage.system)||0;if(typeof this._lastHrtime<"u"&&this._lastHrtime.length===2){var Xt=(Ot[0]-this._lastHrtime[0])*1e6+(Ot[1]-this._lastHrtime[1])/1e3||0;me=100*Gt/(Xt*t.length)}this._lastAppCpuUsage=$t,this._lastHrtime=Ot}var Pt=r+n+i+a+s||1;this._client.trackMetric({name:qn.PerformanceCounter.PROCESSOR_TIME,value:(Pt-a)/Pt*100}),this._client.trackMetric({name:qn.PerformanceCounter.PROCESS_TIME,value:me||r/Pt*100})}this._lastCpus=t},e.prototype._trackMemory=function(){var t=ld.freemem(),r=process.memoryUsage().rss,n=ld.totalmem()-t;this._client.trackMetric({name:qn.PerformanceCounter.PRIVATE_BYTES,value:r}),this._client.trackMetric({name:qn.PerformanceCounter.AVAILABLE_BYTES,value:t}),this._enableLiveMetricsCounters&&this._client.trackMetric({name:qn.QuickPulseCounter.COMMITTED_BYTES,value:n})},e.prototype._trackNetwork=function(){var t=this._lastRequests,r={totalRequestCount:e._totalRequestCount,totalFailedRequestCount:e._totalFailedRequestCount,time:+new Date},n=r.totalRequestCount-t.totalRequestCount||0,i=r.totalFailedRequestCount-t.totalFailedRequestCount||0,a=r.time-t.time,s=a/1e3,u=(e._intervalRequestExecutionTime-this._lastIntervalRequestExecutionTime)/n||0;if(this._lastIntervalRequestExecutionTime=e._intervalRequestExecutionTime,a>0){var f=n/s,d=i/s;this._client.trackMetric({name:qn.PerformanceCounter.REQUEST_RATE,value:f}),(!this._enableLiveMetricsCounters||n>0)&&this._client.trackMetric({name:qn.PerformanceCounter.REQUEST_DURATION,value:u}),this._enableLiveMetricsCounters&&this._client.trackMetric({name:qn.QuickPulseCounter.REQUEST_FAILURE_RATE,value:d})}this._lastRequests=r},e.prototype._trackDependencyRate=function(){if(this._enableLiveMetricsCounters){var t=this._lastDependencies,r={totalDependencyCount:e._totalDependencyCount,totalFailedDependencyCount:e._totalFailedDependencyCount,time:+new Date},n=r.totalDependencyCount-t.totalDependencyCount||0,i=r.totalFailedDependencyCount-t.totalFailedDependencyCount||0,a=r.time-t.time,s=a/1e3,u=(e._intervalDependencyExecutionTime-this._lastIntervalDependencyExecutionTime)/n||0;if(this._lastIntervalDependencyExecutionTime=e._intervalDependencyExecutionTime,a>0){var f=n/s,d=i/s;this._client.trackMetric({name:qn.QuickPulseCounter.DEPENDENCY_RATE,value:f}),this._client.trackMetric({name:qn.QuickPulseCounter.DEPENDENCY_FAILURE_RATE,value:d}),(!this._enableLiveMetricsCounters||n>0)&&this._client.trackMetric({name:qn.QuickPulseCounter.DEPENDENCY_DURATION,value:u})}this._lastDependencies=r}},e.prototype._trackExceptionRate=function(){if(this._enableLiveMetricsCounters){var t=this._lastExceptions,r={totalExceptionCount:e._totalExceptionCount,time:+new Date},n=r.totalExceptionCount-t.totalExceptionCount||0,i=r.time-t.time,a=i/1e3;if(i>0){var s=n/a;this._client.trackMetric({name:qn.QuickPulseCounter.EXCEPTION_RATE,value:s})}this._lastExceptions=r}},e.prototype.dispose=function(){e.INSTANCE=null,this.enable(!1),this._isInitialized=!1},e._totalRequestCount=0,e._totalFailedRequestCount=0,e._totalDependencyCount=0,e._totalFailedDependencyCount=0,e._totalExceptionCount=0,e._intervalDependencyExecutionTime=0,e._intervalRequestExecutionTime=0,e}();oO.exports=Ok});var sO=_(dd=>{"use strict";Object.defineProperty(dd,"__esModule",{value:!0});dd.AggregatedMetricCounter=void 0;var Pk=function(){function e(t){this.dimensions=t,this.totalCount=0,this.lastTotalCount=0,this.intervalExecutionTime=0,this.lastTime=+new Date,this.lastIntervalExecutionTime=0}return e}();dd.AggregatedMetricCounter=Pk});var uO=_(pd=>{"use strict";Object.defineProperty(pd,"__esModule",{value:!0});pd.PreaggregatedMetricPropertyNames=void 0;pd.PreaggregatedMetricPropertyNames={cloudRoleInstance:"cloud/roleInstance",cloudRoleName:"cloud/roleName",operationSynthetic:"operation/synthetic",requestSuccess:"Request.Success",requestResultCode:"request/resultCode",dependencyType:"Dependency.Type",dependencyTarget:"dependency/target",dependencySuccess:"Dependency.Success",dependencyResultCode:"dependency/resultCode",traceSeverityLevel:"trace/severityLevel"}});var sg=_((og,cO)=>{"use strict";var hd=og&&og.__assign||function(){return hd=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},hd.apply(this,arguments)},vd=qi(),Ck=sO(),Rk=uO(),Nk=function(){function e(t,r){r===void 0&&(r=6e4),e.INSTANCE||(e.INSTANCE=this),this._isInitialized=!1,e._dependencyCountersCollection=[],e._requestCountersCollection=[],e._exceptionCountersCollection=[],e._traceCountersCollection=[],this._client=t,this._collectionInterval=r}return e.prototype.enable=function(t,r){var n=this;this._isEnabled=t,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),t?this._handle||(this._collectionInterval=r||this._collectionInterval,this._handle=setInterval(function(){return n.trackPreAggregatedMetrics()},this._collectionInterval),this._handle.unref()):this._handle&&(clearInterval(this._handle),this._handle=void 0)},e.countException=function(t){if(!!e.isEnabled()){var r=e._getAggregatedCounter(t,this._exceptionCountersCollection);r.totalCount++}},e.countTrace=function(t){if(!!e.isEnabled()){var r=e._getAggregatedCounter(t,this._traceCountersCollection);r.totalCount++}},e.countRequest=function(t,r){if(!!e.isEnabled()){var n,i=e._getAggregatedCounter(r,this._requestCountersCollection);if(typeof t=="string")n=+new Date("1970-01-01T"+t+"Z");else if(typeof t=="number")n=t;else return;i.intervalExecutionTime+=n,i.totalCount++}},e.countDependency=function(t,r){if(!!e.isEnabled()){var n=e._getAggregatedCounter(r,this._dependencyCountersCollection),i;if(typeof t=="string")i=+new Date("1970-01-01T"+t+"Z");else if(typeof t=="number")i=t;else return;n.intervalExecutionTime+=i,n.totalCount++}},e.prototype.isInitialized=function(){return this._isInitialized},e.isEnabled=function(){return e.INSTANCE&&e.INSTANCE._isEnabled},e.prototype.trackPreAggregatedMetrics=function(){this._trackRequestMetrics(),this._trackDependencyMetrics(),this._trackExceptionMetrics(),this._trackTraceMetrics()},e._getAggregatedCounter=function(t,r){for(var n=!1,i=0;i<r.length;i++){if(t===r[i].dimensions)return r[i];if(Object.keys(t).length===Object.keys(r[i].dimensions).length){for(var a in t)if(t[a]!=r[i].dimensions[a]){n=!0;break}if(!n)return r[i];n=!1}}var s=new Ck.AggregatedMetricCounter(t);return r.push(s),s},e.prototype._trackRequestMetrics=function(){for(var t=0;t<e._requestCountersCollection.length;t++){var r=e._requestCountersCollection[t];r.time=+new Date;var n=r.totalCount-r.lastTotalCount||0,i=r.time-r.lastTime,a=(r.intervalExecutionTime-r.lastIntervalExecutionTime)/n||0;r.lastIntervalExecutionTime=r.intervalExecutionTime,i>0&&n>0&&this._trackPreAggregatedMetric({name:"Server response time",dimensions:r.dimensions,value:a,count:n,aggregationInterval:i,metricType:vd.MetricId.REQUESTS_DURATION}),r.lastTotalCount=r.totalCount,r.lastTime=r.time}},e.prototype._trackDependencyMetrics=function(){for(var t=0;t<e._dependencyCountersCollection.length;t++){var r=e._dependencyCountersCollection[t];r.time=+new Date;var n=r.totalCount-r.lastTotalCount||0,i=r.time-r.lastTime,a=(r.intervalExecutionTime-r.lastIntervalExecutionTime)/n||0;r.lastIntervalExecutionTime=r.intervalExecutionTime,i>0&&n>0&&this._trackPreAggregatedMetric({name:"Dependency duration",dimensions:r.dimensions,value:a,count:n,aggregationInterval:i,metricType:vd.MetricId.DEPENDENCIES_DURATION}),r.lastTotalCount=r.totalCount,r.lastTime=r.time}},e.prototype._trackExceptionMetrics=function(){for(var t=0;t<e._exceptionCountersCollection.length;t++){var r=e._exceptionCountersCollection[t],n=r.totalCount-r.lastTotalCount||0,i=r.time-r.lastTime;this._trackPreAggregatedMetric({name:"Exceptions",dimensions:r.dimensions,value:n,count:n,aggregationInterval:i,metricType:vd.MetricId.EXCEPTIONS_COUNT}),r.lastTotalCount=r.totalCount,r.lastTime=r.time}},e.prototype._trackTraceMetrics=function(){for(var t=0;t<e._traceCountersCollection.length;t++){var r=e._traceCountersCollection[t],n=r.totalCount-r.lastTotalCount||0,i=r.time-r.lastTime;this._trackPreAggregatedMetric({name:"Traces",dimensions:r.dimensions,value:n,count:n,aggregationInterval:i,metricType:vd.MetricId.TRACES_COUNT}),r.lastTotalCount=r.totalCount,r.lastTime=r.time}},e.prototype._trackPreAggregatedMetric=function(t){var r={};for(var n in t.dimensions)r[Rk.PreaggregatedMetricPropertyNames[n]]=t.dimensions[n];r=hd(hd({},r),{"_MS.MetricId":t.metricType,"_MS.AggregationIntervalMs":String(t.aggregationInterval),"_MS.IsAutocollected":"True"});var i={name:t.name,value:t.value,count:t.count,properties:r,kind:"Aggregation"};this._client.trackMetric(i)},e.prototype.dispose=function(){e.INSTANCE=null,this.enable(!1),this._isInitialized=!1},e}();cO.exports=Nk});var oc=_((Tz,pO)=>{"use strict";var ji=require("os"),lO=require("fs"),fO=require("path"),wk=nn(),dO=Mr(),Dk=function(){function e(t){this.keys=new wk.ContextTagKeys,this.tags={},this._loadApplicationContext(t),this._loadDeviceContext(),this._loadInternalContext()}return e.prototype._loadApplicationContext=function(t){if(t=t||fO.resolve(__dirname,"../../../../package.json"),!e.appVersion[t]){e.appVersion[t]="unknown";try{var r=JSON.parse(lO.readFileSync(t,"utf8"));r&&typeof r.version=="string"&&(e.appVersion[t]=r.version)}catch(n){dO.info("unable to read app version: ",n)}}this.tags[this.keys.applicationVersion]=e.appVersion[t]},e.prototype._loadDeviceContext=function(){this.tags[this.keys.deviceId]="",this.tags[this.keys.cloudRoleInstance]=ji&&ji.hostname(),this.tags[this.keys.deviceOSVersion]=ji&&ji.type()+" "+ji.release(),this.tags[this.keys.cloudRole]=e.DefaultRoleName,this.tags["ai.device.osArchitecture"]=ji&&ji.arch(),this.tags["ai.device.osPlatform"]=ji&&ji.platform()},e.prototype._loadInternalContext=function(){var t=fO.resolve(__dirname,"../../package.json");if(!e.sdkVersion){e.sdkVersion="unknown";try{var r=JSON.parse(lO.readFileSync(t,"utf8"));r&&typeof r.version=="string"&&(e.sdkVersion=r.version)}catch(n){dO.info("unable to read app version: ",n)}}this.tags[this.keys.internalSdkVersion]="node:"+e.sdkVersion},e.DefaultRoleName="Web",e.appVersion={},e.sdkVersion=null,e}();pO.exports=Dk});var hO=_((cg,vO)=>{"use strict";var Mk=cg&&cg.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),$n=require("url"),ug=nn(),Lk=mn(),xk=fs(),qk=Hh(),jk=uo(),Fk=function(e){Mk(t,e);function t(r,n){var i=e.call(this)||this;return n&&n.method&&r&&(i.method=n.method,i.url=t._getUrlFromRequestOptions(r,n),i.startTime=+new Date),i}return t.prototype.onError=function(r){this._setStatus(void 0,r)},t.prototype.onResponse=function(r){this._setStatus(r.statusCode,void 0),this.correlationId=Lk.getCorrelationContextTarget(r,xk.requestContextTargetKey)},t.prototype.getDependencyTelemetry=function(r,n){var i=$n.parse(this.url);i.search=void 0,i.hash=void 0;var a=this.method.toUpperCase()+" "+i.pathname,s=ug.RemoteDependencyDataConstants.TYPE_HTTP,u=i.hostname;i.port&&(u+=":"+i.port),this.correlationId?(s=ug.RemoteDependencyDataConstants.TYPE_AI,this.correlationId!==jk.correlationIdPrefix&&(u+=" | "+this.correlationId)):s=ug.RemoteDependencyDataConstants.TYPE_HTTP;var f={id:n,name:a,data:this.url,duration:this.duration,success:this._isSuccess(),resultCode:this.statusCode?this.statusCode.toString():null,properties:this.properties||{},dependencyTypeName:s,target:u};if(r&&r.time?f.time=r.time:this.startTime&&(f.time=new Date(this.startTime)),r){for(var d in r)f[d]||(f[d]=r[d]);if(r.properties)for(var d in r.properties)f.properties[d]=r.properties[d]}return f},t._getUrlFromRequestOptions=function(r,n){if(typeof r=="string")if(r.indexOf("http://")===0||r.indexOf("https://")===0)r=$n.parse(r);else{var i=$n.parse(r);i.host==="443"?r=$n.parse("https://"+r):r=$n.parse("http://"+r)}else{if(r&&typeof $n.URL=="function"&&r instanceof $n.URL)return $n.format(r);var a=r;r={},a&&Object.keys(a).forEach(function(f){r[f]=a[f]})}if(r.path){var s=$n.parse(r.path);r.pathname=s.pathname,r.search=s.search}if(r.host&&r.port){var u=$n.parse("http://"+r.host);!u.port&&r.port&&(r.hostname=r.host,delete r.host)}return r.protocol=r.protocol||n.agent&&n.agent.protocol||n.protocol||void 0,r.hostname=r.hostname||"localhost",$n.format(r)},t}(qk);vO.exports=Fk});var _O=_(Ms=>{"use strict";var sc=Ms&&Ms.__assign||function(){return sc=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},sc.apply(this,arguments)};Object.defineProperty(Ms,"__esModule",{value:!0});Ms.spanToTelemetryContract=void 0;var kk=Vt(),vn=qi();function lg(e){var t=sc({},e);return Object.keys(vn.SpanAttribute).forEach(function(r){delete t[r]}),t}function Uk(e){var t="|"+e.spanContext().traceId+"."+e.spanContext().spanId+".",r=Math.round(e._duration[0]*1e3+e._duration[1]/1e6),n=e.attributes["peer.address"]?e.attributes["peer.address"].toString():"",i=e.attributes.component?e.attributes.component.toString():"",a=i.toUpperCase()===vn.DependencyTypeName.Http||!!e.attributes[vn.SpanAttribute.HttpUrl],s=i.toLowerCase()===vn.DependencyTypeName.Grpc;if(a){var u=e.attributes[vn.SpanAttribute.HttpMethod]||"GET",f=new URL(e.attributes[vn.SpanAttribute.HttpUrl].toString()),d=e.attributes[vn.SpanAttribute.HttpHost]||f.host,h=e.attributes[vn.SpanAttribute.HttpPort]||f.port||null,E=f.pathname||"/",S=u+" "+E,C=vn.DependencyTypeName.Http,q=h?(d+":"+h).toString():d.toString(),se=f.toString(),Ce=e.attributes[vn.SpanAttribute.HttpStatusCode]||e.status.code||0,Fe=Ce<400;return{id:t,name:S,dependencyTypeName:C,target:q,data:se,success:Fe,duration:r,url:se,resultCode:String(Ce),properties:lg(e.attributes)}}else if(s){var u=e.attributes[vn.SpanAttribute.GrpcMethod]||"rpc",et=e.attributes[vn.SpanAttribute.GrpcService],bt=et?u+" "+et:e.name;return{id:t,duration:r,name:bt,target:et.toString(),data:et.toString()||bt,url:et.toString()||bt,dependencyTypeName:vn.DependencyTypeName.Grpc,resultCode:String(e.status.code||0),success:e.status.code===0,properties:lg(e.attributes)}}else{var me=e.name,$t=e.links&&e.links.map(function(Ot){return{operation_Id:Ot.context.traceId,id:Ot.context.spanId}});return{id:t,duration:r,name:me,target:n,data:n||me,url:n||me,dependencyTypeName:e.kind===kk.SpanKind.INTERNAL?vn.DependencyTypeName.InProc:i||e.name,resultCode:String(e.status.code||0),success:e.status.code===0,properties:sc(sc({},lg(e.attributes)),{"_MS.links":$t||void 0})}}}Ms.spanToTelemetryContract=Uk});var EO=_(Ta=>{"use strict";Object.defineProperty(Ta,"__esModule",{value:!0});Ta.enable=Ta.subscriber=void 0;var fg=Vt(),gO=pr(),mO=Fu(),Hk=_O(),Bk=Ep(),Ls=[],Gk=function(e){var t=e.data,r=Hk.spanToTelemetryContract(t),n=t.spanContext(),i=new mO;i.traceId=n.traceId,i.spanId=n.spanId,i.traceFlag=mO.formatOpenTelemetryTraceFlags(n.traceFlags),i.parentId=t.parentSpanId?"|"+n.traceId+"."+t.parentSpanId+".":null,Bk.AsyncScopeManager.with(t,function(){Ls.forEach(function(a){t.kind===fg.SpanKind.SERVER?a.trackRequest(r):(t.kind===fg.SpanKind.CLIENT||t.kind===fg.SpanKind.INTERNAL)&&a.trackDependency(r)})})};Ta.subscriber=Gk;function Vk(e,t){e?(Ls.length===0&&gO.channel.subscribe("azure-coretracing",Ta.subscriber),Ls.push(t)):(Ls=Ls.filter(function(r){return r!=t}),Ls.length===0&&gO.channel.unsubscribe("azure-coretracing",Ta.subscriber))}Ta.enable=Vk});var TO=_(Sa=>{"use strict";Object.defineProperty(Sa,"__esModule",{value:!0});Sa.enable=Sa.subscriber=void 0;var yO=pr(),xs=[],zk=function(e){e.data.event.commandName!=="ismaster"&&xs.forEach(function(t){var r=e.data.startedData&&e.data.startedData.databaseName||"Unknown database";t.trackDependency({target:r,data:e.data.event.commandName,name:e.data.event.commandName,duration:e.data.event.duration,success:e.data.succeeded,resultCode:e.data.succeeded?"0":"1",time:e.data.startedData.time,dependencyTypeName:"mongodb"})})};Sa.subscriber=zk;function Kk(e,t){e?(xs.length===0&&yO.channel.subscribe("mongodb",Sa.subscriber),xs.push(t)):(xs=xs.filter(function(r){return r!=t}),xs.length===0&&yO.channel.unsubscribe("mongodb",Sa.subscriber))}Sa.enable=Kk});var AO=_(Aa=>{"use strict";Object.defineProperty(Aa,"__esModule",{value:!0});Aa.enable=Aa.subscriber=void 0;var SO=pr(),qs=[],$k=function(e){qs.forEach(function(t){var r=e.data.query||{},n=r.sql||"Unknown query",i=!e.data.err,a=r._connection||{},s=a.config||{},u=s.socketPath?s.socketPath:(s.host||"localhost")+":"+s.port;t.trackDependency({target:u,data:n,name:n,duration:e.data.duration,success:i,resultCode:i?"0":"1",time:e.data.time,dependencyTypeName:"mysql"})})};Aa.subscriber=$k;function Xk(e,t){e?(qs.length===0&&SO.channel.subscribe("mysql",Aa.subscriber),qs.push(t)):(qs=qs.filter(function(r){return r!=t}),qs.length===0&&SO.channel.unsubscribe("mysql",Aa.subscriber))}Aa.enable=Xk});var bO=_(Ia=>{"use strict";Object.defineProperty(Ia,"__esModule",{value:!0});Ia.enable=Ia.subscriber=void 0;var IO=pr(),js=[],Wk=function(e){js.forEach(function(t){e.data.commandObj.command!=="info"&&t.trackDependency({target:e.data.address,name:e.data.commandObj.command,data:e.data.commandObj.command,duration:e.data.duration,success:!e.data.err,resultCode:e.data.err?"1":"0",time:e.data.time,dependencyTypeName:"redis"})})};Ia.subscriber=Wk;function Yk(e,t){e?(js.length===0&&IO.channel.subscribe("redis",Ia.subscriber),js.push(t)):(js=js.filter(function(r){return r!=t}),js.length===0&&IO.channel.unsubscribe("redis",Ia.subscriber))}Ia.enable=Yk});var PO=_(ba=>{"use strict";Object.defineProperty(ba,"__esModule",{value:!0});ba.enable=ba.subscriber=void 0;var OO=pr(),Fs=[],Qk=function(e){Fs.forEach(function(t){var r=e.data.query,n=r.preparable&&r.preparable.text||r.plan||r.text||"unknown query",i=!e.data.error,a=e.data.database.host+":"+e.data.database.port;t.trackDependency({target:a,data:n,name:n,duration:e.data.duration,success:i,resultCode:i?"0":"1",time:e.data.time,dependencyTypeName:"postgres"})})};ba.subscriber=Qk;function Zk(e,t){e?(Fs.length===0&&OO.channel.subscribe("postgres",ba.subscriber),Fs.push(t)):(Fs=Fs.filter(function(r){return r!=t}),Fs.length===0&&OO.channel.unsubscribe("postgres",ba.subscriber))}ba.enable=Zk});var Hs=_((vg,wO)=>{"use strict";var _d=vg&&vg.__spreadArrays||function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),i=0,t=0;t<r;t++)for(var a=arguments[t],s=0,u=a.length;s<u;s++,i++)n[i]=a[s];return n},ks=require("http"),Us=require("https"),dg=Mr(),CO=mn(),Oa=fs(),Jk=hO(),RO=Fa(),NO=uo(),pg=Fu(),eU=bf(),tU=function(){function e(t){if(e.INSTANCE)throw new Error("Client request tracking should be configured from the applicationInsights object");e.INSTANCE=this,this._client=t}return e.prototype.enable=function(t){this._isEnabled=t,this._isEnabled&&!this._isInitialized&&this._initialize(),eU.IsInitialized&&(EO().enable(!0,this._client),TO().enable(t,this._client),AO().enable(t,this._client),bO().enable(t,this._client),PO().enable(t,this._client))},e.prototype.isInitialized=function(){return this._isInitialized},e.prototype._initialize=function(){var t=this;this._isInitialized=!0;var r=ks.request,n=Us.request,i=function(a,s){var u=!s[e.disableCollectionRequestOption]&&!a[e.alreadyAutoCollectedFlag];s.headers&&s.headers["user-agent"]&&s.headers["user-agent"].toString().indexOf("azsdk-js")!==-1&&(u=!1),a[e.alreadyAutoCollectedFlag]=!0,a&&s&&u&&(RO.CorrelationContextManager.wrapEmitter(a),e.trackRequest(t._client,{options:s,request:a}))};ks.request=function(a){for(var s=[],u=1;u<arguments.length;u++)s[u-1]=arguments[u];var f=r.call.apply(r,_d([ks,a],s));return i(f,a),f},Us.request=function(a){for(var s=[],u=1;u<arguments.length;u++)s[u-1]=arguments[u];var f=n.call.apply(n,_d([Us,a],s));return i(f,a),f},ks.get=function(a){for(var s,u=[],f=1;f<arguments.length;f++)u[f-1]=arguments[f];var d=(s=ks.request).call.apply(s,_d([ks,a],u));return d.end(),d},Us.get=function(a){for(var s,u=[],f=1;f<arguments.length;f++)u[f-1]=arguments[f];var d=(s=Us.request).call.apply(s,_d([Us,a],u));return d.end(),d}},e.trackRequest=function(t,r){if(!r.options||!r.request||!t){dg.info("AutoCollectHttpDependencies.trackRequest was called with invalid parameters: ",!r.options,!r.request,!t);return}var n=new Jk(r.options,r.request),i=RO.CorrelationContextManager.getCurrentContext(),a,s;if(i&&i.operation&&i.operation.traceparent&&pg.isValidTraceId(i.operation.traceparent.traceId))i.operation.traceparent.updateSpanId(),a=i.operation.traceparent.getBackCompatRequestId();else if(NO.w3cEnabled){var u=new pg;s=u.toString(),a=u.getBackCompatRequestId()}else a=i&&i.operation&&i.operation.parentId+e.requestNumber+++".";if(CO.canIncludeCorrelationHeader(t,n.getUrl())&&r.request.getHeader&&r.request.setHeader&&t.config&&t.config.correlationId){var f=r.request.getHeader(Oa.requestContextHeader);try{CO.safeIncludeCorrelationHeader(t,r.request,f)}catch(E){dg.warn("Request-Context header could not be set. Correlation of requests may be lost",E)}if(i&&i.operation)try{if(r.request.setHeader(Oa.requestIdHeader,a),t.config.ignoreLegacyHeaders||(r.request.setHeader(Oa.parentIdHeader,i.operation.id),r.request.setHeader(Oa.rootIdHeader,a)),s||i.operation.traceparent)r.request.setHeader(Oa.traceparentHeader,s||i.operation.traceparent.toString());else if(NO.w3cEnabled){var u=new pg().toString();r.request.setHeader(Oa.traceparentHeader,u)}if(i.operation.tracestate){var d=i.operation.tracestate.toString();d&&r.request.setHeader(Oa.traceStateHeader,d)}var h=i.customProperties.serializeToHeader();h&&r.request.setHeader(Oa.correlationContextHeader,h)}catch(E){dg.warn("Correlation headers could not be set. Correlation of requests may be lost.",E)}}r.request.on&&(r.request.on("response",function(E){n.onResponse(E);var S=n.getDependencyTelemetry(r,a);S.contextObjects=S.contextObjects||{},S.contextObjects["http.RequestOptions"]=r.options,S.contextObjects["http.ClientRequest"]=r.request,S.contextObjects["http.ClientResponse"]=E,t.trackDependency(S)}),r.request.on("error",function(E){n.onError(E);var S=n.getDependencyTelemetry(r,a);S.contextObjects=S.contextObjects||{},S.contextObjects["http.RequestOptions"]=r.options,S.contextObjects["http.ClientRequest"]=r.request,S.contextObjects.Error=E,t.trackDependency(S)}),r.request.on("abort",function(){n.onError(new Error);var E=n.getDependencyTelemetry(r,a);E.contextObjects=E.contextObjects||{},E.contextObjects["http.RequestOptions"]=r.options,E.contextObjects["http.ClientRequest"]=r.request,t.trackDependency(E)}))},e.prototype.dispose=function(){e.INSTANCE=null,this.enable(!1),this._isInitialized=!1},e.disableCollectionRequestOption="disableAppInsightsAutoCollection",e.requestNumber=1,e.alreadyAutoCollectedFlag="_appInsightsAutoCollected",e}();wO.exports=tU});var LO=_((Cz,MO)=>{"use strict";var rU=require("os"),DO=qi(),nU=mn(),iU=oc(),aU=Hs(),oU="http://169.254.169.254/metadata/instance/compute",sU="api-version=2017-12-01",uU="format=json",cU="ENETUNREACH",lU=function(){function e(t){this._collectionInterval=9e5,this._vmData={},this._azInst_vmId="",this._azInst_subscriptionId="",this._azInst_osType="",e.INSTANCE||(e.INSTANCE=this),this._isInitialized=!1,this._client=t}return e.prototype.enable=function(t,r){var n=this;this._isEnabled=t,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),t?this._handle||(this._handle=setInterval(function(){return n.trackHeartBeat(r,function(){})},this._collectionInterval),this._handle.unref()):this._handle&&(clearInterval(this._handle),this._handle=null)},e.prototype.isInitialized=function(){return this._isInitialized},e.isEnabled=function(){return e.INSTANCE&&e.INSTANCE._isEnabled},e.prototype.trackHeartBeat=function(t,r){var n=this,i=!1,a={},s=iU.sdkVersion;a.sdk=s,a.osType=rU.type(),process.env.WEBSITE_SITE_NAME?(a.appSrv_SiteName=process.env.WEBSITE_SITE_NAME||"",a.appSrv_wsStamp=process.env.WEBSITE_HOME_STAMPNAME||"",a.appSrv_wsHost=process.env.WEBSITE_HOSTNAME||""):process.env.FUNCTIONS_WORKER_RUNTIME?a.azfunction_appId=process.env.WEBSITE_HOSTNAME:t&&(this._isVM===void 0?(i=!0,this._getAzureComputeMetadata(t,function(){n._isVM&&Object.keys(n._vmData).length>0&&(a.azInst_vmId=n._vmData.vmId||"",a.azInst_subscriptionId=n._vmData.subscriptionId||"",a.azInst_osType=n._vmData.osType||"",n._azInst_vmId=n._vmData.vmId||"",n._azInst_subscriptionId=n._vmData.subscriptionId||"",n._azInst_osType=n._vmData.osType||""),n._client.trackMetric({name:DO.HeartBeatMetricName,value:0,properties:a}),r()})):this._isVM&&(a.azInst_vmId=this._azInst_vmId,a.azInst_subscriptionId=this._azInst_subscriptionId,a.azInst_osType=this._azInst_osType)),i||(this._client.trackMetric({name:DO.HeartBeatMetricName,value:0,properties:a}),r())},e.prototype.dispose=function(){e.INSTANCE=null,this.enable(!1),this._isInitialized=!1},e.prototype._getAzureComputeMetadata=function(t,r){var n,i=this,a=oU+"?"+sU+"&"+uU,s=(n={method:"GET"},n[aU.disableCollectionRequestOption]=!0,n.headers={Metadata:"True"},n),u=nU.makeRequest(t,a,s,function(f){if(f.statusCode===200){i._isVM=!0;var d="";f.on("data",function(h){d+=h}),f.on("end",function(){i._vmData=i._isJSON(d)?JSON.parse(d):{},r()})}else r()});u&&(u.on("error",function(f){f&&f.message&&f.message.indexOf(cU)>-1&&(i._isVM=!1),r()}),u.end())},e.prototype._isJSON=function(t){try{return JSON.parse(t)&&!!t}catch{return!1}},e}();MO.exports=lU});var _g=_((Rz,kO)=>{"use strict";var xO=require("http"),qO=require("https"),jO=Mr(),FO=mn(),fU=fs(),hg=Vh(),Fi=Fa(),dU=fd(),pU=function(){function e(t){if(e.INSTANCE)throw new Error("Server request tracking should be configured from the applicationInsights object");e.INSTANCE=this,this._client=t}return e.prototype.enable=function(t){this._isEnabled=t,(this._isAutoCorrelating||this._isEnabled||dU.isEnabled())&&!this._isInitialized&&(this.useAutoCorrelation(this._isAutoCorrelating),this._initialize())},e.prototype.useAutoCorrelation=function(t,r){t&&!this._isAutoCorrelating?Fi.CorrelationContextManager.enable(r):!t&&this._isAutoCorrelating&&Fi.CorrelationContextManager.disable(),this._isAutoCorrelating=t},e.prototype.isInitialized=function(){return this._isInitialized},e.prototype.isAutoCorrelating=function(){return this._isAutoCorrelating},e.prototype._generateCorrelationContext=function(t){if(!!this._isAutoCorrelating)return Fi.CorrelationContextManager.generateContextObject(t.getOperationId(this._client.context.tags),t.getRequestId(),t.getOperationName(this._client.context.tags),t.getCorrelationContextHeader(),t.getTraceparent(),t.getTracestate())},e.prototype._initialize=function(){var t=this;this._isInitialized=!0;var r=function(s){if(!!s){if(typeof s!="function")throw new Error("onRequest handler must be a function");return function(u,f){Fi.CorrelationContextManager.wrapEmitter(u),Fi.CorrelationContextManager.wrapEmitter(f);var d=u&&!u[e.alreadyAutoCollectedFlag];if(u&&d){var h=new hg(u),E=t._generateCorrelationContext(h);Fi.CorrelationContextManager.runWithContext(E,function(){t._isEnabled&&(u[e.alreadyAutoCollectedFlag]=!0,e.trackRequest(t._client,{request:u,response:f},h)),typeof s=="function"&&s(u,f)})}else typeof s=="function"&&s(u,f)}}},n=function(s){var u=s.addListener.bind(s);s.addListener=function(f,d){switch(f){case"request":case"checkContinue":return u(f,r(d));default:return u(f,d)}},s.on=s.addListener},i=xO.createServer;xO.createServer=function(s,u){if(u&&typeof u=="function"){var f=i(s,r(u));return n(f),f}else{var f=i(r(s));return n(f),f}};var a=qO.createServer;qO.createServer=function(s,u){var f=a(s,r(u));return n(f),f}},e.trackRequestSync=function(t,r){if(!r.request||!r.response||!t){jO.info("AutoCollectHttpRequests.trackRequestSync was called with invalid parameters: ",!r.request,!r.response,!t);return}e.addResponseCorrelationIdHeader(t,r.response);var n=Fi.CorrelationContextManager.getCurrentContext(),i=new hg(r.request,n&&n.operation.parentId);n&&(n.operation.id=i.getOperationId(t.context.tags)||n.operation.id,n.operation.name=i.getOperationName(t.context.tags)||n.operation.name,n.operation.parentId=i.getRequestId()||n.operation.parentId,n.customProperties.addHeaderData(i.getCorrelationContextHeader())),e.endRequest(t,i,r,r.duration,r.error)},e.trackRequest=function(t,r,n){if(!r.request||!r.response||!t){jO.info("AutoCollectHttpRequests.trackRequest was called with invalid parameters: ",!r.request,!r.response,!t);return}var i=Fi.CorrelationContextManager.getCurrentContext(),a=n||new hg(r.request,i&&i.operation.parentId);FO.canIncludeCorrelationHeader(t,a.getUrl())&&e.addResponseCorrelationIdHeader(t,r.response),i&&!n&&(i.operation.id=a.getOperationId(t.context.tags)||i.operation.id,i.operation.name=a.getOperationName(t.context.tags)||i.operation.name,i.operation.parentId=a.getOperationParentId(t.context.tags)||i.operation.parentId,i.customProperties.addHeaderData(a.getCorrelationContextHeader())),r.response.once&&r.response.once("finish",function(){e.endRequest(t,a,r,null,null)}),r.request.on&&r.request.on("error",function(s){e.endRequest(t,a,r,null,s)}),r.request.on&&r.request.on("aborted",function(){var s="The request has been aborted and the network socket has closed.";e.endRequest(t,a,r,null,s)})},e.addResponseCorrelationIdHeader=function(t,r){if(t.config&&t.config.correlationId&&r.getHeader&&r.setHeader&&!r.headersSent){var n=r.getHeader(fU.requestContextHeader);FO.safeIncludeCorrelationHeader(t,r,n)}},e.endRequest=function(t,r,n,i,a){a?r.onError(a,i):r.onResponse(n.response,i);var s=r.getRequestTelemetry(n);if(s.tagOverrides=r.getRequestTags(t.context.tags),n.tagOverrides)for(var u in n.tagOverrides)s.tagOverrides[u]=n.tagOverrides[u];var f=r.getLegacyRootId();f&&(s.properties.ai_legacyRootId=f),s.contextObjects=s.contextObjects||{},s.contextObjects["http.ServerRequest"]=n.request,s.contextObjects["http.ServerResponse"]=n.response,t.trackRequest(s)},e.prototype.dispose=function(){e.INSTANCE=null,this.enable(!1),this._isInitialized=!1,Fi.CorrelationContextManager.disable(),this._isAutoCorrelating=!1},e.alreadyAutoCollectedFlag="_appInsightsAutoCollected",e}();kO.exports=pU});var BO=_((mg,HO)=>{"use strict";var jn=mg&&mg.__assign||function(){return jn=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},jn.apply(this,arguments)},gg=require("os"),yo=nn(),UO=qi(),vU=mn(),hU=Mr(),_U=vU.w3cTraceId(),gU=function(){function e(){}return e.createQuickPulseEnvelope=function(t,r,n,i){var a=gg&&typeof gg.hostname=="function"&&gg.hostname()||"Unknown",s=i.tags&&i.keys&&i.keys.cloudRoleInstance&&i.tags[i.keys.cloudRoleInstance]||a,u=i.tags&&i.keys&&i.keys.cloudRole&&i.tags[i.keys.cloudRole]||null,f={Documents:r.length>0?r:null,InstrumentationKey:n.instrumentationKey||"",Metrics:t.length>0?t:null,InvariantVersion:1,Timestamp:"/Date("+Date.now()+")/",Version:i.tags[i.keys.internalSdkVersion],StreamId:_U,MachineName:a,Instance:s,RoleName:u};return f},e.createQuickPulseMetric=function(t){var r;return r={Name:t.name,Value:t.value,Weight:t.count||1},r},e.telemetryEnvelopeToQuickPulseDocument=function(t){switch(t.data.baseType){case yo.TelemetryTypeString.Event:return e.createQuickPulseEventDocument(t);case yo.TelemetryTypeString.Exception:return e.createQuickPulseExceptionDocument(t);case yo.TelemetryTypeString.Trace:return e.createQuickPulseTraceDocument(t);case yo.TelemetryTypeString.Dependency:return e.createQuickPulseDependencyDocument(t);case yo.TelemetryTypeString.Request:return e.createQuickPulseRequestDocument(t)}return null},e.createQuickPulseEventDocument=function(t){var r=e.createQuickPulseDocument(t),n=t.data.baseData.name,i=jn(jn({},r),{Name:n});return i},e.createQuickPulseTraceDocument=function(t){var r=e.createQuickPulseDocument(t),n=t.data.baseData.severityLevel||0,i=jn(jn({},r),{Message:t.data.baseData.message,SeverityLevel:yo.SeverityLevel[n]});return i},e.createQuickPulseExceptionDocument=function(t){var r=e.createQuickPulseDocument(t),n=t.data.baseData.exceptions,i="",a="",s="";n&&n.length>0&&(n[0].parsedStack&&n[0].parsedStack.length>0?n[0].parsedStack.forEach(function(f){i+=f.assembly+`
`}):n[0].stack&&n[0].stack.length>0&&(i=n[0].stack),a=n[0].message,s=n[0].typeName);var u=jn(jn({},r),{Exception:i,ExceptionMessage:a,ExceptionType:s});return u},e.createQuickPulseRequestDocument=function(t){var r=e.createQuickPulseDocument(t),n=t.data.baseData,i=jn(jn({},r),{Name:n.name,Success:n.success,Duration:n.duration,ResponseCode:n.responseCode,OperationName:n.name});return i},e.createQuickPulseDependencyDocument=function(t){var r=e.createQuickPulseDocument(t),n=t.data.baseData,i=jn(jn({},r),{Name:n.name,Target:n.target,Success:n.success,Duration:n.duration,ResultCode:n.resultCode,CommandName:n.data,OperationName:r.OperationId,DependencyTypeName:n.type});return i},e.createQuickPulseDocument=function(t){var r,n,i,a;t.data.baseType?(n=UO.TelemetryTypeStringToQuickPulseType[t.data.baseType],r=UO.TelemetryTypeStringToQuickPulseDocumentType[t.data.baseType]):hU.warn("Document type invalid; not sending live metric document",t.data.baseType),i=t.tags[e.keys.operationId],a=e.aggregateProperties(t);var s={DocumentType:r,__type:n,OperationId:i,Version:"1.0",Properties:a};return s},e.aggregateProperties=function(t){var r=[],n=t.data.baseData.measurements||{};for(var i in n)if(n.hasOwnProperty(i)){var a=n[i],s={key:i,value:a};r.push(s)}var u=t.data.baseData.properties||{};for(var i in u)if(u.hasOwnProperty(i)){var a=u[i],s={key:i,value:a};r.push(s)}return r},e.keys=new yo.ContextTagKeys,e}();HO.exports=gU});var VO=_((Nz,GO)=>{"use strict";var mU=function(){return(Date.now()+621355968e5)*1e4};GO.exports={getTransmissionTime:mU}});var WO=_((uc,XO)=>{"use strict";var zO=uc&&uc.__awaiter||function(e,t,r,n){function i(a){return a instanceof r?a:new r(function(s){s(a)})}return new(r||(r=Promise))(function(a,s){function u(h){try{d(n.next(h))}catch(E){s(E)}}function f(h){try{d(n.throw(h))}catch(E){s(E)}}function d(h){h.done?a(h.value):i(h.value).then(u,f)}d((n=n.apply(e,t||[])).next())})},KO=uc&&uc.__generator||function(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,s;return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(d){return function(h){return f([d,h])}}function f(d){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=d[0]&2?i.return:d[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,d[1])).done)return a;switch(i=0,a&&(d=[d[0]&2,a.value]),d[0]){case 0:case 1:a=d;break;case 4:return r.label++,{value:d[1],done:!1};case 5:r.label++,i=d[1],d=[0];continue;case 7:d=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(d[0]===6||d[0]===2)){r=0;continue}if(d[0]===3&&(!a||d[1]>a[0]&&d[1]<a[3])){r.label=d[1];break}if(d[0]===6&&r.label<a[1]){r.label=a[1],a=d;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(d);break}a[2]&&r.ops.pop(),r.trys.pop();continue}d=t.call(e,r)}catch(h){d=[6,h],i=0}finally{n=a=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},EU=require("https"),yU=Hs(),$O=Mr(),TU=VO(),SU=mn(),Fn={method:"POST",time:"x-ms-qps-transmission-time",pollingIntervalHint:"x-ms-qps-service-polling-interval-hint",endpointRedirect:"x-ms-qps-service-endpoint-redirect",instanceName:"x-ms-qps-instance-name",streamId:"x-ms-qps-stream-id",machineName:"x-ms-qps-machine-name",roleName:"x-ms-qps-role-name",streamid:"x-ms-qps-stream-id",invariantVersion:"x-ms-qps-invariant-version",subscribed:"x-ms-qps-subscribed"},AU=function(){function e(t){this._config=t,this._consecutiveErrors=0}return e.prototype.ping=function(t,r,n){var i=[{name:Fn.streamId,value:t.StreamId},{name:Fn.machineName,value:t.MachineName},{name:Fn.roleName,value:t.RoleName},{name:Fn.instanceName,value:t.Instance},{name:Fn.invariantVersion,value:t.InvariantVersion.toString()}];this._submitData(t,r,n,"ping",i)},e.prototype.post=function(t,r,n){return zO(this,void 0,void 0,function(){return KO(this,function(i){switch(i.label){case 0:return[4,this._submitData([t],r,n,"post")];case 1:return i.sent(),[2]}})})},e.prototype._submitData=function(t,r,n,i,a){return zO(this,void 0,void 0,function(){var s,u,f,d,h,E=this;return KO(this,function(S){return s=JSON.stringify(t),u=(d={},d[yU.disableCollectionRequestOption]=!0,d.host=r&&r.length>0?r:this._config.quickPulseHost,d.method=Fn.method,d.path="/QuickPulseService.svc/"+i+"?ikey="+this._config.instrumentationKey,d.headers=(h={Expect:"100-continue"},h[Fn.time]=TU.getTransmissionTime(),h["Content-Type"]="application/json",h["Content-Length"]=Buffer.byteLength(s),h),d),a&&a.length>0&&a.forEach(function(C){return u.headers[C.name]=C.value}),this._config.httpsAgent?u.agent=this._config.httpsAgent:u.agent=SU.tlsRestrictedAgent,f=EU.request(u,function(C){if(C.statusCode==200){var q=C.headers[Fn.subscribed]==="true",se=C.headers[Fn.endpointRedirect]?C.headers[Fn.endpointRedirect].toString():null,Ce=C.headers[Fn.pollingIntervalHint]?parseInt(C.headers[Fn.pollingIntervalHint].toString()):null;E._consecutiveErrors=0,n(q,C,se,Ce)}else E._onError("StatusCode:"+C.statusCode+" StatusMessage:"+C.statusMessage),n()}),f.on("error",function(C){E._onError(C),n()}),f.write(s),f.end(),[2]})})},e.prototype._onError=function(t){this._consecutiveErrors++;var r="Transient error connecting to the Live Metrics endpoint. This packet will not appear in your Live Metrics Stream. Error:";this._consecutiveErrors%e.MAX_QPS_FAILURES_BEFORE_WARN===0?(r="Live Metrics endpoint could not be reached "+this._consecutiveErrors+" consecutive times. Most recent error:",$O.warn(e.TAG,r,t)):$O.info(e.TAG,r,t)},e.TAG="QuickPulseSender",e.MAX_QPS_FAILURES_BEFORE_WARN=25,e}();XO.exports=AU});var eP=_((cc,JO)=>{"use strict";var YO=cc&&cc.__awaiter||function(e,t,r,n){function i(a){return a instanceof r?a:new r(function(s){s(a)})}return new(r||(r=Promise))(function(a,s){function u(h){try{d(n.next(h))}catch(E){s(E)}}function f(h){try{d(n.throw(h))}catch(E){s(E)}}function d(h){h.done?a(h.value):i(h.value).then(u,f)}d((n=n.apply(e,t||[])).next())})},QO=cc&&cc.__generator||function(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,s;return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(d){return function(h){return f([d,h])}}function f(d){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=d[0]&2?i.return:d[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,d[1])).done)return a;switch(i=0,a&&(d=[d[0]&2,a.value]),d[0]){case 0:case 1:a=d;break;case 4:return r.label++,{value:d[1],done:!1};case 5:r.label++,i=d[1],d=[0];continue;case 7:d=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(d[0]===6||d[0]===2)){r=0;continue}if(d[0]===3&&(!a||d[1]>a[0]&&d[1]<a[3])){r.label=d[1];break}if(d[0]===6&&r.label<a[1]){r.label=a[1],a=d;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(d);break}a[2]&&r.ops.pop(),r.trys.pop();continue}d=t.call(e,r)}catch(h){d=[6,h],i=0}finally{n=a=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},ZO=Mr(),Eg=BO(),IU=WO(),bU=qi(),OU=oc(),PU=function(){function e(t,r){this._isCollectingData=!1,this._lastSuccessTime=Date.now(),this._lastSendSucceeded=!0,this._metrics={},this._documents=[],this._collectors=[],this._redirectedHost=null,this._pollingIntervalHint=-1,this.config=t,this.context=r||new OU,this._sender=new IU(this.config),this._isEnabled=!1}return e.prototype.addCollector=function(t){this._collectors.push(t)},e.prototype.trackMetric=function(t){this._addMetric(t)},e.prototype.addDocument=function(t){var r=Eg.telemetryEnvelopeToQuickPulseDocument(t);r&&this._documents.push(r)},e.prototype.enable=function(t){t&&!this._isEnabled?(this._isEnabled=!0,this._goQuickPulse()):!t&&this._isEnabled&&(this._isEnabled=!1,clearTimeout(this._handle),this._handle=void 0)},e.prototype.enableCollectors=function(t){this._collectors.forEach(function(r){r.enable(t)})},e.prototype._addMetric=function(t){var r=t.value,n=t.count||1,i=bU.PerformanceToQuickPulseCounter[t.name];i&&(this._metrics[i]?(this._metrics[i].Value=(this._metrics[i].Value*this._metrics[i].Weight+r*n)/(this._metrics[i].Weight+n),this._metrics[i].Weight+=n):(this._metrics[i]=Eg.createQuickPulseMetric(t),this._metrics[i].Name=i,this._metrics[i].Weight=1))},e.prototype._resetQuickPulseBuffer=function(){delete this._metrics,this._metrics={},this._documents.length=0},e.prototype._goQuickPulse=function(){return YO(this,void 0,void 0,function(){var t,r,n,i,a=this;return QO(this,function(s){switch(s.label){case 0:return t=Object.keys(this._metrics).map(function(u){return a._metrics[u]}),r=Eg.createQuickPulseEnvelope(t,this._documents.slice(),this.config,this.context),this._resetQuickPulseBuffer(),this._isCollectingData?[4,this._post(r)]:[3,2];case 1:return s.sent(),[3,3];case 2:this._ping(r),s.label=3;case 3:return n=this._pollingIntervalHint>0?this._pollingIntervalHint:e.PING_INTERVAL,i=this._isCollectingData?e.POST_INTERVAL:n,this._isCollectingData&&Date.now()-this._lastSuccessTime>=e.MAX_POST_WAIT_TIME&&!this._lastSendSucceeded?(this._isCollectingData=!1,i=e.FALLBACK_INTERVAL):!this._isCollectingData&&Date.now()-this._lastSuccessTime>=e.MAX_PING_WAIT_TIME&&!this._lastSendSucceeded&&(i=e.FALLBACK_INTERVAL),this._lastSendSucceeded=null,this._handle=setTimeout(this._goQuickPulse.bind(this),i),this._handle.unref(),[2]}})})},e.prototype._ping=function(t){this._sender.ping(t,this._redirectedHost,this._quickPulseDone.bind(this))},e.prototype._post=function(t){return YO(this,void 0,void 0,function(){return QO(this,function(r){switch(r.label){case 0:return[4,this._sender.post(t,this._redirectedHost,this._quickPulseDone.bind(this))];case 1:return r.sent(),[2]}})})},e.prototype._quickPulseDone=function(t,r,n,i){t!=null?(this._isCollectingData!==t&&(ZO.info("Live Metrics sending data",t),this.enableCollectors(t)),this._isCollectingData=t,n&&n.length>0&&(this._redirectedHost=n,ZO.info("Redirecting endpoint to: ",n)),i&&i>0&&(this._pollingIntervalHint=i),r&&r.statusCode<300&&r.statusCode>=200?(this._lastSuccessTime=Date.now(),this._lastSendSucceeded=!0):this._lastSendSucceeded=!1):this._lastSendSucceeded=!1},e.MAX_POST_WAIT_TIME=2e4,e.MAX_PING_WAIT_TIME=6e4,e.FALLBACK_INTERVAL=6e4,e.PING_INTERVAL=5e3,e.POST_INTERVAL=1e3,e}();JO.exports=PU});var nP=_((wz,rP)=>{"use strict";var tP=qi(),CU=function(){function e(){}return e.parse=function(t){if(!t)return{};var r=t.split(e._FIELDS_SEPARATOR),n=r.reduce(function(a,s){var u=s.split(e._FIELD_KEY_VALUE_SEPARATOR);if(u.length===2){var f=u[0].toLowerCase(),d=u[1];a[f]=d}return a},{});if(Object.keys(n).length>0){if(n.endpointsuffix){var i=n.location?n.location+".":"";n.ingestionendpoint=n.ingestionendpoint||"https://"+i+"dc."+n.endpointsuffix,n.liveendpoint=n.liveendpoint||"https://"+i+"live."+n.endpointsuffix}n.ingestionendpoint=n.ingestionendpoint||tP.DEFAULT_BREEZE_ENDPOINT,n.liveendpoint=n.liveendpoint||tP.DEFAULT_LIVEMETRICS_ENDPOINT}return n},e._FIELDS_SEPARATOR=";",e._FIELD_KEY_VALUE_SEPARATOR="=",e}();rP.exports=CU});var Tg=_((Mz,oP)=>{"use strict";var yg=uo(),iP=nP(),Dz=Mr(),aP=qi(),RU=require("url"),NU=function(){function e(t){var r=this;this.endpointBase=aP.DEFAULT_BREEZE_ENDPOINT;var n=process.env[e.ENV_connectionString],i=iP.parse(t),a=iP.parse(n),s=!i.instrumentationkey&&Object.keys(i).length>0?null:t;this.instrumentationKey=i.instrumentationkey||s||a.instrumentationkey||e._getInstrumentationKey(),e._validateInstrumentationKey(this.instrumentationKey),this.endpointUrl=(i.ingestionendpoint||a.ingestionendpoint||this.endpointBase)+"/v2.1/track",this.maxBatchSize=250,this.maxBatchIntervalMs=15e3,this.disableAppInsights=!1,this.samplingPercentage=100,this.correlationIdRetryIntervalMs=30*1e3,this.correlationHeaderExcludedDomains=["*.core.windows.net","*.core.chinacloudapi.cn","*.core.cloudapi.de","*.core.usgovcloudapi.net","*.core.microsoft.scloud","*.core.eaglex.ic.gov"],this.setCorrelationId=function(u){return r.correlationId=u},this.proxyHttpUrl=process.env[e.ENV_http_proxy]||void 0,this.proxyHttpsUrl=process.env[e.ENV_https_proxy]||void 0,this.httpAgent=void 0,this.httpsAgent=void 0,this.profileQueryEndpoint=i.ingestionendpoint||a.ingestionendpoint||process.env[e.ENV_profileQueryEndpoint]||this.endpointBase,this._quickPulseHost=i.liveendpoint||a.liveendpoint||process.env[e.ENV_quickPulseHost]||aP.DEFAULT_LIVEMETRICS_HOST,this._quickPulseHost.match(/^https?:\/\//)&&(this._quickPulseHost=RU.parse(this._quickPulseHost).host)}return Object.defineProperty(e.prototype,"profileQueryEndpoint",{get:function(){return this._profileQueryEndpoint},set:function(t){yg.cancelCorrelationIdQuery(this,this.setCorrelationId),this._profileQueryEndpoint=t,this.correlationId=yg.correlationIdPrefix,yg.queryCorrelationId(this,this.setCorrelationId)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"quickPulseHost",{get:function(){return this._quickPulseHost},set:function(t){this._quickPulseHost=t},enumerable:!1,configurable:!0}),e._getInstrumentationKey=function(){var t=process.env[e.ENV_iKey]||process.env[e.ENV_azurePrefix+e.ENV_iKey]||process.env[e.legacy_ENV_iKey]||process.env[e.ENV_azurePrefix+e.legacy_ENV_iKey];if(!t||t=="")throw new Error("Instrumentation key not found, pass the key in the config to this method or set the key in the environment variable APPINSIGHTS_INSTRUMENTATIONKEY before starting the server");return t},e._validateInstrumentationKey=function(t){var r="^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$",n=new RegExp(r);return n.test(t)},e.ENV_azurePrefix="APPSETTING_",e.ENV_iKey="APPINSIGHTS_INSTRUMENTATIONKEY",e.legacy_ENV_iKey="APPINSIGHTS_INSTRUMENTATION_KEY",e.ENV_profileQueryEndpoint="APPINSIGHTS_PROFILE_QUERY_ENDPOINT",e.ENV_quickPulseHost="APPINSIGHTS_QUICKPULSE_HOST",e.ENV_connectionString="APPLICATIONINSIGHTS_CONNECTION_STRING",e.ENV_nativeMetricsDisablers="APPLICATION_INSIGHTS_DISABLE_EXTENDED_METRIC",e.ENV_nativeMetricsDisableAll="APPLICATION_INSIGHTS_DISABLE_ALL_EXTENDED_METRICS",e.ENV_http_proxy="http_proxy",e.ENV_https_proxy="https_proxy",e}();oP.exports=NU});var uP=_(Bs=>{"use strict";var gd=Bs&&Bs.__assign||function(){return gd=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},gd.apply(this,arguments)};Object.defineProperty(Bs,"__esModule",{value:!0});Bs.AutoCollectNativePerformance=void 0;var sP=Tg(),lc=oc(),wU=Mr(),DU=function(){function e(t){this._disabledMetrics={},e.INSTANCE&&e.INSTANCE.dispose(),e.INSTANCE=this,this._client=t}return e.isNodeVersionCompatible=function(){var t=process.versions.node.split(".");return parseInt(t[0])>=6},e.prototype.enable=function(t,r,n){var i=this;if(r===void 0&&(r={}),n===void 0&&(n=6e4),!!e.isNodeVersionCompatible()){if(e._metricsAvailable==null&&t&&!this._isInitialized)try{var a=require("applicationinsights-native-metrics");e._emitter=new a,e._metricsAvailable=!0,wU.info("Native metrics module successfully loaded!")}catch{e._metricsAvailable=!1;return}this._isEnabled=t,this._disabledMetrics=r,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),this._isEnabled&&e._emitter?(e._emitter.enable(!0,n),this._handle||(this._handle=setInterval(function(){return i._trackNativeMetrics()},n),this._handle.unref())):e._emitter&&(e._emitter.enable(!1),this._handle&&(clearInterval(this._handle),this._handle=void 0))}},e.prototype.dispose=function(){this.enable(!1)},e.parseEnabled=function(t){var r=process.env[sP.ENV_nativeMetricsDisableAll],n=process.env[sP.ENV_nativeMetricsDisablers];if(r)return{isEnabled:!1,disabledMetrics:{}};if(n){var i=n.split(","),a={};if(i.length>0)for(var s=0,u=i;s<u.length;s++){var f=u[s];a[f]=!0}return typeof t=="object"?{isEnabled:!0,disabledMetrics:gd(gd({},t),a)}:{isEnabled:t,disabledMetrics:a}}return typeof t=="boolean"?{isEnabled:t,disabledMetrics:{}}:{isEnabled:!0,disabledMetrics:t}},e.prototype._trackNativeMetrics=function(){var t=!0;typeof this._isEnabled!="object"&&(t=this._isEnabled),t&&(this._trackGarbageCollection(),this._trackEventLoop(),this._trackHeapUsage())},e.prototype._trackGarbageCollection=function(){var t;if(!this._disabledMetrics.gc){var r=e._emitter.getGCData();for(var n in r){var i=r[n].metrics,a=n+" Garbage Collection Duration",s=Math.sqrt(i.sumSquares/i.count-Math.pow(i.total/i.count,2))||0;this._client.trackMetric({name:a,value:i.total,count:i.count,max:i.max,min:i.min,stdDev:s,tagOverrides:(t={},t[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+lc.sdkVersion,t)})}}},e.prototype._trackEventLoop=function(){var t;if(!this._disabledMetrics.loop){var r=e._emitter.getLoopData(),n=r.loopUsage;if(n.count!=0){var i="Event Loop CPU Time",a=Math.sqrt(n.sumSquares/n.count-Math.pow(n.total/n.count,2))||0;this._client.trackMetric({name:i,value:n.total,count:n.count,min:n.min,max:n.max,stdDev:a,tagOverrides:(t={},t[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+lc.sdkVersion,t)})}}},e.prototype._trackHeapUsage=function(){var t,r,n;if(!this._disabledMetrics.heap){var i=process.memoryUsage(),a=i.heapUsed,s=i.heapTotal,u=i.rss;this._client.trackMetric({name:"Memory Usage (Heap)",value:a,count:1,tagOverrides:(t={},t[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+lc.sdkVersion,t)}),this._client.trackMetric({name:"Memory Total (Heap)",value:s,count:1,tagOverrides:(r={},r[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+lc.sdkVersion,r)}),this._client.trackMetric({name:"Memory Usage (Non-Heap)",value:u-s,count:1,tagOverrides:(n={},n[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+lc.sdkVersion,n)})}},e}();Bs.AutoCollectNativePerformance=DU});var lP=_((xz,cP)=>{"use strict";var MU=Mr(),LU=function(){function e(t,r,n,i){this._buffer=[],this._lastSend=0,this._isDisabled=t,this._getBatchSize=r,this._getBatchIntervalMs=n,this._sender=i}return e.prototype.setUseDiskRetryCaching=function(t,r,n){this._sender.setDiskRetryMode(t,r,n)},e.prototype.send=function(t){var r=this;if(!this._isDisabled()){if(!t){MU.warn("Cannot send null/undefined telemetry");return}if(this._buffer.push(t),this._buffer.length>=this._getBatchSize()){this.triggerSend(!1);return}!this._timeoutHandle&&this._buffer.length>0&&(this._timeoutHandle=setTimeout(function(){r._timeoutHandle=null,r.triggerSend(!1)},this._getBatchIntervalMs()))}},e.prototype.triggerSend=function(t,r){var n=this._buffer.length<1;n||(t?(this._sender.saveOnCrash(this._buffer),typeof r=="function"&&r("data saved on crash")):this._sender.send(this._buffer,r)),this._lastSend=+new Date,this._buffer=[],clearTimeout(this._timeoutHandle),this._timeoutHandle=null,n&&typeof r=="function"&&r("no data to send")},e}();cP.exports=LU});var fP=_(md=>{"use strict";Object.defineProperty(md,"__esModule",{value:!0});md.azureRoleEnvironmentTelemetryProcessor=void 0;function xU(e,t){process.env.WEBSITE_SITE_NAME&&(e.tags[t.keys.cloudRole]=process.env.WEBSITE_SITE_NAME)}md.azureRoleEnvironmentTelemetryProcessor=xU});var vP=_(Gs=>{"use strict";Object.defineProperty(Gs,"__esModule",{value:!0});Gs.getSamplingHashCode=Gs.samplingTelemetryProcessor=void 0;var dP=nn();function qU(e,t){var r=e.sampleRate,n=!1;return r==null||r>=100||e.data&&dP.TelemetryType.Metric===dP.baseTypeToTelemetryType(e.data.baseType)?!0:(t.correlationContext&&t.correlationContext.operation?n=pP(t.correlationContext.operation.id)<r:n=Math.random()*100<r,n)}Gs.samplingTelemetryProcessor=qU;function pP(e){var t=-2147483648,r=2147483647,n=5381;if(!e)return 0;for(;e.length<8;)e=e+e;for(var i=0;i<e.length;i++)n=((n<<5)+n|0)+e.charCodeAt(i)|0;return n=n<=t?r:Math.abs(n),n/r*100}Gs.getSamplingHashCode=pP});var hP=_(Ed=>{"use strict";Object.defineProperty(Ed,"__esModule",{value:!0});Ed.performanceMetricsTelemetryProcessor=void 0;var Sg=fd(),Ag=nn();function jU(e,t){switch(t&&t.addDocument(e),e.data.baseType){case Ag.TelemetryTypeString.Exception:Sg.countException();break;case Ag.TelemetryTypeString.Request:var r=e.data.baseData;Sg.countRequest(r.duration,r.success);break;case Ag.TelemetryTypeString.Dependency:var n=e.data.baseData;Sg.countDependency(n.duration,n.success);break}return!0}Ed.performanceMetricsTelemetryProcessor=jU});var _P=_(Vs=>{"use strict";var li=Vs&&Vs.__assign||function(){return li=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},li.apply(this,arguments)};Object.defineProperty(Vs,"__esModule",{value:!0});Vs.preAggregatedMetricsTelemetryProcessor=void 0;var FU=nn(),fc=sg(),yd=nn();function kU(e,t){if(fc.isEnabled())switch(e.data.baseType){case yd.TelemetryTypeString.Exception:var r=e.data.baseData;r.properties=li(li({},r.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Exceptions', Ver:'1.1')"});var n={cloudRoleInstance:e.tags[t.keys.cloudRoleInstance],cloudRoleName:e.tags[t.keys.cloudRole]};fc.countException(n);break;case yd.TelemetryTypeString.Trace:var i=e.data.baseData;i.properties=li(li({},i.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Traces', Ver:'1.1')"});var a={cloudRoleInstance:e.tags[t.keys.cloudRoleInstance],cloudRoleName:e.tags[t.keys.cloudRole],traceSeverityLevel:FU.SeverityLevel[i.severity]};fc.countTrace(a);break;case yd.TelemetryTypeString.Request:var s=e.data.baseData;s.properties=li(li({},s.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Requests', Ver:'1.1')"});var u={cloudRoleInstance:e.tags[t.keys.cloudRoleInstance],cloudRoleName:e.tags[t.keys.cloudRole],operationSynthetic:e.tags[t.keys.operationSyntheticSource],requestSuccess:s.success,requestResultCode:s.responseCode};fc.countRequest(s.duration,u);break;case yd.TelemetryTypeString.Dependency:var f=e.data.baseData;f.properties=li(li({},f.properties),{"_MS.ProcessedByMetricExtractors":"(Name:'Dependencies', Ver:'1.1')"});var d={cloudRoleInstance:e.tags[t.keys.cloudRoleInstance],cloudRoleName:e.tags[t.keys.cloudRole],operationSynthetic:e.tags[t.keys.operationSyntheticSource],dependencySuccess:f.success,dependencyType:f.type,dependencyTarget:f.target,dependencyResultCode:f.resultCode};fc.countDependency(f.duration,d);break}return!0}Vs.preAggregatedMetricsTelemetryProcessor=kU});var gP=_(fi=>{"use strict";var UU=fi&&fi.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),Td=fi&&fi.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&UU(t,e,r)};Object.defineProperty(fi,"__esModule",{value:!0});Td(fP(),fi);Td(vP(),fi);Td(hP(),fi);Td(_P(),fi)});var yP=_((dc,EP)=>{"use strict";var HU=dc&&dc.__awaiter||function(e,t,r,n){function i(a){return a instanceof r?a:new r(function(s){s(a)})}return new(r||(r=Promise))(function(a,s){function u(h){try{d(n.next(h))}catch(E){s(E)}}function f(h){try{d(n.throw(h))}catch(E){s(E)}}function d(h){h.done?a(h.value):i(h.value).then(u,f)}d((n=n.apply(e,t||[])).next())})},BU=dc&&dc.__generator||function(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,s;return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(d){return function(h){return f([d,h])}}function f(d){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=d[0]&2?i.return:d[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,d[1])).done)return a;switch(i=0,a&&(d=[d[0]&2,a.value]),d[0]){case 0:case 1:a=d;break;case 4:return r.label++,{value:d[1],done:!1};case 5:r.label++,i=d[1],d=[0];continue;case 7:d=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(d[0]===6||d[0]===2)){r=0;continue}if(d[0]===3&&(!a||d[1]>a[0]&&d[1]<a[3])){r.label=d[1];break}if(d[0]===6&&r.label<a[1]){r.label=a[1],a=d;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(d);break}a[2]&&r.ops.pop(),r.trys.pop();continue}d=t.call(e,r)}catch(h){d=[6,h],i=0}finally{n=a=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},xr=require("fs"),mP=require("os"),ki=require("path"),GU=require("zlib"),zs=require("child_process"),qr=Mr(),VU=Hs(),Sd=mn(),zU=function(){function e(t,r,n){if(this._redirectedHost=null,this._config=t,this._onSuccess=r,this._onError=n,this._enableDiskRetryMode=!1,this._resendInterval=e.WAIT_BETWEEN_RESEND,this._maxBytesOnDisk=e.MAX_BYTES_ON_DISK,this._numConsecutiveFailures=0,this._numConsecutiveRedirects=0,this._resendTimer=null,this._fileCleanupTimer=null,this._tempDir=ki.join(mP.tmpdir(),e.TEMPDIR_PREFIX+this._config.instrumentationKey),!e.OS_PROVIDES_FILE_PROTECTION)if(e.USE_ICACLS){try{e.OS_PROVIDES_FILE_PROTECTION=xr.existsSync(e.ICACLS_PATH)}catch{}e.OS_PROVIDES_FILE_PROTECTION||qr.warn(e.TAG,"Could not find ICACLS in expected location! This is necessary to use disk retry mode on Windows.")}else e.OS_PROVIDES_FILE_PROTECTION=!0}return e.prototype.setDiskRetryMode=function(t,r,n){var i=this;this._enableDiskRetryMode=e.OS_PROVIDES_FILE_PROTECTION&&t,typeof r=="number"&&r>=0&&(this._resendInterval=Math.floor(r)),typeof n=="number"&&n>=0&&(this._maxBytesOnDisk=Math.floor(n)),t&&!e.OS_PROVIDES_FILE_PROTECTION&&(this._enableDiskRetryMode=!1,qr.warn(e.TAG,"Ignoring request to enable disk retry mode. Sufficient file protection capabilities were not detected.")),this._enableDiskRetryMode?this._fileCleanupTimer||(this._fileCleanupTimer=setTimeout(function(){i._fileCleanupTask()},e.CLEANUP_TIMEOUT),this._fileCleanupTimer.unref()):this._fileCleanupTimer&&clearTimeout(this._fileCleanupTimer)},e.prototype.send=function(t,r){return HU(this,void 0,void 0,function(){var n,i,a,s,u=this;return BU(this,function(f){return t&&(n=this._redirectedHost||this._config.endpointUrl,i={method:"POST",withCredentials:!1,headers:{"Content-Type":"application/x-json-stream"}},a="",t.forEach(function(d){var h=u._stringify(d);typeof h=="string"&&(a+=h+`
`)}),a.length>0&&(a=a.substring(0,a.length-1)),s=Buffer.from?Buffer.from(a):new Buffer(a),GU.gzip(s,function(d,h){var E=h;d?(qr.warn(d),E=s,i.headers["Content-Length"]=s.length.toString()):(i.headers["Content-Encoding"]="gzip",i.headers["Content-Length"]=h.length.toString()),qr.info(e.TAG,i),i[VU.disableCollectionRequestOption]=!0;var S=function(q){q.setEncoding("utf-8");var se="";q.on("data",function(Ce){se+=Ce}),q.on("end",function(){if(u._numConsecutiveFailures=0,u._enableDiskRetryMode){if(q.statusCode===200)u._resendTimer||(u._resendTimer=setTimeout(function(){u._resendTimer=null,u._sendFirstFileOnDisk()},u._resendInterval),u._resendTimer.unref());else if(u._isRetriable(q.statusCode))try{var Ce=JSON.parse(se),Fe=[];Ce.errors.forEach(function(bt){u._isRetriable(bt.statusCode)&&Fe.push(t[bt.index])}),Fe.length>0&&u._storeToDisk(Fe)}catch{u._storeToDisk(t)}}if(q.statusCode===307||q.statusCode===308)if(u._numConsecutiveRedirects++,u._numConsecutiveRedirects<10){var et=q.headers.location?q.headers.location.toString():null;et&&(u._redirectedHost=et,u.send(t,r))}else typeof r=="function"&&r("Error sending telemetry because of circular redirects.");else u._numConsecutiveRedirects=0,typeof r=="function"&&r(se),qr.info(e.TAG,se),typeof u._onSuccess=="function"&&u._onSuccess(se)})},C=Sd.makeRequest(u._config,n,i,S);C.on("error",function(q){if(u._numConsecutiveFailures++,!u._enableDiskRetryMode||u._numConsecutiveFailures>0&&u._numConsecutiveFailures%e.MAX_CONNECTION_FAILURES_BEFORE_WARN===0){var se="Ingestion endpoint could not be reached. This batch of telemetry items has been lost. Use Disk Retry Caching to enable resending of failed telemetry. Error:";u._enableDiskRetryMode&&(se="Ingestion endpoint could not be reached "+u._numConsecutiveFailures+" consecutive times. There may be resulting telemetry loss. Most recent error:"),qr.warn(e.TAG,se,Sd.dumpObj(q))}else{var se="Transient failure to reach ingestion endpoint. This batch of telemetry items will be retried. Error:";qr.info(e.TAG,se,Sd.dumpObj(q))}u._onErrorHelper(q),typeof r=="function"&&(q&&r(Sd.dumpObj(q)),r("Error sending telemetry")),u._enableDiskRetryMode&&u._storeToDisk(t)}),C.write(E),C.end()})),[2]})})},e.prototype.saveOnCrash=function(t){this._enableDiskRetryMode&&this._storeToDiskSync(this._stringify(t))},e.prototype._isRetriable=function(t){return t===206||t===408||t===429||t===439||t===500||t===503},e.prototype._runICACLS=function(t,r){var n=zs.spawn(e.ICACLS_PATH,t,{windowsHide:!0});n.on("error",function(i){return r(i)}),n.on("close",function(i,a){return r(i===0?null:new Error("Setting ACL restrictions did not succeed (ICACLS returned code "+i+")"))})},e.prototype._runICACLSSync=function(t){if(zs.spawnSync){var r=zs.spawnSync(e.ICACLS_PATH,t,{windowsHide:!0});if(r.error)throw r.error;if(r.status!==0)throw new Error("Setting ACL restrictions did not succeed (ICACLS returned code "+r.status+")")}else throw new Error("Could not synchronously call ICACLS under current version of Node.js")},e.prototype._getACLIdentity=function(t){if(e.ACL_IDENTITY)return t(null,e.ACL_IDENTITY);var r=zs.spawn(e.POWERSHELL_PATH,["-Command","[System.Security.Principal.WindowsIdentity]::GetCurrent().Name"],{windowsHide:!0,stdio:["ignore","pipe","pipe"]}),n="";r.stdout.on("data",function(i){return n+=i}),r.on("error",function(i){return t(i,null)}),r.on("close",function(i,a){return e.ACL_IDENTITY=n&&n.trim(),t(i===0?null:new Error("Getting ACL identity did not succeed (PS returned code "+i+")"),e.ACL_IDENTITY)})},e.prototype._getACLIdentitySync=function(){if(e.ACL_IDENTITY)return e.ACL_IDENTITY;if(zs.spawnSync){var t=zs.spawnSync(e.POWERSHELL_PATH,["-Command","[System.Security.Principal.WindowsIdentity]::GetCurrent().Name"],{windowsHide:!0,stdio:["ignore","pipe","pipe"]});if(t.error)throw t.error;if(t.status!==0)throw new Error("Getting ACL identity did not succeed (PS returned code "+t.status+")");return e.ACL_IDENTITY=t.stdout&&t.stdout.toString().trim(),e.ACL_IDENTITY}else throw new Error("Could not synchronously get ACL identity under current version of Node.js")},e.prototype._getACLArguments=function(t,r){return[t,"/grant","*S-1-5-32-544:(OI)(CI)F","/grant",r+":(OI)(CI)F","/inheritance:r"]},e.prototype._applyACLRules=function(t,r){var n=this;if(!e.USE_ICACLS)return r(null);if(e.ACLED_DIRECTORIES[t]===void 0)e.ACLED_DIRECTORIES[t]=!1,this._getACLIdentity(function(i,a){if(i)return e.ACLED_DIRECTORIES[t]=!1,r(i);n._runICACLS(n._getACLArguments(t,a),function(s){return e.ACLED_DIRECTORIES[t]=!s,r(s)})});else return r(e.ACLED_DIRECTORIES[t]?null:new Error("Setting ACL restrictions did not succeed (cached result)"))},e.prototype._applyACLRulesSync=function(t){if(e.USE_ICACLS){if(e.ACLED_DIRECTORIES[t]===void 0){this._runICACLSSync(this._getACLArguments(t,this._getACLIdentitySync())),e.ACLED_DIRECTORIES[t]=!0;return}else if(!e.ACLED_DIRECTORIES[t])throw new Error("Setting ACL restrictions did not succeed (cached result)")}},e.prototype._confirmDirExists=function(t,r){var n=this;xr.lstat(t,function(i,a){i&&i.code==="ENOENT"?xr.mkdir(t,function(s){s&&s.code!=="EEXIST"?r(s):n._applyACLRules(t,r)}):!i&&a.isDirectory()?n._applyACLRules(t,r):r(i||new Error("Path existed but was not a directory"))})},e.prototype._getShallowDirectorySize=function(t,r){xr.readdir(t,function(n,i){if(n)return r(n,-1);var a=null,s=0,u=0;if(i.length===0){r(null,0);return}for(var f=0;f<i.length;f++)xr.stat(ki.join(t,i[f]),function(d,h){u++,d?a=d:h.isFile()&&(s+=h.size),u===i.length&&(a?r(a,-1):r(a,s))})})},e.prototype._getShallowDirectorySizeSync=function(t){for(var r=xr.readdirSync(t),n=0,i=0;i<r.length;i++)n+=xr.statSync(ki.join(t,r[i])).size;return n},e.prototype._storeToDisk=function(t){var r=this;qr.info(e.TAG,"Checking existence of data storage directory: "+this._tempDir),this._confirmDirExists(this._tempDir,function(n){if(n){qr.warn(e.TAG,"Error while checking/creating directory: "+(n&&n.message)),r._onErrorHelper(n);return}r._getShallowDirectorySize(r._tempDir,function(i,a){if(i||a<0){qr.warn(e.TAG,"Error while checking directory size: "+(i&&i.message)),r._onErrorHelper(i);return}else if(a>r._maxBytesOnDisk){qr.warn(e.TAG,"Not saving data due to max size limit being met. Directory size in bytes is: "+a);return}var s=new Date().getTime()+".ai.json",u=ki.join(r._tempDir,s);qr.info(e.TAG,"saving data to disk at: "+u),xr.writeFile(u,r._stringify(t),{mode:384},function(f){return r._onErrorHelper(f)})})})},e.prototype._storeToDiskSync=function(t){try{qr.info(e.TAG,"Checking existence of data storage directory: "+this._tempDir),xr.existsSync(this._tempDir)||xr.mkdirSync(this._tempDir),this._applyACLRulesSync(this._tempDir);var r=this._getShallowDirectorySizeSync(this._tempDir);if(r>this._maxBytesOnDisk){qr.info(e.TAG,"Not saving data due to max size limit being met. Directory size in bytes is: "+r);return}var n=new Date().getTime()+".ai.json",i=ki.join(this._tempDir,n);qr.info(e.TAG,"saving data before crash to disk at: "+i),xr.writeFileSync(i,t,{mode:384})}catch(a){qr.warn(e.TAG,"Error while saving data to disk: "+(a&&a.message)),this._onErrorHelper(a)}},e.prototype._sendFirstFileOnDisk=function(){var t=this;xr.exists(this._tempDir,function(r){r&&xr.readdir(t._tempDir,function(n,i){if(n)t._onErrorHelper(n);else if(i=i.filter(function(u){return ki.basename(u).indexOf(".ai.json")>-1}),i.length>0){var a=i[0],s=ki.join(t._tempDir,a);xr.readFile(s,function(u,f){u?t._onErrorHelper(u):xr.unlink(s,function(d){if(d)t._onErrorHelper(d);else try{var h=JSON.parse(f.toString());t.send(h)}catch(E){qr.warn("Failed to read persisted file",E)}})})}})})},e.prototype._onErrorHelper=function(t){typeof this._onError=="function"&&this._onError(t)},e.prototype._stringify=function(t){try{return JSON.stringify(t)}catch(r){qr.warn("Failed to serialize payload",r,t)}},e.prototype._fileCleanupTask=function(){var t=this;xr.exists(this._tempDir,function(r){r&&xr.readdir(t._tempDir,function(n,i){n?t._onErrorHelper(n):(i=i.filter(function(a){return ki.basename(a).indexOf(".ai.json")>-1}),i.length>0&&i.forEach(function(a){var s=new Date(parseInt(a.split(".ai.json")[0])),u=new Date(+new Date-e.FILE_RETEMPTION_PERIOD)>s;if(u){var f=ki.join(t._tempDir,a);xr.unlink(f,function(d){d&&t._onErrorHelper(d)})}}))})})},e.TAG="Sender",e.ICACLS_PATH=process.env.systemdrive+"/windows/system32/icacls.exe",e.POWERSHELL_PATH=process.env.systemdrive+"/windows/system32/windowspowershell/v1.0/powershell.exe",e.ACLED_DIRECTORIES={},e.ACL_IDENTITY=null,e.WAIT_BETWEEN_RESEND=60*1e3,e.MAX_BYTES_ON_DISK=50*1024*1024,e.MAX_CONNECTION_FAILURES_BEFORE_WARN=5,e.CLEANUP_TIMEOUT=60*60*1e3,e.FILE_RETEMPTION_PERIOD=7*24*60*60*1e3,e.TEMPDIR_PREFIX="appInsights-node",e.OS_PROVIDES_FILE_PROTECTION=!1,e.USE_ICACLS=mP.type()==="Windows_NT",e}();EP.exports=zU});var AP=_((Hz,SP)=>{"use strict";var xe=nn(),kn=mn(),KU=Fa(),$U=function(){function e(){}return e.createEnvelope=function(t,r,n,i,a){var s=null;switch(r){case xe.TelemetryType.Trace:s=e.createTraceData(t);break;case xe.TelemetryType.Dependency:s=e.createDependencyData(t);break;case xe.TelemetryType.Event:s=e.createEventData(t);break;case xe.TelemetryType.Exception:s=e.createExceptionData(t);break;case xe.TelemetryType.Request:s=e.createRequestData(t);break;case xe.TelemetryType.Metric:s=e.createMetricData(t);break;case xe.TelemetryType.Availability:s=e.createAvailabilityData(t);break;case xe.TelemetryType.PageView:s=e.createPageViewData(t);break}if(n&&xe.domainSupportsProperties(s.baseData)){if(s&&s.baseData)if(!s.baseData.properties)s.baseData.properties=n;else for(var u in n)s.baseData.properties[u]||(s.baseData.properties[u]=n[u]);s.baseData.properties=kn.validateStringMap(s.baseData.properties)}var f=a&&a.instrumentationKey||"",d=new xe.Envelope;return d.data=s,d.iKey=f,d.name="Microsoft.ApplicationInsights."+f.replace(/-/g,"")+"."+s.baseType.substr(0,s.baseType.length-4),d.tags=this.getTags(i,t.tagOverrides),d.time=new Date().toISOString(),d.ver=1,d.sampleRate=a?a.samplingPercentage:100,r===xe.TelemetryType.Metric&&(d.sampleRate=100),d},e.createTraceData=function(t){var r=new xe.MessageData;r.message=t.message,r.properties=t.properties,isNaN(t.severity)?r.severityLevel=xe.SeverityLevel.Information:r.severityLevel=t.severity;var n=new xe.Data;return n.baseType=xe.telemetryTypeToBaseType(xe.TelemetryType.Trace),n.baseData=r,n},e.createDependencyData=function(t){var r=new xe.RemoteDependencyData;typeof t.name=="string"&&(r.name=t.name.length>1024?t.name.slice(0,1021)+"...":t.name),r.data=t.data,r.target=t.target,r.duration=kn.msToTimeSpan(t.duration),r.success=t.success,r.type=t.dependencyTypeName,r.properties=t.properties,r.resultCode=t.resultCode?t.resultCode+"":"",t.id?r.id=t.id:r.id=kn.w3cTraceId();var n=new xe.Data;return n.baseType=xe.telemetryTypeToBaseType(xe.TelemetryType.Dependency),n.baseData=r,n},e.createEventData=function(t){var r=new xe.EventData;r.name=t.name,r.properties=t.properties,r.measurements=t.measurements;var n=new xe.Data;return n.baseType=xe.telemetryTypeToBaseType(xe.TelemetryType.Event),n.baseData=r,n},e.createExceptionData=function(t){var r=new xe.ExceptionData;r.properties=t.properties,isNaN(t.severity)?r.severityLevel=xe.SeverityLevel.Error:r.severityLevel=t.severity,r.measurements=t.measurements,r.exceptions=[];var n=t.exception.stack,i=new xe.ExceptionDetails;i.message=t.exception.message,i.typeName=t.exception.name,i.parsedStack=this.parseStack(n),i.hasFullStack=kn.isArray(i.parsedStack)&&i.parsedStack.length>0,r.exceptions.push(i);var a=new xe.Data;return a.baseType=xe.telemetryTypeToBaseType(xe.TelemetryType.Exception),a.baseData=r,a},e.createRequestData=function(t){var r=new xe.RequestData;t.id?r.id=t.id:r.id=kn.w3cTraceId(),r.name=t.name,r.url=t.url,r.source=t.source,r.duration=kn.msToTimeSpan(t.duration),r.responseCode=t.resultCode?t.resultCode+"":"",r.success=t.success,r.properties=t.properties;var n=new xe.Data;return n.baseType=xe.telemetryTypeToBaseType(xe.TelemetryType.Request),n.baseData=r,n},e.createMetricData=function(t){var r=new xe.MetricData;r.metrics=[];var n=new xe.DataPoint;n.count=isNaN(t.count)?1:t.count,n.kind=xe.DataPointType.Aggregation,n.max=isNaN(t.max)?t.value:t.max,n.min=isNaN(t.min)?t.value:t.min,n.name=t.name,n.stdDev=isNaN(t.stdDev)?0:t.stdDev,n.value=t.value,r.metrics.push(n),r.properties=t.properties;var i=new xe.Data;return i.baseType=xe.telemetryTypeToBaseType(xe.TelemetryType.Metric),i.baseData=r,i},e.createAvailabilityData=function(t){var r=new xe.AvailabilityData;t.id?r.id=t.id:r.id=kn.w3cTraceId(),r.name=t.name,r.duration=kn.msToTimeSpan(t.duration),r.success=t.success,r.runLocation=t.runLocation,r.message=t.message,r.measurements=t.measurements,r.properties=t.properties;var n=new xe.Data;return n.baseType=xe.telemetryTypeToBaseType(xe.TelemetryType.Availability),n.baseData=r,n},e.createPageViewData=function(t){var r=new xe.PageViewData;r.name=t.name,r.duration=kn.msToTimeSpan(t.duration),r.url=t.url,r.measurements=t.measurements,r.properties=t.properties;var n=new xe.Data;return n.baseType=xe.telemetryTypeToBaseType(xe.TelemetryType.PageView),n.baseData=r,n},e.getTags=function(t,r){var n=KU.CorrelationContextManager.getCurrentContext(),i={};if(t&&t.tags)for(var a in t.tags)i[a]=t.tags[a];if(r)for(var a in r)i[a]=r[a];return n&&(i[t.keys.operationId]=i[t.keys.operationId]||n.operation.id,i[t.keys.operationName]=i[t.keys.operationName]||n.operation.name,i[t.keys.operationParentId]=i[t.keys.operationParentId]||n.operation.parentId),i},e.parseStack=function(t){var r=void 0;if(typeof t=="string"){var n=t.split(`
`);r=[];for(var i=0,a=0,s=0;s<=n.length;s++){var u=n[s];if(TP.regex.test(u)){var f=new TP(n[s],i++);a+=f.sizeInBytes,r.push(f)}}var d=32*1024;if(a>d)for(var h=0,E=r.length-1,S=0,C=h,q=E;h<E;){var se=r[h].sizeInBytes,Ce=r[E].sizeInBytes;if(S+=se+Ce,S>d){var Fe=q-C+1;r.splice(C,Fe);break}C=h,q=E,h++,E--}}return r},e}(),TP=function(){function e(t,r){this.sizeInBytes=0,this.level=r,this.method="<no_method>",this.assembly=kn.trim(t);var n=t.match(e.regex);n&&n.length>=5&&(this.method=kn.trim(n[2])||this.method,this.fileName=kn.trim(n[4])||"<no_filename>",this.line=parseInt(n[5])||0),this.sizeInBytes+=this.method.length,this.sizeInBytes+=this.fileName.length,this.sizeInBytes+=this.assembly.length,this.sizeInBytes+=e.baseSize,this.sizeInBytes+=this.level.toString().length,this.sizeInBytes+=this.line.toString().length}return e.regex=/^(\s+at)?(.*?)(\@|\s\(|\s)([^\(\n]+):(\d+):(\d+)(\)?)$/,e.baseSize=58,e}();SP.exports=$U});var PP=_((Bz,OP)=>{"use strict";var XU=require("url"),WU=Tg(),YU=oc(),Ui=nn(),QU=lP(),Ad=gP(),IP=Fa(),ZU=yP(),Ig=mn(),bP=Mr(),JU=AP(),eH=function(){function e(t){this._telemetryProcessors=[],this._enableAzureProperties=!1;var r=new WU(t);this.config=r,this.context=new YU,this.commonProperties={};var n=new ZU(this.config);this.channel=new QU(function(){return r.disableAppInsights},function(){return r.maxBatchSize},function(){return r.maxBatchIntervalMs},n)}return e.prototype.trackAvailability=function(t){this.track(t,Ui.TelemetryType.Availability)},e.prototype.trackPageView=function(t){this.track(t,Ui.TelemetryType.PageView)},e.prototype.trackTrace=function(t){this.track(t,Ui.TelemetryType.Trace)},e.prototype.trackMetric=function(t){this.track(t,Ui.TelemetryType.Metric)},e.prototype.trackException=function(t){t&&t.exception&&!Ig.isError(t.exception)&&(t.exception=new Error(t.exception.toString())),this.track(t,Ui.TelemetryType.Exception)},e.prototype.trackEvent=function(t){this.track(t,Ui.TelemetryType.Event)},e.prototype.trackRequest=function(t){this.track(t,Ui.TelemetryType.Request)},e.prototype.trackDependency=function(t){t&&!t.target&&t.data&&(t.target=XU.parse(t.data).host),this.track(t,Ui.TelemetryType.Dependency)},e.prototype.flush=function(t){this.channel.triggerSend(t?!!t.isAppCrashing:!1,t?t.callback:void 0)},e.prototype.track=function(t,r){if(t&&Ui.telemetryTypeToBaseType(r)){var n=JU.createEnvelope(t,r,this.commonProperties,this.context,this.config);t.time&&(n.time=t.time.toISOString()),this._enableAzureProperties&&Ad.azureRoleEnvironmentTelemetryProcessor(n,this.context);var i=this.runTelemetryProcessors(n,t.contextObjects);i=i&&Ad.samplingTelemetryProcessor(n,{correlationContext:IP.CorrelationContextManager.getCurrentContext()}),Ad.preAggregatedMetricsTelemetryProcessor(n,this.context),i&&(Ad.performanceMetricsTelemetryProcessor(n,this.quickPulseClient),this.channel.send(n))}else bP.warn("track() requires telemetry object and telemetryType to be specified.")},e.prototype.setAutoPopulateAzureProperties=function(t){this._enableAzureProperties=t},e.prototype.addTelemetryProcessor=function(t){this._telemetryProcessors.push(t)},e.prototype.clearTelemetryProcessors=function(){this._telemetryProcessors=[]},e.prototype.runTelemetryProcessors=function(t,r){var n=!0,i=this._telemetryProcessors.length;if(i===0)return n;r=r||{},r.correlationContext=IP.CorrelationContextManager.getCurrentContext();for(var a=0;a<i;++a)try{var s=this._telemetryProcessors[a];if(s&&s.apply(null,[t,r])===!1){n=!1;break}}catch(u){n=!0,bP.warn("One of telemetry processors failed, telemetry item will be sent.",u,t)}return n&&(t&&t.tags&&(t.tags=Ig.validateStringMap(t.tags)),t&&t.data&&t.data.baseData&&t.data.baseData.properties&&(t.data.baseData.properties=Ig.validateStringMap(t.data.baseData.properties))),n},e}();OP.exports=eH});var NP=_((bg,RP)=>{"use strict";var tH=bg&&bg.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),rH=PP(),CP=_g(),nH=Hs(),Id=Mr(),iH=function(e){tH(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.trackNodeHttpRequestSync=function(r){r&&r.request&&r.response&&r.duration?CP.trackRequestSync(this,r):Id.warn("trackNodeHttpRequestSync requires NodeHttpRequestTelemetry object with request, response and duration specified.")},t.prototype.trackNodeHttpRequest=function(r){(r.duration||r.error)&&Id.warn("trackNodeHttpRequest will ignore supplied duration and error parameters. These values are collected from the request and response objects."),r&&r.request&&r.response?CP.trackRequest(this,r):Id.warn("trackNodeHttpRequest requires NodeHttpRequestTelemetry object with request and response specified.")},t.prototype.trackNodeHttpDependency=function(r){r&&r.request?nH.trackRequest(this,r):Id.warn("trackNodeHttpDependency requires NodeHttpDependencyTelemetry object with request specified.")},t}(rH);RP.exports=iH});var DP=_(wP=>{"use strict";Object.defineProperty(wP,"__esModule",{value:!0})});var JP=_(he=>{"use strict";Object.defineProperty(he,"__esModule",{value:!0});he.dispose=he.Configuration=he.wrapWithCorrelationContext=he.startOperation=he.getCorrelationContext=he.start=he.setup=he.liveMetricsClient=he.defaultClient=he.DistributedTracingModes=void 0;var Og=Fa(),aH=nO(),oH=aO(),LP=fd(),sH=sg(),uH=LO(),cH=Hs(),lH=_g(),xP=uo(),pc=Mr(),fH=eP(),qP=uP();he.TelemetryClient=NP();he.Contracts=nn();he.azureFunctionsTypes=DP();var jP;(function(e){e[e.AI=0]="AI",e[e.AI_AND_W3C=1]="AI_AND_W3C"})(jP=he.DistributedTracingModes||(he.DistributedTracingModes={}));var FP=!0,kP=!1,UP=!0,HP=!0,BP=!0,GP=!1,VP=!0,zP=!0,KP=!0,Pg=!0,$P,bd=!1,XP=!0,WP,YP=void 0,QP=void 0,vc,hc,_c,gc,mc,Ks,To,Ec,di=!1,MP;function dH(e){return he.defaultClient?pc.info("The default client is already setup"):(he.defaultClient=new he.TelemetryClient(e),vc=new aH(he.defaultClient),hc=new oH(he.defaultClient),_c=new LP(he.defaultClient),gc=new sH(he.defaultClient),mc=new uH(he.defaultClient),To=new lH(he.defaultClient),Ec=new cH(he.defaultClient),Ks||(Ks=new qP.AutoCollectNativePerformance(he.defaultClient))),he.defaultClient&&he.defaultClient.channel&&he.defaultClient.channel.setUseDiskRetryCaching(KP,YP,QP),Cg}he.setup=dH;function ZP(){return he.defaultClient?(di=!0,vc.enable(FP,kP),hc.enable(UP),_c.enable(HP),gc.enable(BP),mc.enable(GP,he.defaultClient.config),Ks.enable(XP,WP),To.useAutoCorrelation(Pg,$P),To.enable(VP),Ec.enable(zP),he.liveMetricsClient&&bd&&he.liveMetricsClient.enable(bd)):pc.warn("Start cannot be called before setup"),Cg}he.start=ZP;function pH(){return Pg?Og.CorrelationContextManager.getCurrentContext():null}he.getCorrelationContext=pH;function vH(e,t){return Og.CorrelationContextManager.startOperation(e,t)}he.startOperation=vH;function hH(e,t){return Og.CorrelationContextManager.wrapCallback(e,t)}he.wrapWithCorrelationContext=hH;var Cg=function(){function e(){}return e.setDistributedTracingMode=function(t){return xP.w3cEnabled=t===jP.AI_AND_W3C,e},e.setAutoCollectConsole=function(t,r){return r===void 0&&(r=!1),FP=t,kP=r,di&&vc.enable(t,r),e},e.setAutoCollectExceptions=function(t){return UP=t,di&&hc.enable(t),e},e.setAutoCollectPerformance=function(t,r){r===void 0&&(r=!0),HP=t;var n=qP.AutoCollectNativePerformance.parseEnabled(r);return XP=n.isEnabled,WP=n.disabledMetrics,di&&(_c.enable(t),Ks.enable(n.isEnabled,n.disabledMetrics)),e},e.setAutoCollectPreAggregatedMetrics=function(t){return BP=t,di&&gc.enable(t),e},e.setAutoCollectHeartbeat=function(t){return GP=t,di&&mc.enable(t,he.defaultClient.config),e},e.setAutoCollectRequests=function(t){return VP=t,di&&To.enable(t),e},e.setAutoCollectDependencies=function(t){return zP=t,di&&Ec.enable(t),e},e.setAutoDependencyCorrelation=function(t,r){return Pg=t,$P=r,di&&To.useAutoCorrelation(t,r),e},e.setUseDiskRetryCaching=function(t,r,n){return KP=t,YP=r,QP=n,he.defaultClient&&he.defaultClient.channel&&he.defaultClient.channel.setUseDiskRetryCaching(t,r,n),e},e.setInternalLogging=function(t,r){return t===void 0&&(t=!1),r===void 0&&(r=!0),pc.enableDebug=t,pc.disableWarnings=!r,e},e.setSendLiveMetrics=function(t){return t===void 0&&(t=!1),he.defaultClient?(!he.liveMetricsClient&&t?(he.liveMetricsClient=new fH(he.defaultClient.config,null),MP=new LP(he.liveMetricsClient,1e3,!0),he.liveMetricsClient.addCollector(MP),he.defaultClient.quickPulseClient=he.liveMetricsClient):he.liveMetricsClient&&he.liveMetricsClient.enable(t),bd=t,e):(pc.warn("Live metrics client cannot be setup without the default client"),e)},e.start=ZP,e}();he.Configuration=Cg;function _H(){xP.w3cEnabled=!0,he.defaultClient=null,di=!1,vc&&vc.dispose(),hc&&hc.dispose(),_c&&_c.dispose(),gc&&gc.dispose(),mc&&mc.dispose(),Ks&&Ks.dispose(),To&&To.dispose(),Ec&&Ec.dispose(),he.liveMetricsClient&&(he.liveMetricsClient.enable(!1),bd=!1,he.liveMetricsClient=void 0)}he.dispose=_H});var yH={};BR(yH,{default:()=>Od});module.exports=GR(yH);var $s=Do(require("os")),Hi=Do(require("vscode")),eC=Do(require("https"));var Xr=class{constructor(t){this.vscodeAPI=t}getTelemetryLevel(){let t="telemetry",r="enableTelemetry";try{let n=this.vscodeAPI.env.telemetryConfiguration;return n.isUsageEnabled&&n.isErrorsEnabled&&n.isCrashEnabled?"on":n.isErrorsEnabled&&n.isCrashEnabled?"error":"off"}catch{return this.vscodeAPI.env.isTelemetryEnabled!==void 0?this.vscodeAPI.env.isTelemetryEnabled?"on":"off":this.vscodeAPI.workspace.getConfiguration(t).get(r)?"on":"off"}}static applyReplacements(t,r){for(let n of Object.keys(t))for(let i of r)i.lookup.test(n)&&(i.replacementString!==void 0?t[n]=i.replacementString:delete t[n])}static shouldUseOneDataSystemSDK(t){return t.length===74&&t[32]==="-"&&t[41]==="-"&&t[46]==="-"&&t[51]==="-"&&t[56]==="-"&&t[69]==="-"}static getInstance(t){return Xr._instance||(Xr._instance=new Xr(t)),Xr._instance}};var kc=class{constructor(t,r,n,i,a,s){this.extensionId=t;this.extensionVersion=r;this.telemetryAppender=n;this.osShim=i;this.vscodeAPI=a;this.firstParty=!1;this.userOptIn=!1;this.errorOptIn=!1;this.disposables=[];this.firstParty=!!s,this.updateUserOptStatus(),a.env.onDidChangeTelemetryEnabled!==void 0?(this.disposables.push(a.env.onDidChangeTelemetryEnabled(()=>this.updateUserOptStatus())),this.disposables.push(a.workspace.onDidChangeConfiguration(()=>this.updateUserOptStatus()))):this.disposables.push(a.workspace.onDidChangeConfiguration(()=>this.updateUserOptStatus()))}updateUserOptStatus(){let t=Xr.getInstance(this.vscodeAPI).getTelemetryLevel();this.userOptIn=t==="on",this.errorOptIn=t==="error"||this.userOptIn,(this.userOptIn||this.errorOptIn)&&this.telemetryAppender.instantiateAppender()}cleanRemoteName(t){if(!t)return"none";let r="other";return["ssh-remote","dev-container","attached-container","wsl","codespaces"].forEach(n=>{t.indexOf(`${n}`)===0&&(r=n)}),r}get extension(){return this._extension===void 0&&(this._extension=this.vscodeAPI.extensions.getExtension(this.extensionId)),this._extension}cloneAndChange(t,r){if(t===null||typeof t!="object"||typeof r!="function")return t;let n={};for(let i in t)n[i]=r(i,t[i]);return n}shouldSendErrorTelemetry(){return this.errorOptIn===!1?!1:this.firstParty?!(this.vscodeAPI.env.remoteName&&this.cleanRemoteName(this.vscodeAPI.env.remoteName)==="other"):!0}getCommonProperties(){let t={};if(t["common.os"]=this.osShim.platform,t["common.nodeArch"]=this.osShim.architecture,t["common.platformversion"]=(this.osShim.release||"").replace(/^(\d+)(\.\d+)?(\.\d+)?(.*)/,"$1$2$3"),t["common.extname"]=this.extensionId,t["common.extversion"]=this.extensionVersion,this.vscodeAPI&&this.vscodeAPI.env){switch(t["common.vscodemachineid"]=this.vscodeAPI.env.machineId,t["common.vscodesessionid"]=this.vscodeAPI.env.sessionId,t["common.vscodeversion"]=this.vscodeAPI.version,t["common.isnewappinstall"]=this.vscodeAPI.env.isNewAppInstall?this.vscodeAPI.env.isNewAppInstall.toString():"false",t["common.product"]=this.vscodeAPI.env.appHost,this.vscodeAPI.env.uiKind){case this.vscodeAPI.UIKind.Web:t["common.uikind"]="web";break;case this.vscodeAPI.UIKind.Desktop:t["common.uikind"]="desktop";break;default:t["common.uikind"]="unknown"}t["common.remotename"]=this.cleanRemoteName(this.vscodeAPI.env.remoteName)}return t}anonymizeFilePaths(t,r){let n;if(t==null)return"";let i=[];this.vscodeAPI.env.appRoot!==""&&i.push(new RegExp(this.vscodeAPI.env.appRoot.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gi")),this.extension&&i.push(new RegExp(this.extension.extensionPath.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gi"));let a=t;if(r){let s=[];for(let h of i)for(;(n=h.exec(t))&&n;)s.push([n.index,h.lastIndex]);let u=/^[\\/]?(node_modules|node_modules\.asar)[\\/]/,f=/(file:\/\/)?([a-zA-Z]:(\\\\|\\|\/)|(\\\\|\\|\/))?([\w-._]+(\\\\|\\|\/))+[\w-._]*/g,d=0;for(a="";(n=f.exec(t))&&n;)n[0]&&!u.test(n[0])&&s.every(([h,E])=>n.index<h||n.index>=E)&&(a+=t.substring(d,n.index)+"<REDACTED: user-file-path>",d=f.lastIndex);d<t.length&&(a+=t.substr(d))}for(let s of i)a=a.replace(s,"");return a}removePropertiesWithPossibleUserInfo(t){if(typeof t!="object")return;let r={};for(let n of Object.keys(t)){let i=t[n];if(!i)continue;let a=/@[a-zA-Z0-9-.]+/,s=/(key|token|sig|signature|password|passwd|pwd|android:value)[^a-zA-Z0-9]/,u=/xox[pbaors]-[a-zA-Z0-9]+-[a-zA-Z0-9-]+?/;s.test(i.toLowerCase())?r[n]="<REDACTED: secret>":a.test(i)?r[n]="<REDACTED: email>":u.test(i)?r[n]="<REDACTED: token>":r[n]=i}return r}get telemetryLevel(){switch(Xr.getInstance(this.vscodeAPI).getTelemetryLevel()){case"on":return"all";case"error":return"error";case"off":return"off"}}internalSendTelemetryEvent(t,r,n,i,a){if((this.userOptIn||a)&&t!==""){if(r=Ti(Ti({},r),this.getCommonProperties()),i){let s=this.cloneAndChange(r,(u,f)=>this.anonymizeFilePaths(f,this.firstParty));r=this.removePropertiesWithPossibleUserInfo(s)}r=r??{},n=n??{},t=`${this.extensionId}/${t}`,this.telemetryAppender.logEvent(t,{properties:r,measurements:n})}}sendTelemetryEvent(t,r,n){this.internalSendTelemetryEvent(t,r,n,!0,!1)}sendRawTelemetryEvent(t,r,n){this.internalSendTelemetryEvent(t,r,n,!1,!1)}sendDangerousTelemetryEvent(t,r,n,i=!0){this.telemetryAppender.instantiateAppender(),this.internalSendTelemetryEvent(t,r,n,i,!0)}internalSendTelemetryErrorEvent(t,r,n,i,a){if((this.shouldSendErrorTelemetry()||a)&&t!==""){if(r=Ti(Ti({},r),this.getCommonProperties()),i){let s=this.cloneAndChange(r,(u,f)=>this.anonymizeFilePaths(f,this.firstParty));r=this.removePropertiesWithPossibleUserInfo(s)}r=r??{},n=n??{},t=`${this.extensionId}/${t}`,this.telemetryAppender.logEvent(t,{properties:r,measurements:n})}}sendTelemetryErrorEvent(t,r,n){this.internalSendTelemetryErrorEvent(t,r,n,!0,!1)}sendDangerousTelemetryErrorEvent(t,r,n,i=!0){this.telemetryAppender.instantiateAppender(),this.internalSendTelemetryErrorEvent(t,r,n,i,!0)}internalSendTelemetryException(t,r,n,i,a){if((this.shouldSendErrorTelemetry()||a)&&t){if(r=Ti(Ti({},r),this.getCommonProperties()),i){let s=this.cloneAndChange(r,(u,f)=>this.anonymizeFilePaths(f,this.firstParty));t.stack&&(t.stack=this.anonymizeFilePaths(t.stack,this.firstParty)),r=this.removePropertiesWithPossibleUserInfo(s)}r=r??{},n=n??{},this.telemetryAppender.logException(t,{properties:r,measurements:n})}}sendTelemetryException(t,r,n){this.internalSendTelemetryException(t,r,n,!0,!1)}sendDangerousTelemetryException(t,r,n,i=!0){this.telemetryAppender.instantiateAppender(),this.internalSendTelemetryException(t,r,n,i,!0)}dispose(){return this.telemetryAppender.flush(),Promise.all(this.disposables.map(t=>t.dispose()))}};var Uc=class{constructor(t,r){this._instantiationStatus=0;this._eventQueue=[];this._exceptionQueue=[];this._clientFactory=r,this._key=t}logEvent(t,r){if(!this._telemetryClient){this._instantiationStatus!==2&&this._eventQueue.push({eventName:t,data:r});return}this._telemetryClient.logEvent(t,r)}logException(t,r){if(!this._telemetryClient){this._instantiationStatus!==2&&this._exceptionQueue.push({exception:t,data:r});return}this._telemetryClient.logException(t,r)}async flush(){this._telemetryClient&&(await this._telemetryClient.flush(),this._telemetryClient=void 0)}_flushQueues(){this._eventQueue.forEach(({eventName:t,data:r})=>this.logEvent(t,r)),this._eventQueue=[],this._exceptionQueue.forEach(({exception:t,data:r})=>this.logException(t,r)),this._exceptionQueue=[]}instantiateAppender(){this._instantiationStatus===0&&(this._instantiationStatus=1,this._clientFactory(this._key).then(t=>{this._telemetryClient=t,this._instantiationStatus=2,this._flushQueues()}).catch(t=>{console.error(t),this._instantiationStatus=2}))}};var VR=async(e,t,r)=>{let n=await Promise.resolve().then(()=>Do(mp())),i=await Promise.resolve().then(()=>Do(PE())),a=new n.AppInsightsCore,s=new i.PostChannel,u={instrumentationKey:e,endpointUrl:"https://mobile.events.data.microsoft.com/OneCollector/1.0",loggingLevelTelemetry:0,loggingLevelConsole:0,disableCookiesUsage:!0,disableDbgExt:!0,disableInstrumentationKeyValidation:!0,channels:[[s]]};if(r){u.extensionConfig={};let h={alwaysUseXhrOverride:!0,httpXHROverride:r};u.extensionConfig[s.identifier]=h}let d=t.workspace.getConfiguration("telemetry").get("internalTesting");return a.initialize(u,[]),a.addTelemetryInitializer(h=>{!d||(h.ext=h.ext??{},h.ext.utc=h.ext.utc??{},h.ext.utc.flags=8462029)}),a},CE=async(e,t,r)=>{let n=await VR(e,t,r);return{logEvent:(a,s)=>{try{n==null||n.track({name:a,baseData:{name:a,properties:s==null?void 0:s.properties,measurements:s==null?void 0:s.measurements}})}catch(u){throw new Error(`Failed to log event to app insights!
`+u.message)}},logException:(a,s)=>{throw new Error("1DS SDK does not support logging exceptions, please use logEvent for exception tracking")},flush:async()=>{try{n==null||n.unload()}catch(a){throw new Error(`Failed to flush app insights!
`+a.message)}}}};var gH=async(e,t)=>{let r;try{process.env.APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL="1";let i=await Promise.resolve().then(()=>Do(JP()));i.defaultClient?(r=new i.TelemetryClient(e),r.channel.setUseDiskRetryCaching(!0)):(i.setup(e).setAutoCollectRequests(!1).setAutoCollectPerformance(!1).setAutoCollectExceptions(!1).setAutoCollectDependencies(!1).setAutoDependencyCorrelation(!1).setAutoCollectConsole(!1).setAutoCollectHeartbeat(!1).setUseDiskRetryCaching(!0).start(),r=i.defaultClient),Hi&&Hi.env&&(r.context.tags[r.context.keys.userId]=Hi.env.machineId,r.context.tags[r.context.keys.sessionId]=Hi.env.sessionId,r.context.tags[r.context.keys.cloudRole]=Hi.env.appName,r.context.tags[r.context.keys.cloudRoleInstance]=Hi.env.appName),e&&e.indexOf("AIF-")===0&&(r.config.endpointUrl="https://mobile.events.data.microsoft.com/collect/v1")}catch(i){return Promise.reject(`Failed to initialize app insights!
`+i.message)}return t!=null&&t.length&&mH(r,t),{logEvent:(i,a)=>{try{r==null||r.trackEvent({name:i,properties:a==null?void 0:a.properties,measurements:a==null?void 0:a.measurements})}catch(s){throw new Error(`Failed to log event to app insights!
`+s.message)}},logException:(i,a)=>{try{r==null||r.trackException({exception:i,properties:a==null?void 0:a.properties,measurements:a==null?void 0:a.measurements})}catch(s){throw new Error(`Failed to log exception to app insights!
`+s.message)}},flush:async()=>{try{r==null||r.flush()}catch(i){throw new Error(`Failed to flush app insights!
`+i.message)}}}};function mH(e,t){e.addTelemetryProcessor(r=>(Array.isArray(r.tags)?r.tags.forEach(n=>Xr.applyReplacements(n,t)):r.tags&&Xr.applyReplacements(r.tags,t),r.data.baseData&&Xr.applyReplacements(r.data.baseData,t),!0))}function EH(){return{sendPOST:(t,r)=>{let n={method:"POST",headers:gE(Ti({},t.headers),{"Content-Type":"application/json","Content-Length":Buffer.byteLength(t.data)})};try{let i=eC.request(t.urlString,n,a=>{a.on("data",function(s){r(a.statusCode??200,a.headers,s.toString())}),a.on("error",function(){r(0,{})})});i.write(t.data),i.end()}catch{r(0,{})}}}}var Od=class extends kc{constructor(t,r,n,i,a){let s=f=>gH(f,a);Xr.shouldUseOneDataSystemSDK(n)&&(s=f=>CE(f,Hi,EH()));let u=new Uc(n,s);n&&(n.indexOf("AIF-")===0||Xr.shouldUseOneDataSystemSDK(n))&&(i=!0),super(t,r,u,{release:$s.release(),platform:$s.platform(),architecture:$s.arch()},Hi,i)}};0&&(module.exports={});
/*!
 * 1DS JS SDK Core, 3.2.3
 * Copyright (c) Microsoft and contributors. All rights reserved.
 * (Microsoft Internal Only)
 */
/*!
 * 1DS JS SDK POST plugin, 3.2.3
 * Copyright (c) Microsoft and contributors. All rights reserved.
 * (Microsoft Internal Only)
 */
/*!
 * Application Insights JavaScript SDK - Core, 2.8.4
 * Copyright (c) Microsoft and contributors. All rights reserved.
 */
/*!
 * Microsoft Application Insights JavaScript SDK - Shim functions, 2.0.1
 * Copyright (c) Microsoft and contributors. All rights reserved.
 */
/*!
 * Microsoft Dynamic Proto Utility, 1.1.6
 * Copyright (c) Microsoft and contributors. All rights reserved.
 */

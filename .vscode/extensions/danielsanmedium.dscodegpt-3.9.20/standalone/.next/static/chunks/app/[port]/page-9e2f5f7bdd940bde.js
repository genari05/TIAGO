(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3],{69671:function(e,t,l){Promise.resolve().then(l.bind(l,59425)),Promise.resolve().then(l.bind(l,40790)),Promise.resolve().then(l.bind(l,71069)),Promise.resolve().then(l.bind(l,73191)),Promise.resolve().then(l.bind(l,67042)),Promise.resolve().then(l.bind(l,30454)),Promise.resolve().then(l.bind(l,53048)),Promise.resolve().then(l.bind(l,31649)),Promise.resolve().then(l.bind(l,96255)),Promise.resolve().then(l.bind(l,67870)),Promise.resolve().then(l.bind(l,19803))},968:function(e,t,l){"use strict";l.d(t,{j:function(){return n}}),l(83079);var n=(0,l(12119).$)("cb8707d39cee2d6b73f7d2a0c3a37eb9243fb61d")},96255:function(e,t,l){"use strict";l.d(t,{CodeBlock:function(){return O}});var n=l(57437),a=l(89101);l(83079);var s=l(12119);(0,s.$)("eb17aafe73188efdd4322e1ac378547afa56072b"),(0,s.$)("a32dbcc756608e5f055c7f1697d66d93788dcb53");var r=l(81740);let i=(e,t)=>{try{return r.Z.highlight(e,{language:t}).value}catch(t){return r.Z.highlight(e,{language:"plaintext"}).value}};var o=l(2265),d=e=>{let{language:t,value:l}=e,a=(0,o.useCallback)(()=>{let e=l.slice(0,8e3),t=l.indexOf("\n",8e3);return -1!==t&&(e=l.slice(0,t)),l.length>8e3?e+"\n...".concat(l.split("\n").length-e.split("\n").length," lines truncated\n"):l},[l])(),s=(0,o.useMemo)(()=>i(a,t),[a,t]);return(0,n.jsx)("code",{className:"direction-ltr word-spacing-normal word-break-normal tab-size[2] hyphens-none whitespace-pre text-left",dangerouslySetInnerHTML:{__html:s}})};l(92595),l(3805);var c=l(94508),u=l(9987);let m=(0,l(90535).j)("inline-flex items-center justify-center gap-2 rounded-md text-sm font-medium transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-transparent",outline:"border border-input bg-transparent shadow-sm hover:bg-accent hover:text-accent-foreground"},size:{default:"h-9 px-2 min-w-9",sm:"h-8 px-1.5 min-w-8",lg:"h-10 px-2.5 min-w-10"}},defaultVariants:{variant:"default",size:"default"}});o.forwardRef((e,t)=>{let{className:l,variant:a,size:s,...r}=e;return(0,n.jsx)(u.f,{ref:t,className:(0,c.cn)(m({variant:a,size:s,className:l})),...r})}).displayName=u.f.displayName;var p=l(90175);let x=o.createContext({size:"default",variant:"default"});o.forwardRef((e,t)=>{let{className:l,variant:a,size:s,children:r,...i}=e;return(0,n.jsx)(p.fC,{ref:t,className:(0,c.cn)("flex items-center justify-center gap-1",l),...i,children:(0,n.jsx)(x.Provider,{value:{variant:a,size:s},children:r})})}).displayName=p.fC.displayName,o.forwardRef((e,t)=>{let{className:l,children:a,variant:s,size:r,...i}=e,d=o.useContext(x);return(0,n.jsx)(p.ck,{ref:t,className:(0,c.cn)(m({variant:d.variant||s,size:d.size||r}),l),...i,children:a})}).displayName=p.ck.displayName;var h=l(63760);l(66409),l(78542);var f=l(25922);l(86183);var g=l(70869);function v(e){var t;let{language:l}=e,a=g.a2.find(e=>e.value.toLowerCase()===l.toLowerCase()||e.label.toLowerCase()===l.toLowerCase());return(0,n.jsxs)("span",{className:"flex items-center gap-1",children:[(0,n.jsx)("span",{style:{height:"1rem"},"data-language":null==a?void 0:a.label}),(0,n.jsx)("span",{className:"text-xs",children:null!==(t=null==a?void 0:a.label)&&void 0!==t?t:l})]})}var b=l(59425),j=l(29),N=l.n(j),y=e=>{let{children:t,colors:l,speed:a=3,className:s="",borderWidth:r=2,visible:i}=e;if(!i)return(0,n.jsx)("div",{children:t});let o={backgroundImage:"linear-gradient(90deg, ".concat(l.join(", "),")"),backgroundSize:"".concat(100*l.length,"% 100%"),animation:"shine ".concat(a,"s linear infinite")};return(0,n.jsxs)("div",{style:{padding:r},className:N().dynamic([["3fc1908d8822f9e5",[100*l.length]]])+" "+"relative ".concat(s),children:[(0,n.jsx)("div",{style:o,className:N().dynamic([["3fc1908d8822f9e5",[100*l.length]]])+" absolute inset-0 rounded-[inherit]"}),(0,n.jsx)("div",{className:N().dynamic([["3fc1908d8822f9e5",[100*l.length]]])+" relative overflow-hidden rounded-[inherit] bg-background",children:t}),(0,n.jsx)(N(),{id:"3fc1908d8822f9e5",dynamic:[100*l.length],children:"@-webkit-keyframes shine{to{background-position:".concat(100*l.length,"% 0}}@-moz-keyframes shine{to{background-position:").concat(100*l.length,"% 0}}@-o-keyframes shine{to{background-position:").concat(100*l.length,"% 0}}@keyframes shine{to{background-position:").concat(100*l.length,"% 0}}")})]})},w=l(32924);l(99167);var k=l(21393),C=l(43520),z=l(30401),S=l(5136),M=l(80221),P=l(26463),A=l(40875),_=l(22135),L=l(14438);let I=["javascript","typescript","js","ts","typescriptreact"],O=e=>{let{language:t,value:l,isRunning:s=!1,isUserMessage:r=!1}=e,i=["bash","sh","zsh","ksh","terminal","cmd","powershell"].includes(t=I.includes(t.toLowerCase())?"tsx":t),[u,m]=(0,o.useState)(!1),[p,x]=(0,o.useState)(r),[g,j]=(0,o.useState)(!1),N=(0,o.useRef)(null),O=(0,o.useRef)(null),{inView:Z}=(0,C.S1)(N),[D]=(0,o.useState)(s),{isLoading:T,messages:R}=(0,o.useContext)(b.p),[F,E]=(0,o.useState)(""),[V,H]=(0,o.useState)(!1),{theme:q}=(0,f.F)();(0,o.useEffect)(()=>{O.current&&!g&&j(O.current.scrollHeight>=384)},[g,l]),(0,o.useEffect)(()=>{T||x(!0)},[T]);let U=()=>{(0,a.zp)(l).then(()=>{m(!0),setTimeout(()=>{m(!1)},2e3)})};return(0,n.jsx)(y,{colors:["hsl(var(--primary))","hsl(var(--secondary))","hsl(var(--foreground))"],speed:2,className:"rounded-xl",borderWidth:2,visible:D,children:(0,n.jsxs)("div",{className:(0,c.cn)("chat codeblock group w-full overflow-auto whitespace-pre-wrap break-words text-sm","dark"===q?"darkmode":"lightmode"),children:[(0,n.jsxs)("header",{ref:N,className:"z-10 flex items-center justify-between border-b border-content3 bg-content1/90 px-2 py-1.5 text-xs text-default-500 backdrop-blur-sm",children:[(0,n.jsx)("span",{className:"font-sans text-[15px]",children:(0,n.jsx)(v,{language:t})}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[!r&&"vscode"===w.L_&&!i&&!1,(0,n.jsx)(k.e,{content:"Copy code",classNames:{content:"bg-content2"},children:(0,n.jsx)("button",{className:"flex size-4 items-center justify-center text-default-500 opacity-0 transition-all group-hover:opacity-100",onClick:()=>{U(),(0,h.q)({eventName:"copyCode",code_language:t,codeLinesNumber:l.split("\n").length}),L.Am.success("Code copied to clipboard",{duration:3e3,dismissible:!0,closeButton:!0})},children:u?(0,n.jsx)(z.Z,{className:"size-3 shrink-0"}):(0,n.jsx)(S.Z,{className:"size-3 shrink-0"})})}),(0,n.jsx)(k.e,{content:"Insert code",classNames:{content:"bg-content2"},children:(0,n.jsx)("button",{className:"flex size-4 items-center justify-center text-default-500 opacity-50 transition-all group-hover:opacity-100",onClick:()=>{i?(0,a.qu)(l).catch(()=>{console.error("Error inserting code")}):(0,a.Nq)(l).catch(()=>{console.error("Error inserting code")}),(0,h.q)({eventName:"insertCode",code_language:t,codeLinesNumber:l.split("\n").length}),L.Am.success("Code inserted",{duration:3e3,dismissible:!0,closeButton:!0})},children:i?(0,n.jsx)(M.Z,{className:"size-3 shrink-0"}):(0,n.jsx)(P.Z,{className:"size-3 shrink-0"})})})]})]}),(0,n.jsx)("div",{ref:O,className:(0,c.cn)("direction-ltr word-spacing-normal word-break-normal tab-size[2] z-0 m-0 overflow-auto hyphens-none whitespace-pre p-3 text-left leading-6",p?r?"max-h-28":"max-h-80":"max-h-full"),children:(0,n.jsx)(d,{language:t,value:l})}),!T&&g&&(0,n.jsx)("div",{className:"flex items-center justify-center rounded-b-md border-t border-content3 py-1",children:(0,n.jsx)("div",{className:"flex items-center justify-center",children:(0,n.jsx)(k.e,{content:p?"Show code":"Collapse",classNames:{content:"bg-content2"},children:(0,n.jsx)("button",{className:"mx-auto flex size-4 items-center justify-center text-default-500",onClick:()=>{x(!p),setTimeout(()=>{N.current&&!1===p&&!Z&&N.current.scrollIntoView({behavior:"instant",block:"start",inline:"start"})},100)},children:p?(0,n.jsx)(A.Z,{className:"size-3 shrink-0"}):(0,n.jsx)(_.Z,{className:"size-3 shrink-0"})})})})})]})})}},59425:function(e,t,l){"use strict";let n;l.d(t,{p:function(){return lp},default:function(){return lx}});var a=l(57437),s=l(89101);l(83079);var r=l(12119),i=(0,r.$)("b2a9bd8d29b4fae0adbafb37f618b47f1e70a54e"),o=(0,r.$)("881dba192ed7ca8143716ef02a10daf515be6bb0"),d=(0,r.$)("c44e67e4628464ee0f00765beb0671f6bf39d6d8"),c=(0,r.$)("99ca52fdf9b7d9cc311bb125c4b124a7e5b763fb"),u=(0,r.$)("f6a2fbc13cf006b1a063a606eda2bd9203000d6e"),m=l(96255),p=l(2265),x=l(26727);let h=(0,p.memo)(x.U,(e,t)=>e.children===t.children&&e.className===t.className);var f=l(30454),g=l(70869),v=l(50051),b=l(23260);let j=e=>{let{content:t,isLoading:l,isUserMessage:n=!1}=e;return(0,a.jsx)("div",{className:"prose-h3:text-md prose prose-slate mx-auto w-full min-w-full dark:prose-zinc dark:prose-invert prose-h1:text-xl prose-h2:text-lg prose-pre:bg-inherit prose-pre:p-0 prose-ol:pl-4 prose-ul:pl-4",children:(0,a.jsx)(h,{rehypePlugins:[[v.Z]],remarkPlugins:[b.Z],allowedElements:["div","a","p","h1","h2","h3","h4","h5","h6","ol","ul","li","code","pre","strong","em","del","u","img","b","i","blockquote","br","hr","span","table","thead","tbody","tr","th","td","caption","colgroup"],skipHtml:!0,urlTransform:e=>e,unwrapDisallowed:!0,components:{code(e){var t,l;let{node:s,inline:r,className:i,children:o,...d}=e,c=null==i?void 0:i.replaceAll("language-",""),u=g.a2.find(e=>e.value===c),p=String(o);return"undefined"===p?null:!r&&i?(0,a.jsx)(m.CodeBlock,{language:null!==(l=null!==(t=null==u?void 0:u.label)&&void 0!==t?t:c)&&void 0!==l?l:"",value:p,isUserMessage:n}):(0,a.jsx)("span",{className:"inline-block h-fit whitespace-break-spaces rounded-md bg-default/40 px-1.5 font-mono font-normal leading-snug text-default-700",children:p})},a(e){let{node:t,children:l}=e;return(0,a.jsx)(f.CustomLink,{isExternal:!0,"attr-type":"link","attr-href":t.properties.href,href:t.properties.href,className:"cursor-pointer underline",children:l})}},children:t})})};(0,r.$)("77e36785c07bd474b2f45277581096de280d7f21");var N=(0,r.$)("52b1caa808ecf32cbcf2870c5954878c8438d52d");function y(e){var t;let{image:l}=e;return(0,a.jsx)("div",{className:"mb-2 grid gap-2",children:(0,a.jsx)("div",{className:"grid max-w-48 gap-4",children:(0,a.jsxs)("div",{className:"relative grid grid-flow-col items-center justify-start gap-2 overflow-hidden rounded-lg border border-content3 p-2",children:[(0,a.jsx)("div",{className:"relative size-8 overflow-hidden rounded-lg",children:(0,a.jsx)("div",{className:"relative h-full w-full overflow-hidden",style:{backgroundImage:"url(".concat(l.base64,")"),backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"}})}),(0,a.jsxs)("p",{className:"relative grid w-full gap-0.5 overflow-hidden truncate",children:[(0,a.jsxs)("span",{className:"text-xs text-default-500",children:[(0,a.jsx)("span",{className:"uppercase",children:l.name&&l.name.includes(".")?null===(t=l.name)||void 0===t?void 0:t.split(".")[1]:""}),"Image"]}),(0,a.jsx)("span",{className:"justify-end overflow-hidden text-ellipsis text-left text-xs",children:l.name})]})]})})})}var w=l(94508);let k=(0,l(90535).j)("relative w-full rounded-lg border px-4 py-3 text-sm [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground [&>svg~*]:pl-7",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),C=p.forwardRef((e,t)=>{let{className:l,variant:n,...s}=e;return(0,a.jsx)("div",{ref:t,role:"alert",className:(0,w.cn)(k({variant:n}),l),...s})});C.displayName="Alert",p.forwardRef((e,t)=>{let{className:l,...n}=e;return(0,a.jsx)("h5",{ref:t,className:(0,w.cn)("mb-1 font-medium leading-none tracking-tight",l),...n})}).displayName="AlertTitle";let z=p.forwardRef((e,t)=>{let{className:l,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,w.cn)("text-sm [&_p]:leading-relaxed",l),...n})});z.displayName="AlertDescription";var S=l(20877),M=l(51823),P=l(99167),A=l(76865),_=l(14438);function L(e){return e.map((e,t)=>{let l=[],n="user"===e.role,s=!1,r="";return e.display.forEach((e,i)=>{"string"==typeof e?s?r+=e:(r=e,s=!0):(s&&(l.push((0,a.jsx)(j,{content:r,isUserMessage:n},"".concat(t,"-").concat(i,"-markdown"))),r=""),l.push((0,p.cloneElement)(e,{key:"".concat(t,"-").concat(i,"-element")})),s=!1)}),s&&l.push((0,a.jsx)(j,{content:r,isUserMessage:n},"".concat(t,"-markdown"))),{...e,display:l}})}let I=e=>{let t,{message:l,value:n}=e;if(n.display){if((0,p.isValidElement)(n.display)){var a,s,r,i;let e=null===(s=n.display)||void 0===s?void 0:null===(a=s.props)||void 0===a?void 0:a.id;if(console.log({newDisplayId:e}),e){let a=null==l?void 0:null===(r=l.display)||void 0===r?void 0:r.findIndex(t=>{var l;return(0,p.isValidElement)(t)&&(null==t?void 0:null===(l=t.props)||void 0===l?void 0:l.id)===e});-1!==a&&(null==l?void 0:null===(i=l.display)||void 0===i?void 0:i[a])&&((t=[...l.display])[a]=n.display)}}t||(t=[...l.display,n.display])}return t||(t=[...l.display]),t},O=e=>{let{onFinish:t,onError:l,provider:n,initialHistoryId:r}=e,[i,d]=(0,p.useState)([]),[c,u]=(0,p.useState)(r),[m,x]=(0,p.useState)({}),[h,f]=(0,p.useState)(""),[g,v]=(0,p.useState)(!1),b=(0,p.useRef)(""),w=(0,p.useRef)(!1),k=(0,p.useRef)(""),O=(0,p.useRef)(!1),Z=(0,p.useRef)(""),D=(0,p.useRef)({base64:"",name:""}),T=(0,p.useRef)([]),R=(0,p.useRef)(""),F=(0,p.useRef)(""),{setSelectedTab:E,setIsModalOpen:V,selectedGraph:H}=(0,M.B)(),{isIndexing:q}=(0,S.M)();(0,p.useEffect)(()=>{d([]),o().then(e=>{u(e)}),v(!1),w.current=!1,k.current="",O.current=!1,Z.current="",D.current={base64:"",name:""},T.current=[],R.current="",F.current="",b.current=""},[n]),(0,p.useEffect)(()=>{if(!g&&i.length>0){let e=i[i.length-1];"assistant"===e.role&&0===e.display.length&&d(i.slice(0,i.length-2))}},[i,g]);let U=()=>{f(""),v(!1),w.current=!1},B=async e=>{let r,{text:o,model:u,externalMessages:m,fromMarketplace:p=!1,customPromptType:x="",image:h,files:g=[],contextLevel:S,codeSelection:M,promptType:B,statusId:Y}=e;if(w.current)return;w.current=!0,v(!0);let K=await (0,s.us)();if(u||(u=K.id),"deepinsights"===S&&!(null==H?void 0:H.id)){V(!0),E("deepinsights"),d(i.slice(0,i.length-1));return}k.current=u,O.current=p||!1,Z.current=x||"",D.current=h||{base64:"",name:""},T.current=g||[],R.current=M||"",F.current=B||"",b.current=S||"";try{var G;r=[...m||i,{role:"user",display:[...(null==h?void 0:h.base64)?[(0,a.jsx)(y,{image:h},"".concat(i.length,"-").concat(o.length,"-user-message-image"))]:[],(0,a.jsx)("span",{children:o},"".concat(i.length,"-").concat(o.length,"-user-message")),...M?[(0,a.jsx)(j,{content:M,isUserMessage:!0},"".concat(i.length,"-").concat(o.length,"-user-message-code-selection"))]:[]],content:"".concat(o," ").concat(M||"")},{role:"assistant",display:[...q&&"codebase"===S?[(0,a.jsx)(C,{variant:"default",children:(0,a.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,a.jsx)(A.Z,{className:"size-5 text-amber-500"}),(0,a.jsxs)(z,{className:"text-sm text-default-500",children:["Note: codebase not indexed yet. Results are much better when indexed."," ",(0,a.jsx)("p",{className:"cursor-pointer text-default-400 underline underline-offset-2",onClick:()=>V(!0),children:"Currently indexing."})]})]})},"".concat(i.length,"-codebase-not-indexed"))]:[]],content:""}],d(r);let e=(0,P.e_)(r);for await(let t of(console.log({normalizedMessages:e}),f("Connecting..."),G=N({provider:n||"codegptplusbeta",messages:e,model:u,fromMarketplace:p||u===K.id,customPromptType:x,image:null==h?void 0:h.base64,files:g,contextLevel:S,codeSelection:M,promptType:B,statusId:Y,historyId:c}),{[Symbol.asyncIterator]:function(){return{current:G,async next(){let{iteratorResult:e,next:t}=await this.current;return t?this.current=t:e.done=!0,e}}}})){if(!w.current)break;let e=t.error;if(e){_.Am.error(e,{unstyled:!0}),U(),(0===r.length||""===r[r.length-1].content)&&d(i.slice(0,i.length-1));return}let l=r.length-1;r=r.map((e,n)=>{if(n===l){t.currentState&&f(t.currentState);let l=I({message:e,value:t});return{...e,display:l,content:t.content?e.content+t.content:e.content}}return e}),d(L(r))}t&&t(r)}catch(e){l&&l(e)}finally{f(""),v(!1),w.current=!1}return r?L(r):i},Y=async e=>{v(!0),i.pop();let t=i.pop();d(i);let l=null==t?void 0:t.content;return await B({text:(l||"").replace(R.current,""),model:k.current,fromMarketplace:O.current,customPromptType:Z.current,image:D.current,files:T.current,contextLevel:b.current,codeSelection:R.current})};return{messages:i,setMessages:d,handleSubmit:B,stop:U,reload:Y,isLoading:g,currentState:h,historyId:c,setHistoryId:u,modelHistory:m,setModelHistory:x}};var Z=l(9847),D=l(20653);let T=Z.fC,R=Z.xz,F=Z.ZA;Z.Uv;let E=Z.Tr;Z.Ee;let V=p.forwardRef((e,t)=>{let{className:l,inset:n,children:s,...r}=e;return(0,a.jsxs)(Z.fF,{ref:t,className:(0,w.cn)("focus:bg-accent data-[state=open]:bg-accent flex cursor-default select-none items-center gap-2 rounded-medium px-2 py-1.5 text-sm outline-none [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",n&&"pl-8",l,"hover:bg-content3"),...r,children:[s,(0,a.jsx)(D.XCv,{className:"ml-auto"})]})});V.displayName=Z.fF.displayName;let H=p.forwardRef((e,t)=>{let{className:l,...n}=e;return(0,a.jsx)(Z.tu,{ref:t,className:(0,w.cn)("text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 min-w-[8rem] overflow-hidden rounded-md border bg-content1 p-1 shadow-lg dark:bg-content2",l),...n})});H.displayName=Z.tu.displayName;let q=p.forwardRef((e,t)=>{let{className:l,sideOffset:n=4,...s}=e;return(0,a.jsx)(Z.Uv,{children:(0,a.jsx)(Z.VY,{ref:t,sideOffset:n,className:(0,w.cn)("text-popover-foreground z-50 min-w-[8rem] overflow-hidden rounded-medium border bg-content1 p-1 shadow-md dark:bg-content2","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",l),...s})})});q.displayName=Z.VY.displayName;let U=p.forwardRef((e,t)=>{let{className:l,inset:n,...s}=e;return(0,a.jsx)(Z.ck,{ref:t,className:(0,w.cn)("focus:bg-accent focus:text-accent-foreground relative flex cursor-default select-none items-center gap-2 rounded-medium px-2 py-1.5 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&>svg]:size-4 [&>svg]:shrink-0",n&&"pl-8",l,"hover:bg-content3"),...s})});U.displayName=Z.ck.displayName,p.forwardRef((e,t)=>{let{className:l,children:n,checked:s,...r}=e;return(0,a.jsxs)(Z.oC,{ref:t,className:(0,w.cn)("focus:bg-accent focus:text-accent-foreground relative flex cursor-default select-none items-center rounded-medium py-1.5 pl-8 pr-2 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50",l),checked:s,...r,children:[n,(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(Z.wU,{children:(0,a.jsx)(D.nQG,{className:"size-3.5 w-3.5"})})})]})}).displayName=Z.oC.displayName,p.forwardRef((e,t)=>{let{className:l,children:n,...s}=e;return(0,a.jsxs)(Z.Rk,{ref:t,className:(0,w.cn)("focus:bg-accent focus:text-accent-foreground relative flex cursor-default select-none items-center rounded-medium py-1.5 pl-8 pr-2 text-sm outline-none transition-colors data-[disabled]:pointer-events-none data-[disabled]:opacity-50",l),...s,children:[n,(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(Z.wU,{children:(0,a.jsx)(D.nQG,{className:"size-3.5 w-3.5 fill-current"})})})]})}).displayName=Z.Rk.displayName;let B=p.forwardRef((e,t)=>{let{className:l,inset:n,...s}=e;return(0,a.jsx)(Z.__,{ref:t,className:(0,w.cn)("px-2 py-1.5 text-xs capitalize text-default-400",n&&"pl-8",l),...s})});B.displayName=Z.__.displayName;let Y=p.forwardRef((e,t)=>{let{className:l,...n}=e;return(0,a.jsx)(Z.Z0,{ref:t,className:(0,w.cn)("-mx-1 my-1 h-px bg-muted",l),...n})});Y.displayName=Z.Z0.displayName;var K=l(37945),G=l(29962),J=l(94865),W=l(48652),$=l(63760),Q=l(81498),X=l(99397),ee=l(41217),et=l(82222),el=l(66140),en=l(61836),ea=l(73247),es=l(30401);function er(e){let{title:t,items:l,onItemClick:n,type:s,customNoItems:r}=e,[i,o]=(0,p.useState)(""),d=(0,p.useMemo)(()=>l.filter(e=>e.name.toLowerCase().includes(i.toLowerCase())),[l,i]);return(0,a.jsx)(H,{className:"w-56 select-none p-0",children:(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsxs)("div",{className:"relative h-full w-full",children:[(0,a.jsx)("div",{className:"pointer-events-none absolute left-3 top-1/2 -translate-y-1/2",children:(0,a.jsx)(ea.Z,{className:"size-4 text-muted-foreground"})}),(0,a.jsx)("input",{type:"text",placeholder:"Search ".concat(t.toLowerCase(),"..."),value:i,onChange:e=>o(e.target.value),className:"h-9 w-full border-b bg-transparent py-2 pl-9 pr-3 text-sm focus:outline-none"})]}),(0,a.jsx)("div",{className:"max-h-60 overflow-y-auto p-1",children:0===d.length?(0,a.jsx)("div",{className:"py-6 text-center text-sm text-muted-foreground",children:r||"No ".concat(t.toLowerCase()," found.")}):("agent"===s?d:d.slice(0,10)).map(e=>{let t=e.name.includes(".")?e.name.split(".").at(-1):null;return(0,a.jsxs)("div",{className:"inline-flex w-full cursor-pointer items-center gap-2 overflow-hidden rounded-small p-2 hover:bg-content3 ".concat(t&&"file"===s&&"command-with-icon"),...t&&"file"===s&&{"data-language":t,"data-id":t},onClick:()=>n(e),children:["agent"===s&&(0,a.jsx)(en.J,{disableSkeleton:!0,src:(null==e?void 0:e.image)||"/logotypes/custom.png",alt:null==e?void 0:e.name,loading:"eager",classNames:{wrapper:"agent-avatar size-5 shrink-0 rounded-full shrink-0 bg-content3 border border-content3",img:"agent-avatar size-5 shrink-0 rounded-full shrink-0 bg-content3 border border-content3 opacity-100 block"}}),(0,a.jsx)("span",{className:"w-full truncate text-xs",children:null==e?void 0:e.name}),(null==e?void 0:e.isSelected)&&(0,a.jsx)(es.Z,{className:"ml-auto size-4"})]},e.id)})})]})})}function ei(e){var t;let{filesList:l}=e,{files:n,setFiles:r}=(0,G.J)(),{agents:i,mutate:o}=(0,K.P)(),{agents:d}=(0,J.X)(e=>e),{setCurrentProviderModel:c}=(0,W.o)(),{setSelectedProvider:u}=(0,W.Y)();return(0,p.useEffect)(()=>{o().then(e=>{e||o()})},[o]),(0,a.jsx)("div",{className:"select-none",children:(0,a.jsxs)(T,{children:[(0,a.jsx)(R,{asChild:!0,children:(0,a.jsxs)("button",{className:"flex shrink-0 cursor-pointer select-none items-center gap-1 rounded-md border px-1.5 py-0.5 text-xs leading-normal text-default-500",onClick:()=>{(0,$.q)({eventName:"clickOver",groupBy:"contextSelectorDropdown",target:"contextSelectorDropdownButton"})},children:[(0,a.jsx)(X.Z,{className:"size-3 shrink-0"}),(0,a.jsx)("span",{className:"whitespace-nowrap pr-0.5",children:"Add Context"})]})}),(0,a.jsx)(q,{className:"w-56",side:"top",sideOffset:10,alignOffset:-6,align:"start",children:(0,a.jsxs)(F,{children:[(0,a.jsxs)(E,{children:[(0,a.jsxs)(V,{children:[(0,a.jsx)(ee.Z,{className:"!size-3"}),(0,a.jsx)("span",{className:"text-xs",children:"Files"})]}),(0,a.jsx)(er,{title:"Files",type:"file",items:l.map(e=>({id:e.id,name:e.display,isSelected:n.some(t=>t.path===e.id)})),onItemClick:e=>{let t=e.id,l=t.split("/").pop()||t;n.some(e=>e.path===t)?r(n.filter(e=>e.path!==t)):r([...n,{name:l,path:t}]),(0,$.q)({eventName:"clickOver",groupBy:"contextSelectorDropdown",target:"addFileToContextDropdown"})}})]}),(0,a.jsxs)(E,{children:[(0,a.jsxs)(V,{children:[(0,a.jsx)(et.Z,{className:"!size-3"}),(0,a.jsx)("span",{className:"text-xs",children:"My agents"})]}),(0,a.jsx)(er,{title:"My agents",type:"agent",items:(null==i?void 0:null===(t=i.agents)||void 0===t?void 0:t.map(e=>({id:e.id,name:e.name,image:e.image,isSelected:!1})))||[],customNoItems:(0,a.jsxs)("button",{className:"mx-auto flex shrink-0 cursor-pointer select-none items-center gap-1 rounded-md border border-content4 bg-content3 px-1 py-0.5 text-xs leading-normal text-default-500 shadow hover:text-default-700",onClick:()=>{(0,s.Yo)("https://app.codegpt.co/es/agents"),(0,$.q)({eventName:"clickOver",groupBy:"contextSelectorDropdown",target:"Create your agent"})},children:[(0,a.jsx)(X.Z,{className:"size-3"}),"Create your agent"]}),onItemClick:e=>{null!=e&&e.is_frozen||(c("codegptplusbeta",{id:e.id,label:e.name,fromMarketplace:!1,image:e.image,description:"",welcome:null==e?void 0:e.welcome,prompt_library:null==e?void 0:e.prompt_library}),u("codegptplusbeta"),(0,Q.$)(),(0,$.q)({eventName:"clickOver",groupBy:"contextSelectorDropdown",target:e.name+"ContextDropdownUserAgent"}))}})]}),(0,a.jsxs)(E,{children:[(0,a.jsxs)(V,{children:[(0,a.jsx)(el.Z,{className:"!size-3"}),(0,a.jsx)("span",{className:"text-xs",children:"Docs"})]}),(0,a.jsx)(er,{title:"Docs",type:"agent",items:((null==d?void 0:d.flatMap(e=>e||[]))||[]).filter(e=>{var t;return!(null==e?void 0:null===(t=e.tags)||void 0===t?void 0:t.some(e=>e.toLowerCase().startsWith("llm")))}).map(e=>({id:e.id,name:e.name,image:e.image,isSelected:!1})),onItemClick:e=>{null!=e&&e.is_frozen||(c("codegptplusbeta",{id:e.id,label:e.name,fromMarketplace:!0,image:e.image,description:"",welcome:null==e?void 0:e.welcome,prompt_library:null==e?void 0:e.prompt_library}),u("codegptplusbeta"),(0,Q.$)(),(0,$.q)({eventName:"clickOver",groupBy:"contextSelectorDropdown",target:e.name+"ContextDropdownMarketplaceAgent"}))}})]})]})})]})})}let eo=e=>{let{trigger:t,data:l,onAdd:n}=e;return null};var ed=l(33145);let ec=function(){for(var e=arguments.length,t=Array(e),l=0;l<e;l++)t[l]=arguments[l];return e=>{t.forEach(t=>{"function"==typeof t?t(e):null!=t&&(t.current=e)})}},eu=(0,p.forwardRef)((e,t)=>{let{placeholder:l,onChange:n,onKeyDown:r,children:i,input:o,setInput:d}=e,[c,u]=(0,p.useState)([]),[m,x]=(0,p.useState)(0),[h,f]=(0,p.useState)(-1),[g,v]=(0,p.useState)(""),[b,j]=(0,p.useState)({bottom:0,left:0}),N=(0,p.useRef)(null),y=(0,p.useRef)([]),[w,k]=(0,p.useState)([""]),[C,z]=(0,p.useState)(0);(0,p.useImperativeHandle)(t,()=>N.current);let S=ec(N,t),M=(0,p.useMemo)(()=>p.Children.toArray(i).filter(Boolean).filter(e=>p.isValidElement(e)&&e.type===eo).map(e=>({trigger:e.props.trigger,data:e.props.data,onAdd:e.props.onAdd})),[i]);(0,p.useEffect)(()=>{let e=()=>{if(!N.current)return;let e=N.current,t=e.selectionStart,l=e.value.slice(0,t),n=e.value.slice(t),a=M.map(e=>e.trigger),s=new RegExp("(^|\\s)(".concat(a.join("|"),")\\S*$")),r=l.match(s);if(r&&(""===n||/\s/.test(n[0]))){let t=r[2],a=r.index+r[1].length,s=l.slice(a+1).toLowerCase();if("/"===t&&l+n!==t+s)return;let i=M.find(e=>e.trigger===t);if(i){let l=i.data.filter(e=>e.display.toLowerCase().includes(s));if(1===l.length&&l[0].display.toLowerCase()===s)u([]),f(-1),v("");else{u(l),f(a),x(0),v(t);let n=e.getBoundingClientRect(),s=Math.min(Math.max(...l.map(e=>8*e.display.length+40)),320),r=window.innerWidth,i=n.left;n.left+s>r&&(i=n.left-s),j({bottom:window.innerHeight-n.top,left:i})}}}else u([]),f(-1),v("")},t=N.current;return null==t||t.addEventListener("select",e),null==t||t.addEventListener("input",e),()=>{null==t||t.removeEventListener("select",e),null==t||t.removeEventListener("input",e)}},[b,M]),(0,p.useEffect)(()=>{let e=e=>{N.current&&!N.current.contains(e.target)&&(u([]),f(-1),v(""))};return document.addEventListener("click",e),()=>{document.removeEventListener("click",e)}},[]),(0,p.useEffect)(()=>{N.current&&N.current.focus()},[]);let P=e=>{if(-1!==h&&N.current){var t;let l=N.current,a=l.value.slice(0,h),s=l.value.slice(l.selectionStart),r="/"===g?"".concat(a).concat(g).concat(e.display," ").concat(s):"".concat(a);d(r),l.value=r;let i=h+g.length+e.display.length+1;l.setSelectionRange(i,i),u([]),f(-1),v("");let o=M.find(e=>e.trigger===g);null==o||null===(t=o.onAdd)||void 0===t||t.call(o,e),null==n||n(r)}},A=e=>{let t=w.slice(0,C+1);t.push(e),k(t),z(t.length-1)},_=()=>{if(C>0){z(C-1);let e=w[C-1];N.current&&(d(e),N.current.value=e),null==n||n(e)}},L=()=>{if(C<w.length-1){z(C+1);let e=w[C+1];N.current&&(d(e),N.current.value=e),null==n||n(e)}};return(0,a.jsxs)("div",{className:"relative h-full",children:[(0,a.jsx)("textarea",{ref:S,className:"mentions h-full max-h-[calc(100%-2px)] w-full resize-none overflow-auto bg-transparent px-1 text-sm text-foreground",onChange:e=>{e.preventDefault();let t=e.target.value;d(t),A(t),null==n||n(t)},onKeyDown:e=>{if(c.length>0&&("ArrowDown"===e.key?(e.preventDefault(),x(e=>{var t;let l=(e+1)%c.length;return null===(t=y.current[l])||void 0===t||t.scrollIntoView({block:"nearest"}),l})):"ArrowUp"===e.key?(e.preventDefault(),x(e=>{var t;let l=(e-1+c.length)%c.length;return null===(t=y.current[l])||void 0===t||t.scrollIntoView({block:"nearest"}),l})):"Enter"===e.key&&c.length>0?(e.preventDefault(),P(c[m])):"Escape"===e.key&&(u([]),f(-1),v(""))),0===c.length){if("z"===e.key&&(e.metaKey||e.ctrlKey)&&e.shiftKey?(e.preventDefault(),L()):"z"===e.key&&(e.metaKey||e.ctrlKey)?(e.preventDefault(),_()):"v"===e.key&&(e.metaKey||e.ctrlKey)&&(e.preventDefault(),(0,s.M1)().then(t=>{let{selectionStart:l,selectionEnd:n}=e.target,a=o.substring(0,null!=l?l:o.length)+t+o.substring(null!=n?n:o.length);d(a),N.current&&(N.current.value=a)})),"x"===e.key&&(e.metaKey||e.ctrlKey)){e.preventDefault();let{selectionStart:t,selectionEnd:l}=e.target,n=o.substring(null!=t?t:o.length,null!=l?l:o.length);(0,s.zp)(n);let a=o.substring(0,null!=t?t:o.length)+o.substring(null!=l?l:o.length);d(a),N.current&&(N.current.value=a)}else null==r||r(e)}},placeholder:l}),c.length>0&&o.trim()&&(0,a.jsxs)("div",{className:"fixed z-[9999] max-h-56 w-full max-w-80 overflow-auto rounded-medium border bg-content2 p-2 shadow-md",style:{bottom:"".concat(b.bottom,"px"),left:"".concat(b.left,"px")},children:[(0,a.jsx)("div",{className:"bg-content2 py-1 text-xs uppercase text-default-500",children:"Short cuts"}),c.slice(0,10).map((e,t)=>{let l=e.display.includes(".")?e.display.split(".").at(-1):null;return(0,a.jsx)("div",{ref:e=>{y.current[t]=e},className:"flex cursor-pointer items-center rounded-small p-2 ".concat(t===m?"bg-foreground/10":""," ").concat(l&&"command-with-icon"),...l&&{"data-language":l,"data-id":l},onMouseDown:()=>P(e),onMouseEnter:()=>x(t),children:(0,a.jsxs)("div",{className:"".concat(l?"ml-1":""," flex items-center gap-2"),children:[e.avatar&&(0,a.jsx)(ed.default,{src:e.avatar,alt:e.display,className:"size-4 rounded-full"}),(0,a.jsx)("span",{className:"text-sm",children:e.display})]})},e.id)})]})]})});eu.displayName="MentionTextarea";var em=e=>{let{agents:t,selectedModelOrAgent:l}=e,{setCurrentProviderModel:n}=(0,W.o)(),{setSelectedProvider:s}=(0,W.Y)();return t.map(e=>(0,a.jsx)(U,{className:"cursor-pointer rounded-md hover:bg-content3",onClick:()=>{null!=e&&e.is_frozen||(n("codegptplusbeta",{id:e.id,label:e.name,fromMarketplace:!0,image:e.image,description:"",welcome:null==e?void 0:e.welcome,prompt_library:null==e?void 0:e.prompt_library}),s("codegptplusbeta"),(0,Q.$)(),(0,$.q)({eventName:"clickOver",groupBy:"modelSelectorDropdown",target:e.name+"ModelDropdownMarketplaceAgent"}))},children:(0,a.jsxs)("div",{className:"flex w-full items-center justify-between gap-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(en.J,{disableSkeleton:!0,src:e.image||"/logotypes/custom.png",alt:e.name,loading:"eager",classNames:{wrapper:"agent-avatar size-5 shrink-0 rounded-full shrink-0 bg-content3 border border-content3",img:"agent-avatar size-5 shrink-0 rounded-full shrink-0 bg-content3 border border-content3 opacity-100 block"}}),(0,a.jsx)("span",{className:"relative w-full overflow-hidden text-ellipsis whitespace-nowrap break-words text-left text-xs leading-tight",children:e.name})]}),(null==l?void 0:l.id)===e.id&&(0,a.jsx)(es.Z,{className:"size-4"})]})},e.id))},ep=l(98720),ex=l(77115);function eh(e){var t;let{selectedModelOrAgent:l,isLoading:n}=e,[r,i]=(0,p.useState)([]),{isPopoverOpen:o,setIsPopoverOpen:d}=(0,W.Y)(),c=(0,p.useRef)(null),[u,m]=(0,p.useState)("top");(0,p.useEffect)(()=>{(0,s.Qn)().then(i)},[]),(0,p.useEffect)(()=>{if(!c.current)return;let e=c.current,t=()=>{if(!c.current)return;let{top:e}=c.current.getBoundingClientRect();m(e<window.innerHeight/2?"bottom":"top")},l=new ResizeObserver(t);return l.observe(c.current),window.addEventListener("scroll",t),window.addEventListener("resize",t),()=>{e&&l.unobserve(e),l.disconnect(),window.removeEventListener("scroll",t),window.removeEventListener("resize",t)}},[]);let x=(0,p.useMemo)(()=>r.filter(e=>e.reasoning),[r]),h=(0,p.useMemo)(()=>r.filter(e=>!e.reasoning),[r]);return(0,a.jsx)("div",{className:"select-none",children:(0,a.jsxs)(T,{children:[(0,a.jsx)(R,{asChild:!0,children:(0,a.jsxs)("button",{ref:c,className:"flex shrink-0 cursor-pointer select-none items-center gap-2 rounded-md py-0.5 text-xs leading-normal text-default-500",disabled:o||n,onClick:()=>{(0,$.q)({eventName:"clickOver",groupBy:"modelSelectorDropdown",target:"modelDropdownButton"})},children:[n?(0,a.jsx)(ep.Z,{size:3,color:"current"}):(null==l?void 0:l.label)&&(0,a.jsx)("div",{className:"h-3.5 w-3.5 shrink-0 rounded-full",children:(0,a.jsx)(en.J,{loading:"eager",disableSkeleton:!0,src:l&&(null==l?void 0:l.image)?null==l?void 0:l.image:(0,w.k)(null==l?void 0:l.label),alt:null!==(t=null==l?void 0:l.label)&&void 0!==t?t:"model",className:"h-3.5 w-3.5 shrink-0 rounded-full"})}),(0,a.jsxs)("div",{className:"relative flex w-full items-center justify-center gap-2 overflow-hidden text-start lowercase",children:[(0,a.jsx)("span",{className:"w-full truncate text-xs",children:(null==l?void 0:l.label.length)>0?null==l?void 0:l.label:"Select Your AI"}),(0,a.jsx)(ex.Z,{className:"size-4 shrink-0 text-default-500"})]})]})}),(0,a.jsxs)(q,{className:"w-56",side:u,sideOffset:10,alignOffset:-6,align:"start",children:[h.length>0&&(0,a.jsx)(em,{agents:h,selectedModelOrAgent:l}),x.length>0&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(Y,{className:"bg-content3"}),(0,a.jsx)(B,{children:"Reasoning Models"}),(0,a.jsx)(em,{agents:x,selectedModelOrAgent:l})]}),(0,a.jsx)("button",{className:"w-full cursor-pointer bg-transparent px-2 py-1.5 text-right text-xs text-default-400 underline underline-offset-2 hover:bg-transparent hover:text-default-500",onClick:()=>{(0,$.q)({eventName:"clickOver",groupBy:"modelSelectorDropdown",target:"3rdPartyModelsDropdownOpenModal"}),d(!0)},children:"View More"})]})]})})}var ef=l(24090);let eg={english:{explain:"Act as an experienced programming mentor. Analyze and explain the following code clearly and concisely, highlighting its main purpose, functionality, and key concepts used.",comment:"Act as a senior developer. Add concise and descriptive comments to each relevant section of the following code, explaining the purpose of each line or block where necessary. Keep comments brief and helpful.",fix:"Act as a senior software developer. Review and fix any issues in the following code. Provide only the corrected code and a brief list of changes. If no fixes are needed, respond with: 'No issues found to fix.'",document:"Act as an expert developer. Add standard code documentation (using the language's conventional format like docstrings, JSDoc, etc.) to the following code. Provide only the documented version of the code without additional explanations or markdown reports.",refactor:"Act as a senior software architect. Analyze and improve the following code by applying SOLID principles, design patterns, and best practices. Maintain the original functionality while optimizing its structure, readability, and maintainability.",unitTest:"Act as a software testing specialist. Create comprehensive unit tests for the following code, covering positive, negative, and edge cases. Use testing best practices and the language's standard testing framework.",debug:"Act as a debugging expert. Analyze the following code to identify and resolve any bugs or issues. Provide only the corrected code and a brief explanation of the debugging process."}},ev=async()=>{let e;if(n)return n;try{e=await fetch("https://storage.codegpt.co/vscode/prompts.json")}catch(e){return Object.keys(eg.english)}return e.ok?n=Object.keys((await e.json()).spanish):null},eb=async()=>{var e;let t=await ev();return[...ef.Z&&(null===ef.Z||void 0===ef.Z?void 0:null===(e=ef.Z.plan)||void 0===e?void 0:e.toLowerCase())!=="free"?[{id:"stackOverflow",display:"Stack Overflow"},{id:"codeBuilder",display:"Code Builder"},{id:"planning",display:"Planning"}]:[],...t.map(e=>{var t;return{id:e,display:(null==e?void 0:null===(t=e.at(0))||void 0===t?void 0:t.toUpperCase())+(null==e?void 0:e.slice(1))}})]},ej=async()=>[...await (0,s.yR)()].map(e=>{let t=e.split("/"),l=t.length>3?".../".concat(t[t.length-3],"/").concat(t[t.length-2],"/").concat(t[t.length-1]):e;return{id:e,display:l}}),eN=async()=>{var e;return[...ef.Z&&(null===ef.Z||void 0===ef.Z?void 0:null===(e=ef.Z.plan)||void 0===e?void 0:e.toLowerCase())!=="free"?[{id:"manual",display:"Select code"},{id:"deepinsights",display:"Deep insights"}]:[]]};var ey=l(87904);let ew=async()=>new Promise(async e=>{setTimeout(async()=>{e(await (0,s.gp)().catch(()=>!1))},500)});function ek(){let{data:e,mutate:t,isLoading:l,isValidating:n}=(0,ey.ZP)("/autoSelect",()=>ew(),{shouldRetryOnError:!1,errorRetryCount:0,revalidateOnFocus:!0,refreshInterval:6e4});return{isAutoSelectEnabled:e,isLoading:null!=l?l:n,mutate:()=>new Promise(e=>{setTimeout(()=>{t().then(t=>{e(t)})},300)})}}var eC=l(59625);let ez=(0,eC.Ue)(e=>({isOpen:!1,setOpen:t=>e(()=>({isOpen:t}))}));var eS=l(59152),eM=l(75945),eP=l(21393),eA=l(53974),e_=l(2655),eL=l(32489),eI=l(54080),eO=l(35970);let eZ=(0,eC.Ue)(e=>({image:{base64:"",name:""},setImage:t=>{let{base64:l,name:n}=t;return e({image:{base64:l,name:n}})},showTooltip:!1,setShowTooltip:t=>e({showTooltip:t})}));var eD=l(51345),eT=l(43613),eR=l(19967),eF=l(20939),eE=l(3974),eV=l(60332),eH=l(1346),eq=l(60649);function eU(e){var t,l;let{isLoading:n}=e,{selectedProvider:r,setSelectedProvider:i}=(0,W.Y)(),{userData:o}=(0,ef.v)(),{mutate:d}=(0,eO.T)(),c=(0,eD.U)(e=>e.setOpen),{image:u,setImage:m,setShowTooltip:p}=eZ(),{loginFromEventSource:x}=(0,eT.R)(),h=async e=>{let t=e[0],l=t.name.split(".").pop(),n=t.name;if(["png","jpg","jpeg","webp"].includes("image/"+l)){_.Am.error("File type not supported",{position:"top-center",dismissible:!0,duration:5e3});return}try{let e=await new Promise((e,l)=>{let n=new FileReader;n.readAsDataURL(t),n.onload=()=>e(n.result),n.onerror=e=>l(e)});m({base64:e,name:n}),p(!0)}catch(e){_.Am.error("Error uploading file")}},f=()=>{(0,$.q)({eventName:"clickOver",target:"uploadImage"})},{getInputProps:g,open:v}=(0,eH.uI)({onDrop:h,multiple:!1,useFsAccessApi:!1,noClick:!0,accept:{"image/png":[".png"],"image/jpeg":[".jpeg",".jpg"],..."ollama"!==r&&{"image/webp":[".webp"]}}});return["codegptplusbeta","ollama"].includes(r)?(null==o?void 0:null===(t=o.plan)||void 0===t?void 0:t.toLowerCase())!=="free"?(0,a.jsxs)("button",{onClick:()=>{f(),u.base64?m({base64:"",name:""}):v()},disabled:n,className:"relative flex w-[1.4rem] shrink-0 cursor-pointer select-none items-center justify-center gap-1 overflow-hidden rounded-md border text-xs leading-normal",children:[(0,a.jsx)("input",{...g(),className:"hidden"}),u.base64?(0,a.jsx)(eE.Z,{className:"size-3 shrink-0 text-red-400/80"}):(0,a.jsx)(eV.Z,{className:"size-3 shrink-0 text-default-700"})]}):(0,a.jsx)(eP.e,{classNames:{content:"bg-content2",base:"p-4 bg-transparent"},offset:0,content:(0,a.jsxs)("div",{className:"grid max-w-xs gap-4 px-1 py-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("p",{className:"text-xs font-bold uppercase",children:"Vision"}),(0,a.jsx)(eq.RO,{})]}),(0,a.jsx)("span",{className:"text-md text-default-500",children:"Upload an image to use as a prompt for the model. Only available in CodeGPT and Ollama model providers."}),(0,a.jsxs)("div",{className:"mt-1 flex gap-2",children:[(0,a.jsx)(eF.A,{className:"flex shrink-0 cursor-pointer select-none items-center gap-1 rounded-md border px-1.5 text-xs leading-normal",size:"sm",onPress:async()=>{var e;x({type:"signup"}),(0,$.q)({eventName:"ads",object:"adButton",message:"Vision ".concat((null==o?void 0:null===(e=o.plan)||void 0===e?void 0:e.includes("trial"))?"Upgrade":"SignUp")})},children:(null==o?void 0:null===(l=o.plan)||void 0===l?void 0:l.includes("trial"))?"Upgrade":"Sign Up"}),(0,a.jsx)(eF.A,{variant:"bordered",className:"w-fit border",size:"sm",onPress:()=>{(0,s.os)("https://docs.codegpt.co/docs/tutorial-features/vision")},children:"Learn more"})]})]}),children:(0,a.jsx)("button",{onClick:()=>{f(),"codegptplusbeta"!==r&&((0,Q.$)(),i("codegptplusbeta"),d().then(()=>{c(!0)}))},className:"flex shrink-0 cursor-pointer select-none items-center gap-1 rounded-md border px-1.5 py-0.5 text-xs leading-normal text-default-500",children:(0,a.jsx)(eR.Z,{className:"size-3.5 shrink-0"})})}):null}function eB(e){var t;let l=g.a2.find(t=>t.value===e);return null!==(t=null==l?void 0:l.label)&&void 0!==t?t:e}function eY(e){var t,l,n;let{onSubmit:r,isLoading:i,stop:o,clearChat:d,currentModel:c,modelState:u,providerState:m,rounded:x,placeholder:h}=e,[f,g]=(0,p.useState)([]),v=(0,p.useRef)(""),[b,j]=(0,p.useState)([]),{files:N,setFiles:y,selectedContextLevel:w,setSelectedContextLevel:k}=(0,G.J)(),[C,z]=(0,p.useState)([]),[S,M]=(0,p.useState)(""),P=(0,eA.Nr)(S,500),[A,_]=(0,p.useState)(null),L=ez(e=>e.setOpen),{isAutoSelectEnabled:I}=ek(),{selectedProvider:O}=(0,W.Y)(),Z="codegptplusbeta"===O,{userData:D}=(0,ef.v)(),T=(0,p.useRef)(null),[R,F]=(0,p.useState)({id:"",label:"",image:"",description:"",fromMarketplace:!1});(0,p.useEffect)(()=>{""===R.id&&(0,s.us)().then(e=>{F(e)})},[null==R?void 0:R.id]);let E=(null===(t=u[m])||void 0===t?void 0:t.id)?u[m]:R,V=(0,p.useCallback)(async()=>{var e,t,l,n,a,o,d,c;if(i)return;let u=(null==A?void 0:null===(e=A.selectedText)||void 0===e?void 0:e.trim().length)>0,m="```".concat(null!==(d=null==A?void 0:A.language)&&void 0!==d?d:"md","\n").concat(null==A?void 0:null===(l=A.selectedText)||void 0===l?void 0:null===(t=l.replaceAll(/\t/g,""))||void 0===t?void 0:t.trim(),"\n```\n"),p=["planning","codebuilder","stackoverflow"].includes(v.current.toLowerCase()),x="";"manual"!==w.id&&""!==w.id&&Z&&(x=w.id),(await (0,s.Qn)()).some(e=>!e.reasoning&&e.id===E.id)&&0===N.length&&!u&&""===x&&(x="codebase"),console.log({externalInput:(null==A?void 0:null===(n=A.selectedText)||void 0===n?void 0:n.trim().length)>0?"".concat(S,"\n"):null!=S?S:"",hasSelection:u,codeSelection:m});let h=null!==(c=null===(a=T.current)||void 0===a?void 0:a.value)&&void 0!==c?c:"";r({...u?{codeSelection:m}:{},externalInput:(null==A?void 0:null===(o=A.selectedText)||void 0===o?void 0:o.trim().length)>0?"".concat(S,"\n"):null!=S?S:"",chatRequestOptions:{options:{headers:{"Content-Type":"application/json",...v.current&&!p?{promptType:v.current}:{},...p?{customPromptType:v.current.toLowerCase()}:{},...x?{contextLevel:x}:{},...N.length>0?{files:N}:{}}}}}).then(e=>{!e&&(M(h),T.current&&(T.current.value=h))}),v.current="",I||_(null),M(""),T.current&&(T.current.value="")},[N,null==A?void 0:A.language,null==A?void 0:A.selectedText,S,I,Z,i,r,w.id]);return(0,p.useEffect)(()=>{let e=async e=>{let{selectedText:t,promptType:l}=e.data;if(!t){_(null);return}_(e.data),"selection"!==l&&"copyFromTerminal"!==l&&(v.current=l,V())};return window.addEventListener("message",e),()=>window.removeEventListener("message",e)},[V]),(0,p.useEffect)(()=>{let e=()=>{eb().then(e=>{g(e)}),ej().then(e=>{j(e)}),eN().then(e=>{z(e)})};e(),setTimeout(()=>{e()},1e3)},[null==D?void 0:D.loggedIn]),(0,p.useEffect)(()=>{0===S.trim().length&&(v.current="")},[P,S]),(0,a.jsx)("div",{className:"flex h-full w-full flex-col items-center justify-center gap-2 text-sm",children:(0,a.jsxs)("div",{className:"relative grid h-full w-full grid-rows-[auto_1fr_auto] bg-content1 text-foreground dark:bg-content2 ".concat(x?"rounded-xl border border-content3 dark:shadow-[-10rem_-3rem_10rem_-3rem_#7a00ff30,10rem_-3rem_10rem_-3rem_#dd00ff30,0_1rem_1rem_-0.5rem_#0c161e38,0_0px_0px_1px_rgba(255,255,255,.01)]":"border-t border-content3"),children:[(0,a.jsxs)("div",{className:"relative z-10 flex w-full items-center gap-2 overflow-hidden overflow-x-auto p-2 text-xs text-default-500 ".concat(x?"rounded-t-xl":"backdrop-blur-sm"),children:[(0,a.jsx)(ei,{filesList:b}),"deepinsights"===w.id&&(0,a.jsx)(eP.e,{content:"Use code graph to enhance the AI context",children:(0,a.jsxs)("button",{className:"flex shrink-0 cursor-pointer select-none items-center gap-1 rounded-md border px-1.5 py-0.5 text-xs leading-normal text-default-500",children:[(0,a.jsx)(e_.Z,{className:"size-3"}),(0,a.jsx)("span",{className:"shrink-0 overflow-hidden text-ellipsis whitespace-pre break-words",children:w.display}),(0,a.jsx)("span",{onClick:()=>{k(G.W[0])},children:(0,a.jsx)(eL.Z,{className:"size-3 shrink-0 cursor-pointer"})})]})}),A&&(0,a.jsxs)("button",{"data-type":"userFile",className:"flex shrink-0 cursor-pointer select-none items-center gap-1 rounded-md border px-1.5 py-0.5 text-xs leading-normal text-default-500","data-id":eB(null!==(l=null==A?void 0:A.language)&&void 0!==l?l:"md"),"data-language":eB(null!==(n=null==A?void 0:A.language)&&void 0!==n?n:"md"),children:[(0,a.jsx)("span",{className:"shrink-0 overflow-hidden text-ellipsis whitespace-pre break-words",children:null==A?void 0:A.fileName}),(0,a.jsx)("span",{className:"ml-auto flex items-center gap-1",children:A.from&&(0,a.jsxs)(a.Fragment,{children:[A.from.line+1,":",A.to.line]})}),(0,a.jsx)("span",{onClick:()=>{_(null)},children:(0,a.jsx)(eL.Z,{className:"size-3 shrink-0 cursor-pointer"})})]}),(0,a.jsx)("div",{className:"flex w-full select-none gap-2 overflow-x-auto py-1 scrollbar-hide",children:N.map(e=>{let{name:t,path:l,fromLine:n,toLine:s}=e,r=l.split("/"),i=r.length>3?".../".concat(r[r.length-3],"/").concat(r[r.length-2],"/").concat(r[r.length-1]):l;return(0,a.jsx)(eP.e,{content:i,children:(0,a.jsxs)("button",{className:"flex shrink-0 cursor-pointer select-none items-center gap-1 rounded-md border px-1.5 py-0.5 text-xs leading-normal text-default-500","data-language":l.split(".").pop(),children:[(0,a.jsx)("p",{className:"max-w-48 overflow-hidden text-ellipsis whitespace-nowrap",children:t}),(0,a.jsxs)("span",{className:"ml-auto flex items-center gap-1 text-xs",children:[(n||s)&&(0,a.jsxs)(a.Fragment,{children:[(null!=n?n:0)+1,":",(null!=s?s:0)+1]}),(0,a.jsx)("span",{onClick:()=>{y(N.filter(e=>e.path!==l))},children:(0,a.jsx)(eL.Z,{className:"size-3 shrink-0 cursor-pointer"})})]})]})},l)})}),(0,a.jsx)("div",{className:"ml-auto flex",children:(0,a.jsx)(eP.e,{content:"Configuration",children:(0,a.jsx)("button",{className:"flex shrink-0 cursor-pointer select-none items-center gap-1 rounded-md border border-transparent p-0.5 text-xs leading-normal hover:border-content4",disabled:i,onClick:()=>{(0,$.q)({eventName:"clickOver",target:"openProviderSettingsTextarea"}),L(!0)},children:(0,a.jsx)(eS.Z,{className:"size-4 shrink-0"})})})})]}),(0,a.jsx)("div",{className:"editor h-full min-h-10 w-full overflow-auto px-2 py-1 transition-all",children:(0,a.jsxs)(eu,{ref:T,placeholder:h,input:S,setInput:M,onChange:e=>{M(e)},onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),V())},children:[(0,a.jsx)(eo,{trigger:"/",data:f,onAdd:e=>{v.current=e.id}}),(0,a.jsx)(eo,{trigger:"#",data:b,onAdd:e=>{let t=e.id,l=t.split("/").pop()||t;N.some(e=>e.path===t)||y([...N,{name:l,path:t}])}}),Z?(0,a.jsx)(eo,{trigger:"@",data:C,onAdd:e=>{k({id:e.id,title:e.display,description:""})}}):(0,a.jsx)(a.Fragment,{})]})}),(0,a.jsxs)("div",{className:"flex w-full items-center justify-between p-2",children:[(0,a.jsx)(eh,{selectedModelOrAgent:E,isLoading:i}),(0,a.jsx)("div",{className:"flex justify-end gap-2",children:i?i&&(0,a.jsxs)("button",{className:"flex shrink-0 cursor-pointer select-none items-center gap-1 rounded-md border px-1.5 text-xs leading-normal",disabled:!i,onClick:async()=>{o(),v.current=""},children:[(0,a.jsx)(eM.Z,{className:"h-4 w-4 shrink-0 text-red-400/80"}),(0,a.jsx)("span",{className:"text-red-400/80",children:"Stop"})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(eU,{isLoading:i}),(0,a.jsxs)("button",{onClick:()=>V(),className:"flex shrink-0 cursor-pointer select-none items-center gap-1 rounded-md border px-1.5 text-xs leading-normal",disabled:i||!S,children:[(0,a.jsx)(eI.Z,{className:"size-3"}),"Send"]})]})})]})]})})}var eK=l(47776),eG=l(3805),eJ=l(99376);let eW=async e=>{let{provider:t,port:l}=e,n={maxTokens:512,temperature:0,windowMemory:10},a=await fetch("http://localhost:54112/".concat(l,"/api/").concat(t,"/config")).then(e=>e.json()).catch(()=>n);return{...n,...a}};var e$=l(59055),eQ=l(62393),eX=l(64959),e0=l(73406);function e1(){var e,t,l;let{configuration:n,mutate:r}=function(){let e=(0,W.Y)(e=>e.selectedProvider),t=(0,eJ.usePathname)().split("/")[1],{data:l,mutate:n,isLoading:a,isValidating:s}=(0,ey.ZP)("/api/agents/".concat(e,"/config"),()=>eW({provider:e,port:t}),{shouldRetryOnError:!1,errorRetryCount:0,revalidateOnFocus:!1,refreshInterval:0});return{configuration:l,isLoading:null!=a?a:s,mutate:()=>new Promise(e=>{setTimeout(()=>{n().then(t=>{e(t)})},300)})}}(),i=(0,W.Y)(e=>e.selectedProvider),o=eK.Z[i],{isAutoSelectEnabled:d,mutate:c}=ek(),u=null!==(t=null==n?void 0:n.temperature)&&void 0!==t?t:0,m=null!==(l=null==n?void 0:n.windowMemory)&&void 0!==l?l:10,[x,h]=(0,p.useState)(!1),[f,g]=(0,p.useState)(u?u>.7?"creative":u>.2?"balanced":"precise":"precise"),[v,b]=(0,p.useState)(!1),{isOpen:j,setOpen:N}=ez();(0,p.useEffect)(()=>{b(i.toLowerCase().includes("codegpt"))},[i]);let y=async(e,t)=>{h(!0),(0,$.q)({eventName:"changeValue",target:t,value:e.toString()}),"MaxTokens"===t&&await (0,s.af)(e.toString(),i),"Temperature"===t&&await (0,s.MQ)(e.toString(),i),"WindowMemory"===t&&await (0,s.Dz)(e.toString(),i),r().then(()=>{_.Am.success("Configuration updated"),h(!1)})};return(0,a.jsx)(eG.Vq,{open:j,onOpenChange:N,children:(0,a.jsxs)(eG.cZ,{children:[(0,a.jsxs)(eG.fK,{children:[(0,a.jsxs)(eG.$N,{className:"flex items-center gap-2",children:[(0,a.jsx)(eS.Z,{className:"h-6 w-6 shrink-0 text-default-500"}),"Global Configuration"]}),(0,a.jsx)(eG.Be,{children:"Configure global parameters here"})]}),(0,a.jsx)("div",{className:"grid gap-8",children:(0,a.jsx)(eQ.i,{isSelected:d,onValueChange:async()=>{(0,$.q)({eventName:"clickOver",target:"optionMenuActiveListeningButton"}),await (0,s.KC)(!d),await c()},classNames:{base:(0,w.cn)("inline-flex w-full max-w-md flex-row-reverse items-start","justify-between cursor-pointer rounded-md gap-2 p-4 border","data-[selected=true]:border"),wrapper:"p-0 h-5 w-9 overflow-visible",thumb:(0,w.cn)("w-4 h-4","group-data-[hover=true]:border-primary","group-data-[selected=true]:ms-5","group-data-[pressed=true]:w-5","group-data-[selected]:group-data-[pressed]:ms-4")},children:(0,a.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,a.jsx)("p",{children:"Enable current file context"}),(0,a.jsx)("p",{className:"text-tiny text-default-400",children:"When enabled, the AI will be able to understand the current file open in the IDE"})]})})}),!v&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(eX.j,{}),(0,a.jsxs)(eG.fK,{children:[(0,a.jsxs)(eG.$N,{className:"flex items-center gap-2",children:[(0,a.jsx)(eS.Z,{className:"h-6 w-6 shrink-0 text-default-500"}),o.name," Settings"]}),(0,a.jsx)(eG.Be,{children:"Ensure to properly configure your providers parameters here"})]}),(0,a.jsx)(eX.j,{}),(0,a.jsxs)("div",{className:"grid gap-8 pt-4",children:[o.temperature&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"grid gap-2",children:[(0,a.jsx)(e0.L,{isDisabled:x,label:(0,a.jsxs)("p",{className:"flex items-center justify-between gap-2",children:[(0,a.jsx)("span",{children:"Conversation Style"}),(0,a.jsx)("span",{children:"|"}),(0,a.jsx)("span",{children:f})]}),"aria-label":"Temperature",color:"primary",minValue:0,maxValue:1,step:.01,defaultValue:u,classNames:{label:"capitalize"},onChangeEnd:e=>{g(Number(e)?Number(e)>.7?"creative":Number(e)>.2?"balanced":"precise":"precise"),y(Number(e),"Temperature")}}),(0,a.jsxs)("p",{className:"flex gap-1 text-xs text-default-500",children:[(0,a.jsx)(e$.Z,{className:"h-4 w-4 shrink-0"}),"The temperature or creativity of the AI model. Higher values can lead to more creative responses but may be less precise."]})]}),(0,a.jsx)(eX.j,{})]}),(0,a.jsxs)("div",{className:"grid gap-2",children:[(0,a.jsx)(e0.L,{isDisabled:x,label:"Memory","aria-label":"windowMemory",minValue:0,maxValue:v?10:100,defaultValue:m,onChangeEnd:e=>y(Number(e),"WindowMemory")}),(0,a.jsxs)("p",{className:"flex gap-1 text-xs text-default-500",children:[(0,a.jsx)(e$.Z,{className:"h-4 w-4 shrink-0"}),"Number of previous messages to consider when generating a response."]})]})]}),o.config_info_link&&o.config_info_link.length>0&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(eX.j,{}),(0,a.jsx)(eG.cN,{children:(0,a.jsx)("p",{className:"mx-auto w-full text-center text-xs text-default-500",children:null===(e=o.config_info_link)||void 0===e?void 0:e.map((e,t)=>(0,a.jsx)("span",{children:e.label&&(0,a.jsx)("a",{href:e.link,target:"_blank",rel:"noreferrer",onClick:()=>(0,s.Yo)(e.link),children:e.label})},t))})})]})]})]})})}var e2=l(12844);let e5=e=>(0,a.jsx)("svg",{"aria-hidden":"true",fill:"none",focusable:"false",height:"1em",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,viewBox:"0 0 24 24",width:"1em",...e,children:(0,a.jsx)("polyline",{points:"20 6 9 17 4 12"})}),e3=async e=>{let{port:t}=e;return new Promise(async e=>{setTimeout(async()=>{let l={isEnabled:!1,maxTokens:500,provider:"CodeGPT Plus",model:"Plus",delay:1200},n=await fetch("http://localhost:54112/".concat(t,"/api/autocomplete/config")).then(e=>e.json()).catch(()=>l);e({...l,...n})},500)})};function e4(){let e=(0,eJ.usePathname)().split("/")[1],{data:t,mutate:l,isLoading:n,isValidating:a}=(0,ey.ZP)("/api/autocomplete/config",()=>e3({port:e}),{shouldRetryOnError:!1,errorRetryCount:0,revalidateOnFocus:!1,refreshInterval:6e4});return{configuration:t,isLoading:null!=n?n:a,mutate:()=>new Promise(e=>{setTimeout(()=>{l().then(t=>{e(t)})},300)})}}var e6=l(44514);let e8=(0,eC.Ue)(e=>({isOpen:!1,setOpen:t=>e(()=>({isOpen:t}))}));var e9=l(32924),e7=l(812),te=l(62126),tt=l(70598);function tl(){var e;let[t,l]=(0,p.useState)(""),[n,r]=(0,p.useState)(!1),[i,o]=(0,p.useState)(0),[d,c]=(0,p.useState)(""),{providers:u,mutate:m}=(0,e6.k)(),{configuration:x,mutate:h}=e4(),{isOpen:f,setOpen:g}=e8(),v=-1!==u.findIndex(e=>{var t,l;return e.link===(null==x?void 0:null===(t=x.provider)||void 0===t?void 0:t.toLowerCase())&&(null===(l=e.installedModels)||void 0===l?void 0:l.includes(null==x?void 0:x.model))}),b=u.flatMap(e=>{var t,l;return(null==e?void 0:null===(t=e.autocompleteModels2)||void 0===t?void 0:t.length)?e.autocompleteModels2.map(t=>({provider:e.name,model:t.id,label:t.label,link:e.link})):(null==e?void 0:null===(l=e.autocompleteModels)||void 0===l?void 0:l.length)?e.autocompleteModels.map(t=>({provider:e.name,model:t,link:e.link})):[]}),j=async(e,t)=>{console.log({value:e,type:t}),l(t),"Model"===t&&e.currentKey&&await (0,s.wb)(e.currentKey),"Enabled"===t&&await (0,s.mt)(e),"MaxTokens"===t&&await (0,s.Fc)(e),"Delay"===t&&await (0,s.$v)(e),h().then(()=>l(""))},N=async e=>{var t;if(!await (0,s._f)()){_.Am.error("Ollama is not running,",{duration:3e3,action:(0,a.jsx)(eF.A,{color:"default",variant:"light",size:"sm",className:"h-auto p-1 underline",onPress:()=>{(0,s.Yo)("https://docs.codegpt.co/docs/tutorial-ai-providers/ollama")},children:"Learn More"})});return}r(!0),c(e);let l=_.Am.loading((0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-foreground",children:[(0,a.jsxs)("span",{children:["Downloading ",e," model"]}),(0,a.jsx)("button",{onClick:()=>_.Am.dismiss(l),children:"x"})]})),n=null===(t=(await fetch("http://localhost:54112/1/api/ollama/pull",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e})})).body)||void 0===t?void 0:t.getReader();if(!n)throw Error("No reader available");let d=new TextDecoder;(async()=>{for(;;){let{done:e,value:t}=await n.read();if(e)break;let a=d.decode(t);try{a.includes('{"status":"success"}')&&(_.Am.success("Model downloaded successfully"),100!==i&&o(100),m(),_.Am.dismiss(l),setTimeout(()=>{r(!1),o(0),c("")},5e3));let{completed:e,total:t}=JSON.parse(a);if(e&&t){let l=Math.floor(parseInt(e)/parseInt(t)*100);l!==i&&o(l)}}catch(e){}}})()},y=null===(e=b.find(e=>(0,e9.Xz)(e.provider)===(null==x?void 0:x.provider)))||void 0===e?void 0:e.provider;return(0,a.jsx)(eG.Vq,{open:f,onOpenChange:g,children:(0,a.jsxs)(eG.cZ,{className:"",children:[(0,a.jsxs)(eG.fK,{children:[(0,a.jsx)(eG.$N,{children:"AI code auto-completion"}),(0,a.jsx)(eG.Be,{children:"Predict and offer code suggestions as you program in the editor"})]}),(0,a.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,a.jsx)("section",{className:"grid w-full",children:(0,a.jsx)("div",{className:"flex items-center justify-between",children:(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)("p",{className:"grid text-sm",children:[(0,a.jsx)("span",{children:"Status"}),(0,a.jsx)("span",{className:"text-xs text-default-500",children:(null==x?void 0:x.isEnabled)?"Enabled":"Disabled"})]}),"Enabled"===t?(0,a.jsx)(eF.A,{size:"sm",variant:"bordered",isLoading:"Enabled"===t,endContent:(0,a.jsx)("span",{children:"Loading"})}):(0,a.jsx)(eQ.i,{isDisabled:"Enabled"===t,color:"primary",onValueChange:()=>j(!(null==x?void 0:x.isEnabled),"Enabled"),isSelected:null==x?void 0:x.isEnabled,startContent:(0,a.jsx)(e5,{className:"h-3 shrink-0"})})]})})}),(null==x?void 0:x.isEnabled)&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(eX.j,{}),(0,a.jsxs)("section",{className:"grid gap-2",children:[(0,a.jsx)("p",{className:"text-sm",children:"AI Model"}),(0,a.jsx)(e7.g,{placeholder:"Completion Model",selectedKeys:["".concat(y," - ").concat(null==x?void 0:x.model)],className:"w-full",classNames:{popoverContent:"pointer-events-auto",trigger:"border bg-content3 shadow"},fullWidth:!0,isLoading:"Model"===t,onSelectionChange:e=>j(e,"Model"),"aria-label":"Completion Model",renderValue:()=>{var e;return(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(e2.T,{provider:null!==(e=null==x?void 0:x.provider)&&void 0!==e?e:"codegpt",className:"border-0",width:24,height:24}),(0,a.jsxs)("p",{className:"grid",children:[(0,a.jsx)("span",{className:"text-sm",children:null==x?void 0:x.model}),(0,a.jsx)("span",{className:"text-xs text-default-500",children:null==x?void 0:x.provider})]})]},null==x?void 0:x.provider)},children:b.map(e=>(0,a.jsx)(te.R,{value:"".concat(e.provider," - ").concat(e.model),textValue:(null==e?void 0:e.label)?"".concat(e.model,":").concat(e.label):e.model,startContent:(0,a.jsx)(e2.T,{provider:e.link,width:24,height:24}),children:(0,a.jsxs)("p",{className:"flex flex-col",children:[(0,a.jsx)("span",{className:"text-sm",children:e.model}),(0,a.jsxs)("span",{className:"text-xs text-default-500",children:[null==e?void 0:e.provider,(null==e?void 0:e.label)&&" - ".concat(e.label)]})]})},"".concat(e.provider," - ").concat(e.model)))}),(null==x?void 0:x.provider)==="Ollama"&&!v&&!n&&(0,a.jsx)(eF.A,{color:"default",variant:"bordered",size:"md",className:"border- border bg-content4 shadow-md",onPress:()=>{console.log("download model"),(null==x?void 0:x.model)&&N(null==x?void 0:x.model)},children:"Download Model"},"downloadModel"),n&&(0,a.jsx)(tt.W,{label:"Downloading ".concat(d," model"),"aria-label":"Downloading...",size:"sm",autoFocus:!0,value:i,color:"primary",showValueLabel:!0,className:"my-auto max-w-md"}),(null==x?void 0:x.provider)!=="Ollama"&&(0,a.jsx)("div",{className:"mt-2 flex items-center justify-between gap-8 rounded-xl border border-content3 p-3",children:(0,a.jsxs)("p",{className:"text-xs text-default-500",children:["The model to use for code auto-completion. Remember connect your"," ",(0,a.jsx)("u",{children:null==x?void 0:x.provider})," service."]})})]})]})]})]})})}let tn=e=>{let{children:t,className:l}=e;return(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"24px",width:"24px",viewBox:"0 -960 960 960",className:l,fill:"currentColor",stroke:"currentColor",children:t})},ta=e=>{let{className:t}=e;return tn({className:t,children:(0,a.jsx)("path",{d:"M451-404h58v-134h134v-58H509v-134h-58v134H317v58h134v134ZM104-130.92v-654.46q0-35.05 23.79-58.83Q151.57-868 186.62-868h586.76q35.05 0 58.83 23.79Q856-820.43 856-785.38v438.76q0 35.05-23.79 58.83Q808.43-264 773.38-264h-536.3L104-130.92ZM214-322h559.38q9.24 0 16.93-7.69 7.69-7.69 7.69-16.93v-438.76q0-9.24-7.69-16.93-7.69-7.69-16.93-7.69H186.62q-9.24 0-16.93 7.69-7.69 7.69-7.69 16.93v517.15L214-322Zm-52 0v-488 488Z"})})},ts=e=>{let{className:t}=e;return tn({className:t,children:(0,a.jsx)("path",{d:"M160-360v-80h640v80H160Zm0-160v-80h640v80H160Z"})})};var tr=l(23374);let ti=e=>{let{className:t,...l}=e;return(0,a.jsx)(tr.eh,{className:(0,w.cn)("flex h-full w-full data-[panel-group-direction=vertical]:flex-col",t),...l})},to=tr.s_,td=e=>{let{withHandle:t,className:l,...n}=e;return(0,a.jsx)(tr.OT,{className:(0,w.cn)("focus-visible:ring-ring relative flex w-px items-center justify-center after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-offset-1 data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:-translate-y-1/2 data-[panel-group-direction=vertical]:after:translate-x-0",l),...n,children:t&&(0,a.jsx)("div",{className:"z-20 flex h-4 w-8 items-center justify-center rounded-lg border border-content4 bg-content2/50 backdrop-blur-sm",children:(0,a.jsx)(ts,{className:"h-4 w-4"})})})},tc=async()=>await d();function tu(){let{data:e,mutate:t}=(0,ey.ZP)("history",()=>tc(),{shouldRetryOnError:!1,errorRetryCount:0,revalidateOnFocus:!0,refreshInterval:0});return{history:null!=e?e:[],mutate:t}}var tm=l(99506),tp=l(27127),tx=(0,r.$)("3c61c2869021efab3ae68e1a65c6b7d7f90e71ed"),th=l(43767),tf=l(90106),tg=l(62854),tv=l(77165),tb=l(91576),tj=l(58584),tN=l(79339),ty=l(82087),tw=l(31745),tk=l(43520),tC=l(82023),tz=l(71769),tS=l(56439),tM=l(97226),tP=l(14938),tA=l(44743);function t_(e){let{id:t,name:l,description:n,image:s,welcome:r,fromMarketplace:i,promptLibrary:o}=e,{isConnected:d}=(0,eO.T)(),{setIsPopoverOpen:c}=(0,W.Y)(),u=(0,W.Y)(e=>e.selectedProvider),{onSubmit:m}=(0,p.useContext)(lp);return(0,a.jsxs)("div",{className:"relative mx-auto grid w-full max-w-md select-none content-center items-center justify-center gap-4 pt-16 text-center",children:[(0,a.jsxs)("div",{className:"agent-avatar relative mx-auto h-16 w-16 select-none rounded-full",children:[s?(0,a.jsx)(en.J,{src:s,alt:"agent",loading:"eager",disableSkeleton:!0,radius:"full",classNames:{wrapper:"agent-avatar shrink-0 rounded-full bg-content3",img:"agent-avatar shrink-0 rounded-full bg-content3 opacity-100 block"}}):(0,a.jsx)(e2.T,{provider:u,className:"mx-auto h-16 w-16 select-none rounded-full"}),!u.includes("anthropic")&&!u.includes("openai")&&!u.includes("mistral")&&!u.includes("cohere")&&(0,a.jsx)("div",{className:"absolute -bottom-1 -right-1 z-10 grid size-8 items-center justify-center rounded-full",children:(0,a.jsx)(e2.T,{provider:u,className:"border-border mx-auto aspect-square select-none rounded-full border-2 shadow-sm dark:border-content1"})})]}),(0,a.jsxs)("div",{className:"flex select-none flex-col items-center justify-center",children:[(0,a.jsx)("p",{className:"relative w-full overflow-hidden truncate text-xl capitalize",children:l}),(0,a.jsx)("p",{className:"relative w-full hyphens-none text-center text-default-500",children:r||n||"Your new AI Code Assistant"})]}),!["ollama","lmstudio","codegptplusbeta"].includes(u)&&(d||u.includes("githubcopilot")?(0,a.jsx)(tw.z,{size:"sm",variant:"dot",color:"success",className:"mx-auto border",children:"Connected"}):(0,a.jsx)(eF.A,{size:"sm",className:"mx-auto w-fit border",variant:"bordered",onPress:()=>c(!0),children:"Set Connection"})),(0,a.jsx)("div",{className:"relative flex flex-wrap justify-center gap-2 overflow-hidden whitespace-nowrap",children:null==o?void 0:o.filter(e=>e.title.length>0).map(e=>(0,a.jsxs)("span",{className:"flex w-fit cursor-pointer items-center gap-2 overflow-hidden rounded-lg border border-content3 px-2 py-1 text-left text-sm text-default-500 hover:bg-content2",onClick:()=>{m({externalInput:e.prompt})},children:[(0,a.jsx)(tA.Z,{className:"size-3 shrink-0 text-default-500"}),(0,a.jsx)("p",{className:"truncate",children:e.title})]},e.id))})]},"custom-home-agent-".concat(t))}function tL(){let{currentProviderModel:e}=(0,W.o)(),t=e[(0,W.Y)(e=>e.selectedProvider)];if(null==t?void 0:t.id){var l;return(0,a.jsx)(t_,{id:t.id,name:t.label,image:null!==(l=t.image)&&void 0!==l?l:(0,w.k)(t.label),description:t.description,welcome:t.welcome,fromMarketplace:t.fromMarketplace,promptLibrary:t.prompt_library})}}var tI=(0,r.$)("2247321fe784d7e3e63f5295fa3dce4f53139461"),tO=(0,r.$)("ec6503d5b2f75fa9005e9021c379f49610ca5395"),tZ=l(8343),tD=l(82172),tT=l(32773),tR=l(49027),tF=l(3414),tE=l(15001),tV=l(52636),tH=l(25922);let tq={Github:D.wGg,Gitlab:e=>(0,a.jsxs)("svg",{role:"img",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",...e,children:[(0,a.jsx)("title",{children:"GitLab"}),(0,a.jsx)("path",{d:"m23.6004 9.5927-.0337-.0862L20.3.9814a.851.851 0 0 0-.3362-.405.8748.8748 0 0 0-.9997.0539.8748.8748 0 0 0-.29.4399l-2.2055 6.748H7.5375l-2.2057-6.748a.8573.8573 0 0 0-.29-.4412.8748.8748 0 0 0-.9997-.0537.8585.8585 0 0 0-.3362.4049L.4332 9.5015l-.0325.0862a6.0657 6.0657 0 0 0 2.0119 7.0105l.0113.0087.03.0213 4.976 3.7264 2.462 1.8633 1.4995 1.1321a1.0085 1.0085 0 0 0 1.2197 0l1.4995-1.1321 2.4619-1.8633 5.006-3.7489.0125-.01a6.0682 6.0682 0 0 0 2.0094-7.003z"})]}),Bitbucket:e=>(0,a.jsxs)("svg",{role:"img",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",...e,children:[(0,a.jsx)("title",{children:"Bitbucket"}),(0,a.jsx)("path",{d:"M.778 1.213a.768.768 0 00-.768.892l3.263 19.81c.084.5.515.868 1.022.873H19.95a.772.772 0 00.77-.646l3.27-20.03a.768.768 0 00-.768-.891zM14.52 15.53H9.522L8.17 8.466h7.561z"})]})};function tU(){let{theme:e}=(0,tH.F)(),[t,l]=(0,p.useState)(!1),[n,r]=(0,p.useState)([]),{selectedGraph:i,setSelectedGraph:o,selectedTab:d,setSelectedTab:c,isModalOpen:u,setIsModalOpen:m}=(0,M.B)(),x="dark"===e,{userData:h}=(0,ef.v)(),{loggedIn:f}=h||{},[g,v]=(0,p.useState)({id:"",exists:!1,updatedAt:null}),[b,j]=(0,p.useState)(!1),{handleIndexCodebase:N}=(0,tZ.v)(),{currentProgress:y,currentProgressMessage:w,isIndexing:k}=(0,S.M)(),C=(0,p.useCallback)(()=>{f&&(l(!0),fetch("http://localhost:54112/1/api/codegptplusbeta/graph").then(e=>e.json()).then(e=>{r(e),l(!1)}))},[f]);(0,p.useEffect)(()=>{C(),b||k||tI().then(e=>{console.log({workspaceId:e}),v({id:e.id,exists:e.exists,updatedAt:e.updatedAt})})},[f,C,k,b]);let z=e=>{o(e),(0,s.eJ)("selectedGraph",e)};return(0,a.jsxs)(eG.Vq,{open:u,onOpenChange:m,children:[(0,a.jsx)(eP.e,{content:"Codebase",classNames:{content:"bg-content2 text-default-500"},children:(0,a.jsx)(eG.hg,{asChild:!0,children:(0,a.jsx)("button",{className:"flex shrink-0 cursor-pointer select-none items-center gap-1 rounded-md p-0.5 text-xs leading-normal text-default-500 hover:text-default-700",children:(0,a.jsxs)("div",{className:"relative rounded-full",children:[(0,a.jsxs)("span",{className:"absolute bottom-0 right-0 flex size-1.5",children:[(0,a.jsx)("span",{className:"absolute inline-flex h-full w-full animate-ping rounded-full"}),(0,a.jsx)("span",{className:"relative inline-flex size-1.5 rounded-full "})]}),(0,a.jsx)(tF.Z,{className:"size-4"})]})})})}),(0,a.jsxs)(eG.cZ,{className:"pb-4 pt-0",crossClassName:"text-default-500",children:[(0,a.jsx)(eG.$N,{className:"mt-6",children:"Augmented Context"}),(0,a.jsxs)(tD.n,{selectedKey:d,onSelectionChange:e=>{c(e)},variant:"underlined",color:"default",className:"mt-4",classNames:{tabList:"p-0",panel:"w-full",base:"w-full"},children:[(0,a.jsx)(tT.r,{title:"Codebase",children:(0,a.jsxs)("div",{className:"".concat(x?"bg-custom-radial":"bg-custom-radial-light"," flex flex-col gap-4 px-2 pb-4"),children:[(0,a.jsx)("div",{className:"grid gap-2",children:(0,a.jsx)("p",{className:"text-sm leading-loose text-default-500",children:"Index your workspace to enable Codebase Context level"})}),k&&(0,a.jsxs)("section",{className:"flex flex-col items-center justify-center gap-1",children:[(0,a.jsx)(tt.W,{label:w,"aria-label":"Indexing...",size:"sm",autoFocus:!0,value:y,color:"primary",className:"my-auto w-full",classNames:{label:"text-xs text-default-500"}}),(0,a.jsxs)("span",{className:"text-xs text-default-500",children:[y,"%"]})]}),(0,a.jsxs)("div",{className:"flex w-full flex-col items-center gap-2",children:[(0,a.jsx)("p",{className:"flex w-full justify-end gap-1 text-xs text-default-500",children:g.updatedAt&&!k?"Last indexing: "+new Date(g.updatedAt).toLocaleString():""}),(0,a.jsx)("button",{disabled:k||b,className:"w-full rounded-md border-blue-400 bg-blue-400 px-4 py-2 text-sm text-default-700 transition-all duration-300 hover:bg-blue-500 active:scale-[.98] disabled:pointer-events-none disabled:opacity-50 dark:shadow-none",onClick:()=>{N().then(()=>{m(!1)})},children:k?(0,a.jsxs)("div",{className:"flex w-full items-center justify-center gap-1",children:[(0,a.jsx)(tE.Z,{className:"size-4 animate-spin"}),(0,a.jsx)("span",{children:"Indexing"})]}):g.exists?(0,a.jsxs)("div",{className:"flex w-full items-center justify-center gap-1",children:[(0,a.jsx)(tV.Z,{className:"size-4"}),(0,a.jsx)("span",{children:"Re Sync"})]}):(0,a.jsx)("span",{children:"Create Codebase Index"})}),g.exists&&(0,a.jsxs)("button",{disabled:k||b,className:"flex w-full items-center justify-center gap-1 text-xs text-default-500 underline",onClick:()=>{j(!0),l(!0),tO(g.id).then(()=>{_.Am.success("Index deleted"),v({id:"",exists:!1,updatedAt:null})}).finally(()=>{j(!1)})},children:[b&&(0,a.jsx)(tE.Z,{className:"size-4 animate-spin text-default-500"}),"Delete Codebase"]})]})]})},"codebase"),(0,a.jsx)(tT.r,{title:"Deep Insights",children:(0,a.jsxs)("div",{className:"".concat(x?"bg-custom-radial":"bg-custom-radial-light"," flex flex-col gap-4 px-2"),children:[(0,a.jsx)("div",{className:"grid gap-2",children:(0,a.jsxs)("p",{className:"prose w-full max-w-md text-sm text-default-500",children:["Connect your workspace with your knowledge graphs to enable"," ",(0,a.jsx)("span",{className:"text-default-700",children:"Deep insights"})," Context level"]})}),n.length>0?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(e7.g,{classNames:{popoverContent:"pointer-events-auto"},variant:"bordered",selectedKeys:[null==i?void 0:i.id],onSelectionChange:e=>{let t=n.find(t=>t.id===e.currentKey);t&&z(t)},size:"sm",label:(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(tF.Z,{className:"size-4 shrink-0 text-default-500"}),(0,a.jsx)("span",{children:"Select your code graph"})]}),renderValue:e=>e.map(e=>(0,a.jsx)("div",{className:"flex items-center gap-2",children:(0,a.jsx)("p",{className:"relative flex w-full overflow-hidden text-ellipsis whitespace-nowrap break-words pr-1 font-mono text-sm text-foreground",children:null==e?void 0:e.rendered})},"selected-graph-".concat(e.key))),children:null==n?void 0:n.map(e=>(0,a.jsx)(te.R,{value:e.id,children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:["github"===e.gitProvider&&(0,a.jsx)(tq.Github,{className:"size-4 shrink-0 text-default-500"}),"gitlab"===e.gitProvider&&(0,a.jsx)(tq.Gitlab,{className:"size-4 shrink-0 text-default-500"}),"bitbucket"===e.gitProvider&&(0,a.jsx)(tq.Bitbucket,{className:"size-4 shrink-0 text-default-500"}),(0,a.jsxs)("span",{children:[e.repoOrg,"/",e.repoName]}),(0,a.jsx)(tw.z,{variant:"flat",size:"sm",color:"primary",classNames:{content:"text-primary-500 select-none"},children:e.branch})]})},e.id))}),(0,a.jsx)(eP.e,{content:"Update graphs",children:(0,a.jsx)(eF.A,{onPress:()=>{C()},variant:"bordered",radius:"md",size:"lg",isIconOnly:!0,disabled:t,children:(0,a.jsx)(tV.Z,{className:"size-4 shrink-0 text-default-500 ".concat(t&&"animate-spin-reverse")})})})]}),(null==i?void 0:i.id)&&(0,a.jsx)(tR.GG,{asChild:!0,children:(0,a.jsx)(eF.A,{variant:"solid",size:"md",className:"w-full text-foreground",children:"Use Graphs"})})]}):(0,a.jsxs)("div",{className:"card mx-auto flex w-full items-center justify-between gap-2 rounded-xl border border-content3 p-6 text-sm",children:[(0,a.jsx)("p",{className:"text-default-700",children:"Don't have a Code Graph? "}),(0,a.jsx)("button",{className:"rounded-md border-blue-400 bg-blue-400 px-4 py-2 text-sm text-default-700 transition-all duration-300 hover:bg-blue-500 active:scale-[.98] disabled:pointer-events-none disabled:opacity-50 dark:shadow-none",onClick:()=>{(0,s.Yo)("https://app.codegpt.co/en/graph")},children:"Create a new"})]})]})},"deepinsights")]})]})]})}var tB=l(39386),tY=l(45998),tK=l(21109);let tG=[12,13,14,15,16,17,18,19,20];var tJ=l(70001),tW=l(99158),t$=l(60003),tQ=l(89897),tX=l(45675),t0=l(18930);function t1(e){let{id:t,title:l,date:n,onClick:s,onDelete:r,onEdit:i}=e,[o,d]=(0,p.useState)(!1),[c,u]=(0,p.useState)(l),{historyId:m}=(0,p.useContext)(lp),x=()=>{o?(i(t,c),d(!1)):d(!0)},h=()=>{u(l),d(!1)},f=()=>{r(t)};if(o)return(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("input",{value:c,onChange:e=>u(e.target.value),onKeyDown:e=>{"Enter"===e.key&&x()},className:"mr-2 grow rounded-md border border-content3 bg-content1 px-2 py-1.5 text-sm",autoFocus:!0}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("button",{onClick:e=>{e.stopPropagation(),x()},className:"cursor-pointer rounded border p-1 text-xs text-default-500",children:(0,a.jsx)(es.Z,{className:"size-3"})}),(0,a.jsx)("button",{onClick:e=>{e.stopPropagation(),h()},className:"cursor-pointer rounded border p-1 text-xs text-default-500",children:(0,a.jsx)(eL.Z,{className:"size-3"})})]})]});let g=m===t;return(0,a.jsxs)("div",{className:"group flex w-full cursor-pointer items-center justify-between gap-2 rounded-md px-2 py-1 text-left font-normal ".concat(g?"bg-content3":"hover:bg-content2"),onClick:()=>s(t),children:[(0,a.jsxs)("div",{className:"flex w-full grow flex-col items-start overflow-hidden",children:[(0,a.jsx)("span",{className:"w-full truncate text-sm",children:l}),(0,a.jsx)("span",{className:"text-xs text-default-500 first-letter:capitalize",children:n})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 opacity-0 transition-opacity group-hover:opacity-100",children:[(0,a.jsx)("button",{onClick:e=>{e.stopPropagation(),x()},className:"cursor-pointer rounded border p-1 text-xs text-default-500",children:(0,a.jsx)(tX.Z,{className:"size-3"})}),(0,a.jsx)("button",{onClick:e=>{e.stopPropagation(),f()},className:"cursor-pointer rounded border p-1 text-xs text-default-500",children:(0,a.jsx)(t0.Z,{className:"size-3"})})]})]})}function t2(e){let{title:t,chats:l,onChatClick:n,onDelete:s,onEdit:r}=e;return(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsx)("p",{className:"text-xs uppercase text-default-500",children:t}),l.map(e=>(0,a.jsx)(t1,{id:e.id,title:e.name,date:(0,t$.Q)(new Date(e.date.getTime()-6e4*e.date.getTimezoneOffset()),{addSuffix:!0,locale:tQ._}),onClick:n,onDelete:s,onEdit:r},e.id))]})}var t5=l(40790),t3=l(73191),t4=l(67042);let t6=e=>{let{service:t,url:l}=e;return(0,a.jsxs)(f.CustomLink,{href:l,isExternal:!0,className:"flex w-full cursor-pointer flex-col gap-2 overflow-hidden rounded-lg border border-content3 p-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)("img",{src:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMjAgMTIwIj48c3R5bGU+LnN0MHtmaWxsOiNiY2JiYmJ9LnN0MXtmaWxsOiNmNDgwMjN9PC9zdHlsZT48cGF0aCBjbGFzcz0ic3QwIiBkPSJNODQuNCA5My44VjcwLjZoNy43djMwLjlIMjIuNlY3MC42aDcuN3YyMy4yeiIvPjxwYXRoIGNsYXNzPSJzdDEiIGQ9Ik0zOC44IDY4LjRsMzcuOCA3LjkgMS42LTcuNi0zNy44LTcuOS0xLjYgNy42em01LTE4bDM1IDE2LjMgMy4yLTctMzUtMTYuNC0zLjIgNy4xem05LjctMTcuMmwyOS43IDI0LjcgNC45LTUuOS0yOS43LTI0LjctNC45IDUuOXptMTkuMi0xOC4zbC02LjIgNC42IDIzIDMxIDYuMi00LjYtMjMtMzF6TTM4IDg2aDM4LjZ2LTcuN0gzOFY4NnoiLz48L3N2Zz4=",className:"h-4 w-4 min-w-4 max-w-4",alt:"".concat(t," icon")}),(0,a.jsx)("span",{className:"truncate text-sm capitalize",children:t})]}),(0,a.jsx)("span",{className:"truncate text-xs text-default-500",children:l})]})};var t8=l(82800);let t9={CodeBlock:m.CodeBlock,FileTreeWrap:function(e){let{paths:t,bodyOnly:l}=e;return(0,a.jsx)(t3.default,{paths:t,bodyOnly:l})},PlanningCard:t4.default,StackOverflowCards:e=>{let{cards:t}=e;return(0,a.jsx)("div",{className:"cards mb-2 mt-2 flex flex-col gap-2",children:t.map((e,t)=>(0,a.jsx)(t6,{service:e.service,url:e.url},t))})},StackOverflowBadge:e=>{let{args:t}=e;return(0,a.jsxs)("p",{className:"flex items-center gap-1 text-sm text-default-500",children:['Searching on Stack Overflow "',JSON.parse(t).query,'"...']})},Tags:e=>{let{promptType:t,files:l,chunks:n,contextLevel:s}=e;return(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsxs)("p",{className:"flex select-none items-center gap-2",children:[s?(0,a.jsxs)("span",{className:"command command-bordered command-with-icon animate-slideIn relative h-auto gap-1 overflow-hidden",children:[(0,a.jsx)(t8.Z,{className:"size-4 shrink-0 text-default-500"}),(0,a.jsx)("span",{className:"max-w-48 overflow-hidden text-ellipsis whitespace-pre break-words pr-1 font-mono text-sm text-foreground",children:s})]}):null,t?(0,a.jsx)("span",{className:"command command-bordered command-with-icon","data-command":"command",style:{alignItems:"end"},children:(0,a.jsx)("span",{className:"max-w-48 overflow-hidden text-ellipsis whitespace-pre break-words pr-1 font-mono text-sm text-foreground",children:t})}):null,null==l?void 0:l.map(e=>(0,a.jsx)("span",{className:"command command-bordered command-with-icon animate-slideIn relative h-auto items-center gap-1 overflow-hidden","data-language":e.path.split(".").pop(),children:(0,a.jsx)("span",{className:"max-w-48 overflow-hidden text-ellipsis whitespace-pre break-words pr-1 font-mono text-sm text-foreground",children:e.name})},e.path))]}),(null==n?void 0:n.length)>0&&(0,a.jsx)(t5.default,{chunks:n})]})},ChunksCard:t5.default},t7=e=>{let{content:t,display:l,props:n,id:s}=e;if(l in t9){let e=t9[l];return s?(0,a.jsx)("div",{id:s,children:(0,a.jsx)(e,{...n})}):(0,a.jsx)(e,{...n})}if("fragment"===l)return t};var le=l(74968),lt=l(33720),ll=l(65621);let ln=e=>e.map(e=>({...e,date:new Date(e.updated_at)}));function la(){var e;let[t,l]=(0,p.useState)(!1),{history:n,mutate:r}=tu(),{historyId:o,clearChat:d,setMessages:m,setHistoryId:x}=(0,p.useContext)(lp),{selectedProvider:h}=(0,W.Y)(),{setCurrentProviderModel:f,currentProviderModel:g}=(0,W.o)(),v=null===(e=g[h])||void 0===e?void 0:e.id,b=ln(n);(0,p.useEffect)(()=>{t&&r()},[r,t]);let j=(0,p.useMemo)(()=>{let e={today:[],yesterday:[],lastWeek:[],lastMonth:[],thisYear:[],older:[]},t=new Date(new Date().getTime()+6e4*new Date().getTimezoneOffset()),l=(0,le.k)(t,7),n=(0,le.k)(t,30),a=t.getFullYear();return b.forEach(s=>{s.date.getDate()===t.getDate()&&s.date.getMonth()===t.getMonth()&&s.date.getFullYear()===t.getFullYear()?e.today.push(s):(0,lt.g)(s.date)?e.yesterday.push(s):s.date>=l?e.lastWeek.push(s):s.date>=n?e.lastMonth.push(s):s.date.getFullYear()===a?e.thisYear.push(s):e.older.push(s)}),Object.keys(e).forEach(t=>{e[t].sort((e,t)=>t.date.getTime()-e.date.getTime())}),e},[b]),N=e=>{c(e).then(()=>{e===o&&d(),r()})},y=(e,t)=>{u(e,t).then(()=>{r()})},w=e=>{i(e).then(async t=>{if(console.time("restoreHistory"),m(L(t.map(e=>{let t=JSON.parse(e.display);return{role:e.role,content:e.content,display:t.map(e=>{let t;try{t=JSON.parse(e)}catch(l){t=e}return t7({...t})})}}))),x(e),!v){let e=await (0,s.us)();f("codegptplusbeta",{label:e.label,id:e.id,image:e.image,fromMarketplace:e.fromMarketplace,description:e.description})}console.timeEnd("restoreHistory"),l(!1)})};return(0,a.jsxs)(eG.Vq,{open:t,onOpenChange:l,children:[(0,a.jsx)(eG.hg,{asChild:!0,children:(0,a.jsx)(eP.e,{content:"History",classNames:{content:"bg-content2 text-default-500"},children:(0,a.jsx)("button",{onClick:async()=>{l(!0)},className:"flex shrink-0 cursor-pointer select-none items-center gap-1 rounded-md p-0.5 text-xs leading-normal text-default-500 hover:text-default-700",children:(0,a.jsx)(ll.Z,{className:"size-4"})})})}),(0,a.jsxs)(eG.cZ,{className:"flex h-full max-h-[60vh] flex-col gap-8 rounded-xl bg-content2",children:[(0,a.jsx)(eG.fK,{children:(0,a.jsx)(eG.$N,{children:"Chat History"})}),(0,a.jsx)("div",{className:"max-h-[100%] overflow-auto",children:(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[j.today.length>0&&(0,a.jsx)(t2,{title:"Today",chats:j.today,onChatClick:w,onDelete:N,onEdit:y}),j.yesterday.length>0&&(0,a.jsx)(t2,{title:"Yesterday",chats:j.yesterday,onChatClick:w,onDelete:N,onEdit:y}),j.lastWeek.length>0&&(0,a.jsx)(t2,{title:"Last 7 days",chats:j.lastWeek,onChatClick:w,onDelete:N,onEdit:y}),j.lastMonth.length>0&&(0,a.jsx)(t2,{title:"Last 30 days",chats:j.lastMonth,onChatClick:w,onDelete:N,onEdit:y}),j.thisYear.length>0&&(0,a.jsx)(t2,{title:"This year",chats:j.thisYear,onChatClick:w,onDelete:N,onEdit:y}),j.older.length>0&&(0,a.jsx)(t2,{title:"Older",chats:j.older,onChatClick:e=>{w(e)},onDelete:N,onEdit:y})]})})]})]})}var ls=l(57609);function lr(e){let{label:t}=e,{userData:l}=(0,ef.v)(),{loginFromEventSource:n}=(0,eT.R)(),r=(0,W.Y)(e=>e.selectedProvider),{isLoading:i}=(0,p.useContext)(lp),o=(null==l?void 0:l.dailyUsage)||0,d=(null==l?void 0:l.dailyMaxUsage)||-1;return -1===d||"codegptplusbeta"!==r||i?null:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(tw.z,{variant:"dot",size:"sm",classNames:{base:"border border-content2 bg-content2 text-default-500"},color:0===o?"success":o/d>.6&&o/d<1?"warning":o===d?"danger":"success",children:(0,a.jsx)("div",{children:(0,a.jsxs)("p",{children:[o," of ",d]})})}),o===d&&!l.loggedIn&&(0,a.jsxs)("div",{className:"flex items-center gap-1 rounded-xl text-sm",children:[(0,a.jsx)("span",{className:"cursor-pointer text-sm text-primary underline",onClick:async()=>{n({type:"signup"}),(0,$.q)({eventName:"ads",object:"adOnInputText",message:"maxInteractions widget"})},children:"Sign Up"}),(0,a.jsx)("p",{className:"text-default-500",children:(0,a.jsx)("span",{children:"to get more interactions"})})]}),o>=d&&l.loggedIn&&(0,a.jsxs)("div",{className:"flex items-center gap-1 rounded-xl text-sm",children:[(0,a.jsx)("span",{className:"cursor-pointer text-sm text-primary underline",onClick:()=>{(0,s.Yo)("".concat(ls.Ft,"/en/plans")),(0,$.q)({eventName:"ads",object:"adOnInputText",message:"maxInteractions"})},children:"Upgrade your plan"}),(0,a.jsx)("p",{className:"text-default-500",children:(0,a.jsx)("span",{children:"to get unlimited interactions"})})]})]})}var li=e=>{let{role:t,content:l,display:n,status:s,index:r,isLastMessage:i,isLoading:o,providerState:d,modelHistory:c,reload:u,image:m,codeSelection:p}=e;return(0,a.jsx)(a.Fragment,{children:(e=>{var t;let{role:l,content:s,image:r,codeSelection:d,status:c}=e;return(0,a.jsxs)("div",{className:"flex flex-col ".concat(o?"streaming":"quiet"," ").concat("user"===l?"ml-auto max-w-[95%] rounded-md bg-content2 p-2":""),children:[(0,a.jsxs)("div",{children:[s?(0,a.jsxs)("div",{className:"".concat(l," flex flex-col gap-3"),children:[(null==r?void 0:r.base64)&&(0,a.jsx)("div",{className:"grid gap-2",children:(0,a.jsx)("div",{className:"grid max-w-48 gap-4",children:(0,a.jsxs)("div",{className:"relative grid grid-flow-col items-center justify-start gap-2 overflow-hidden rounded-lg border border-content3 p-2",children:[(0,a.jsx)("div",{className:"relative size-8 overflow-hidden rounded-lg",children:(0,a.jsx)("img",{className:"object-contain",src:"url(".concat(r.base64,")")})}),(0,a.jsxs)("div",{className:"relative grid w-full gap-0.5 overflow-hidden truncate",children:[(0,a.jsxs)("span",{className:"text-xs text-default-500",children:[(0,a.jsx)("span",{className:"uppercase",children:r.name&&r.name.includes(".")?null===(t=r.name)||void 0===t?void 0:t.split(".")[1]:""})," ","Image"]}),(0,a.jsx)("span",{className:"justify-end overflow-hidden text-ellipsis text-left text-xs",children:r.name})]})]})})}),n||(d?(0,a.jsxs)(a.Fragment,{children:[s.replaceAll(d,""),(0,a.jsx)(j,{content:d})]}):(0,a.jsx)(j,{content:s}))]}):(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(tE.Z,{className:"size-4 animate-spin text-default-500"}),(0,a.jsx)("span",{className:"text-xs text-default-500",children:"Thinking"})]}),i&&"assistant"===l&&o&&s&&(0,a.jsx)("div",{className:"mt-2 flex items-center gap-2",children:(0,a.jsx)(tE.Z,{className:"size-4 animate-spin text-default-400"})})]}),i&&"assistant"===l&&s&&(0,a.jsx)("footer",{className:"flex gap-2",children:(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(lr,{}),c&&!(null==c?void 0:c.done)&&(0,a.jsxs)(eF.A,{variant:"light",size:"sm",className:"capitalize text-default-500",children:[(0,a.jsx)(tE.Z,{className:"size-4 text-default-500"}),(null==c?void 0:c.message)||"Writing response..."]})]})})})]})})("assistant"===t?o&&i&&"assistant"===t&&!l?{role:t,status:s}:{role:t,content:l}:{role:t,content:l,image:m,codeSelection:p})})},lo=l(968),ld=l(74411),lc=l(69729);function lu(e){var t,l,n,r,i,o,d,c,u,m,p,x;let{isLoading:h}=e,{mutate:f}=(0,eO.T)(),{loginFromEventSource:g}=(0,eT.R)(),{userData:v,mutate:b}=(0,ef.v)(),j=async()=>{await (0,lo.j)({accessToken:"",refreshToken:"",expiresAt:""}),await Promise.all([b(),f()])};if(!v)return null;let N=(null==v?void 0:null===(t=v.plan)||void 0===t?void 0:t.toLowerCase())==="free";return(0,a.jsxs)(ld.J2,{children:[(0,a.jsx)(ld.xo,{asChild:!0,children:(0,a.jsx)("button",{className:"flex shrink-0 cursor-pointer select-none items-center rounded-md p-0.5 text-xs leading-normal text-default-500 hover:text-default-700",disabled:h,children:(0,a.jsx)("div",{className:"flex items-center gap-2 capitalize",children:(null==v?void 0:v.loggedIn)&&(null==v?void 0:null===(l=v.user)||void 0===l?void 0:l.avatarUrl)?(0,a.jsx)("div",{className:"size-5 shrink-0 select-none overflow-hidden rounded-full border bg-content2",children:(0,a.jsx)(en.J,{loading:"eager",disableSkeleton:!0,src:null==v?void 0:null===(n=v.user)||void 0===n?void 0:n.avatarUrl,alt:"user",className:"size-5 shrink-0 select-none rounded-full bg-content3"})}):(0,a.jsx)(lc.Z,{className:"my-auto size-4 h-4 shrink-0 text-default-500"})})})}),(0,a.jsx)(ld.yk,{sideOffset:5,alignOffset:0,align:"end",children:(0,a.jsx)("div",{className:"flex flex-col gap-4",children:v&&(null==v?void 0:v.loggedIn)&&(null===(r=v.user)||void 0===r?void 0:r.status)==="deleted"?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("p",{children:"It seems that your account is canceled, to reactivate please contact us at support"}),(0,a.jsx)(tw.z,{variant:"dot",size:"sm",color:"danger",children:null!==(p=null===(i=v.user)||void 0===i?void 0:i.status)&&void 0!==p?p:"No status"})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"grid gap-1",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("div",{className:"flex items-center gap-2",children:(0,a.jsxs)("span",{className:"flex items-center gap-1 text-sm font-bold capitalize",children:[(0,a.jsx)("span",{children:"Plan"}),v&&(null==v?void 0:v.loggedIn)&&null!==(x=null==v?void 0:null===(d=v.plan)||void 0===d?void 0:null===(o=d.toLowerCase())||void 0===o?void 0:o.replaceAll("codegpt",""))&&void 0!==x?x:"Free"]})}),(0,a.jsx)(tw.z,{variant:"dot",size:"sm",color:v&&(null==v?void 0:v.loggedIn)?(null==v?void 0:null===(c=v.plan)||void 0===c?void 0:c.toLowerCase())!=="canceled"?"success":"danger":"default",classNames:{content:"text-[8px]"},children:v&&(null==v?void 0:v.loggedIn)?(null==v?void 0:null===(u=v.plan)||void 0===u?void 0:u.toLowerCase())!=="canceled"?"Active":"Canceled":"Visitor"})]}),(null==v?void 0:v.loggedIn)&&(0,a.jsx)("p",{className:"text-xs text-default-500",children:null==v?void 0:null===(m=v.user)||void 0===m?void 0:m.email})]}),(0,a.jsx)(eX.j,{className:"bg-content3"}),(0,a.jsxs)("div",{className:"grid gap-2 text-xs",children:[(0,a.jsxs)("p",{className:"text-md flex w-full flex-row justify-between text-default-500",children:[(0,a.jsxs)("span",{children:[N?"Monthly":"Daily"," interactions"]}),(0,a.jsxs)("span",{className:"text-right",children:[null==v?void 0:v.dailyUsage," of ",null==v?void 0:v.dailyMaxUsage]})]}),["Pro Models","Custom Agents","Vision"].map((e,t)=>(0,a.jsxs)("p",{className:"text-md flex w-full flex-row justify-between text-default-500",children:[(0,a.jsx)("span",{children:e}),(0,a.jsx)("span",{className:"text-right",children:v&&N?(0,a.jsx)(eL.Z,{className:"size-3"}):(0,a.jsx)(es.Z,{className:"size-3 text-success"})})]},"feature-".concat(t)))]}),(0,a.jsxs)("div",{className:"mt-1 flex gap-2",children:[v&&!(null==v?void 0:v.loggedIn)&&(0,a.jsx)(eF.A,{fullWidth:!0,size:"sm",color:"primary",onPress:async()=>{g({type:"signup"}),(0,$.q)({eventName:"ads",object:"adButton",message:"popoverPlanCreateAccountButton"})},children:"Create Account"}),v&&v.loggedIn&&N&&(0,a.jsx)(eF.A,{fullWidth:!0,size:"sm",color:"primary",onPress:()=>{(0,s.Yo)("".concat(ls.Ft,"/en/plans")),(0,$.q)({eventName:"ads",object:"adButton",message:"popoverPlanUpgradeButton"})},children:"Upgrade"}),(null==v?void 0:v.loggedIn)?(0,a.jsx)(eF.A,{fullWidth:!0,variant:"bordered",className:"border",size:"sm",isLoading:h,onPress:()=>j(),children:"Disconnect"}):(0,a.jsx)(eF.A,{fullWidth:!0,variant:"bordered",className:"border",size:"sm",onPress:async()=>{g({type:"login"}),(0,$.q)({eventName:"ads",object:"adButton",message:"popoverPlanSignInButton"})},children:"Sign In"})]})]})})})]})}let lm=[{key:"tools",divider:!0,items:[{key:"chat",label:"Chat",description:"Chat with CodeGPT",href:"",startContent:(0,a.jsx)(th.Z,{className:"h-4 w-4"}),endcontent:""},{key:"autocomplete",label:"Autocomplete",description:"Configure autocomplete models",startContent:(0,a.jsx)(tC.Z,{className:"h-4 w-4"}),endcontent:""}]},{key:"Help",divider:!0,items:[..."vscode"===e9.L_?[{key:"extDocsLink",label:"Extension Docs",description:"",href:"",startContent:(0,a.jsx)(tz.Z,{className:"h-4 w-4"}),endcontent:""},{key:"apiDocsLink",label:"API Docs",description:"",href:"",startContent:(0,a.jsx)(tf.Z,{className:"h-4 w-4"}),endcontent:""}]:[],{key:"issues",label:"Report an issue",description:"",href:"",startContent:(0,a.jsx)(tg.Z,{className:"h-4 w-4"}),endcontent:""},{key:"feedback",label:"Feedback",description:"",href:"https://codegpt.canny.io/requests",startContent:(0,a.jsx)(tS.Z,{className:"h-4 w-4"}),endcontent:""}]},{key:"Settings",divider:!1,items:[{key:"fontsize",label:"Font Size",description:"Change font size",href:"",startContent:(0,a.jsx)(e=>{let{className:t}=e;return tn({className:t,children:(0,a.jsx)("path",{d:"m40-200 210-560h100l210 560h-96l-51-143H187l-51 143H40Zm176-224h168l-82-232h-4l-82 232Zm504 104v-120H600v-80h120v-120h80v120h120v80H800v120h-80Z"})})},{className:"h-4 w-4"}),endcontent:(0,a.jsx)(function(){let{setThemeFontSize:e,themeFontSize:t}=(0,tY.i)(),l=e=>{(0,$.q)({eventName:"changeValue",target:null!=e?e:"openMenuTheme",value:e})},n=l=>{if("DecreaseFontSize"===l)t!==tG[0]&&e(t-1);else if("IncreaseFontSize"===l){if(t===tG[tG.length-1])return;e(t+1)}};return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)(tK.g,{radius:"lg",size:"sm",isIconOnly:!0,variant:"bordered",children:[(0,a.jsx)(eF.A,{onPress:()=>{n("DecreaseFontSize"),l("DecreaseFontSize")},className:"h-6",color:"default",size:"sm",startContent:(0,a.jsx)("span",{children:"-A"})}),(0,a.jsx)(eF.A,{onPress:()=>{n("IncreaseFontSize"),l("IncreaseFontSize")},className:"h-6",color:"default",size:"sm",startContent:(0,a.jsx)("span",{children:"+A"})})]})})},{})},{key:"theme",label:"Color Mode",description:"Switch color mode",href:"",startContent:(0,a.jsx)(tM.Z,{className:"h-4 w-4"}),endcontent:(0,a.jsx)(function(){let[e,t]=(0,p.useState)(!1),{theme:l,setTheme:n}=(0,tH.F)();return((0,p.useEffect)(()=>{t(!0)},[]),e)?(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(eQ.i,{isSelected:"dark"===l,color:"secondary",size:"sm",name:"theme-switcher",startContent:(0,a.jsx)(tJ.Z,{}),endContent:(0,a.jsx)(tW.Z,{}),"aria-label":"Toggle theme",onValueChange:()=>{(0,$.q)({eventName:"changeValue",target:"openMenuTheme",value:"dark"===l?"light":"dark"}),n("dark"===l?"light":"dark")},classNames:{base:"m-0",label:"m-0",wrapper:"m-0 border border-default-200"}})}):null},{})}]}],lp=(0,p.createContext)({});function lx(e){var t,l,n,r,i,d,c,u,m,x,h;let{initialHistoryId:f}=e,[v,b]=(0,p.useState)({message:"",done:!1}),{selectedProvider:j,setSelectedProvider:N}=(0,W.Y)(),{setOpen:y}=(0,eD.U)(),{currentProviderModel:w,setCurrentProviderModel:k}=(0,W.o)(),{userData:C}=(0,ef.v)(),z=null===(t=w[j])||void 0===t?void 0:t.id,S=null!==(x=null===(l=w[j])||void 0===l?void 0:l.fromMarketplace)&&void 0!==x&&x,{image:M,setImage:P,setShowTooltip:A}=eZ(),{setOpen:L,setErrorMessage:I}=(0,tp.c)(),Z=(0,e6.k)(e=>e.providers),{mutate:D}=tu(),T="codegptplusbeta"===j,R=O({provider:j,initialHistoryId:f,onError:e=>{var t,l,n;let r=e.message,i=500;try{let n=JSON.parse(e.message);r=null!==(t=n.message)&&void 0!==t?t:r,i=null!==(l=Number(n.status))&&void 0!==l?l:i}catch(e){}401===i?y(!0):(L(!0),console.log("useChat Error Provider",j),I({title:j.includes("codegpt")&&!r.startsWith("Codebase")?"Interaction Limit Reached":"Alert",subtitle:"".concat(j.includes("codegpt")?"CodeGPT Plus":"".concat(j," Message")),provider:"".concat(j.includes("codegpt")?"/logotypes/codegpt.png":"/logotypes/".concat(null!==(n=j.toLowerCase())&&void 0!==n?n:"codegpt",".png")),description:null==r?void 0:r.replaceAll('"',""),type:"alert",actions:j.includes("codegpt")&&(0,a.jsx)(eF.A,{size:"sm",variant:"light",className:"text-default-500",onPress:()=>{(0,$.q)({eventName:"clickOver",target:"goToModelsDocsButtonFromErrorCard"}),(0,s.Yo)("https://docs.codegpt.co/docs/category/ai-providers")},children:"Click here for more info about models"})})),E(F.slice(0,F.length-1))},onFinish:()=>{setTimeout(()=>{let e=document.querySelectorAll(".assistant"),t=e[e.length-1],l=null==t?void 0:t.querySelectorAll(".language-label"),n=null==l?void 0:l.length;for(let e=0;e<n;e++){var a;let t=l[e].textContent;(0,$.q)({eventName:"codeBlock",...t?{code_language:t}:{},provider:j,model:null===(a=w[j])||void 0===a?void 0:a.id})}},500)}}),{messages:F,setMessages:E,isLoading:V,stop:H,reload:q,handleSubmit:U,setHistoryId:B,modelHistory:Y,setModelHistory:K}=R,G=async e=>{var t,l,n,a,r,i,o,d,c,u,m,p,x,h,f,v,N,y,C;let{event:z,externalInput:_,externalModel:L,externalMessages:I,chatRequestOptions:O,codeSelection:D=""}=e;null===(t=eg.current)||void 0===t||t.scrollIntoView({behavior:"auto",block:"end"}),en(),console.log({codeSelectionAlreadyInMessages:F.some(e=>e.content.includes(D))}),D&&F.some(e=>e.content.includes(D))&&(_=null==_?void 0:_.replace(D,""),D="");let R=await (0,s.us)(),V=(null===(l=w[j])||void 0===l?void 0:l.label)||(null===(a=Z.find(e=>e.link===j))||void 0===a?void 0:null===(n=a.models)||void 0===n?void 0:n[0])||R.id,H=F.length+1,q=null===(r=w[j])||void 0===r?void 0:r.image;A(!1),console.log(null===(i=w[j])||void 0===i?void 0:i.label),w[j]&&(null===(o=w[j])||void 0===o?void 0:o.label)!==""||(console.log('modelState[providerState]?.label === ""'),k("codegptplusbeta",{label:R.label,id:R.id,image:R.image,fromMarketplace:R.fromMarketplace,description:R.description}),V=R.label,q=R.image),K(e=>({...e,[j]:{...e[j],[H]:{model:V,avatar:q}}}));let B=["codegptplusbeta","ollama"].includes(j);if(null==z||z.preventDefault(),!_)return;let Y=[...F],G=crypto.randomUUID(),J={...B?{id:crypto.randomUUID()}:{},role:"user",content:"".concat(_,"\n").concat(D),...""!==M.base64&&B?{attachment:M}:{},...""!==M.base64&&B?{image:M.base64}:{},...T?{statusId:G}:{},...D?{codeSelection:D}:{}};Y.push(J),T&&fetch("".concat(g.xf,"/chat/status/").concat(G)).then(async e=>{var t,l;let n=null===(t=e.body)||void 0===t?void 0:t.getReader();if(!n)return;let a=new TextDecoder;for(;;){let{done:e,value:t}=await (null==n?void 0:n.read());if(e)break;let s=null===(l=JSON.parse(a.decode(t).replaceAll("retry 1000\n\n",'{"message":"Connecting...","done":false}').replaceAll("data: ","").replaceAll("\n\n","")))||void 0===l?void 0:l.message;if(b({message:s,done:null==s?void 0:s.done}),s.done)break}}),E(Y);let W=null==O?void 0:null===(c=O.options)||void 0===c?void 0:null===(d=c.headers)||void 0===d?void 0:d.promptType,$=null==O?void 0:null===(m=O.options)||void 0===m?void 0:null===(u=m.headers)||void 0===u?void 0:u.customPromptType,Q=null==O?void 0:null===(x=O.options)||void 0===x?void 0:null===(p=x.headers)||void 0===p?void 0:p.files,X=null==O?void 0:null===(f=O.options)||void 0===f?void 0:null===(h=f.headers)||void 0===h?void 0:h.fromMarketplace,ee=null==O?void 0:null===(N=O.options)||void 0===N?void 0:null===(v=N.headers)||void 0===v?void 0:v.contextLevel,et=await U({text:_,...(null===(y=w[j])||void 0===y?void 0:y.id)?{model:L||(null===(C=w[j])||void 0===C?void 0:C.id)}:{},...I?{externalMessages:I}:{},...$?{customPromptType:$}:{},fromMarketplace:X||S,...""!==M.base64?{image:M}:{},...Q?{files:Q}:{},...ee?{contextLevel:ee}:{},...D?{codeSelection:D}:{},...W?{promptType:W}:{},...G?{statusId:G}:{}});return P({base64:"",name:""}),et},J=(null===(n=F[F.length-1])||void 0===n?void 0:n.role)==="assistant",X=()=>{E([]),K(e=>({...e,[j]:{}})),o().then(e=>{B(e),D()})},ee=(0,p.useRef)(null),{inView:et}=(0,tk.S1)(ee),el=null===(i=F[F.length-1])||void 0===i?void 0:null===(r=i.content)||void 0===r?void 0:r.length,en=()=>{if(ee.current){var e;null===(e=ee.current)||void 0===e||e.scrollIntoView({behavior:"auto",block:"end"})}};(0,p.useEffect)(()=>{et&&V&&en()},[F.length,el,et,V]),(0,p.useEffect)(()=>{let e=e=>{"n"===e.key&&(e.metaKey||e.ctrlKey)&&(e.preventDefault(),_.Am.success("Start a New Chat"),X())};if(F.length>0&&!V)return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[F,V]);let[ea,es]=(0,p.useState)(!1),er=e8(e=>e.setOpen),{configuration:ei}=e4(),eo=(0,eJ.usePathname)(),ed=eo.split("/")[1],ec=null!==(h=eo.split("/")[2])&&void 0!==h?h:"chat",{localVersion:eu,remoteVersion:em,notify:ep}=(0,tm.j)(e=>e),ex=async()=>{tx({command:"codegpt.updateCodeGPT"})};(0,p.useEffect)(()=>{eu!==em&&ep&&(console.log("New version ".concat(em," available!")),(0,_.Am)("New version ".concat(em," available!"),{action:{label:"update",onClick:()=>{ex()}},duration:1e4,actionButtonStyle:{display:"inline-flex",alignItems:"center",justifyContent:"center",boxSizing:"border-box",appearance:"none",userSelect:"none",whiteSpace:"nowrap",verticalAlign:"middle",textAlign:"center",color:"hsl(var(--nextui-default-foreground) / var(--nextui-default-foreground-opacity, var(--tw-text-opacity)))",backgroundColor:"hsl(var(--nextui-default) / 0.4)",padding:"var(--nextui-spacing-unit-3)",borderRadius:"var(--nextui-radius-small)",border:"1px solid hsl(var(--nextui-primary-400) / 0.1)",fontSize:"var(--nextui-font-size-tiny)",lineHeight:"var(--nextui-line-height-tiny)"},style:{color:"hsl(var(--nextui-default-foreground) / var(--nextui-default-foreground-opacity, var(--tw-text-opacity)))"}}))},[em]);let eh=(0,p.useRef)(null),eg=(0,p.useRef)(null);return(0,a.jsxs)(lp.Provider,{value:{...R,scrollToBottom:en,onSubmit:G,clearChat:X},children:[(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{id:"sidebar",className:"".concat(ea?"visible z-50":"invisible -z-50"," fixed left-0 top-0 h-screen w-screen transition-all"),children:[(0,a.jsx)("div",{className:"".concat(ea?"opacity-100":"opacity-0"," absolute left-0 top-0 z-20 h-screen w-screen cursor-pointer bg-white/50 transition-all dark:bg-black/50"),onClick:()=>es(!1)}),(0,a.jsxs)("div",{id:"sidebar-content",className:"".concat(ea?"opacity-100":"-translate-x-full opacity-50"," absolute left-0 top-0 z-50 grid h-full w-full max-w-sm grid-flow-row grid-cols-1 grid-rows-[auto_1fr] content-between bg-content1 shadow-lg transition-transform ease-in-out dark:bg-content1"),children:[(0,a.jsxs)("div",{"attr-role":"header",className:"grid grid-flow-col items-center justify-between p-3",children:[(0,a.jsx)(tB.Z,{className:"mr-auto h-3"}),(0,a.jsx)(eF.A,{startContent:(0,a.jsx)(tv.Z,{className:"w-4"}),onPress:()=>es(!1),isIconOnly:!0,size:"sm",variant:"bordered",className:"border"})]}),(0,a.jsxs)(tj.o,{className:"items-between grid content-between px-3 pb-6",children:[(0,a.jsx)(tN.X,{items:lm,variant:"flat","aria-label":"Menu",onAction:e=>{"chat"===e&&((0,$.q)({eventName:"clickOver",target:"optionMenuChat"}),es(!1)),"marketplace"===e&&((0,$.q)({eventName:"clickOver",target:"optionMenuMarketplace"}),(0,s.Cl)("http://localhost:54112/".concat(ed,"/marketplace"))),"vision"===e&&((0,$.q)({eventName:"clickOver",target:"optionMenuReactSandbox"}),(0,s.Yo)("http://localhost:54112/".concat(ed,"/vision"))),"autocomplete"===e&&((0,$.q)({eventName:"clickOver",target:"optionMenuAutocomplete"}),er(!0)),"extDocsLink"===e&&((0,$.q)({eventName:"clickOver",target:"optionMenuExtDoc"}),(0,s.os)("https://docs.codegpt.co/docs/intro")),"apiDocsLink"===e&&((0,$.q)({eventName:"clickOver",target:"optionMenuApiDoc"}),(0,s.os)("https://developers.codegpt.co/reference/agents-beta")),"issues"===e&&((0,$.q)({eventName:"clickOver",target:"optionMenuReportIssue"}),(0,s.Yo)("https://github.com/JudiniLabs/code-gpt-docs/issues")),"feedback"===e?((0,$.q)({eventName:"clickOver",target:"optionMenuReportIssue"}),(0,s.Yo)("https://codegpt.canny.io/requests")):console.log(e)},children:e=>(0,a.jsx)(ty.y,{classNames:{heading:"capitalize"},title:e.key,showDivider:e.divider,children:e.items.map(e=>(0,a.jsx)(te.R,{"aria-label":e.label,textValue:e.label,description:e.description,classNames:{base:"text-default-500 group-hover:text-foreground ".concat(ec===e.key?"bg-transparent data-[hover=true]:bg-transparent":"bg-transparent group-hover:bg-content2/20 data-[hover=true]:bg-content2/20"),title:"transition-none text-sm ".concat(ec===e.key?"text-foreground":""),description:"transition-none text-default-500"},startContent:e.startContent&&(0,a.jsx)("div",{"attr-id":"icon-box","attr-size":"md",className:"\n                            flex h-8 w-8 shrink-0 items-center justify-center rounded-xl\n                            ".concat(ec===e.key?"bg-primary/20 text-primary-600":"bg-content2","\n                            "),children:e.startContent}),endContent:null==e?void 0:e.endcontent,children:e.label},e.key))},e.key)}),(0,a.jsxs)("div",{className:"mt-auto flex items-center justify-center gap-2 pl-3 text-default-500",children:[(0,a.jsx)("span",{className:"text-sm",children:"Version"}),(0,a.jsx)(tw.z,{variant:"bordered",size:"sm",className:"border text-default-500",children:eu})]})]})]})]})}),(0,a.jsx)("div",{className:"relative flex h-screen overflow-hidden",children:(0,a.jsxs)("div",{className:"flex w-full flex-col",children:[(0,a.jsxs)("div",{id:"app-header",ref:eh,"attr-role":"app-header",className:"\n              fixed top-0 z-10\n              flex\n              w-full items-center\n              justify-between gap-4 bg-content1/80\n              px-4 py-2 backdrop-blur-lg\n              transition-all duration-300 ease-in-out\n            ",children:[(0,a.jsx)("button",{className:"flex shrink-0 cursor-pointer select-none items-center gap-1 rounded-md p-0.5 text-xs leading-normal text-default-500 hover:text-default-700",onClick:()=>{ea||(0,$.q)({eventName:"clickOver",target:"openMenu"}),es(!ea)},children:ea?(0,a.jsx)(tv.Z,{className:"w-5"}):(0,a.jsx)(tb.Z,{className:"w-5"})},"settings"),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[j&&(null===(d=w[j])||void 0===d?void 0:d.id)&&(0,a.jsx)(eP.e,{content:"Home",placement:"top",classNames:{content:"bg-content2 text-default-500"},children:(0,a.jsx)("button",{className:"flex shrink-0 cursor-pointer select-none items-center rounded-md p-0.5 text-xs leading-normal text-default-500 hover:text-default-700",disabled:V,onClick:()=>{N("codegptplusbeta"),(0,Q.$)(),k("codegptplusbeta",{label:"",id:"",fromMarketplace:!1,image:"",description:"",welcome:"",prompt_library:[]}),X(),(0,$.q)({eventName:"clickOver",groupBy:"aiSelector",target:"ChatHeaderHomeButton"})},children:(0,a.jsx)(tP.Z,{className:"size-4 shrink-0"})})}),ei&&(0,a.jsx)(eP.e,{content:"Autocomplete Settings",classNames:{content:"bg-content2 text-default-500"},children:(0,a.jsx)("button",{className:"flex shrink-0 cursor-pointer select-none items-center rounded-md p-0.5 text-xs leading-normal text-default-500 hover:text-default-700",onClick:()=>{(0,$.q)({eventName:"clickOver",target:"optionMenuAutocompleteHeader"}),er(!0)},children:(0,a.jsx)("div",{className:"relative rounded-full",children:(null==ei?void 0:ei.isEnabled)?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("span",{className:"absolute bottom-0 right-0 flex size-1.5",children:[(0,a.jsx)("span",{className:"absolute inline-flex h-full w-full animate-ping rounded-full bg-emerald-400"}),(0,a.jsx)("span",{className:"relative inline-flex size-1.5 rounded-full bg-emerald-400"})]}),(0,a.jsx)(tC.Z,{className:"h-4 w-4 text-foreground"})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:"absolute bottom-0 right-0 ml-1 h-1.5 w-1.5 rounded-full bg-danger opacity-85"}),(0,a.jsxs)("span",{className:"absolute bottom-0 right-0 flex size-1.5",children:[(0,a.jsx)("span",{className:"absolute inline-flex h-full w-full animate-ping rounded-full"}),(0,a.jsx)("span",{className:"relative inline-flex size-1.5 rounded-full bg-pink-400"})]}),(0,a.jsx)(tC.Z,{className:"h-4 w-4"})]})})},"autocomplete")}),(0,a.jsx)(tU,{}),(0,a.jsx)(la,{}),F.length>0&&!V&&(0,a.jsx)(eP.e,{content:"New Chat",placement:"bottom",classNames:{content:"bg-content2 text-default-500"},children:(0,a.jsx)("button",{className:"flex shrink-0 cursor-pointer select-none items-center gap-1 rounded-md p-0.5 text-xs leading-normal text-default-500 hover:text-default-700",onClick:()=>{let e=null==C?void 0:C.loggedIn;T&&e&&(0,$.e)({agentId:z}),X()},disabled:V,children:(0,a.jsx)(ta,{className:"size-4 shrink-0"})})})]}),(0,a.jsx)(lu,{isLoading:V})]}),(0,a.jsxs)(ti,{direction:"vertical",className:"",children:[(0,a.jsx)(to,{defaultSize:75,minSize:25,maxSize:85,children:(0,a.jsxs)("div",{className:"h-full gap-6 overflow-y-auto scroll-smooth pt-12",ref:eg,children:[(0,a.jsx)("div",{className:"w-full",children:j&&(null==w?void 0:null===(c=w[j])||void 0===c?void 0:c.label)!==""&&F.length>0?(0,a.jsxs)("div",{className:"mx-auto flex w-full flex-col gap-6 px-4 py-2",children:[F.filter(e=>["user","assistant"].includes(e.role)).map((e,t)=>(0,a.jsx)(li,{role:e.role,content:e.content,display:e.display,image:e.attachment,index:t,isLastMessage:t===F.length-1,isLoading:V,providerState:j,modelHistory:Y,reload:q,codeSelection:e.codeSelection,status:v},"msg-".concat(t))),V&&!J&&(0,a.jsx)(li,{role:"assistant",content:"",display:[],index:F.length,isLastMessage:!0,isLoading:!0,providerState:j,modelHistory:Y,reload:q,status:v})]}):j&&(null===(u=w[j])||void 0===u?void 0:u.id)?(0,a.jsx)("div",{className:"grid gap-4",children:(0,a.jsx)(tL,{})}):(0,a.jsxs)("div",{className:"mx-auto mt-[12%] max-w-2xl px-2",children:[(0,a.jsx)("h1",{className:"mb-4 text-center text-2xl font-bold",children:"Let's start creating"}),(0,a.jsx)(eY,{currentModel:w[j],modelState:w,providerState:j,onSubmit:G,isLoading:V,stop:H,clearChat:X,rounded:!0,placeholder:"Ask anything"})]})}),(0,a.jsx)("div",{className:"select-none",style:{background:"transparent",width:"100%",height:"3rem",marginTop:"0"},ref:ee})]})}),j&&(null===(m=w[j])||void 0===m?void 0:m.id)&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(td,{withHandle:!0}),(0,a.jsx)(to,{defaultSize:25,minSize:15,children:(0,a.jsx)("footer",{className:"relative mx-auto flex h-full w-full flex-col gap-2 bg-content2",children:(0,a.jsx)(eY,{currentModel:w[j],modelState:w,providerState:j,onSubmit:G,isLoading:V,stop:H,clearChat:X,placeholder:'"/" for slash commands: /Fix, /Explain. "#" for file mentions: #index.html.'})})})]})]})]})}),j?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(tl,{}),(0,a.jsx)(e1,{})]}):null]})}},40790:function(e,t,l){"use strict";l.r(t),l.d(t,{default:function(){return h}});var n=l(57437),a=l(89101),s=l(29962),r=l(14970),i=l(71947);function o(e){let{chunks:t}=e,{files:l,setFiles:o}=(0,s.J)();return(0,n.jsx)("div",{className:"flex ".concat(t.length>1?"h-40":"h-12"," flex-col gap-1 overflow-y-auto"),children:t.map(e=>{var t;let{similarity:s,origin_file:d,start_line:c,end_line:u}=e;return(0,n.jsxs)("div",{className:"command command-with-icon animate-slideIn relative flex h-auto max-h-32 w-full cursor-pointer items-center justify-between gap-2 bg-content2 text-default-500",style:{inlineSize:"auto"},onClick:()=>(0,a.ZB)(d,c,u),children:[(0,n.jsxs)("span",{className:"flex max-w-full items-center gap-2 overflow-hidden text-ellipsis whitespace-pre break-words pr-1 text-xs","data-language":null===(t=d.split("/").at(-1))||void 0===t?void 0:t.split(".").at(-1),children:[d.split("/").at(-1),1!==s?" (".concat(c+1,":").concat(u+1,")"):""]}),(0,n.jsxs)("div",{className:"flex gap-1",children:[1!==s&&(0,n.jsxs)("button",{className:"flex h-6 items-center justify-center gap-1 rounded-md border px-2 text-default-500",onClick:e=>{e.stopPropagation();let t=l.findIndex(e=>e.path===d);-1!==t?o(l.map((e,l)=>l===t?{...e,fromLine:c,toLine:u}:e)):o([...l,{name:d.split("/").at(-1),path:d,fromLine:c,toLine:u}])},children:[(0,n.jsx)(r.Z,{className:"size-3 shrink-0"}),(0,n.jsx)("span",{className:"text-xs",children:"Open"})]}),(0,n.jsxs)("button",{className:"flex h-6 items-center justify-center gap-1 rounded-md border px-2 text-default-500",onClick:e=>{e.stopPropagation();let t=l.findIndex(e=>e.path===d);-1!==t?o(l.map((e,l)=>l===t?{name:d.split("/").at(-1),path:d}:e)):o([...l,{name:d.split("/").at(-1),path:d}])},children:[(0,n.jsx)(i.Z,{className:"size-3 shrink-0"}),(0,n.jsx)("span",{className:"text-xs",children:"Use as context"})]})]})]},d)})})}var d=l(30166),c=l(2265);let u=(0,d.default)(()=>l.e(681).then(l.bind(l,91681)),{loadableGenerated:{webpack:()=>[91681]},ssr:!1});var m=e=>{let{data:t,isDark:l}=e,s=(0,c.useCallback)((e,t,n)=>{let a=e.id,s=12/n;t.font="".concat(s,"px Sans-Serif");let r=[t.measureText(a).width,s].map(e=>e+.2*s);t.fillStyle=e.color,t.beginPath(),t.arc(e.x,e.y,r[1]/2+4,0,2*Math.PI,!1),t.fill(),t.textAlign="center",t.textBaseline="middle",t.fillStyle=l?"white":"black",t.fillText(a,e.x,e.y)},[l]);return(0,n.jsx)("div",{className:"flex h-80 w-full items-center justify-center overflow-hidden rounded-lg bg-content2",children:(0,n.jsx)(u,{graphData:t,nodeId:"id",nodeLabel:e=>e.metadata.path.split("::").at(0),nodeColor:e=>e.color,nodeCanvasObject:s,nodeCanvasObjectMode:()=>"replace",linkDirectionalArrowLength:3.5,linkDirectionalArrowRelPos:1,linkDirectionalArrowColor:()=>l?"#ccc":"#000",linkColor:()=>l?"#ccc":"#000",onNodeClick:e=>{let t=e.metadata.path.split("::").at(0);console.log({file:t}),(0,a.ZB)(t)}})})};function p(e){let t=["#FF5733","#33FF57","#33b8ff","#F3FF33","#FF33F3"],l=t.map(e=>(function(e,t){let l=parseInt(e.slice(1),16),n=Math.round(-127.49999999999999),a=(l>>16)+n,s=(l>>8&255)+n,r=(255&l)+n;return"#".concat((16777216+(a<255?a<1?0:a:255)*65536+(s<255?s<1?0:s:255)*256+(r<255?r<1?0:r:255)).toString(16).slice(1).toUpperCase())})(e,0)),n=e?l:t;return n[Math.floor(Math.random()*n.length)]}var x=l(25922);function h(e){let{chunks:t,graph:l}=e,{theme:a}=(0,x.F)(),s="dark"===a;return l&&0!==l.length||t&&0!==t.length?(0,n.jsxs)("div",{className:"relative w-full",children:[l&&l.length>0&&(0,n.jsx)("div",{"aria-label":"Graph",title:"Graph",children:(0,n.jsx)(m,{data:function(e,t){let l=[],n=[],a=new Set;return console.log({relations:e}),e.forEach(e=>{let{source:s,target:r}=e,i=s.split("::")[0].split("/").slice(-1)[0],o=r.split("::")[0].split("/").slice(-1)[0];i&&o&&(a.has(i)||(l.push({id:i,color:p(t),size:Math.max(3*i.length,15),metadata:{createdAt:new Date,type:"source",path:s}}),a.add(i)),a.has(o)||(l.push({id:o,color:p(t),size:Math.max(3*o.length,15),metadata:{createdAt:new Date,type:"target",path:r}}),a.add(o)),n.push({source:i,target:o}))}),{nodes:l,links:n}}(l,s),isDark:s})},"Graph"),t&&t.length>0&&(0,n.jsx)("div",{"aria-label":"List of Files",title:"List of Files",children:(0,n.jsx)(o,{chunks:t})},"List of Files")]}):null}},71069:function(e,t,l){"use strict";l.d(t,{default:function(){return u}});var n=l(57437),a=l(27127),s=l(88753),r=l(9015),i=l(87121),o=l(90766),d=l(61836),c=l(64959);function u(){let{isOpen:e,setOpen:t,message:l}=(0,a.c)();return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(s.R,{isOpen:e,onOpenChange:t,placement:"top-center",size:"xl",scrollBehavior:"inside",classNames:{closeButton:"bg-content2 active:bg-content2/10 h-10 w-10 p-0 flex items-center justify-center rounded-full absolute top-3 right-6",header:"grid grid-flow-col justify-between items-center",body:"pb-4 px-2"},children:(0,n.jsxs)(r.A,{children:[(0,n.jsx)(i.k,{children:(0,n.jsx)("h2",{children:l.title})}),(0,n.jsxs)(o.I,{children:[(0,n.jsxs)("div",{className:"grid gap-4 px-3",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[l.provider&&(0,n.jsx)(d.J,{src:l.provider,alt:"agent",className:"h-6 w-6",radius:"full"}),(0,n.jsx)("p",{className:"capitalize text-default-500",children:l.subtitle})]}),(0,n.jsx)("p",{className:"text-lg",children:l.description})]}),(0,n.jsx)(c.j,{className:"mt-8"}),null==l?void 0:l.actions]})]})})})}},73191:function(e,t,l){"use strict";l.d(t,{default:function(){return N}});var n=l(57437),a=l(89101),s=l(59425),r=l(98720),i=l(48652),o=l(63760),d=l(1442),c=l(42548),u=l(64959),m=l(68442),p=l(20939),x=l(71947),h=l(56475),f=l(49998),g=l(99376),v=l(2265),b=l(14438);let j=e=>{var t;let l={name:"root",type:"folder",children:[],filePath:""};return(e.forEach(e=>{let t=e.split("/"),n=l;for(let l=0;l<t.length;l++){var a,s;let r=t[l],i=r.includes("."),o=null===(a=n.children)||void 0===a?void 0:a.find(e=>e.name===r);if(o)n=o;else{let a={name:r,type:i?"file":"folder",children:i?void 0:[],filePath:e};l===t.length-1&&i&&(a.filePath=e),null===(s=n.children)||void 0===s||s.push(a),n=a}}}),(null===(t=l.children)||void 0===t?void 0:t.length)===1&&""===l.children[0].name)?l.children[0]:l};var N=(0,v.memo)(e=>{let{paths:t,level:l=0,bodyOnly:N}=e,[y,w]=(0,v.useState)(-1),[k,C]=(0,v.useState)(!1),{messages:z,isLoading:S}=(0,v.useContext)(s.p),{getFirstCodeBlockContent:M}={getFirstCodeBlockContent:function(e){let t=/```(\w+)?\s*([\s\S]*?)\s*```/.exec(e);return t?t[2]:null}},{selectedProvider:P}=(0,i.Y)(),{currentProviderModel:A}=(0,i.o)(),_=A[P],L=(0,g.usePathname)().split("/")[1];if(!t||0===t.length)return null;let I=j(t),O=async()=>{(0,o.q)({eventName:"clickOver",target:"Generate Files and Folders"}),console.log({messages:z});let e=[...z];for(let n of(e.push({role:"system",content:"Please generate the content for the user-selected file only. Do not include any explanations, introductions, or additional text. Provide only the code.",id:crypto.randomUUID()}),t)){var l;e.push({role:"user",content:"Generate content for the following file: ".concat(n),id:crypto.randomUUID()});let t=await fetch("http://localhost:54112/".concat(L,"/api/").concat(P),{method:"POST",body:JSON.stringify({messages:e}),headers:{"Content-Type":"application/json",...(null==_?void 0:_.id)?{model:_.id}:{},...(null==_?void 0:_.fromMarketplace)?{fromMarketplace:"true"}:{}}}),s=await t.text();(0,o.q)({eventName:"codeBuilderCreateFile",provider:P,model:null===(l=A[P])||void 0===l?void 0:l.id,code_language:n.split(".").at(-1),codeLinesNumber:s.split("\n").length}),e.push({role:"assistant",content:s,id:crypto.randomUUID()}),await (0,a.JJ)({filePath:n,content:M(s)||s})||b.Am.error("Failed to write file content"),w(e=>e+1)}},Z=e=>{let{level:t,isLastChild:l}=e;return(0,n.jsxs)("svg",{className:"absolute left-0 top-0 h-full w-4 text-default-300",style:{left:"".concat((t-1)*0||"0.1","rem")},children:[(0,n.jsx)("line",{x1:"0",y1:"0",x2:"0",y2:l?"50%":"100%",stroke:"currentColor",strokeWidth:"1"}),t>0&&(0,n.jsx)("line",{x1:"0",y1:"50%",x2:"100%",y2:"50%",stroke:"currentColor",strokeWidth:"0.5"})]})},D=e=>{let{file:t,level:l,fileIndex:s,isLastChild:i}=e,o=.1*l==0?0:.1*l+1;return(0,n.jsxs)("li",{className:"relative flex items-center gap-2 py-1",style:{paddingLeft:"".concat(o,"rem")},children:[l>0&&(0,n.jsx)(Z,{level:l,isLastChild:i}),(0,n.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,n.jsx)(x.Z,{className:"size-3 text-default-500"}),(0,n.jsx)("span",{children:t.name})]}),(0,n.jsxs)("div",{className:"flex items-center",children:[k&&s===y+1?(0,n.jsx)(r.Z,{size:4}):null,s<=y?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(d.Z,{className:"mr-1 size-4 text-success"}),(0,n.jsx)("button",{onClick:()=>(0,a.ZB)(t.filePath),children:(0,n.jsx)(c.Z,{className:"size-4 text-default-500"})})]}):null]})]},t.name)},T=e=>{let{folder:t,level:l,fileIndex:a,isLastChild:s}=e,r=.1*l==0?0:.1*l+1;return(0,n.jsxs)("li",{className:"relative",style:{paddingLeft:"".concat(r,"rem")},children:[l>0&&(0,n.jsx)(Z,{level:l,isLastChild:s}),(0,n.jsxs)("div",{className:"flex items-center gap-1 py-1",children:[(0,n.jsx)(h.Z,{className:"size-3 text-sky-500"}),(0,n.jsx)("span",{children:t.name})]}),(0,n.jsx)("ul",{className:"relative",children:t.children&&t.children.map((e,s)=>"file"===e.type?(0,n.jsx)(D,{file:e,level:l+1,fileIndex:a.current++,isLastChild:s===t.children.length-1},"".concat(e.name,"-").concat(s)):(0,n.jsx)(T,{folder:e,level:l+1,fileIndex:a,isLastChild:s===t.children.length-1},"".concat(e.name,"-").concat(s)))})]},t.name)},R={current:0};return(0,n.jsxs)("details",{className:"w-full cursor-pointer rounded-md border border-content3 p-2",children:[(0,n.jsx)("summary",{className:"select-none text-xs text-default-500",children:"Codebase Context"}),(0,n.jsxs)("div",{className:"mt-2 select-none text-xs text-default-500",children:[!N&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{children:(0,n.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,n.jsx)(h.Z,{className:"size-4 text-sky-400"}),"Workspace Generator"]})}),(0,n.jsx)(u.j,{orientation:"horizontal"})]}),(0,n.jsx)("div",{children:(0,n.jsx)("ul",{className:"relative max-h-48 overflow-y-auto",children:"file"===I.type?(0,n.jsx)(D,{file:I,level:l,fileIndex:R.current++,isLastChild:!0}):(0,n.jsx)(T,{folder:I,level:l,fileIndex:R,isLastChild:!0})})}),!N&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(u.j,{orientation:"horizontal"}),(0,n.jsx)(m.i,{className:"flex justify-end gap-2",children:(0,n.jsx)("div",{className:"flex items-center gap-2",children:(0,n.jsx)(p.A,{variant:"faded",size:"sm",className:"capitalize text-default-500",isDisabled:k||S,disabled:k||S,onPress:async()=>{C(!0),w(-1),await O().catch(e=>console.log(e)),C(!1)},startContent:k?(0,n.jsx)(r.Z,{size:4}):(0,n.jsx)(f.Z,{className:"size-4 text-primary"}),children:"Create"})})})]})]})]})})},67042:function(e,t,l){"use strict";l.d(t,{default:function(){return f}});var n=l(57437),a=l(59425),s=l(60649),r=l(94508),i=l(63760),o=l(66752),d=l(98218),c=l(98540),u=l(61836),m=l(68442),p=l(20939),x=l(49998),h=l(2265);function f(e){let{planningSteps:t}=e,[l,f]=(0,h.useState)(!1),{onSubmit:g,isLoading:v}=(0,h.useContext)(a.p);if(!t||0===t.length)return(0,n.jsx)(o.w,{className:"mx-auto w-full max-w-2xl",children:(0,n.jsx)(d.G,{className:"p-6",children:(0,n.jsx)("p",{className:"text-center text-muted-foreground",children:"No planning steps available."})})});let b=async()=>{let e;f(!0),(0,i.q)({eventName:"clickOver",target:"startPlanningBtn"});for(let l=0;l<t.length;l++){let n=t[l];e=await g({externalInput:"Step ".concat(l+1,") ").concat(n.step),externalModel:n.agentId,externalMessages:e,chatRequestOptions:{options:{headers:{"Content-Type":"application/json",fromMarketplace:"true"}}}})}f(!1)};return(0,n.jsxs)(o.w,{className:"mx-auto w-full max-w-2xl",children:[(0,n.jsxs)(c.u,{className:"relative flex items-center",children:[(0,n.jsx)("h2",{className:"mx-auto text-center text-2xl font-bold",children:"Steps and Assigned Agents"}),(0,n.jsx)(s.lU,{})]}),(0,n.jsx)(d.G,{children:(0,n.jsx)("ul",{className:"space-y-4",children:t.map((e,t)=>{var l,a;return(0,n.jsxs)("li",{className:"flex items-start space-x-4 rounded-lg bg-secondary p-4",children:[(0,n.jsxs)("div",{className:"grow",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(u.J,{src:null!==(l=e.image)&&void 0!==l?l:(0,r.k)(e.agentName),alt:null!==(a=e.agentName)&&void 0!==a?a:"agent",loading:"eager",disableSkeleton:!0,classNames:{img:"size-[1.7rem] rounded-full border border-content3 shrink-0 opacity-100 block"},className:"size-[1.7rem] rounded-full"}),(0,n.jsx)("span",{children:e.agentName})]}),(0,n.jsxs)("p",{className:"mt-2 font-medium",children:["Step: ",e.step]})]}),(0,n.jsx)("div",{className:"flex size-8 shrink-0 select-none items-center justify-center rounded-full bg-primary font-bold text-primary-foreground",children:t+1})]},e.agentId)})})}),(0,n.jsx)(m.i,{className:"flex flex-row-reverse",children:(0,n.jsx)(p.A,{variant:"faded",size:"sm",className:"capitalize text-default-500",isDisabled:l||v,disabled:l||v,onPress:b,startContent:(0,n.jsx)(x.Z,{className:"size-4 text-primary"}),children:"Start"})})]})}},53048:function(e,t,l){"use strict";l.d(t,{default:function(){return u}});var n=l(57437),a=l(30454),s=l(39386),r=e=>(0,n.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:40,height:40,viewBox:"0 0 260 260",preserveAspectRatio:"xMidYMid",...e,children:[(0,n.jsx)("path",{fill:"currentColor",d:"M255.878 133.451c0-10.734-.871-18.567-2.756-26.69H130.55v48.448h71.947c-1.45 12.04-9.283 30.172-26.69 42.356l-.244 1.622 38.755 30.023 2.685.268c24.659-22.774 38.875-56.282 38.875-96.027"}),(0,n.jsx)("path",{fill:"currentColor",d:"M130.55 261.1c35.248 0 64.839-11.605 86.453-31.622l-41.196-31.913c-11.024 7.688-25.82 13.055-45.257 13.055-34.523 0-63.824-22.773-74.269-54.25l-1.531.13-40.298 31.187-.527 1.465C35.393 231.798 79.49 261.1 130.55 261.1"}),(0,n.jsx)("path",{fill:"currentColor",d:"M56.281 156.37c-2.756-8.123-4.351-16.827-4.351-25.82 0-8.994 1.595-17.697 4.206-25.82l-.073-1.73L15.26 71.312l-1.335.635C5.077 89.644 0 109.517 0 130.55s5.077 40.905 13.925 58.602l42.356-32.782"}),(0,n.jsx)("path",{fill:"currentColor",d:"M130.55 50.479c24.514 0 41.05 10.589 50.479 19.438l36.844-35.974C195.245 12.91 165.798 0 130.55 0 79.49 0 35.393 29.301 13.925 71.947l42.211 32.783c10.59-31.477 39.891-54.251 74.414-54.251"})]}),i=l(24090),o=l(43613),d=l(75135),c=l(2265);function u(e){let{loggedIn:t}=e,[l,u]=(0,c.useState)(!t),{loginFromEventSource:m}=(0,o.R)(),{userData:p}=(0,i.v)();return(0,c.useEffect)(()=>{(null==p?void 0:p.loggedIn)?u(!1):u(!0)},[null==p?void 0:p.loggedIn]),(0,n.jsxs)("div",{className:"fixed left-0 top-0 z-50 h-screen w-screen ".concat(l?"":"hidden"),children:[l&&(0,n.jsx)("p",{children:null==p?void 0:p.loggedIn}),(0,n.jsxs)("div",{className:"left-0 top-0 h-screen w-screen max-w-none translate-x-0 gap-0 rounded-none border-none bg-content1 p-0",children:[(0,n.jsx)("div",{className:"flex h-full w-full flex-col items-center justify-center p-4",children:(0,n.jsxs)("div",{className:"w-full max-w-xs space-y-8",children:[(0,n.jsxs)("div",{className:"space-y-2 text-center",children:[(0,n.jsx)(s.Z,{className:"mx-auto h-6 w-fit"}),(0,n.jsx)("h1",{className:"text-xl text-default-500",children:"Sign Up"})]}),(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsxs)("button",{className:"flex w-full items-center justify-center gap-2 rounded-lg border border-blue-500 bg-blue-500 px-5 py-3 text-blue-50 shadow transition-all duration-300 active:scale-[.98] disabled:pointer-events-none disabled:opacity-50 dark:shadow-none",onClick:()=>m({provider:"google",callback:()=>u(!1)}),children:[(0,n.jsx)(r,{className:"text-default-950 size-5"}),"Continue with Google"]}),(0,n.jsxs)("button",{className:"flex w-full items-center justify-center gap-2 rounded-lg border bg-content2 px-5 py-3 text-base shadow transition-transform duration-300 active:scale-[.98] disabled:pointer-events-none disabled:opacity-50 dark:shadow-none",onClick:()=>m({provider:"github",callback:()=>u(!1)}),children:[(0,n.jsx)(d.Z,{className:"size-5"}),"Continue with Github"]})]}),(0,n.jsx)("p",{className:"mt-auto cursor-pointer text-center text-sm text-default-500 underline-offset-2 hover:underline",onClick:()=>m({type:"login",callback:()=>u(!1)}),children:"Already have an account? Sign in"})]})}),(0,n.jsxs)("div",{className:"mt-auto flex flex-col gap-1 p-4 text-center text-xs text-default-400 hover:underline-offset-2",children:[(0,n.jsx)("span",{children:"By creating an account, you agree to the "}),(0,n.jsxs)("div",{className:"mx-auto flex w-fit gap-1",children:[(0,n.jsx)(a.CustomLink,{isExternal:!0,href:"https://codegpt.co/terms_and_conditions",className:"cursor-pointer text-default-500 hover:underline hover:underline-offset-2",children:"Terms of Service"}),"and",(0,n.jsx)(a.CustomLink,{isExternal:!0,href:"https://codegpt.co/privacy_policy",className:"cursor-pointer text-default-500 hover:underline",children:"Privacy Policy"})]})]})]})]})}},39386:function(e,t,l){"use strict";var n=l(57437);t.Z=e=>(0,n.jsxs)("svg",{fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...e,viewBox:"20 20 327 40",children:[(0,n.jsx)("path",{d:"M59.9543 60V51.9817H28.003V28.003H59.9543V20H28.003C25.883 20.008 23.852 20.8538 22.3529 22.3529C20.8538 23.852 20.008 25.883 20 28.003V51.9817C20 54.1057 20.8427 56.1428 22.3431 57.6461C23.8435 59.1494 25.8791 59.9959 28.003 60H59.9543Z"}),(0,n.jsx)("path",{d:"M100.563 60C102.687 59.9959 104.723 59.1494 106.223 57.6461C107.723 56.1428 108.566 54.1057 108.566 51.9817V28.003C108.558 25.883 107.712 23.852 106.213 22.3529C104.714 20.8538 102.683 20.008 100.563 20H76.5691C74.4505 20.008 72.4211 20.8543 70.9244 22.3538C69.4277 23.8534 68.5853 25.8844 68.5813 28.003V51.9817C68.5813 54.1031 69.4219 56.1379 70.919 57.6408C72.4162 59.1436 74.4478 59.9919 76.5691 60H100.563ZM76.5691 28.0487H100.563V52.0274H76.5691V28.0487Z"}),(0,n.jsx)("path",{d:"M148.855 60C150.975 60 153.008 59.1589 154.509 57.6613C156.009 56.1638 156.854 54.1321 156.858 52.0122V28.003C156.85 25.883 156.004 23.852 154.505 22.3529C153.006 20.8538 150.975 20.008 148.855 20H116.904V60H148.855ZM124.861 28.0487H148.855V52.0274H124.861V28.0487Z"}),(0,n.jsx)("path",{d:"M205.287 20H173.336C171.221 20.016 169.198 20.8653 167.705 22.3636C166.213 23.8618 165.371 25.8882 165.363 28.003V51.9817C165.363 54.1031 166.204 56.1379 167.701 57.6408C169.198 59.1436 171.23 59.9919 173.351 60H205.302V51.9817H173.351V43.9939H205.302V36.0669H173.351V28.003H205.302L205.287 20Z"}),(0,n.jsx)("path",{d:"M253.914 20H221.963C219.841 20.004 217.808 20.8485 216.308 22.3485C214.808 23.8485 213.964 25.8817 213.96 28.003V51.9969C213.964 54.1183 214.808 56.1515 216.308 57.6515C217.808 59.1515 219.841 59.996 221.963 60H245.957C248.077 59.992 250.108 59.1462 251.607 57.6471C253.106 56.148 253.952 54.117 253.96 51.9969V36.0669H229.905V44.07H245.911V52.0578H221.917V28.003H253.868L253.914 20Z"}),(0,n.jsx)("path",{d:"M294.127 20H262.176V60H270.179V44.0091H294.173C296.293 44.0011 298.324 43.1554 299.823 41.6563C301.322 40.1571 302.168 38.1262 302.176 36.0061V28.003C302.168 25.8751 301.316 23.8372 299.807 22.3368C298.298 20.8364 296.255 19.996 294.127 20ZM270.133 36.067V28.003H294.127V36.067H270.133Z"}),(0,n.jsx)("path",{d:"M346.421 20H306.451V28.003H322.442V59.9543H330.445V28.003H346.421V20Z"})]})},12844:function(e,t,l){"use strict";l.d(t,{T:function(){return s}});var n=l(57437),a=l(61836);let s=e=>{let{provider:t,width:l,height:s,className:r=""}=e,i=t.toLowerCase().replaceAll(" ",""),o=i.includes("codegpt")?"codegpt":null!=i?i:"custom";return(0,n.jsx)(a.J,{radius:"full",disableSkeleton:!0,loading:"lazy",src:"/logotypes/".concat(o,".png"),...l&&{width:l},...s&&{height:s},className:"agent-avatar ".concat(r),alt:o,classNames:{wrapper:"shrink-0 rounded-full border border-content3 bg-content3 opacity-100 block",img:"rounded-full border border-content3 bg-content3 opacity-100 block"}})}},47776:function(e,t,l){"use strict";var n=l(57437),a=l(57609),s=l(43613),r=l(20939);let i={codegptplusbeta:{name:"CodeGPT Plus",OAuthLogin:()=>{let{loginFromEventSource:e}=(0,s.R)();return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:"grid grid-cols-1 content-stretch items-center justify-center gap-2",children:[(0,n.jsx)(r.A,{color:"primary",fullWidth:!0,onPress:async()=>{e({type:"signup"})},children:"Sign Up"}),(0,n.jsx)(r.A,{variant:"bordered",fullWidth:!0,className:"border",onPress:async()=>{e({type:"login"})},children:"Sign In"})]})})},apikey:!0,apikey_placeholder:"CodeGPT Plus ApiKey",org:!0,connection_info_link:[{label:"Read more about CodeGPT Plus apikey",link:"".concat(a.Ft,"/en/apikeys")}],max_tokens:!0,temperature:!0},codegptenterprise:{name:"CodeGPT Enterprise",apikey:!0,apikey_placeholder:"CodeGPT Enterprise ApiKey",org:!0,connection_info_link:[{label:"Read more about CodeGPT Plus apikey",link:"".concat(a.Ft,"/en/apikeys")}],customLink:!0,customLink_placeholder:"Custom Link (https://{API URL}/api/v1)",max_tokens:!0,temperature:!0},openai:{name:"OpenAI",apikey:!0,org:!0,connection_info_link:[{label:"Read more about OpenAI apikey",link:"https://platform.openai.com/api-keys"}],max_tokens:!0,temperature:!0,config_info_link:[{label:"Read more about OpenAI config",link:"https://platform.openai.com/docs/api-reference/chat/create"}]},azure:{name:"Azure",apikey:!0,customLink:!0,connection_info_link:[{label:"Read more about Azure apikey",link:"https://learn.microsoft.com/en-us/azure/ai-services/openai/reference"}],max_tokens:!0,temperature:!0,config_info_link:[{label:"Read more about Azure (OpenAI) config",link:"https://learn.microsoft.com/en-us/azure/ai-services/openai/reference#chat-completions"}]},cohere:{name:"Cohere",apikey:!0,connection_info_link:[{label:"Read more about Cohere apikey",link:"https://dashboard.cohere.com/api-keys"}],temperature:!0,config_info_link:[{label:"Read more about Cohere config",link:"https://docs.cohere.com/docs/cochat-beta#define-the-model-settings"}]},anthropic:{name:"Anthropic",apikey:!0,connection_info_link:[{label:"Read more about Anthropic apikey",link:"https://console.anthropic.com/login"}],max_tokens:!0,temperature:!0,config_info_link:[{label:"Read more about Anthropic config",link:"https://docs.anthropic.com/claude/reference/messages_post"}]},googleaistudio:{name:"Google AI Studio",apikey:!0,apikey_placeholder:"ApiKey (Google-AI-Studio models)",connection_info_link:[{label:"Read more about Google-Ai-Studio",link:"https://makersuite.google.com/app/apikey"}],max_tokens:!0,temperature:!0,config_info_link:[{label:"Read more about Google-Ai-Studio config",link:"https://ai.google.dev/docs/gemini_api_overview"}]},vertex:{name:"Vertex",customLink:!0,customLink_placeholder:"Custom Link (Vertex models)",oAuthFile:!0,oAuthFile_placeholder:'Upload JSON file  (Vertex "apikey" (credentials.json))',connection_info_link:[{label:"Read more about Vertex credentials",link:"https://developers.google.com/workspace/guides/create-credentials"}],max_tokens:!0,temperature:!0,config_info_link:[{label:"Read more about Vertex config",link:"https://cloud.google.com/vertex-ai/docs/generative-ai/model-reference/gemini?hl=es-419#request_body"}]},ollama:{name:"Ollama",customLink:!0,customLink_placeholder:"Custom Link (http://localhost:11434)",disableConnection:!0},fireworksai:{name:"FireworksAI",apikey:!0,connection_info_link:[{label:"Read more about FireworksAI apikey",link:"https://app.fireworks.ai/users?tab=apps"}],max_tokens:!0,temperature:!0,config_info_link:[{label:"Read more about FireworksAI config",link:"https://readme.fireworks.ai/reference/createchatcompletion"}]},mistral:{name:"Mistral",apikey:!0,connection_info_link:[{label:"Read more about Mistral apikey",link:"https://console.mistral.ai/user/api-keys/"}],max_tokens:!0,temperature:!0,config_info_link:[{label:"Read more about Mistral config",link:"https://docs.mistral.ai/api"}]},huggingface:{name:"HuggingFace",apikey:!0,connection_info_link:[{label:"Read more about HuggingFace apikey",link:"https://huggingface.co/settings/tokens"}],max_tokens:!0,temperature:!0,config_info_link:[{label:"Read more about HuggingFace config",link:"https://huggingface.co/docs/api-inference/detailed_parameters?code=js"}]},custom:{name:"Custom",apikey:!0,customLink:!0,max_tokens:!0,temperature:!0},bedrock:{name:"Bedrock",region:!0,access_key_id:!0,secret_access_key:!0,session_token:!0,max_tokens:!0,temperature:!0,connection_info_link:[{label:"Read more about Bedrock connection info",link:"https://aws.amazon.com/bedrock/"}]},perplexity:{name:"Perplexity",apikey:!0,max_tokens:!0,temperature:!0,connection_info_link:[{label:"Read more about Perplexity apikey",link:"https://docs.perplexity.ai/reference/post_chat_completions"}]},lmstudio:{name:"LM Studio",max_tokens:!0,temperature:!0,disableConnection:!0},groq:{name:"Groq",apikey:!0,connection_info_link:[{label:"Read more about Groq apikey",link:"https://wow.groq.com/"}],max_tokens:!0,temperature:!0},grok:{name:"Grok",apikey:!0,connection_info_link:[{label:"Read more about Grok apikey",link:"https://docs.x.ai/api/"}],max_tokens:!0,temperature:!0},nvidia:{name:"Nvidia",apikey:!0,connection_info_link:[{label:"Read more about Nvidia apikey",link:"https://build.nvidia.com/"}],max_tokens:!0,temperature:!0},deepseek:{name:"DeepSeek",apikey:!0,connection_info_link:[{label:"Read more about DeepSeek apikey",link:"https://platform.deepseek.com/"}],max_tokens:!0,temperature:!0},github:{name:"Github Models",apikey:!0,connection_info_link:[{label:"Read more about Github models",link:"https://github.com/marketplace/models"}],max_tokens:!0,temperature:!0},githubcopilot:{name:"Github Copilot",apikey:!1,connection_info_link:[{label:"Read more about Github Copilot",link:"https://github.com/features/copilot"}],max_tokens:!0,temperature:!0},cerebras:{name:"Cerebras",apikey:!0,connection_info_link:[{label:"Read more about Cerebras apikey",link:"https://inference-docs.cerebras.ai/introduction/"}],max_tokens:!0,temperature:!0}};t.Z=i},67870:function(e,t,l){"use strict";l.d(t,{default:function(){return es}});var n=l(57437),a=l(89101),s=l(94508),r=l(61836),i=e=>{var t,l,a,i,o,d,c;let{agent:u,comment:m}=e;return(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(r.J,{src:null!==(l=null==u?void 0:u.image)&&void 0!==l?l:(0,s.k)(null!==(t=null==u?void 0:u.label)&&void 0!==t?t:null==u?void 0:u.name),alt:null!==(i=null!==(a=null==u?void 0:u.label)&&void 0!==a?a:null==u?void 0:u.name)&&void 0!==i?i:"agent",loading:"eager",disableSkeleton:!0,classNames:{img:"size-[1.7rem] rounded-full border border-content3 shrink-0 opacity-100 block"},className:"size-[1.7rem] rounded-full"}),(0,n.jsxs)("p",{className:"relative grid max-w-80 overflow-hidden",children:[(0,n.jsx)("span",{className:"text-ellipsis",children:null!==(o=null==u?void 0:u.label)&&void 0!==o?o:null==u?void 0:u.name}),(0,n.jsx)("span",{className:"truncate text-xs text-default-500",children:null!==(d=null!=m?m:null==u?void 0:u.model)&&void 0!==d?d:null==u?void 0:u.welcome})]})]},null!==(c=u.value)&&void 0!==c?c:u.id)},o=l(94865),d=l(48652),c=l(63760),u=l(81498),m=l(74218),p=l(62126),x=l(73247);function h(e){let{isOnModal:t=!1}=e,{agents:l}=(0,o.X)(e=>e),{setCurrentProviderModel:a}=(0,d.o)(),{setSelectedProvider:s,setIsPopoverOpen:h}=(0,d.Y)(),f=e=>{let{agent:l,index:i}=e;return(0,n.jsxs)("div",{className:"relative flex h-14 w-full shrink-0 cursor-pointer select-none items-center gap-2 overflow-hidden rounded-lg bg-content2 px-3 transition-all ".concat(i),onClick:()=>{a("codegptplusbeta",{id:l.id,label:l.name,fromMarketplace:!0,image:l.image,description:"",welcome:null==l?void 0:l.welcome,prompt_library:null==l?void 0:l.prompt_library}),s("codegptplusbeta"),(0,u.$)(),t?(0,c.q)({eventName:"clickOver",groupBy:"aiSelector",target:l.name+"ModalButtonHome"}):(0,c.q)({eventName:"clickOver",target:l.name+"WorkspaceButtonHome"}),h(!1)},children:[(0,n.jsx)(r.J,{disableSkeleton:!0,src:l.image,alt:l.name,loading:"eager",classNames:{wrapper:"agent-avatar h-6 w-6 shrink-0 rounded-full shrink-0 bg-content3 border border-content3",img:"agent-avatar h-6 w-6 shrink-0 rounded-full shrink-0 bg-content3 border border-content3 opacity-100 block"}}),(0,n.jsx)("p",{className:"relative grid w-full overflow-hidden text-ellipsis whitespace-nowrap break-words text-left text-sm leading-tight",children:l.name})]})},g=l.filter(e=>{var t;return null==e?void 0:null===(t=e.tags)||void 0===t?void 0:t.some(e=>{var t;return null==e?void 0:null===(t=e.toLowerCase())||void 0===t?void 0:t.startsWith("llm")})});return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("section",{className:"flex w-full flex-col gap-2 px-2",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"text-xs leading-loose text-default-500",children:"Search for models"}),(0,n.jsx)(m.d,{startContent:(0,n.jsx)(x.Z,{className:"size-4 shrink-0 text-base text-default-500"}),placeholder:"Claude 3.5 Sonnet",classNames:{popoverContent:"pointer-events-auto"},popoverProps:{classNames:{content:"bg-content2 rounded-lg"}},onInputChange:e=>{let n=l.find(t=>t.name===e.toString());n&&(a("codegptplusbeta",{id:n.id,label:n.name,fromMarketplace:!!n,image:n.image,description:null==n?void 0:n.description,welcome:null==n?void 0:n.welcome,...(null==n?void 0:n.prompt_library)?{prompt_library:null==n?void 0:n.prompt_library}:{}}),s("codegptplusbeta"),(0,u.$)(),t?(0,c.q)({eventName:"clickOver",groupBy:"aiSelector",target:n.name+"ModalSearchAgentSelector"}):(0,c.q)({eventName:"clickOver",target:n.name+"SearchAgentSelector"}),h(!1))},itemHeight:64,children:g.map((e,t)=>(0,n.jsx)(p.R,{value:e.name,textValue:e.name,classNames:{base:"data-[hover=true]:bg-content4 dark:data-[hover=true]:bg-content4"},children:(0,n.jsx)(i,{agent:e})},"home-".concat(e.id,"-").concat(t)))})]}),(0,n.jsx)("div",{className:"grid grid-cols-2 gap-2 sm:grid-cols-3",children:null==g?void 0:g.slice(0,15).map((e,t)=>(0,n.jsx)(f,{agent:e,index:t},"".concat(t,"-").concat(e.id)))})]})})}var f=l(92595),g=l(3805),v=l(24090),b=l(44514),j=l(43613),N=l(82172),y=l(32773),w=l(2265),k=l(37945);function C(){var e,t,l,n,s;let{providers:r}=(0,b.k)(),{agents:i,mutate:o}=(0,k.P)(),{currentProviderModel:c,setCurrentProviderModel:u}=(0,d.o)(),{selectedProvider:m,setSelectedProvider:p}=(0,d.Y)(),x=null===(e=r.find(e=>e.link===m))||void 0===e?void 0:e.models.map(e=>({label:e,value:e})),h=(null===(l=r.find(e=>e.link===m))||void 0===l?void 0:null===(t=l.installedModels)||void 0===t?void 0:t.map(e=>({label:e,value:e})))||[],f=(null==i?void 0:i.agents)?null===(n=i.agents)||void 0===n?void 0:n.map(e=>({label:e.name,value:e.id,image:e.image,description:e.description,welcome:e.welcome})):[],g=(null==i?void 0:i.marketplace)?null==i?void 0:i.marketplace.map(e=>({label:e.name,value:e.id,image:e.image,description:e.description,welcome:e.welcome})):[],v=null===(s=r.find(e=>e.link===m))||void 0===s?void 0:s.editable,j=async e=>{var t,l,n,s,i,o,d,p,b,j;let{model:N,newProvider:y}=e;if(y){let e=localStorage.getItem("current-provider-model-storage");if(e){let t=JSON.parse(e).state.currentProviderModel[y];if(console.log({savedModel:t}),t){u(y,t),(0,a.d8)({model:t.id,provider:y,fromMarketplace:t.fromMarketplace});return}}}let w=[...(null==h?void 0:h.length)?h:[],...(null==x?void 0:x.length)?x:[],...f,...g].find(e=>e.label===N),k=null!==(s=null!==(n=null==w?void 0:w.value)&&void 0!==n?n:N)&&void 0!==s?s:null===(t=c[y])||void 0===t?void 0:t.id,C=null!==(o=null!==(i=null==w?void 0:w.label)&&void 0!==i?i:N)&&void 0!==o?o:null===(l=c[y])||void 0===l?void 0:l.label;if(!k||""===k&&v){let e=null===(p=r.find(e=>e.link===y))||void 0===p?void 0:null===(d=p.installedModels)||void 0===d?void 0:d[0];C=k=null!==(j=null!=e?e:null===(b=r.find(e=>e.link===y))||void 0===b?void 0:b.models[0])&&void 0!==j?j:""}let z=!!g.find(e=>e.label===N);(k||""===k)&&u(null!=y?y:m,{label:C,id:k,fromMarketplace:z,image:null==w?void 0:w.image,description:null==w?void 0:w.description,welcome:null==w?void 0:w.welcome,prompt_library:null==w?void 0:w.prompt_library})};return{handleChangeProvider:e=>{var t,l,n,s;let{e:i,newProvider:d}=e,c=null!=d?d:null==i?void 0:null===(t=i.target)||void 0===t?void 0:t.value;if(!c)return;let u=r.find(e=>e.name===c),m=null!==(l=null==u?void 0:u.link)&&void 0!==l?l:"";j({newProvider:m}),p(m),(0,a.rF)("CodeGPT.apiKey",null!==(s=null!==(n=null==u?void 0:u.id)&&void 0!==n?n:null==u?void 0:u.name)&&void 0!==s?s:""),(null==u?void 0:u.agents)&&setTimeout(()=>{o()},1e3)},handleChangeModel:j,handleChangeProviderAndModel:async e=>{var t,l,n;let{newProvider:s,newModel:i}=e,d=r.find(e=>e.name===s),c=null!==(t=null==d?void 0:d.link)&&void 0!==t?t:"";p(c),(0,a.rF)("CodeGPT.apiKey",null!==(n=null!==(l=null==d?void 0:d.id)&&void 0!==l?l:null==d?void 0:d.name)&&void 0!==n?n:""),(null==d?void 0:d.agents)&&setTimeout(()=>{o()},1e3),u(c,{label:i,id:i,fromMarketplace:!1})}}}var z=l(12844),S=l(968),M=l(47776),P=l(35970),A=l(24657),_=l(4670),L=l(42548),I=l(96502),O=l(14131),Z=l(52484),D=l(12087),T=l(30036),R=l(63395),F=l(20939),E=l(1346),V=l(14438);function H(){var e,t,l;let[s,r]=(0,w.useState)(""),[i,o]=(0,w.useState)(""),[c,u]=(0,w.useState)(""),[m,p]=(0,w.useState)(""),[x,h]=(0,w.useState)(""),[f,g]=(0,w.useState)(""),[v,j]=(0,w.useState)(""),[N,y]=(0,w.useState)(!1),k=(0,d.Y)(e=>e.selectedProvider),{mutate:C,isConnected:z}=(0,P.T)(),{mutate:H}=(0,b.k)(),q=M.Z[k],{getRootProps:U,getInputProps:B}=(0,E.uI)({onDrop:async e=>{let t=e[0];if("json"!==t.name.split(".").pop()){V.Am.error("File type not supported",{position:"top-center",dismissible:!0,duration:5e3});return}try{let e=await t.text();(await (0,a.vC)(e)).ok?V.Am.success("File uploaded",{position:"top-center"}):V.Am.error("Error uploading file",{position:"top-center"})}catch(e){V.Am.error("Error processing json")}},multiple:!1,useFsAccessApi:!1}),Y=(0,w.useCallback)(async()=>{await Promise.all([s?(0,a.Lb)(s,k).then(()=>r("")):null,i?(0,a.CG)(i,k).then(()=>o("")):null,c?(0,a.rM)(c,k).then(()=>u("")):null,m?(0,a.TF)(m,k).then(()=>p("")):null,x?(0,a.NV)(x,k).then(()=>h("")):null,f?(0,a.lk)(f,k).then(()=>g("")):null,v?(0,a.W0)(v,k).then(()=>j("")):null]),C(),"Ollama"===q.name&&c&&(await new Promise(e=>setTimeout(e,600)),await (0,a._f)()?(V.Am.success("Connected",{position:"top-center"}),H(),u("")):(V.Am.error("Incorrect Ollama URL",{position:"top-center"}),(0,a.rM)("",k).then(()=>u(""))))},[x,s,c,C,H,i,q.name,m,f,v]),K=async()=>{q.apikey&&await (0,a.Lb)("",k).then(()=>r("")),q.org&&await (0,a.CG)("",k).then(()=>o("")),q.customLink&&await (0,a.rM)("",k).then(()=>u("")),q.region&&await (0,a.TF)("",k).then(()=>p("")),q.access_key_id&&await (0,a.NV)("",k).then(()=>h("")),q.secret_access_key&&await (0,a.lk)("",k).then(()=>g("")),q.session_token&&(0,a.W0)("",k).then(()=>j("")),"CodeGPT Plus"===q.name&&await (0,S.j)({accessToken:"",refreshToken:"",expiresAt:""}),H(),await C()},G=(e,t)=>{let l=e.target.value;if(("x"===e.key.toLowerCase()||"KeyX"===e.code)&&(e.metaKey||e.ctrlKey)&&e.target instanceof HTMLInputElement){e.preventDefault();let n=e.target,{selectionStart:s,selectionEnd:i}=n;if(null!==s&&null!==i&&s!==i){let e=n.value.substring(s,i);(0,a.zp)(e).then(()=>{let e=l.substring(0,s)+l.substring(i);"apikey"===t&&r(e),"orgid"===t&&o(e),"customlink"===t&&u(e),"region"===t&&p(e),"accesskeyid"===t&&h(e),"secretaccesskey"===t&&g(e),"sessiontoken"===t&&j(e)})}}("v"===e.key.toLowerCase()||"KeyV"===e.code)&&(e.metaKey||e.ctrlKey)&&(e.preventDefault(),(0,a.M1)().then(n=>{let a=e.target,{selectionStart:s,selectionEnd:i}=a,d=l.substring(0,null!=s?s:l.length)+n+l.substring(null!=i?i:l.length);"apikey"===t&&r(d),"orgid"===t&&o(d),"customlink"===t&&u(d),"region"===t&&p(d),"accesskeyid"===t&&h(d),"secretaccesskey"===t&&g(d),"sessiontoken"===t&&j(d),setTimeout(()=>{a.selectionStart=s+n.length,a.selectionEnd=s+n.length},10)})),(0,A.g)(e)};return z?(0,n.jsx)("button",{className:"w-full text-center text-xs text-default-500 underline",onClick:K,children:"CodeGPT Plus"===q.name?"Disconnect from CodeGPT Plus":"Change connection settings"}):(0,n.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,n.jsxs)("label",{className:"text-sm leading-loose text-default-500",children:["Connect to ",q.name]}),q.OAuthLogin&&q.OAuthLogin(),q.apikey&&(0,n.jsx)(R.Y,{value:s,onChange:e=>r(e.target.value),onKeyDown:e=>G(e,"apikey"),"aria-label":"Password",variant:"bordered",classNames:{input:"pointer-events-none text-sm"},placeholder:null!==(e=q.apikey_placeholder)&&void 0!==e?e:"API Key",startContent:(0,n.jsx)(_.Z,{className:"size-4 shrink-0 text-base text-default-500"}),endContent:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(F.A,{isIconOnly:!0,size:"sm",variant:"light",color:"primary",onPress:()=>y(!N),children:N?(0,n.jsx)(L.Z,{className:"size-5"}):(0,n.jsx)(I.Z,{className:"size-5"})}),(0,n.jsx)(F.A,{variant:"bordered",color:"default",size:"sm",onPress:()=>(0,a.M1)().then(e=>r(e)),children:"Paste"})]}),type:N?"text":"password"}),q.org&&(0,n.jsx)(R.Y,{value:i,onChange:e=>o(e.target.value),onKeyDown:e=>G(e,"orgid"),"aria-label":"Password",variant:"bordered",classNames:{input:"pointer-events-none text-sm"},placeholder:"Organization ID (optional)",startContent:(0,n.jsx)(O.Z,{className:"size-4 shrink-0 text-base text-default-500"}),endContent:(0,n.jsx)(F.A,{variant:"bordered",color:"default",size:"sm",onPress:()=>(0,a.M1)().then(e=>o(e)),children:"Paste"}),type:"search"}),q.customLink&&(0,n.jsx)(R.Y,{value:c,onChange:e=>u(e.target.value),onKeyDown:e=>G(e,"customlink"),"aria-label":"Password",variant:"bordered",classNames:{input:"pointer-events-none text-sm"},placeholder:null!==(t=q.customLink_placeholder)&&void 0!==t?t:"Custom Link",startContent:(0,n.jsx)(Z.Z,{className:"size-4 shrink-0 text-base text-default-500"}),endContent:(0,n.jsx)(F.A,{variant:"bordered",color:"default",size:"sm",onPress:()=>(0,a.M1)().then(e=>u(e)),children:"Paste"}),type:"search"}),q.region&&(0,n.jsx)(R.Y,{value:m,onChange:e=>p(e.target.value),onKeyDown:e=>G(e,"region"),"aria-label":"Password",variant:"bordered",classNames:{input:"pointer-events-none text-sm"},placeholder:"Region",startContent:(0,n.jsx)(D.Z,{className:"size-4 shrink-0 text-base text-default-500"}),endContent:(0,n.jsx)(F.A,{variant:"bordered",color:"default",size:"sm",onPress:()=>(0,a.M1)().then(e=>p(e)),children:"Paste"}),type:"search"}),q.access_key_id&&(0,n.jsx)(R.Y,{value:x,onChange:e=>h(e.target.value),onKeyDown:e=>G(e,"accesskeyid"),"aria-label":"Password",variant:"bordered",classNames:{input:"pointer-events-none text-sm"},placeholder:"Access Key ID",startContent:(0,n.jsx)(_.Z,{className:"size-4 shrink-0 text-base text-default-500"}),endContent:(0,n.jsx)(F.A,{variant:"bordered",color:"default",size:"sm",onPress:()=>(0,a.M1)().then(e=>h(e)),children:"Paste"}),type:"search"}),q.secret_access_key&&(0,n.jsx)(R.Y,{value:f,onChange:e=>g(e.target.value),onKeyDown:e=>G(e,"secretaccesskey"),"aria-label":"Password",variant:"bordered",classNames:{input:"pointer-events-none text-sm"},placeholder:"Secret Access Key",startContent:(0,n.jsx)(_.Z,{className:"size-4 shrink-0 text-base text-default-500"}),endContent:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(F.A,{isIconOnly:!0,size:"sm",variant:"light",color:"primary",onClick:()=>y(!N),className:"cursor-pointer",children:N?(0,n.jsx)(L.Z,{className:"size-5"}):(0,n.jsx)(I.Z,{className:"size-5"})}),(0,n.jsx)(F.A,{variant:"bordered",color:"default",size:"sm",onPress:()=>(0,a.M1)().then(e=>g(e)),children:"Paste"})]}),type:N?"text":"password"}),q.session_token&&(0,n.jsx)(R.Y,{value:v,onChange:e=>j(e.target.value),onKeyDown:e=>G(e,"sessiontoken"),"aria-label":"Password",variant:"bordered",classNames:{input:"pointer-events-none text-sm"},placeholder:"Session Token",startContent:(0,n.jsx)(_.Z,{className:"size-4 shrink-0 text-base text-default-500"}),endContent:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(F.A,{isIconOnly:!0,size:"sm",variant:"light",color:"primary",onClick:()=>y(!N),className:"cursor-pointer",children:N?(0,n.jsx)(L.Z,{className:"size-5"}):(0,n.jsx)(I.Z,{className:"size-5"})}),(0,n.jsx)(F.A,{variant:"bordered",color:"default",size:"sm",onPress:()=>(0,a.M1)().then(e=>j(e)),children:"Paste"})]}),type:N?"text":"password"}),q.oAuthFile&&(0,n.jsxs)("div",{...U(),children:[(0,n.jsx)("input",{...B(),className:"hidden"}),(0,n.jsx)("div",{className:"cursor-pointer select-none",children:(0,n.jsx)(R.Y,{value:"","aria-label":"oAuthFile",variant:"bordered",className:"pointer-events-none",classNames:{input:"pointer-events-none text-sm"},placeholder:null!==(l=q.oAuthFile_placeholder)&&void 0!==l?l:"Upload JSON file ",startContent:(0,n.jsx)(T.Z,{className:"size-4 shrink-0 text-base text-default-500"}),endContent:(0,n.jsx)(F.A,{variant:"bordered",color:"default",size:"sm",className:"border",onPress:()=>{},children:"Upload"})})})]}),(0,n.jsx)("button",{type:"submit",color:"default",onClick:Y,className:"mt-4 w-fit rounded-medium border border-purple-500/10 bg-content2 px-4 py-2 text-sm text-default-700",children:"Connect"})]})}var q=l(32924),U=l(812);function B(){return(0,n.jsxs)("div",{className:"mx-auto flex max-w-xl flex-col gap-4",children:[(0,n.jsx)(Y,{}),(0,n.jsx)(K,{})]})}function Y(){let{handleChangeProviderAndModel:e}=C(),{selectedProvider:t}=(0,d.Y)(),{currentProviderModel:l}=(0,d.o)();return(0,n.jsxs)("div",{className:"",children:[(0,n.jsx)("header",{className:"border-b border-content3 py-2",children:(0,n.jsx)("p",{className:"text-xs text-default-500",children:"Recommended Models"})}),(0,n.jsx)("div",{className:"grid grid-cols-2 gap-2 overflow-x-auto py-4 sm:grid-cols-3",children:[{id:"claude-3.5-sonnet",provider:"Anthropic"},{id:"gpt-4o",provider:"OpenAI"},{id:"gemini-2.0-flash",provider:"Google AI Studio"}].map((a,i)=>{var o,d;return(0,n.jsxs)("div",{className:"relative flex h-14 w-full shrink-0 cursor-pointer select-none items-center gap-2 overflow-hidden rounded-xl bg-content2 px-3 transition-all",onClick:()=>{e({newProvider:a.provider,newModel:a.id})},children:[(0,n.jsx)(r.J,{loading:"eager",disableSkeleton:!0,src:(0,s.k)(a.id),alt:null!==(d=null===(o=l[t])||void 0===o?void 0:o.label)&&void 0!==d?d:"model",className:"size-6 rounded-full",classNames:{wrapper:"size-6 rounded-full border border-content3 bg-content3",img:"size-6 rounded-full border border-content3 bg-content3 opacity-100 block"}}),(0,n.jsx)("span",{className:"relative grid w-full overflow-hidden text-ellipsis whitespace-nowrap break-words text-left text-sm leading-tight",children:a.id})]},"model-".concat(a.id,"-").concat(i))})})]})}function K(){var e,t,l,a,i,o,c,u,x,h,f,g,v,j;let{handleChangeProvider:N,handleChangeModel:y}=C(),{providers:w,mutate:k}=(0,b.k)(),{selectedProvider:S,isProviderSelectOpen:M,setIsProviderSelectOpen:P}=(0,d.Y)(),{currentProviderModel:A}=(0,d.o)(),_=["ollama","lmstudio","codegptplusbeta"],L=w.filter(e=>!_.includes(e.link)),I=null===(e=w.find(e=>e.link===S))||void 0===e?void 0:e.models.map(e=>({label:e,value:e})),O=!!L.find(e=>e.link===S);return(0,n.jsxs)("div",{className:"mx-auto flex w-full flex-col gap-4 rounded-2xl",children:[(0,n.jsx)("header",{className:"border-b border-content3 py-2",children:(0,n.jsx)("p",{className:"text-xs text-default-500",children:"All Models"})}),(0,n.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,n.jsxs)("section",{className:"flex flex-col gap-2",children:[(0,n.jsx)("label",{className:"text-sm leading-loose text-default-500",children:"Select provider"}),(0,n.jsx)(U.g,{variant:"bordered",selectedKeys:[null===(t=w.find(e=>e.link===S))||void 0===t?void 0:t.name],fullWidth:!0,isOpen:M,onChange:e=>N({e}),onOpenChange:e=>P(e),items:L.filter(e=>e.ides.includes(q.L_)),placeholder:"Anthropic",classNames:{selectorIcon:"right-3",popoverContent:"pointer-events-auto"},renderValue:e=>e.map(e=>(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(z.T,{provider:S,className:"size-[1.7rem] rounded-full"}),(0,n.jsx)("div",{className:"relative flex flex-col overflow-hidden",children:(0,n.jsx)("span",{className:"truncate text-sm capitalize",children:e.textValue})})]},S)),children:L.map(e=>(0,n.jsx)(p.R,{textValue:e.name,classNames:{base:"data-[hover=true]:bg-content4 dark:data-[hover=true]:bg-content4"},children:(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(z.T,{provider:e.name,className:"size-[1.7rem] rounded-full"}),(0,n.jsx)("div",{className:"relative flex flex-col overflow-hidden",children:(0,n.jsx)("span",{className:"truncate text-sm capitalize",children:e.name})})]})},e.name))})]}),O&&(0,n.jsxs)("section",{className:"flex flex-col gap-2",children:[(0,n.jsx)("label",{className:"text-sm leading-loose text-default-500",children:"Select model"}),(0,n.jsx)(m.d,{variant:"bordered",fullWidth:!0,allowsCustomValue:!0,placeholder:"claude-3.5-sonnet",onInputChange:e=>{y({model:e.toString()})},onOpenChange:async()=>{k()},disabledKeys:["loader","disabled"],..._.includes(S)?{}:{defaultSelectedKey:null===(l=A[S])||void 0===l?void 0:l.label,defaultInputValue:null===(a=A[S])||void 0===a?void 0:a.label,inputValue:null===(i=A[S])||void 0===i?void 0:i.label},startContent:!(!(null===(o=A[S])||void 0===o?void 0:o.label)||_.includes(S))&&(0,n.jsx)("div",{className:"size-[1.7rem] shrink-0 rounded-full",children:(null===(u=A[S])||void 0===u?void 0:null===(c=u.image)||void 0===c?void 0:c.length)!==0?(0,n.jsx)(r.J,{loading:"eager",disableSkeleton:!0,src:A[S]&&(null===(x=A[S])||void 0===x?void 0:x.image)?null===(h=A[S])||void 0===h?void 0:h.image:(0,s.k)(null===(f=A[S])||void 0===f?void 0:f.label),alt:null!==(v=null===(g=A[S])||void 0===g?void 0:g.label)&&void 0!==v?v:"model",className:"size-[1.7rem] shrink-0 rounded-full",classNames:{wrapper:"size-[1.7rem] shrink-0 rounded-full border border-content3 bg-content3",img:"size-[1.7rem] shrink-0 rounded-full border border-content3 bg-content3 opacity-100 block"}}):(0,n.jsx)(z.T,{provider:S,className:"size-[1.7rem] shrink-0 rounded-full"})}),inputProps:{classNames:{base:"overflow-hidden relative",input:"mb-[2px] truncate",label:"bottom-[37%]",inputWrapper:["border-content3","focus:border-default-500","focus-within:border-default-500","dark:focus:border-default-500","dark:focus-within:border-default-500","border-1 shadow-none","data-[open=true]:border-default-500"]}},popoverProps:{classNames:{content:"bg-content3 pointer-events-auto"}},scrollShadowProps:{offset:8},shouldCloseOnBlur:!0,allowsEmptyCollection:!0,children:null!==(j=null==I?void 0:I.map(e=>(0,n.jsx)(p.R,{value:e.value,textValue:e.label,selectedIcon:!1,endContent:!1,classNames:{base:"data-[hover=true]:bg-content4 dark:data-[hover=true]:bg-content4"},children:(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(z.T,{provider:S,className:"size-[1.7rem] rounded-full"}),(0,n.jsx)("div",{className:"relative flex flex-col overflow-hidden",children:(0,n.jsx)("span",{className:"truncate text-sm capitalize",children:e.label})})]})},e.value)))&&void 0!==j?j:[]})]}),!_.includes(S)&&"githubcopilot"!==S&&(0,n.jsx)("section",{className:"mt-4",children:(0,n.jsx)(H,{})})]})]})}var G=l(74411),J=l(70598),W=l(51817),$=l(18930),Q=l(15001),X=l(15051);let ee=[{label:"llama3.2-vision:latest",value:"llama3.2-vision:latest"},{label:"qwen2.5-coder:7b",value:"qwen2.5-coder:7b"},{label:"qwen2.5-coder:0.5b",value:"qwen2.5-coder:0.5b"},{label:"mistral:latest",value:"mistral:latest"}];function et(){return(0,n.jsxs)("div",{className:"flex w-full flex-col gap-4",children:[(0,n.jsx)(en,{}),(0,n.jsx)(el,{})]})}function el(){var e,t,l,o,c,u,x,h,g,v,j,N,y,k,S,M,P;let{handleChangeModel:A,handleChangeProvider:_}=C(),{providers:L,mutate:I}=(0,b.k)(),{selectedProvider:O,isProviderSelectOpen:Z,setIsProviderSelectOpen:D}=(0,d.Y)(),{currentProviderModel:T,setCurrentProviderModel:R}=(0,d.o)(),[F,E]=(0,w.useState)(!1),[B,Y]=(0,w.useState)(!1),[K,ee]=(0,w.useState)(0),[et,el]=(0,w.useState)(""),en=(0,w.useRef)(null),ea=["ollama","llmstudio"],es=null===(e=L.find(e=>e.link===O&&ea.includes(O.toLowerCase())))||void 0===e?void 0:e.models.map(e=>({label:e,value:e})),er=(null===(l=L.find(e=>e.link===O))||void 0===l?void 0:null===(t=l.installedModels)||void 0===t?void 0:t.map(e=>({label:e,value:e})))||[],ei=(null==es?void 0:es.filter(e=>!er.find(t=>t.value===e.value)))||[],eo=er.some(e=>{var t;return e.value===(null===(t=T[O])||void 0===t?void 0:t.id)}),ed=()=>{E(!1),ee(0),el(""),I()},ec=e=>{let t=e.currentTarget.value;("v"===e.key.toLowerCase()||"KeyV"===e.code)&&(e.metaKey||e.ctrlKey)&&(e.preventDefault(),(0,a.M1)().then(l=>{let{selectionStart:n,selectionEnd:a}=e.target,s=t.substring(0,null!=n?n:t.length)+l+t.substring(null!=a?a:t.length);R(O,{label:s,id:s,fromMarketplace:!1,image:"",description:"",welcome:""})}))},eu=async e=>{var t;if(E(!0),el(e),!await (0,a._f)()){V.Am.error("Ollama is not running,",{duration:3e3,action:(0,n.jsx)(f.z,{color:"default",variant:"outline",size:"sm",className:"h-auto p-1 underline",onClick:()=>{(0,a.Yo)("https://docs.codegpt.co/docs/tutorial-ai-providers/ollama")},children:"Learn More"})}),ed();return}en.current=new AbortController;let l=null===(t=(await fetch("http://localhost:54112/1/api/ollama/pull",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({model:e}),signal:en.current.signal})).body)||void 0===t?void 0:t.getReader();if(!l)throw Error("No reader available");let s=new TextDecoder;(async()=>{for(V.Am.success("Downloading model",{duration:3e3});;){let{done:e,value:t}=await l.read();if(e){ed();break}let n=s.decode(t);try{let e=JSON.parse(n);(null==e?void 0:e.status)==="success"&&(V.Am.success("Model installed successfully",{duration:3e3}),ed());let{completed:t,total:l}=e;if(t&&l){let e=Math.floor(parseInt(t)/parseInt(l)*100);e!==K&&ee(e)}}catch(e){}}})()},em=async e=>{Y(!0),(await fetch("http://localhost:54112/1/api/ollama/delete",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({model:e})})).ok?(V.Am.success("Model deleted"),I()):V.Am.error("Error deleting model"),Y(!1)};return(0,n.jsxs)("div",{className:"mx-auto flex w-full flex-col gap-4",children:[(0,n.jsx)("header",{className:"border-b border-content3 py-2",children:(0,n.jsx)("p",{className:"text-xs text-default-500",children:"All Models"})}),(0,n.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,n.jsxs)("section",{className:"flex flex-col gap-2",children:[(0,n.jsx)("label",{className:"text-sm leading-loose text-default-500",children:"Select local provider"}),(0,n.jsx)(U.g,{variant:"bordered",selectedKeys:[null===(o=L.find(e=>e.link===O))||void 0===o?void 0:o.name],fullWidth:!0,isOpen:Z,onChange:e=>_({e}),onOpenChange:e=>D(e),items:L.filter(e=>e.ides.includes(q.L_)),placeholder:"Ollama",classNames:{selectorIcon:"right-3",popoverContent:"pointer-events-auto"},renderValue:e=>e.map(e=>(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(z.T,{provider:O,className:"size-[1.7rem] rounded-full"}),(0,n.jsx)("div",{className:"relative flex flex-col overflow-hidden",children:(0,n.jsx)("span",{className:"truncate text-sm capitalize",children:e.textValue})})]},O)),"aria-label":"Select local provider",children:L.filter(e=>["ollama","lmstudio"].includes(e.link)).map(e=>(0,n.jsx)(p.R,{textValue:e.name,classNames:{base:"data-[hover=true]:bg-content4 dark:data-[hover=true]:bg-content4"},children:(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(z.T,{provider:e.name,className:"size-[1.7rem] rounded-full"}),(0,n.jsx)("div",{className:"relative flex flex-col overflow-hidden",children:(0,n.jsx)("span",{className:"truncate text-sm capitalize",children:e.name})})]})},e.name))})]}),"ollama"===O&&(0,n.jsxs)("section",{className:"flex flex-col gap-2",children:[(0,n.jsx)("label",{className:"text-sm leading-loose text-default-500",children:"Select model"}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(m.d,{variant:"bordered",fullWidth:!0,allowsCustomValue:!0,onInputChange:e=>{A({model:e.toString()})},onOpenChange:async()=>{I(),"ollama"===O&&await (0,a._f)()},onKeyDown:e=>ec(e),disabledKeys:["loader","disabled"],...ea.includes(O)?{defaultSelectedKey:null===(c=T[O])||void 0===c?void 0:c.label,defaultInputValue:null===(u=T[O])||void 0===u?void 0:u.label,inputValue:null===(x=T[O])||void 0===x?void 0:x.label}:{},startContent:!(!(null===(h=T[O])||void 0===h?void 0:h.label)||!ea.includes(O))&&(0,n.jsx)("div",{className:"size-[1.7rem] shrink-0 rounded-full",children:(null===(v=T[O])||void 0===v?void 0:null===(g=v.image)||void 0===g?void 0:g.length)!==0?(0,n.jsx)(r.J,{loading:"eager",disableSkeleton:!0,src:T[O]&&(null===(j=T[O])||void 0===j?void 0:j.image)?null===(N=T[O])||void 0===N?void 0:N.image:(0,s.k)(null===(y=T[O])||void 0===y?void 0:y.label),alt:null!==(M=null===(k=T[O])||void 0===k?void 0:k.label)&&void 0!==M?M:"model",className:"size-[1.7rem] shrink-0 rounded-full",classNames:{wrapper:"size-[1.7rem] shrink-0 rounded-full border border-content3 bg-content3",img:"size-[1.7rem] shrink-0 rounded-full border border-content3 bg-content3 opacity-100 block"}}):(0,n.jsx)(z.T,{provider:O,className:"size-[1.7rem] shrink-0 rounded-full"})}),inputProps:{classNames:{base:"overflow-hidden relative",input:"mb-[2px] truncate",label:"bottom-[37%]",inputWrapper:["border-content3","focus:border-default-500","focus-within:border-default-500","dark:focus:border-default-500","dark:focus-within:border-default-500","border-1 shadow-none","data-[open=true]:border-default-500"]}},popoverProps:{classNames:{content:"bg-content3 pointer-events-auto"}},scrollShadowProps:{offset:8},shouldCloseOnBlur:!0,allowsEmptyCollection:!0,children:null!==(P=null==ei?void 0:ei.map(e=>(0,n.jsx)(p.R,{value:e.value,textValue:e.label,selectedIcon:!1,endContent:!1,classNames:{base:"data-[hover=true]:bg-content4 dark:data-[hover=true]:bg-content4"},children:(0,n.jsx)(i,{agent:e})},e.value)))&&void 0!==P?P:[]}),eo&&(0,n.jsxs)(G.J2,{children:[(0,n.jsx)(G.xo,{asChild:!0,children:(0,n.jsx)(f.z,{className:"border border-content3 bg-transparent text-default-500 hover:text-danger-500",disabled:B,variant:"destructive",size:"icon",children:B?(0,n.jsx)(W.Z,{className:"size-5 animate-spin p-0.5"}):(0,n.jsx)($.Z,{className:"size-5 p-0.5"})})}),(0,n.jsx)(G.yk,{className:"w-fit select-none",children:(0,n.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,n.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,n.jsx)("p",{className:"text-sm",children:"Are you sure?"}),(0,n.jsx)("p",{className:"text-xs text-default-500",children:"This action cannot be undone."})]}),(0,n.jsx)(f.z,{className:"mx-auto w-fit bg-danger-500 text-white",disabled:B,onClick:()=>{var e;return em(null===(e=T[O])||void 0===e?void 0:e.id)},variant:"destructive",size:"sm",children:"Delete"})]})})]})]})]}),(0,n.jsxs)("section",{className:"flex flex-col items-center justify-center gap-2",children:[F&&(0,n.jsxs)("section",{className:"flex flex-col items-center justify-center gap-1",children:[(0,n.jsx)(J.W,{label:"Downloading ".concat(et),"aria-label":"Downloading...",size:"sm",autoFocus:!0,value:K,color:"primary",className:"my-auto w-full",classNames:{label:"text-xs text-default-500"}}),(0,n.jsxs)("span",{className:"text-xs text-default-500",children:[K,"%"]})]}),(null===(S=T[O])||void 0===S?void 0:S.id)&&!eo&&"ollama"===O&&(0,n.jsx)(f.z,{className:"h-10 w-full rounded-medium",disabled:F,onClick:()=>{var e;return eu(null===(e=T[O])||void 0===e?void 0:e.id)},variant:"default",children:(0,n.jsxs)("div",{className:"mx-auto flex items-center justify-evenly gap-2",children:[F?(0,n.jsx)(Q.Z,{className:"size-4 animate-spin"}):(0,n.jsx)(X.Z,{className:"size-4 rounded-full"}),"Download"]})}),F&&(0,n.jsx)(f.z,{className:"h-10 w-full rounded-medium",variant:"outline",onClick:()=>{var e;null===(e=en.current)||void 0===e||e.abort(),ed()},children:"Cancel"})]}),"ollama"===O&&(0,n.jsx)("section",{children:(0,n.jsx)(H,{})})]})]})}function en(){var e,t;let{providers:l,mutate:a}=(0,b.k)(),{selectedProvider:i,setIsPopoverOpen:o}=(0,d.Y)(),{currentProviderModel:c}=(0,d.o)(),{handleChangeProviderAndModel:u}=C();(0,w.useEffect)(()=>{a()},[a]);let m=(null===(t=l.find(e=>"ollama"===e.link))||void 0===t?void 0:null===(e=t.installedModels)||void 0===e?void 0:e.map(e=>({label:e,value:e})))||[],p=m.length>0;return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("div",{className:"w-full",children:(0,n.jsxs)("div",{className:"",children:[(0,n.jsx)("header",{className:"border-b border-content3 py-2",children:(0,n.jsxs)("p",{className:"text-xs text-default-500",children:[p?"Installed Models":"Recommended Models"," (Ollama)"]})}),(0,n.jsx)("div",{className:"grid max-h-36 grid-cols-1 gap-2 overflow-x-auto overflow-y-auto p-2",children:(p?m:ee).map((e,t)=>{var l,a;return(0,n.jsxs)("div",{className:"relative flex h-12 w-full shrink-0 cursor-pointer select-none items-center gap-2 overflow-hidden rounded-xl bg-content2 px-3 transition-all",onClick:()=>{u({newProvider:"Ollama",newModel:e.value}),p&&o(!1)},children:[(0,n.jsx)(r.J,{loading:"eager",disableSkeleton:!0,src:(0,s.k)(e.label),alt:null!==(a=null===(l=c[i])||void 0===l?void 0:l.label)&&void 0!==a?a:"model",className:"size-6 rounded-full",classNames:{wrapper:"size-6 rounded-full border border-content3 bg-content3",img:"size-6 rounded-full border border-content3 bg-content3 opacity-100 block"}}),(0,n.jsx)("span",{className:"relative grid w-full overflow-hidden text-ellipsis whitespace-nowrap break-words text-left text-sm leading-tight",children:e.label})]},"model-".concat(e.value,"-").concat(t))})})]})})})}let ea=e=>{var t;let{children:l}=e,{userData:a}=(0,v.v)(),{setIsPopoverOpen:s}=(0,d.Y)(),{loginFromEventSource:r}=(0,j.R)(),i=!(null==a?void 0:a.loggedIn),o=!i&&(null==a?void 0:null===(t=a.plan)||void 0===t?void 0:t.toLowerCase().includes("free")),u=!(null==a?void 0:a.loggedIn)&&(0,n.jsxs)(n.Fragment,{children:["Sign up and unlock ",(0,n.jsx)("span",{className:"font-semibold",children:"8 daily interactions"})," for free"]}),m=o&&(0,n.jsxs)(n.Fragment,{children:["Suscribe to ",(0,n.jsx)("span",{className:"font-semibold",children:"Plus Proffesional"})," plan to get more interactions"]});return(0,n.jsxs)("div",{className:"mx-auto flex w-full max-w-xl flex-col gap-4",children:[o||i&&(0,n.jsx)("div",{className:"rounded-lg bg-content2 text-sm",children:(0,n.jsxs)("div",{className:"flex items-center justify-between gap-4 p-4",children:[(0,n.jsx)("h2",{className:"w-full",children:m||u}),(0,n.jsx)(f.z,{variant:"outline",size:"sm",className:"w-auto rounded-full border-foreground bg-transparent  hover:bg-foreground/20",onClick:()=>{r({type:o?"signup":"login",callback:()=>{s(!1)}}),(0,c.q)({eventName:"ads",groupBy:"aiSelector",target:"ProviderModelModalAdsButton"+(o?"Upgrade":"SignUp")})},children:o?"Upgrade":"Sign Up for free"})]})}),(0,n.jsx)("div",{children:l})]})};function es(){let{isPopoverOpen:e,setIsPopoverOpen:t}=(0,d.Y)(),{handleChangeProvider:l}=C(),{mutate:s}=(0,b.k)(),[r,i]=(0,w.useState)("codegpt");return(0,n.jsx)(g.Vq,{open:e,onOpenChange:e=>{e||t(!1)},children:(0,n.jsxs)(g.cZ,{className:"rounded-xl pb-6 pt-0 dark:bg-content1",children:[(0,n.jsx)(g.$N,{}),(0,n.jsxs)(N.n,{"aria-label":"Options",selectedKey:r,onSelectionChange:e=>{var t;"codegpt"===e&&l({newProvider:"CodeGPT Plus"}),i(e);let n=e.toString();"local"===e&&(0,a._f)().then(()=>{s()}),(0,c.q)({eventName:"clickOver",groupBy:"aiSelector",target:"ProviderModelModal".concat(null===(t=n.at(0))||void 0===t?void 0:t.toUpperCase()).concat(n.slice(1),"Tab")})},variant:"underlined",color:"default",className:"w-full pt-6",classNames:{panel:"w-full",base:"w-full",tabList:"gap-8",tab:"p-0 [&_span]:!w-full"},children:[(0,n.jsx)(y.r,{title:"CodeGPT Cloud",children:(0,n.jsx)(ea,{children:(0,n.jsx)("div",{className:"flex flex-col gap-2",children:(0,n.jsx)(h,{})})})},"codegpt"),(0,n.jsx)(y.r,{title:"Local LLMs",children:(0,n.jsx)(ea,{children:(0,n.jsx)(et,{})})},"local"),(0,n.jsx)(y.r,{title:"LLMs Cloud model",children:(0,n.jsx)(ea,{children:(0,n.jsx)(B,{})})},"cloud")]})]})})}},60649:function(e,t,l){"use strict";l.d(t,{RO:function(){return d},lU:function(){return c}});var n=l(57437),a=l(31745),s=l(21393),r=l(20939),i=l(98617),o=l(38220);l(25922);let d=()=>(0,n.jsx)(a.z,{variant:"flat",size:"sm",color:"primary",startContent:(0,n.jsx)(i.Z,{className:"mb-px aspect-square size-3 shrink-0 text-primary-500"}),classNames:{content:"text-primary-500 select-none"},children:"Plus"}),c=()=>(0,n.jsx)(s.e,{content:"Experimental feature",placement:"bottom",color:"success",children:(0,n.jsx)(r.A,{variant:"flat",size:"sm",isIconOnly:!0,color:"success",className:"cursor-auto rounded-full border border-success/20",children:(0,n.jsx)(o.Z,{className:"mb-px aspect-square size-3 shrink-0 text-green-600"})})})},3805:function(e,t,l){"use strict";l.d(t,{$N:function(){return h},Be:function(){return f},Vq:function(){return o},cN:function(){return x},cZ:function(){return m},fK:function(){return p},hg:function(){return d}});var n=l(57437),a=l(94508),s=l(49027),r=l(20653),i=l(2265);let o=s.fC,d=s.xz,c=s.h_;s.x8;let u=i.forwardRef((e,t)=>{let{className:l,...r}=e;return(0,n.jsx)(s.aV,{ref:t,className:(0,a.cn)("DialogOverlay data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0  fixed inset-0 z-50 bg-black/80",l),...r})});u.displayName=s.aV.displayName;let m=i.forwardRef((e,t)=>{let{className:l,children:i,crossClassName:o,onClickCross:d,hideCloseButton:m,...p}=e;return(0,n.jsx)(c,{children:(0,n.jsx)(u,{children:(0,n.jsxs)(s.VY,{ref:t,className:(0,a.cn)("DialogContent data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] fixed left-[50%] top-[10%] z-50 flex w-[95%] max-w-lg translate-x-[-50%] flex-col gap-4 rounded-xl border border-content2 bg-content1 p-6 shadow-lg duration-200 dark:bg-content2",l),...p,children:[i,!m&&(0,n.jsxs)(s.x8,{className:(0,a.cn)("data-[state=open]:bg-accent absolute right-4 top-4 rounded-md border bg-content1 opacity-70 transition-opacity hover:opacity-100  focus:outline-none disabled:pointer-events-none data-[state=open]:text-muted-foreground  dark:bg-content2",o),onClick:d,children:[(0,n.jsx)(r.Pxu,{className:"size-6 rounded-lg p-1"}),(0,n.jsx)("span",{className:"sr-only",children:"Close"})]})]})})})});m.displayName=s.VY.displayName;let p=e=>{let{className:t,...l}=e;return(0,n.jsx)("div",{className:(0,a.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...l})};p.displayName="DialogHeader";let x=e=>{let{className:t,...l}=e;return(0,n.jsx)("div",{className:(0,a.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...l})};x.displayName="DialogFooter";let h=i.forwardRef((e,t)=>{let{className:l,...r}=e;return(0,n.jsx)(s.Dx,{ref:t,className:(0,a.cn)("text-lg font-normal leading-none text-default-700",l),...r})});h.displayName=s.Dx.displayName;let f=i.forwardRef((e,t)=>{let{className:l,...r}=e;return(0,n.jsx)(s.dk,{ref:t,className:(0,a.cn)("text-sm text-default-500",l),...r})});f.displayName=s.dk.displayName},74411:function(e,t,l){"use strict";l.d(t,{J2:function(){return i},xo:function(){return o},yk:function(){return d}});var n=l(57437),a=l(94508),s=l(27312),r=l(2265);let i=s.fC,o=s.xz;s.ee;let d=r.forwardRef((e,t)=>{let{className:l,align:r="center",sideOffset:i=4,...o}=e;return(0,n.jsx)(s.h_,{children:(0,n.jsx)(s.VY,{ref:t,align:r,sideOffset:i,className:(0,a.cn)("text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-72 rounded-xl border border-content3 bg-content1 p-4 shadow-lg outline-none dark:bg-content2",l),...o})})});d.displayName=s.VY.displayName},37945:function(e,t,l){"use strict";l.d(t,{P:function(){return o}});var n=l(48652),a=l(83464),s=l(99376),r=l(87904);let i=async e=>{let{provider:t,port:l}=e;if(!t.toLowerCase().includes("codegpt"))return{agents:[],marketplace:[]};try{let e=await a.Z.get("http://localhost:54112/".concat(l,"/api/").concat(t));return e.data?{...e.data}:{agents:[],marketplace:[]}}catch(e){return console.error("error fetching agents",e),{agents:[],marketplace:[]}}};function o(){let e=(0,n.Y)(e=>e.selectedProvider),t=(0,s.usePathname)().split("/")[1],{data:l,mutate:a,isLoading:o,isValidating:d}=(0,r.ZP)("/api/agents/",()=>i({provider:e,port:t}),{shouldRetryOnError:!0,errorRetryCount:0,revalidateOnFocus:!0,refreshInterval:0});return{agents:l,isLoading:o||d,mutate:a}}},35970:function(e,t,l){"use strict";l.d(t,{T:function(){return i}});var n=l(48652),a=l(99376),s=l(87904);let r=async e=>{let{provider:t,port:l}=e;return(await fetch("http://localhost:54112/".concat(l,"/api/").concat(t),{method:"HEAD"})).ok};function i(){let e=(0,n.Y)(e=>e.selectedProvider),t=(0,a.usePathname)().split("/")[1],{data:l,mutate:i}=(0,s.ZP)("/api/agents/".concat(e),()=>r({provider:e,port:t}),{shouldRetryOnError:!1,errorRetryCount:0,revalidateOnFocus:!0,refreshInterval:6e4});return{isConnected:l,mutate:i}}},24090:function(e,t,l){"use strict";l.d(t,{Z:function(){return i},v:function(){return u}});var n=l(8343),a=l(99376),s=l(2265),r=l(87904);let i=null,o=null,d=!0,c=async e=>{let{port:t}=e;return fetch("http://localhost:54112/".concat(t,"/api/codegptplusbeta/me")).then(async e=>{var t;let l=await e.json();return i={...l,loggedIn:!!(null==l?void 0:null===(t=l.org)||void 0===t?void 0:t.name)}})};function u(){let e=(0,a.usePathname)().split("/")[1],{data:t,mutate:l}=(0,r.ZP)("userData",()=>c({port:e}),{shouldRetryOnError:!1,errorRetryCount:0,revalidateOnFocus:!0,refreshInterval:0,fallbackData:{dailyUsage:-1,dailyMaxUsage:-1,user:{username:"",fullName:"",avatarUrl:"",email:"",status:""},org:{name:"",image:""},plan:"",loggedIn:!0}}),{handleIndexCodebase:i}=(0,n.v)();return(0,s.useEffect)(()=>{(!1===o||d)&&(null==t?void 0:t.loggedIn)&&(d=!1,i()),o=null==t?void 0:t.loggedIn},[i,null==t?void 0:t.loggedIn]),{userData:t,mutate:l}}},29962:function(e,t,l){"use strict";l.d(t,{J:function(){return s},W:function(){return a}});var n=l(59625);let a=[{id:"manual",title:"Select code",description:"Manually choose the code and files"},{id:"deepinsights",title:"Deep insights",description:"We enrich responses with code knowledge graphs"}],s=(0,n.Ue)(e=>({files:[],setFiles:t=>{e(()=>({files:t}))},selectedContextLevel:{id:a[0].id,display:a[0].title},setSelectedContextLevel:t=>{e(()=>({selectedContextLevel:{id:t.id,display:t.title}}))}}))},20877:function(e,t,l){"use strict";l.d(t,{M:function(){return n}});let n=(0,l(59625).Ue)(e=>({currentProgress:0,setCurrentProgress:t=>e({currentProgress:t}),currentProgressMessage:"",setCurrentProgressMessage:t=>e({currentProgressMessage:t}),isIndexing:!1,setIsIndexing:t=>e({isIndexing:t})}))},27127:function(e,t,l){"use strict";l.d(t,{c:function(){return n}});let n=(0,l(59625).Ue)(e=>({isOpen:!1,setOpen:t=>e(()=>({isOpen:t})),message:{title:"",description:"",subtitle:"",actions:null,provider:"",type:"alert"},setErrorMessage:t=>{let{title:l,description:n,subtitle:a,actions:s,type:r,provider:i}=t;return e(()=>({message:{title:l||"System Message",description:n||"",subtitle:a||"",actions:s||null,provider:i||"",type:r||"alert"}}))}}))},45998:function(e,t,l){"use strict";l.d(t,{i:function(){return s}});var n=l(59625),a=l(89134);let s=(0,n.Ue)()((0,a.tJ)(e=>({themeFontSize:13,setThemeFontSize:t=>e({themeFontSize:t})}),{name:"theme-font-settings-storage"}))},24657:function(e,t,l){"use strict";l.d(t,{g:function(){return a}});var n=l(89101);let a=e=>{if(("c"===e.key.toLowerCase()||"KeyC"===e.code)&&(e.metaKey||e.ctrlKey)){e.preventDefault();let t=window.getSelection();t&&t.toString().length>0&&(0,n.zp)(t.toString())}if(("a"===e.key.toLowerCase()||"KeyA"===e.code)&&(e.metaKey||e.ctrlKey)){e.preventDefault();let{target:t}=e;if(t){if(t instanceof HTMLInputElement||t instanceof HTMLTextAreaElement)t.select();else{let e=document.createRange();e.selectNodeContents(t);let l=window.getSelection();l&&(l.removeAllRanges(),l.addRange(e))}}}}},8343:function(e,t,l){"use strict";l.d(t,{v:function(){return r}});var n=l(20877),a=l(99376),s=l(14438);let r=()=>{let{setCurrentProgress:e,setCurrentProgressMessage:t,setIsIndexing:l}=(0,n.M)(),r=(0,a.usePathname)().split("/")[1];return{handleIndexCodebase:async()=>{l(!0),e(0),t("Reading files");try{var n;let l=await fetch("http://localhost:54112/".concat(r,"/api/index-codebase"));if(!l.ok){let e=await l.text();console.error(e);return}let a=null===(n=l.body)||void 0===n?void 0:n.getReader();if(!a)throw Error("No reader available");let s=new TextDecoder;for(;;)try{let{done:l,value:n}=await a.read();if(l){e(100),await new Promise(e=>setTimeout(e,1e3)),t("");break}for(let l of s.decode(n).split("\n\n").filter(Boolean)){let n=JSON.parse(l),a=n.progress;t(n.message),e(a)}}catch(e){console.error("There was an error indexing your codebase. Please try again");break}}catch(e){s.Am.error("There was an error indexing your codebase. Please try again")}finally{l(!1)}}}}},43613:function(e,t,l){"use strict";l.d(t,{R:function(){return c}});var n=l(89101),a=l(968),s=l(24090),r=l(57609),i=l(70869),o=l(32924);let d=async()=>{let e=await fetch("http://localhost:54112/api/distinct_id");return(await e.json()).distinct_id},c=()=>{let{mutate:e}=(0,s.v)();return{loginFromEventSource:async t=>{let{next:l,type:s,provider:c,callback:u}=t,m=crypto.randomUUID(),p=new URLSearchParams({source:o.L_,distinct_id:await d(),connection_id:m,...c?{provider:c}:{},...l?{next:l}:{}});c&&(s="login"),await (0,n.Yo)("".concat(r.Ft,"/").concat(s,"?").concat(p.toString()));let x=new EventSource("".concat(i.xf,"/extensions/connection/").concat(m));x.onmessage=t=>{let{refresh_token:l,access_token:n,expires_at:s}=JSON.parse(t.data);(0,a.j)({accessToken:n,refreshToken:l,expiresAt:s}).then(()=>{e()}).finally(()=>{x.close(),null==u||u()})}}}}},99167:function(e,t,l){"use strict";l.d(t,{e_:function(){return n}}),l(89101);let n=e=>e.map(e=>({role:null==e?void 0:e.role,content:(null==e?void 0:e.content)||""}))},66409:function(){},78542:function(){}},function(e){e.O(0,[324,310,115,775,468,615,719,631,971,117,744],function(){return e(e.s=69671)}),_N_E=e.O()}]);